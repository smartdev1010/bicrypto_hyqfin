function loadChartNotification(o,t,e,a=1,r=null){var i=chartList[o].option;i.series[0].markLine.data.push({name:"notification-"+r,yAxis:e,symbol:"circle",symbolSize:[0,0],lineStyle:{color:"#"+(null==a?e<i.series[0].markLine.data[0].yAxis?"FF0000":"3ae229":0==a?"3ae229":"FF0000"),width:1,type:"solid"}}),chartList[o].graph.setOption(chartList[o].option)}function addChartNotification(o,t,e,a,r="CCCAGG"){$.each($('.dash-pan-cry[symbol="'+t+'"]'),(function(){loadChartNotification($(this).attr("id"),t,e,null)})),$.post($("body").attr("hrefapp")+"/app/modules/dashboard/src/actions/createNotification.php",{symb:t,currency:a,market:r,value:e}).done((function(o){let t=jQuery.parseJSON(o);1==t.error&&showAlert("Oops",t.msg,"error")})).fail((function(){showAlert("Ooops","Fail to create chart indicator","error")}))}function createNewNotification(o,t,e=null,a="CCCAGG"){$("body").addClass("nblr"),$.post($("body").attr("hrefapp")+"/app/modules/dashboard/src/actions/createAlert.php",{symb:o,currency:t,click:e,market:a}).done((function(o){try{let t=jQuery.parseJSON(o);1==t.error&&showAlert("Oops",t.msg,"error"),$("body").removeClass("nblr")}catch(t){$.when($("body").prepend(o)).then((function(){initNewNotificationPopupControllers()}))}})).fail((function(){showAlert("Ooops","Fail to open alert popup","error")}))}function initNewNotificationPopupControllers(){$("form.createalert-popup-frm").off("submit").submit((function(o){let t=$(this).serializeArray(),e=!0;for(val of t){if(!e)return!1;if("symbol_alert"!=val.name&&"market"!=val.name&&"currency"!=val.name&&val.value.length>0)try{if(!/^-?\d+(?:[.,]\d*?)?$/.test(val.value))throw"Oops";parseFloat(val.value)}catch(o){$('[name="price_bellow_alert"]').parent().css("border","1px solid #da4830"),$('[name="price_above_alert"]').parent().css("border","1px solid #da4830"),e=!1}}if(e)for(val of $(this).serializeArray())"symbol_alert"!=val.name&&"market"!=val.name&&"currency"!=val.name&&val.value.length>0&&addChartNotification(null,t[2].value,val.value,t[4].value,t[3].value);return closeAddNotificationPopup(),o.preventDefault(),!1})),$("form.createalert-popup-frm").find('input[type="button"]').off("click").click((function(){closeAddNotificationPopup()})),$(".createalert-popup").find("header").find("div").off("click").click((function(){closeAddNotificationPopup()})),$(".list-notification-coin").find("li").find(".fa-trash").off("click").click((function(){closeAddNotificationPopup(),$.post($("body").attr("hrefapp")+"/app/modules/dashboard/src/actions/deleteNotification.php",{notifid:$(this).parent().attr("notification-id")}).done((function(o){let t=jQuery.parseJSON(o);1==t.error&&showAlert("Oops",t.msg,"error")})).fail((function(){showAlert("Oops","Fail to access delete controller notification","error")}))}))}function closeAddNotificationPopup(){$(".createalert-popup").remove(),$("body").removeClass("nblr")}
