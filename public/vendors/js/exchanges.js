!function e(t,i,r){function s(a,o){if(!i[a]){if(!t[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(n)return n(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[a]={exports:{}};t[a][0].call(d.exports,(function(e){return s(t[a][1][e]||e)}),d,d.exports,e,t,i,r)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e,t,i){window.ccxt=e("./ccxt.pro")},{"./ccxt.pro":2}],2:[function(e,t,i){"use strict";const r=e("ccxt"),{deepExtend:s}=r,n=e("./js/base/Exchange"),{unique:a}=e("ccxt/js/base/functions"),o={binance:e("./js/binance.js"),coinbasepro:e("./js/coinbasepro.js"),kucoin:e("./js/kucoin.js")};for(const e in o){const t=r[e];Object.getPrototypeOf(t)===r.Exchange&&(Object.setPrototypeOf(t,n),Object.setPrototypeOf(t.prototype,n.prototype))}t.exports=s(r,{version:"1.1.92",Exchange:n,exchanges:a(r.exchanges.concat(Object.keys(o))).sort()},o)},{"./js/base/Exchange":7,"./js/binance.js":14,"./js/coinbasepro.js":29,"./js/kucoin.js":45,ccxt:123,"ccxt/js/base/functions":130}],5:[function(e,t,i){"use strict";class r extends Array{constructor(e){super(),Object.defineProperty(this,"maxSize",{__proto__:null,value:e,writable:!0})}clear(){this.length=0}}class s extends r{constructor(e){super(e),Object.defineProperty(this,"newUpdatesBySymbol",{__proto__:null,value:{},writable:!0}),Object.defineProperty(this,"clearUpdatesBySymbol",{__proto__:null,value:{},writable:!0}),Object.defineProperty(this,"allNewUpdates",{__proto__:null,value:0,writable:!0}),Object.defineProperty(this,"clearAllUpdates",{__proto__:null,value:!1,writable:!0})}getLimit(e,t){let i;return void 0===e?(i=this.allNewUpdates,this.clearAllUpdates=!0):(i=this.newUpdatesBySymbol[e],this.clearUpdatesBySymbol[e]=!0),void 0===i?t:void 0!==t?Math.min(i,t):i}append(e){this.maxSize&&this.length===this.maxSize&&this.shift(),this.push(e),this.clearUpdatesBySymbol[e.symbol]&&(this.clearUpdatesBySymbol[e.symbol]=!1,this.newUpdatesBySymbol[e.symbol]=0),this.clearAllUpdates&&(this.clearAllUpdates=!1,this.allNewUpdates=0),this.newUpdatesBySymbol[e.symbol]=(this.newUpdatesBySymbol[e.symbol]||0)+1,this.allNewUpdates=(this.allNewUpdates||0)+1}}t.exports={ArrayCache:s,ArrayCacheByTimestamp:class extends r{constructor(e){super(e),Object.defineProperty(this,"hashmap",{__proto__:null,value:{},writable:!0}),Object.defineProperty(this,"sizeTracker",{__proto__:null,value:new Set,writable:!0}),Object.defineProperty(this,"newUpdates",{__proto__:null,value:0,writable:!0}),Object.defineProperty(this,"clearUpdates",{__proto__:null,value:!1,writable:!0})}getLimit(e,t){return this.clearUpdates=!0,void 0===t?this.newUpdates:Math.min(this.newUpdates,t)}append(e){if(e[0]in this.hashmap){const t=this.hashmap[e[0]];if(t!==e)for(const i in e)t[i]=e[i]}else{if(this.hashmap[e[0]]=e,this.maxSize&&this.length===this.maxSize){const e=this.shift();delete this.hashmap[e[0]]}this.push(e)}this.clearUpdates&&(this.clearUpdates=!1,this.sizeTracker.clear()),this.sizeTracker.add(e[0]),this.newUpdates=this.sizeTracker.size}},ArrayCacheBySymbolById:class extends s{constructor(e){super(e),Object.defineProperty(this,"hashmap",{__proto__:null,value:{},writable:!0})}append(e){const t=this.hashmap[e.symbol]=this.hashmap[e.symbol]||{};if(e.id in t){const i=t[e.id];if(i!==e)for(const t in e)i[t]=e[t];e=i;const r=this.findIndex((t=>t.id===e.id));this.splice(r,1)}else t[e.id]=e;if(this.maxSize&&this.length===this.maxSize){const e=this.shift();delete this.hashmap[e.symbol][e.id]}this.push(e),this.clearUpdatesBySymbol[e.symbol]&&(this.clearUpdatesBySymbol[e.symbol]=!1,this.newUpdatesBySymbol[e.symbol]=0),this.clearAllUpdates&&(this.clearAllUpdates=!1,this.allNewUpdates=0),this.newUpdatesBySymbol[e.symbol]=(this.newUpdatesBySymbol[e.symbol]||0)+1,this.allNewUpdates=(this.allNewUpdates||0)+1}}}},{}],6:[function(e,t,i){(function(i){"use strict";const r=e("ccxt"),{isNode:s,isJsonEncodedObject:n,RequestTimeout:a,NetworkError:o,NotSupported:h,deepExtend:c,milliseconds:d}=r,{inflate:f,gunzip:u}=e("./functions"),l=e("./Future");t.exports=class{constructor(e,t,i,r,s,n={}){const a={url:e,onMessageCallback:t,onErrorCallback:i,onCloseCallback:r,onConnectedCallback:s,verbose:!1,protocols:void 0,options:void 0,futures:{},subscriptions:{},connected:void 0,error:void 0,connectionStarted:void 0,connectionEstablished:void 0,isConnected:!1,connectionTimer:void 0,connectionTimeout:1e4,pingInterval:void 0,ping:void 0,keepAlive:3e4,maxPingPongMisses:2,connection:void 0,startedConnecting:!1,gunzip:!1,inflate:!1};Object.assign(this,c(a,n)),this.connected=l()}future(e){if(Array.isArray(e)){const t=e[0];if(!this.futures[t]){const i=l();this.futures[t]=i;for(let t=1;t<e.length;t++){const r=e[t];this.futures[r]=i}}return this.futures[t]}return this.futures[e]||(this.futures[e]=l()),this.futures[e]}resolve(e,t){if(this.verbose&&void 0===t&&this.log(new Date,"resolve received undefined messageHash"),this.futures[t]){this.futures[t].resolve(e),delete this.futures[t]}return e}reject(e,t){if(t){if(this.futures[t]){this.futures[t].reject(e),delete this.futures[t]}}else{const t=Object.keys(this.futures);for(let i=0;i<t.length;i++)this.reject(e,t[i])}return e}log(...e){console.log(...e)}connect(e=0){throw new h("connect() not implemented yet")}isOpen(){throw new h("isOpen() not implemented yet")}reset(e){this.clearConnectionTimeout(),this.clearPingInterval(),this.connected.reject(e),this.reject(e)}onConnectionTimeout(){if(!this.isOpen()){const e=new a("Connection to "+this.url+" failed due to a connection timeout");this.onError(e),this.connection.close(1006)}}setConnectionTimeout(){if(this.connectionTimeout){const e=this.onConnectionTimeout.bind(this);this.connectionTimer=setTimeout(e,this.connectionTimeout)}}clearConnectionTimeout(){this.connectionTimer&&(this.connectionTimer=clearTimeout(this.connectionTimer))}setPingInterval(){if(this.keepAlive){const e=this.onPingInterval.bind(this);this.pingInterval=setInterval(e,this.keepAlive)}}clearPingInterval(){this.pingInterval&&(this.pingInterval=clearInterval(this.pingInterval))}onPingInterval(){if(this.keepAlive&&this.isOpen()){const e=d();this.lastPong=this.lastPong||e,this.lastPong+this.keepAlive*this.maxPingPongMisses<e?this.onError(new a("Connection to "+this.url+" timed out due to a ping-pong keepalive missing on time")):this.ping?this.send(this.ping(this)):s?this.connection.ping():this.lastPong=e}}onOpen(){this.verbose&&this.log(new Date,"onOpen"),this.connectionEstablished=d(),this.isConnected=!0,this.connected.resolve(this.url),this.clearConnectionTimeout(),this.setPingInterval(),this.onConnectedCallback(this)}onPing(){this.verbose&&this.log(new Date,"onPing")}onPong(){this.lastPong=d(),this.verbose&&this.log(new Date,"onPong")}onError(e){this.verbose&&this.log(new Date,"onError",e.message),e instanceof r.BaseError||(e=new r.NetworkError(e.message)),this.error=e,this.reset(this.error),this.onErrorCallback(this,this.error)}onClose(e){this.verbose&&this.log(new Date,"onClose",e),this.error||this.reset(new o("connection closed by remote server, closing code "+String(e.code))),this.onCloseCallback(this,e)}onUpgrade(e){this.verbose&&this.log(new Date,"onUpgrade")}send(e){this.verbose&&this.log(new Date,"sending",e),e="string"==typeof e?e:JSON.stringify(e),this.connection.send(e)}close(){throw new h("close() not implemented yet")}onMessage(e){void 0!==(e=e.data).byteLength&&(this.gunzip?e=u(e):this.inflate&&(e=f(e)));try{e instanceof i&&(e=e.toString()),n(e)&&(e=JSON.parse(e.replace(/:(\d{15,}),/g,':"$1",'))),this.verbose&&this.log(new Date,"onMessage",e)}catch(e){this.log(new Date,"onMessage JSON.parse",e)}this.onMessageCallback(this,e)}}}).call(this,e("buffer").Buffer)},{"./Future":8,"./functions":12,buffer:65,ccxt:123}],7:[function(e,t,i){"use strict";const r=e("ccxt"),s=e("./WsClient"),{OrderBook:n,IndexedOrderBook:a,CountedOrderBook:o}=e("./OrderBook"),h=e("./functions");t.exports=class extends r.Exchange{constructor(e={}){super(e),this.newUpdates=e.newUpdates||!1}inflate(e){return h.inflate(e)}inflate64(e){return h.inflate64(e)}gunzip(e){return h.gunzip(e)}orderBook(e={},t=Number.MAX_SAFE_INTEGER){return new n(e,t)}indexedOrderBook(e={},t=Number.MAX_SAFE_INTEGER){return new a(e,t)}countedOrderBook(e={},t=Number.MAX_SAFE_INTEGER){return new o(e,t)}client(e){if(this.clients=this.clients||{},!this.clients[e]){const t=this.handleMessage.bind(this),i=this.onError.bind(this),n=this.onClose.bind(this),a=this.onConnected.bind(this),o=this.safeValue(this.options,"ws",{}),h=this.extend(this.streaming,{log:this.log?this.log.bind(this):this.log,ping:this.ping?this.ping.bind(this):this.ping,verbose:this.verbose,throttle:r.throttle(this.tokenBucket)},o);this.clients[e]=new s(e,t,i,n,a,h)}return this.clients[e]}spawn(e,...t){e.apply(this,t).catch((e=>{}))}delay(e,t,...i){setTimeout((()=>{this.spawn(t,...i)}),e)}watch(e,t,i,r,s){const n=this.client(e),a=n.future(t);return n.connect(0).then((()=>{if(!n.subscriptions[r]){n.subscriptions[r]=s||!0;const e=this.safeValue(this.options,"ws"),t=this.safeValue(e,"cost",1);i&&(this.enableRateLimit&&n.throttle?n.throttle(t).then((()=>{n.send(i)})).catch((e=>{throw e})):n.send(i))}})).catch((e=>{})),a}onConnected(e,t){}onError(e,t){e.url in this.clients&&this.clients[e.url].error&&delete this.clients[e.url]}onClose(e,t){e.error||this.clients[e.url]&&delete this.clients[e.url]}async close(){const e=Object.values(this.clients||{});for(let t=0;t<e.length;t++){const i=e[t];delete this.clients[i.url],await i.close()}}findTimeframe(e,t){t=t||this.timeframes;const i=Object.keys(t);for(let r=0;r<i.length;r++){const s=i[r];if(t[s]===e)return s}}}},{"./OrderBook":9,"./WsClient":11,"./functions":12,ccxt:123}],8:[function(e,t,i){"use strict";t.exports=function(){let e,t;const i=new Promise(((i,r)=>{e=i,t=r}));return i.resolve=function(){e.apply(this,arguments)},i.reject=function(){t.apply(this,arguments)},i}},{}],9:[function(e,t,i){"use strict";const{iso8601:r}=e("ccxt/js/base/functions/time"),{extend:s,deepExtend:n}=e("ccxt/js/base/functions/generic.js"),{Asks:a,Bids:o,CountedAsks:h,CountedBids:c,IndexedAsks:d,IndexedBids:f,IncrementalAsks:u,IncrementalBids:l,IncrementalIndexedAsks:p,IncrementalIndexedBids:m}=e("./OrderBookSide");class b{constructor(e={},t){Object.defineProperty(this,"cache",{__proto__:null,value:[],writable:!0}),t=t||Number.MAX_SAFE_INTEGER;const i={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0,symbol:void 0},n=Object.entries(s(i,e));for(let e=0;e<n.length;e++){const[t,i]=n[e];this[t]=i}"Array"===this.asks.constructor.name&&(this.asks=new a(this.asks,t)),"Array"===this.bids.constructor.name&&(this.bids=new o(this.bids,t)),this.timestamp&&(this.datetime=r(this.timestamp))}limit(e){return this.asks.limit(e),this.bids.limit(e),this}update(e){return void 0!==e.nonce&&void 0!==this.nonce&&e.nonce<=this.nonce?this:(this.nonce=e.nonce,this.timestamp=e.timestamp,this.datetime=r(this.timestamp),this.reset(e))}reset(e={}){if(this.asks.index.fill(Number.MAX_VALUE),this.asks.length=0,e.asks)for(let t=0;t<e.asks.length;t++)this.asks.storeArray(e.asks[t]);if(this.bids.index.fill(Number.MAX_VALUE),this.bids.length=0,e.bids)for(let t=0;t<e.bids.length;t++)this.bids.storeArray(e.bids[t]);return this.nonce=e.nonce,this.timestamp=e.timestamp,this.datetime=r(this.timestamp),this.symbol=e.symbol,this}}t.exports={OrderBook:b,CountedOrderBook:class extends b{constructor(e={},t){super(s(e,{asks:new h(e.asks||[],t),bids:new c(e.bids||[],t)}))}},IndexedOrderBook:class extends b{constructor(e={},t){super(s(e,{asks:new d(e.asks||[],t),bids:new f(e.bids||[],t)}))}},IncrementalOrderBook:class extends b{constructor(e={},t){super(s(e,{asks:new u(e.asks||[],t),bids:new l(e.bids||[],t)}))}},IncrementalIndexedOrderBook:class extends b{constructor(e={},t){super(s(e,{asks:new p(e.asks||[],t),bids:new m(e.bids||[],t)}))}}}},{"./OrderBookSide":10,"ccxt/js/base/functions/generic.js":133,"ccxt/js/base/functions/time":139}],10:[function(e,t,i){"use strict";function r(e,t){let i=0,r=e.length-1;for(;i<=r;){const s=i+r>>>1;e[s]-t<0?i=s+1:r=s-1}return i}const s=new Float64Array(new Array(1024).fill(Number.MAX_VALUE));class n extends Array{constructor(e=[],t){super(),Object.defineProperty(this,"index",{__proto__:null,value:new Float64Array(s),writable:!0}),Object.defineProperty(this,"depth",{__proto__:null,value:t||Number.MAX_SAFE_INTEGER,writable:!0}),Object.defineProperty(this,"hidden",{__proto__:null,value:new Map,writable:!0}),this.length=0;for(let t=0;t<e.length;t++)this.storeArray(e[t].slice())}storeArray(e){const t=e[0],i=e[1],s=this.side?-t:t,n=r(this.index,s);if(i){if(this.index[n]===s)if(n<this.length)this[n][1]=i;else{this.hidden.get(s)[1]=i}else if(this.length++,this.index.copyWithin(n+1,n,this.index.length),this.index[n]=s,n<this.length?(this.copyWithin(n+1,n,this.length),this[n]=e):(this.hidden.set(s,e),this.length--),this.length>this.index.length-1){const e=Array.from(this.index);e.length=2*this.length,e.fill(Number.MAX_VALUE,this.index.length),this.index=new Float64Array(e)}}else this.index[n]===s&&(this.index.copyWithin(n,n+1,this.index.length),this.index[this.length+this.hidden.size-1]=Number.MAX_VALUE,this.hidden.has(s)?this.hidden.delete(s):(this.copyWithin(n,n+1,this.length),this.length--))}store(e,t){this.storeArray([e,t])}limit(e){if(e<this.length){for(let t=e;t<this.length;t++)this.hidden.set(this.index[t],this[t]);this.length=e}if(this.hidden.size){let t=this.length+this.hidden.size;void 0!==e&&(t=Math.min(t,e));for(let e=this.length;e<t;e++)this.push(this.hidden.get(this.index[e])),this.hidden.delete(this.index[e])}if(this.length>this.depth){for(let e=this.depth;e<this.length;e++)this.index[e]=Number.MAX_VALUE;this.hidden.clear(),this.length=this.depth}}}class a extends n{store(e,t,i){this.storeArray([e,t,i])}storeArray(e){const t=e[0],i=e[1],s=e[2],n=this.side?-t:t,a=r(this.index,n);if(i&&s){if(this.index[a]==n)if(a<this.length){const e=this[a];e[1]=i,e[2]=s}else{const e=this.hidden.get(n);e[1]=i,e[2]=s}else if(this.length++,this.index.copyWithin(a+1,a,this.index.length),this.index[a]=n,a<this.length?(this.copyWithin(a+1,a,this.length),this[a]=e):(this.hidden.set(n,e),this.length--),this.length>this.index.length-1){const e=Array.from(this.index);e.length=2*this.length,e.fill(Number.MAX_VALUE,this.index.length),this.index=new Float64Array(e)}}else this.index[a]==n&&(this.index.copyWithin(a,a+1,this.index.length),this.index[this.length+this.hidden.size-1]=Number.MAX_VALUE,this.hidden.has(n)?this.hidden.delete(n):(this.copyWithin(a,a+1,this.length),this.length--))}}class o extends Array{constructor(e=[],t=Number.MAX_SAFE_INTEGER){super(e.length),Object.defineProperty(this,"hashmap",{__proto__:null,value:new Map,writable:!0}),Object.defineProperty(this,"index",{__proto__:null,value:new Float64Array(s),writable:!0}),Object.defineProperty(this,"depth",{__proto__:null,value:t||Number.MAX_SAFE_INTEGER,writable:!0}),Object.defineProperty(this,"hidden",{__proto__:null,value:new Map,writable:!0});for(let t=0;t<e.length;t++)this.length=t,this.storeArray(e[t].slice())}store(e,t,i){this.storeArray([e,t,i])}storeArray(e){const t=e[0],i=e[1],s=e[2];let n;if(n=void 0!==t?this.side?-t:t:void 0,i){if(this.hashmap.has(s)){const t=this.hashmap.get(s);if(n=n||t,e[0]=Math.abs(n),n===t){const t=r(this.index,n);return this.index[t]=n,void(t<this.length?this[t]=e:this.hidden.set(n,e))}{const e=r(this.index,t);this.index.copyWithin(e,e+1,this.index.length),this.index[this.length+this.hidden.size-1]=Number.MAX_VALUE,this.hidden.has(t)?this.hidden.delete(t):(this.copyWithin(e,e+1,this.length),this.length--)}}this.hashmap.set(s,n);const t=r(this.index,n);if(this.length++,this.index.copyWithin(t+1,t,this.index.length),this.index[t]=n,t<this.length?(this.copyWithin(t+1,t,this.length),this[t]=e):(this.hidden.set(n,e),this.length--),this.length>this.index.length-1){const e=Array.from(this.index);e.length=2*this.length,e.fill(Number.MAX_VALUE,this.index.length),this.index=new Float64Array(e)}}else if(this.hashmap.has(s)){const e=this.hashmap.get(s),t=r(this.index,e);this.index.copyWithin(t,t+1,this.index.length),this.index[this.length-1]=Number.MAX_VALUE,this.hidden.has(e)?this.hidden.delete(e):(this.copyWithin(t,t+1,this.length),this.length--),this.hashmap.delete(s)}}limit(e){if(e<this.length){for(let t=e;t<this.length;t++)this.hidden.set(this.index[t],this[t]);this.length=e}if(this.hidden.size){let t=this.length+this.hidden.size;void 0!==e&&(t=Math.min(t,e));for(let e=this.length;e<t;e++)this.push(this.hidden.get(this.index[e])),this.hidden.delete(this.index[e])}if(this.length>this.depth){for(let e=this.depth;e<this.length;e++)this.hashmap.delete(this.index[e]),this.index[e]=Number.MAX_VALUE;this.hidden.clear(),this.length=this.depth}}}t.exports={Asks:class extends n{get side(){return!1}},Bids:class extends n{get side(){return!0}},OrderBookSide:n,CountedAsks:class extends a{get side(){return!1}},CountedBids:class extends a{get side(){return!0}},CountedOrderBookSide:a,IndexedAsks:class extends o{get side(){return!1}},IndexedBids:class extends o{get side(){return!0}},IndexedOrderBookSide:o}},{}],11:[function(e,t,i){"use strict";const r=e("ccxt"),{sleep:s,isNode:n,milliseconds:a}=r,o=e("./Client"),h=n?e("ws"):window.WebSocket;t.exports=class extends o{createConnection(){this.verbose&&this.log(new Date,"connecting to",this.url),this.connectionStarted=a(),this.setConnectionTimeout(),this.connection=new h(this.url,this.protocols,this.options),this.connection.onopen=this.onOpen.bind(this),this.connection.onmessage=this.onMessage.bind(this),this.connection.onerror=this.onError.bind(this),this.connection.onclose=this.onClose.bind(this),n&&this.connection.on("ping",this.onPing.bind(this)).on("pong",this.onPong.bind(this)).on("upgrade",this.onUpgrade.bind(this))}connect(e=0){return this.startedConnecting||(this.startedConnecting=!0,e?s(e).then(this.createConnection.bind(this)):this.createConnection()),this.connected}isOpen(){return this.connection.readyState===h.OPEN}close(){if(this.connection instanceof h)return this.connection.close()}}},{"./Client":6,ccxt:123,ws:121}],12:[function(e,t,i){(function(i){"use strict";const{inflateRawSync:r,gunzipSync:s}=e("zlib");function n(e){return r(e).toString()}t.exports={inflate:n,inflate64:function(e){return n(i.from(e,"base64"))},gunzip:function(e){return s(e).toString()}}}).call(this,e("buffer").Buffer)},{buffer:65,zlib:64}],14:[function(e,t,i){"use strict";const r=e("ccxt"),s=e("ccxt").Precise,{ExchangeError:n}=e("ccxt/js/base/errors"),{ArrayCache:a,ArrayCacheByTimestamp:o,ArrayCacheBySymbolById:h}=e("./base/Cache");t.exports=class extends r.binance{describe(){return this.deepExtend(super.describe(),{has:{ws:!0,watchBalance:!0,watchMyTrades:!0,watchOHLCV:!0,watchOrderBook:!0,watchOrders:!0,watchTicker:!0,watchTickers:!1,watchTrades:!0},urls:{test:{ws:{spot:"wss://testnet.binance.vision/ws",margin:"wss://testnet.binance.vision/ws",future:"wss://stream.binancefuture.com/ws",delivery:"wss://dstream.binancefuture.com/ws"}},api:{ws:{spot:"wss://stream.binance.com:9443/ws",margin:"wss://stream.binance.com:9443/ws",future:"wss://fstream.binance.com/ws",delivery:"wss://dstream.binance.com/ws"}}},options:{watchOrderBookRate:100,tradesLimit:1e3,ordersLimit:1e3,OHLCVLimit:1e3,requestId:{},watchOrderBookLimit:1e3,watchTrades:{name:"trade"},watchTicker:{name:"ticker"},watchBalance:{fetchBalanceSnapshot:!1,awaitBalanceSnapshot:!0},wallet:"wb",listenKeyRefreshRate:12e5,ws:{cost:5}}})}requestId(e){const t=this.safeValue(this.options,"requestId",{}),i=this.safeInteger(t,e,0),r=this.sum(i,1);return this.options.requestId[e]=r,r}async watchOrderBook(e,t,i={}){if(void 0!==t&&5!==t&&10!==t&&20!==t&&50!==t&&100!==t&&500!==t&&1e3!==t)throw new n(this.id+" watchOrderBook limit argument must be undefined, 5, 10, 20, 50, 100, 500 or 1000");await this.loadMarkets();const r=this.safeString2(this.options,"watchOrderBook","defaultType","spot"),s=this.safeString(i,"type",r),a=this.omit(i,"type"),o=this.market(e),h="depth",c=o.lowercaseId+"@"+h,d=this.urls.api.ws[s],f=this.requestId(d),u={method:"SUBSCRIBE",params:[c+"@"+this.safeString(this.options,"watchOrderBookRate","100")+"ms"],id:f},l={id:f.toString(),messageHash:c,name:h,symbol:o.symbol,method:this.handleOrderBookSubscription,limit:t,type:s,params:i},p=this.extend(u,a);return(await this.watch(d,c,p,c,l)).limit(t)}async fetchOrderBookSnapshot(e,t,i){const r=this.safeInteger(this.options,"watchOrderBookLimit",1e3),s=this.safeValue(i,"type"),n=this.safeString(i,"symbol"),a=this.safeString(i,"messageHash"),o=this.safeInteger(i,"limit",r),h=this.safeValue(i,"params"),c=await this.fetchOrderBook(n,o,h),d=this.safeValue(this.orderbooks,n);if(void 0===d)return;d.reset(c);const f=d.cache;for(let t=0;t<f.length;t++){const i=f[t],r=this.safeInteger(i,"U"),n=this.safeInteger(i,"u"),a=this.safeInteger(i,"pu");if("future"===s){if(n<d.nonce)continue;(r<=d.nonce&&n>=d.nonce||a===d.nonce)&&this.handleOrderBookMessage(e,i,d)}else{if(n<=d.nonce)continue;r-1<=d.nonce&&n-1>=d.nonce&&this.handleOrderBookMessage(e,i,d)}}this.orderbooks[n]=d,e.resolve(d,a)}handleDelta(e,t){const i=this.safeFloat(t,0),r=this.safeFloat(t,1);e.store(i,r)}handleDeltas(e,t){for(let i=0;i<t.length;i++)this.handleDelta(e,t[i])}handleOrderBookMessage(e,t,i){const r=this.safeInteger(t,"u");this.handleDeltas(i.asks,this.safeValue(t,"a",[])),this.handleDeltas(i.bids,this.safeValue(t,"b",[])),i.nonce=r;const s=this.safeInteger(t,"E");return i.timestamp=s,i.datetime=this.iso8601(s),i}handleOrderBook(e,t){const i=this.safeString(t,"s"),r=this.safeMarket(i),s=r.symbol,a=r.lowercaseId+"@depth",o=this.safeValue(this.orderbooks,s);if(void 0===o)return;const h=this.safeInteger(o,"nonce");if(void 0===h)o.cache.push(t);else try{const i=this.safeInteger(t,"U"),r=this.safeInteger(t,"u"),s=this.safeInteger(t,"pu");if(void 0===s){if(r>o.nonce){let s;if(s=void 0===this.safeInteger(o,"timestamp")?i-1<=o.nonce&&r-1>=o.nonce:i-1===o.nonce,!s)throw new n(this.id+" handleOrderBook received an out-of-order nonce");this.handleOrderBookMessage(e,t,o),h<o.nonce&&e.resolve(o,a)}}else if(r>=o.nonce){if(!(i<=o.nonce||s===o.nonce))throw new n(this.id+" handleOrderBook received an out-of-order nonce");this.handleOrderBookMessage(e,t,o),h<=o.nonce&&e.resolve(o,a)}}catch(t){delete this.orderbooks[s],delete e.subscriptions[a],e.reject(t,a)}}handleOrderBookSubscription(e,t,i){const r=this.safeInteger(this.options,"watchOrderBookLimit",1e3),s=this.safeString(i,"symbol"),n=this.safeInteger(i,"limit",r);s in this.orderbooks&&delete this.orderbooks[s],this.orderbooks[s]=this.orderBook({},n),this.spawn(this.fetchOrderBookSnapshot,e,t,i)}handleSubscriptionStatus(e,t){const i=this.safeString(t,"id"),r=this.indexBy(e.subscriptions,"id"),s=this.safeValue(r,i,{}),n=this.safeValue(s,"method");return void 0!==n&&n.call(this,e,t,s),t}async watchTrades(e,t,i,r={}){await this.loadMarkets();const s=this.market(e),n=this.safeValue(this.options,"watchTrades",{}),a=this.safeString(n,"name","trade"),o=s.lowercaseId+"@"+a,h=this.safeString(this.options,"defaultType","spot"),c=this.safeString2(n,"type","defaultType",h),d=this.safeString(r,"type",c),f=this.omit(r,"type"),u=this.urls.api.ws[d],l=this.requestId(u),p={method:"SUBSCRIBE",params:[o],id:l},m={id:l},b=await this.watch(u,o,this.extend(p,f),o,m);return this.newUpdates&&(i=b.getLimit(e,i)),this.filterBySinceLimit(b,t,i,"timestamp",!0)}parseTrade(e,t){const i="TRADE"===this.safeString(e,"x");if(!i)return super.parseTrade(e,t);const r=this.safeString2(e,"t","a"),s=this.safeInteger(e,"T"),n=this.safeFloat2(e,"L","p");let a=this.safeFloat(e,"q");i&&(a=this.safeFloat(e,"l",a));let o=this.safeFloat(e,"Y");void 0===o&&void 0!==n&&void 0!==a&&(o=n*a);const h=this.safeString(e,"s"),c=this.safeSymbol(h);let d,f=this.safeStringLower(e,"S");const u=this.safeString(e,"i");let l;"m"in e&&(void 0===f&&(f=e.m?"sell":"buy"),d=e.m?"maker":"taker");const p=this.safeFloat(e,"n");if(void 0!==p){const t=this.safeString(e,"N");l={cost:p,currency:this.safeCurrencyCode(t)}}const m=this.safeStringLower(e,"o");return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:c,id:r,order:u,type:m,takerOrMaker:d,side:f,price:n,amount:a,cost:o,fee:l}}handleTrade(e,t){const i=this.safeString(t,"s"),r=this.safeMarket(i),s=r.symbol,n=this.safeStringLower(t,"s")+"@"+this.safeString(t,"e"),o=this.parseTrade(t,r);let h=this.safeValue(this.trades,s);if(void 0===h){const e=this.safeInteger(this.options,"tradesLimit",1e3);h=new a(e)}h.append(o),this.trades[s]=h,e.resolve(h,n)}async watchOHLCV(e,t="1m",i,r,s={}){await this.loadMarkets();const n=this.market(e).lowercaseId+"@kline_"+this.timeframes[t],a=this.safeValue(this.options,"watchOHLCV",{}),o=this.safeString(this.options,"defaultType","spot"),h=this.safeString2(a,"type","defaultType",o),c=this.safeString(s,"type",h),d=this.omit(s,"type"),f=this.urls.api.ws[c],u=this.requestId(f),l={method:"SUBSCRIBE",params:[n],id:u},p={id:u},m=await this.watch(f,n,this.extend(l,d),n,p);return this.newUpdates&&(r=m.getLimit(e,r)),this.filterBySinceLimit(m,i,r,0,!0)}handleOHLCV(e,t){const i=this.safeString(t,"s"),r=this.safeStringLower(t,"s"),s=this.safeString(t,"e"),n=this.safeValue(t,"k"),a=this.safeString(n,"i"),h=this.findTimeframe(a),c=r+"@"+s+"_"+a,d=[this.safeInteger(n,"t"),this.safeFloat(n,"o"),this.safeFloat(n,"h"),this.safeFloat(n,"l"),this.safeFloat(n,"c"),this.safeFloat(n,"v")],f=this.safeSymbol(i);this.ohlcvs[f]=this.safeValue(this.ohlcvs,f,{});let u=this.safeValue(this.ohlcvs[f],h);if(void 0===u){const e=this.safeInteger(this.options,"OHLCVLimit",1e3);u=new o(e),this.ohlcvs[f][h]=u}u.append(d),e.resolve(u,c)}async watchTicker(e,t={}){await this.loadMarkets();const i=this.market(e).lowercaseId,r=this.safeValue(this.options,"watchTicker",{}),s=i+"@"+this.safeString(r,"name","ticker"),n=this.safeString2(this.options,"defaultType","spot"),a=this.safeString2(r,"type","defaultType",n),o=this.safeString(t,"type",a),h=this.omit(t,"type"),c=this.urls.api.ws[o],d=this.requestId(c),f={method:"SUBSCRIBE",params:[s],id:d},u={id:d};return await this.watch(c,s,this.extend(f,h),s,u)}handleTicker(e,t){let i=this.safeString(t,"e","bookTicker");"24hrTicker"===i&&(i="ticker");const r=this.safeStringLower(t,"s")+"@"+i;let s;const n=this.milliseconds();s="bookTicker"===i?this.safeInteger(t,"E",n):this.safeInteger(t,"C",n);const a=this.safeString(t,"s"),o=this.safeSymbol(a),h=this.safeFloat(t,"c"),c={symbol:o,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(t,"h"),low:this.safeFloat(t,"l"),bid:this.safeFloat(t,"b"),bidVolume:this.safeFloat(t,"B"),ask:this.safeFloat(t,"a"),askVolume:this.safeFloat(t,"A"),vwap:this.safeFloat(t,"w"),open:this.safeFloat(t,"o"),close:h,last:h,previousClose:this.safeFloat(t,"x"),change:this.safeFloat(t,"p"),percentage:this.safeFloat(t,"P"),average:void 0,baseVolume:this.safeFloat(t,"v"),quoteVolume:this.safeFloat(t,"q"),info:t};this.tickers[o]=c,e.resolve(c,r)}async authenticate(e={}){const t=this.milliseconds();let i=this.safeString2(this.options,"defaultType","authenticate","spot");i=this.safeString(e,"type",i);const r=this.safeValue(this.options,i,{}),s=this.safeInteger(r,"lastAuthenticatedTime",0),n=this.safeInteger(this.options,"listenKeyRefreshRate",12e5);if(t-s>this.sum(n,1e4)){let s="publicPostUserDataStream";"future"===i?s="fapiPrivatePostListenKey":"delivery"===i?s="dapiPrivatePostListenKey":"margin"===i&&(s="sapiPostUserDataStream");const a=await this[s]();this.options[i]=this.extend(r,{listenKey:this.safeString(a,"listenKey"),lastAuthenticatedTime:t}),this.delay(n,this.keepAliveListenKey,e)}}async keepAliveListenKey(e={}){let t=this.safeString2(this.options,"defaultType","authenticate","spot");t=this.safeString(e,"type",t);const i=this.safeValue(this.options,t,{}),r=this.safeString(i,"listenKey");if(void 0===r)return;let s="publicPutUserDataStream";"future"===t?s="fapiPrivatePutListenKey":"delivery"===t?s="dapiPrivatePutListenKey":"margin"===t&&(s="sapiPutUserDataStream");const n={listenKey:r},a=this.milliseconds(),o=this.omit(e,"type");try{await this[s](this.extend(n,o))}catch(e){const r=this.urls.api.ws[t]+"/"+this.options[t].listenKey,s=this.client(r),n=Object.keys(s.futures);for(let t=0;t<n.length;t++){const i=n[t];s.reject(e,i)}return void(this.options[t]=this.extend(i,{listenKey:void 0,lastAuthenticatedTime:0}))}this.options[t]=this.extend(i,{listenKey:r,lastAuthenticatedTime:a});const h=Object.values(this.clients),c=this.safeInteger(this.options,"listenKeyRefreshRate",12e5);for(let i=0;i<h.length;i++){const r=h[i],s=Object.keys(r.subscriptions);for(let i=0;i<s.length;i++){if(s[i]===t)return this.delay(c,this.keepAliveListenKey,e)}}}setBalanceCache(e,t){if(t in e.subscriptions)return;const i=this.safeValue(this.options,"watchBalance");if(this.safeValue(i,"fetchBalanceSnapshot",!1)){const i=t+":fetchBalanceSnapshot";i in e.futures||(e.future(i),this.spawn(this.loadBalanceSnapshot,e,i,t))}else this.balance[t]={}}async loadBalanceSnapshot(e,t,i){const r=await this.fetchBalance({type:i});this.balance[i]=this.extend(r,this.balance[i]);e.futures[t].resolve(),e.resolve(this.balance[i],i+":balance")}async watchBalance(e={}){await this.loadMarkets(),await this.authenticate(e);const t=this.safeString(this.options,"defaultType","spot"),i=this.safeString(e,"type",t),r=this.urls.api.ws[i]+"/"+this.options[i].listenKey,s=this.client(r);this.setBalanceCache(s,i);const n=this.safeValue(this.options,"watchBalance"),a=this.safeValue(n,"fetchBalanceSnapshot",!1),o=this.safeValue(n,"awaitBalanceSnapshot",!0);a&&o&&await s.future(i+":fetchBalanceSnapshot");const h=i+":balance";return await this.watch(r,h,undefined,i)}handleBalance(e,t){const i=this.safeValue(this.options,"wallet","wb"),r=Object.keys(e.subscriptions)[0],n=r+":balance";this.balance[r].info=t;if("balanceUpdate"===this.safeString(t,"e")){const e=this.safeString(t,"a"),i=this.safeCurrencyCode(e),n=this.account(),a=this.safeString(t,"d");if(i in this.balance[r]){let e=this.balance[r][i].free;"string"!=typeof e&&(e=this.numberToString(e)),n.free=s.stringAdd(e,a)}else n.free=a;this.balance[r][i]=n}else{t=this.safeValue(t,"a",t);const e=this.safeValue(t,"B");for(let t=0;t<e.length;t++){const s=e[t],n=this.safeString(s,"a"),a=this.safeCurrencyCode(n),o=this.account();o.free=this.safeString(s,"f"),o.used=this.safeString(s,"l"),o.total=this.safeString(s,i),this.balance[r][a]=o}}const a=this.safeInteger(t,"E");this.balance[r].timestamp=a,this.balance[r].datetime=this.iso8601(a),this.balance[r]=this.safeBalance(this.balance[r]),e.resolve(this.balance[r],n)}async watchOrders(e,t,i,r={}){await this.loadMarkets(),await this.authenticate(r);const s=this.safeString2(this.options,"watchOrders","defaultType","spot"),n=this.safeString(r,"type",s),a=this.urls.api.ws[n]+"/"+this.options[n].listenKey;let o="orders";void 0!==e&&(o+=":"+e);const h=this.client(a);this.setBalanceCache(h,n);const c=await this.watch(a,o,undefined,n);return this.newUpdates&&(i=c.getLimit(e,i)),this.filterBySymbolSinceLimit(c,e,t,i,!0)}parseWsOrder(e,t){const i=this.safeString(e,"x"),r=this.safeString(e,"i"),s=this.safeString(e,"s"),n=this.safeSymbol(s);let a=this.safeInteger(e,"O");const o=this.safeInteger(e,"T");let h,c;"NEW"===i?void 0===a&&(a=o):"TRADE"===i&&(h=o);const d=this.safeFloat(e,"n");if(void 0!==d&&d>0){const t=this.safeString(e,"N");c={cost:d,currency:this.safeCurrencyCode(t)}}const f=this.safeFloat(e,"p"),u=this.safeFloat(e,"q"),l=this.safeStringLower(e,"S"),p=this.safeStringLower(e,"o"),m=this.safeFloat(e,"z"),b=this.safeFloat(e,"Z");let g=u,y=this.safeFloat(e,"ap"),v=b;void 0!==m&&(void 0===v&&void 0!==f&&(v=m*f),void 0!==u&&(g=Math.max(u-m,0)),void 0===y&&void 0!==b&&m>0&&(y=b/m));const w=this.safeString(e,"X"),S=this.parseOrderStatus(w);let _=this.safeString(e,"C");void 0!==_&&0!==_.length||(_=this.safeString(e,"c"));const k=this.safeFloat2(e,"P","sp");let T=this.safeString(e,"f");return"GTX"===T&&(T="PO"),{info:e,symbol:n,id:r,clientOrderId:_,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:h,type:p,timeInForce:T,postOnly:void 0,side:l,price:f,stopPrice:k,amount:u,cost:v,average:y,filled:m,remaining:g,status:S,fee:c,trades:undefined}}handleOrderUpdate(e,t){"ORDER_TRADE_UPDATE"===this.safeString(t,"e")&&(t=this.safeValue(t,"o",t)),this.handleMyTrade(e,t),this.handleOrder(e,t)}async watchMyTrades(e,t,i,r={}){await this.loadMarkets(),await this.authenticate(r);const s=this.safeString2(this.options,"watchMyTrades","defaultType","spot"),n=this.safeString(r,"type",s),a=this.urls.api.ws[n]+"/"+this.options[n].listenKey;let o="myTrades";void 0!==e&&(o+=":"+e);const h=this.client(a);this.setBalanceCache(h,n);const c=await this.watch(a,o,undefined,n);return this.newUpdates&&(i=c.getLimit(e,i)),this.filterBySymbolSinceLimit(c,e,t,i,!0)}handleMyTrade(e,t){const i="myTrades";if("TRADE"===this.safeString(t,"x")){const r=this.parseTrade(t),s=this.safeString(r,"order"),n=this.safeValue(r,"fee"),a=this.safeString(r,"symbol");if(void 0!==s&&void 0!==n&&void 0!==a){const e=this.orders;if(void 0!==e){const t=this.safeValue(e.hashmap,a,{}),i=this.safeValue(t,s);if(void 0!==i){const e=this.safeValue(i,"fees"),t=this.safeValue(i,"fee");if(void 0!==e){let t=!0;for(let r=0;r<e.length;r++){const s=e[r];if(s.currency===n.currency){const e=this.sum(n.cost,s.cost);i.fees[r].cost=parseFloat(this.currencyToPrecision(n.currency,e)),t=!1;break}}t&&i.fees.push(n)}else if(void 0!==t)if(t.currency===n.currency){const e=this.sum(t.cost,n.cost);i.fee.cost=parseFloat(this.currencyToPrecision(n.currency,e))}else void 0===t.currency?i.fee=n:(i.fees=[t,n],i.fee=void 0);else i.fee=n;const s=this.safeValue(i,"trades",[]);s.push(r),i.trades=s}}}if(void 0===this.myTrades){const e=this.safeInteger(this.options,"tradesLimit",1e3);this.myTrades=new h(e)}this.myTrades.append(r),e.resolve(this.myTrades,i);const o="myTrades:"+a;e.resolve(this.myTrades,o)}}handleOrder(e,t){const i="orders",r=this.parseWsOrder(t),s=this.safeString(r,"symbol"),n=this.safeString(r,"id");if(void 0!==s){if(void 0===this.orders){const e=this.safeInteger(this.options,"ordersLimit",1e3);this.orders=new h(e)}const t=this.orders,a=this.safeValue(t.hashmap,s,{}),o=this.safeValue(a,n);if(void 0!==o){const e=this.safeValue(o,"fee");void 0!==e&&(r.fee=e);const t=this.safeValue(o,"fees");void 0!==t&&(r.fees=t),r.trades=this.safeValue(o,"trades"),r.timestamp=this.safeInteger(o,"timestamp"),r.datetime=this.safeString(o,"datetime")}t.append(r),e.resolve(this.orders,i);const c="orders:"+s;e.resolve(this.orders,c)}}handleMessage(e,t){const i={depthUpdate:this.handleOrderBook,trade:this.handleTrade,aggTrade:this.handleTrade,kline:this.handleOHLCV,"24hrTicker":this.handleTicker,bookTicker:this.handleTicker,outboundAccountPosition:this.handleBalance,balanceUpdate:this.handleBalance,ACCOUNT_UPDATE:this.handleBalance,executionReport:this.handleOrderUpdate,ORDER_TRADE_UPDATE:this.handleOrderUpdate},r=this.safeString(t,"e"),s=this.safeValue(i,r);if(void 0!==s)return s.call(this,e,t);if(void 0!==this.safeString(t,"id"))return this.handleSubscriptionStatus(e,t);void 0===r&&this.handleTicker(e,t)}}},{"./base/Cache":5,ccxt:123,"ccxt/js/base/errors":129}],29:[function(e,t,i){"use strict";const r=e("ccxt"),{BadSymbol:s}=e("ccxt/js/base/errors"),{ArrayCache:n,ArrayCacheBySymbolById:a}=e("./base/Cache");t.exports=class extends r.coinbasepro{describe(){return this.deepExtend(super.describe(),{has:{ws:!0,watchOHLCV:!1,watchOrderBook:!0,watchTicker:!0,watchTickers:!1,watchTrades:!0,watchBalance:!1,watchStatus:!1,watchOrders:!0,watchMyTrades:!0},urls:{api:{ws:"wss://ws-feed.pro.coinbase.com"}},options:{tradesLimit:1e3,ordersLimit:1e3,myTradesLimit:1e3}})}authenticate(){this.checkRequiredCredentials();const e=this.nonce(),t=e.toString()+"GET/users/self/verify",i=this.hmac(this.encode(t),this.base64ToBinary(this.secret),"sha256","base64");return{timestamp:e,key:this.apiKey,signature:i,passphrase:this.password}}async subscribe(e,t,i,r={}){await this.loadMarkets();const s=this.market(t),n=i+":"+s.id;let a=this.urls.api.ws;"signature"in r&&(a+="?");const o={type:"subscribe",product_ids:[s.id],channels:[e]},h=this.extend(o,r);return await this.watch(a,n,h,n)}async watchTicker(e,t={}){const i="ticker";return await this.subscribe(i,e,i,t)}async watchTrades(e,t,i,r={}){const s="matches",n=await this.subscribe(s,e,s,r);return this.newUpdates&&(i=n.getLimit(e,i)),this.filterBySinceLimit(n,t,i,"timestamp",!0)}async watchMyTrades(e,t,i,r={}){if(void 0===e)throw new s(this.id+" watchMyTrades requires a symbol");const n=this.authenticate(),a=await this.subscribe("user",e,"myTrades",this.extend(r,n));return this.newUpdates&&(i=a.getLimit(e,i)),this.filterBySinceLimit(a,t,i,"timestamp",!0)}async watchOrders(e,t,i,r={}){if(void 0===e)throw new s(this.id+" watchMyTrades requires a symbol");const n=this.authenticate(),a=await this.subscribe("user",e,"orders",this.extend(r,n));return this.newUpdates&&(i=a.getLimit(e,i)),this.filterBySinceLimit(a,t,i,"timestamp",!0)}async watchOrderBook(e,t,i={}){const r="level2";await this.loadMarkets();const s=this.market(e),n=r+":"+s.id,a=this.urls.api.ws,o={type:"subscribe",product_ids:[s.id],channels:[r]},h=this.extend(o,i),c={messageHash:n,symbol:e,marketId:s.id,limit:t};return(await this.watch(a,n,h,n,c)).limit(t)}handleTrade(e,t){const i=this.safeString(t,"product_id");if(void 0!==i){const r=this.parseWsTrade(t),s=r.symbol,a="matches"+":"+i;let o=this.safeValue(this.trades,s);if(void 0===o){const e=this.safeInteger(this.options,"tradesLimit",1e3);o=new n(e),this.trades[s]=o}o.append(r),e.resolve(o,a)}return t}handleMyTrade(e,t){const i=this.safeString(t,"product_id");if(void 0!==i){const r=this.parseWsTrade(t),s="myTrades"+":"+i;let n=this.myTrades;if(void 0===n){const e=this.safeInteger(this.options,"myTradesLimit",1e3);n=new a(e),this.myTrades=n}n.append(r),e.resolve(n,s)}return t}parseWsTrade(e){const t=super.parseTrade(e);let i;"maker_fee_rate"in e?(t.takerOrMaker="maker",i=this.safeNumber(e,"maker_fee_rate")):(t.takerOrMaker="taker",i=this.safeNumber(e,"taker_fee_rate"));const r=this.market(t.symbol).quote;let s;return void 0!==t.cost&&void 0!==i&&(s=t.cost*i),t.fee={rate:i,cost:s,currency:r},t}parseWsOrderStatus(e){return this.safeString({filled:"closed",canceled:"canceled"},e,"open")}handleOrder(e,t){let i=this.orders;if(void 0===i){const e=this.safeInteger(this.options,"ordersLimit",1e3);i=new a(e),this.orders=i}const r=this.safeString(t,"type"),s=this.safeString(t,"product_id");if(void 0!==s){const i="orders:"+s,n=this.safeSymbol(s),a=this.safeString(t,"order_id"),o=this.safeString(t,"maker_order_id"),h=this.safeString(t,"taker_order_id"),c=this.orders,d=this.safeValue(c.hashmap,n,{});let f=this.safeValue(d,a);if(void 0===f&&(f=this.safeValue2(d,o,h)),void 0===f){const r=this.parseWsOrder(t);c.append(r),e.resolve(c,i)}else{const s=this.safeInteger(t,"sequence"),n=this.safeValue(f,"info",{}),a=this.safeInteger(n,"sequence");if(void 0===a||s>a)if("match"===r){const r=this.parseWsTrade(t);void 0===f.trades&&(f.trades=[]),f.trades.push(r),f.lastTradeTimestamp=r.timestamp;let s=0,n=0;const a=f.trades;for(let e=0;e<a.length;e++){const t=a[e];s=this.sum(s,t.cost),n=this.sum(n,t.amount)}n>0&&(f.average=s/n),f.cost=s,void 0!==f.filled&&(f.filled+=r.amount,void 0!==f.amount&&(f.remaining=f.amount-f.filled)),void 0===f.fee&&(f.fee={cost:0,currency:r.fee.currency}),void 0!==f.fee.cost&&void 0!==r.fee.cost&&(f.fee.cost=this.sum(f.fee.cost,r.fee.cost)),c.append(f),e.resolve(c,i)}else if("received"===r||"done"===r){const r=this.extend(f.info,t),s=this.parseWsOrder(r),n=Object.keys(s);for(let e=0;e<n.length;e++){const t=n[e];void 0!==s[t]&&(f[t]=s[t])}c.append(f),e.resolve(c,i)}}}}parseWsOrder(e){const t=this.safeString(e,"order_id"),i=this.safeString(e,"client_oid"),r=this.safeString(e,"product_id"),s=this.safeSymbol(r),n=this.safeString(e,"side"),a=this.safeNumber(e,"price"),o=this.safeNumber2(e,"size","funds"),h=this.safeString(e,"time"),c=this.parse8601(h),d=this.safeString(e,"reason"),f=this.parseWsOrderStatus(d),u=this.safeString(e,"order_type");let l=this.safeNumber(e,"remaining_size");const p=this.safeString(e,"type");let m,b;return void 0!==o&&void 0!==l?m=o-l:"received"===p&&(m=0,void 0!==o&&(l=o-m)),void 0!==a&&void 0!==o&&(b=a*o),{info:e,symbol:s,id:t,clientOrderId:i,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,type:u,timeInForce:void 0,postOnly:void 0,side:n,price:a,stopPrice:void 0,amount:o,cost:b,average:void 0,filled:m,remaining:l,status:f,fee:void 0,trades:void 0}}handleTicker(e,t){const i=this.safeString(t,"product_id");if(void 0!==i){const r=this.parseTicker(t),s=r.symbol;this.tickers[s]=r;const n=this.safeString(t,"type")+":"+i;e.resolve(r,n)}return t}parseTicker(e,t){if(void 0===this.safeString(e,"type"))return super.parseTicker(e,t);const i=this.safeString(e,"product_id"),r=this.safeSymbol(i,t,"-"),s=this.parse8601(this.safeString(e,"time")),n=this.safeNumber(e,"price");return{symbol:r,timestamp:s,datetime:this.iso8601(s),high:this.safeNumber(e,"high_24h"),low:this.safeNumber(e,"low_24h"),bid:this.safeNumber(e,"best_bid"),bidVolume:void 0,ask:this.safeNumber(e,"best_ask"),askVolume:void 0,vwap:void 0,open:this.safeNumber(e,"open_24h"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeNumber(e,"volume_24h"),quoteVolume:void 0,info:e}}handleDelta(e,t){const i=this.safeNumber(t,0),r=this.safeNumber(t,1);e.store(i,r)}handleDeltas(e,t){for(let i=0;i<t.length;i++)this.handleDelta(e,t[i])}handleOrderBook(e,t){const i=this.safeString(t,"type"),r=this.safeString(t,"product_id"),s=this.safeMarket(r,void 0,"-").symbol,n="level2:"+r,a=this.safeValue(e.subscriptions,n,{}),o=this.safeInteger(a,"limit");if("snapshot"===i){this.orderbooks[s]=this.orderBook({},o);const i=this.orderbooks[s];this.handleDeltas(i.asks,this.safeValue(t,"asks",[])),this.handleDeltas(i.bids,this.safeValue(t,"bids",[])),i.timestamp=void 0,i.datetime=void 0,e.resolve(i,n)}else if("l2update"===i){const i=this.orderbooks[s],r=this.parse8601(this.safeString(t,"time")),a=this.safeValue(t,"changes",[]),o={sell:"asks",buy:"bids"};for(let e=0;e<a.length;e++){const t=a[e],r=this.safeString(t,0),s=this.safeString(o,r),n=this.safeNumber(t,1),h=this.safeNumber(t,2);i[s].store(n,h)}i.timestamp=r,i.datetime=this.iso8601(r),e.resolve(i,n)}}handleSubscriptionStatus(e,t){return t}handleMessage(e,t){const i=this.safeString(t,"type"),r={snapshot:this.handleOrderBook,l2update:this.handleOrderBook,subscribe:this.handleSubscriptionStatus,ticker:this.handleTicker,received:this.handleOrder,open:this.handleOrder,change:this.handleOrder,done:this.handleOrder},s=e.url.length,n="?"===e.url[s-1],a=this.safeValue(r,i);if(void 0!==a)return a.call(this,e,t);"match"===i&&(n?(this.handleMyTrade(e,t),this.handleOrder(e,t)):this.handleTrade(e,t))}}},{"./base/Cache":5,ccxt:123,"ccxt/js/base/errors":129}],45:[function(e,t,i){"use strict";const r=e("ccxt"),{ExchangeError:s,InvalidNonce:n,NetworkError:a}=e("ccxt/js/base/errors"),{ArrayCache:o,ArrayCacheByTimestamp:h,ArrayCacheBySymbolById:c}=e("./base/Cache");t.exports=class extends r.kucoin{describe(){return this.deepExtend(super.describe(),{has:{ws:!0,watchOrderBook:!0,watchOrders:!0,watchMyTrades:!0,watchTickers:!1,watchTicker:!0,watchTrades:!0,watchBalance:!0,watchOHLCV:!0},options:{tradesLimit:1e3,watchOrderBookRate:100,fetchOrderBookSnapshot:{maxAttempts:3,delay:1e3},watchTicker:{topic:"market/snapshot"}},streaming:{ping:this.ping}})}async negotiate(e={}){const t=this.client("ws"),i="negotiate";let r=this.safeValue(t.subscriptions,i);if(void 0===r){let e;r=t.future(i),t.subscriptions.negotiate=r;const s=!1;e=this.checkRequiredCredentials(s)?await this.privatePostBulletPrivate():await this.publicPostBulletPublic(),t.resolve(e,i)}return await r}requestId(){const e=this.sum(this.safeInteger(this.options,"requestId",0),1);return this.options.requestId=e,e}async subscribe(e,t,i,r,s,n={}){await this.loadMarkets();const a=this.safeValue(e,"data",{}),o=this.safeValue(a,"instanceServers",[]),h=this.safeValue(o,0,{}),c=this.safeString(h,"endpoint"),d=this.safeString(a,"token"),f=this.requestId(),u={token:d,acceptUserMessage:"true"},l=c+"?"+this.urlencode(u),p={id:f,type:"subscribe",topic:t,response:!0},m={id:f.toString(),symbol:s,topic:t,messageHash:i,method:r},b=this.extend(p,n),g=t;return await this.watch(l,i,b,g,m)}async unsubscribe(e,t,i,r,s,n={}){await this.loadMarkets();const a=this.safeValue(e,"data",{}),o=this.safeValue(a,"instanceServers",[]),h=this.safeValue(o,0,{}),c=this.safeString(h,"endpoint"),d=this.safeString(a,"token"),f=this.requestId(),u={token:d,acceptUserMessage:"true"},l=c+"?"+this.urlencode(u),p={id:n.id,type:"unsubscribe",topic:t,response:!0},m={id:f.toString(),symbol:s,topic:t,messageHash:i,method:r},b=this.extend(p,n),g=t;return await this.watch(l,i,b,g,m)}async watchOrderBook(e,t,i={}){if(void 0!==t&&20!==t&&100!==t)throw new s(this.id+" watchOrderBook 'limit' argument must be undefined, 20 or 100");await this.loadMarkets();const r=await this.negotiate(),n=this.market(e);e=n.symbol;const a="/market/level2:"+n.id,o=a;return(await this.subscribe(r,a,o,this.handleOrderBookSubscription,e,i)).limit(t)}async watchTicker(e,t={}){await this.loadMarkets();const i=this.market(e);e=i.symbol;const r=await this.negotiate(),s=this.safeValue(this.options,"watchTicker",{}),n="/"+this.safeString(s,"topic","market/snapshot")+":"+i.id,a=n;return await this.subscribe(r,n,a,void 0,e,t)}handleTicker(e,t){const i=this.safeString(t,"topic");let r;if(void 0!==i){const e=i.split(":"),t=this.safeString(e,1);r=this.safeMarket(t,r,"-")}const s=this.safeValue(t,"data",{}),n=this.safeValue(s,"data",s),a=this.parseTicker(n,r),o=a.symbol;this.tickers[o]=a;const h=this.safeString(t,"topic");return void 0!==h&&e.resolve(a,h),t}async watchOHLCV(e,t="1m",i,r,s={}){await this.loadMarkets();const n=await this.negotiate(),a=this.market(e);e=a.symbol;const o=this.timeframes[t],h="/market/candles:"+a.id+"_"+o,c=h,d=await this.subscribe(n,h,c,void 0,e,s);return this.newUpdates&&(r=d.getLimit(e,r)),this.filterBySinceLimit(d,i,r,0,!0)}handleOHLCV(e,t){const i=this.safeValue(t,"data",{}),r=this.safeString(i,"symbol"),s=this.safeValue(i,"candles",[]),n=this.safeString(t,"topic"),a=n.split("_"),o=this.safeString(a,1),c=this.findTimeframe(o),d=this.safeSymbol(r),f=this.market(d);this.ohlcvs[d]=this.safeValue(this.ohlcvs,d,{});let u=this.safeValue(this.ohlcvs[d],c);if(void 0===u){const e=this.safeInteger(this.options,"OHLCVLimit",1e3);u=new h(e),this.ohlcvs[d][c]=u}const l=this.parseOHLCV(s,f);u.append(l),e.resolve(u,n)}async watchTrades(e,t,i,r={}){await this.loadMarkets();const s=await this.negotiate(),n=this.market(e);e=n.symbol;const a="/market/match:"+n.id,o=a,h=await this.subscribe(s,a,o,void 0,e,r);return this.newUpdates&&(i=h.getLimit(e,i)),this.filterBySinceLimit(h,t,i,"timestamp",!0)}handleTrade(e,t){const i=this.safeValue(t,"data",{}),r=this.parseTrade(i),s=this.safeString(t,"topic"),n=r.symbol;let a=this.safeValue(this.trades,n);if(void 0===a){const e=this.safeInteger(this.options,"tradesLimit",1e3);a=new o(e),this.trades[n]=a}return a.append(r),e.resolve(a,s),t}retryFetchOrderBookSnapshot(e,t,i){const r=this.safeString(i,"symbol"),s=this.safeString(i,"messageHash"),a=this.safeValue(this.options,"fetchOrderBookSnapshot",{}),o=this.safeInteger(a,"maxAttempts",3);let h=this.safeInteger(i,"numAttempts",0);if(h<o)s in e.subscriptions&&(h=this.sum(h,1),i.numAttempts=h,e.subscriptions[s]=i,this.spawn(this.fetchOrderBookSnapshot,e,t,i));else{s in e.subscriptions&&(i.fetchingOrderBookSnapshot=!1,i.numAttempts=0,e.subscriptions[s]=i);const t=new n(this.id+" failed to synchronize WebSocket feed with the snapshot for symbol "+r+" in "+o.toString()+" attempts");e.reject(t,s)}}async fetchOrderBookSnapshot(e,t,i){const r=this.safeString(i,"symbol"),s=this.safeInteger(i,"limit"),n=this.safeString(i,"messageHash");try{const a=await this.fetchOrderBook(r,s),o=this.orderbooks[r],h=o.cache,c=this.safeValue(h,0,{}),d=this.safeValue(c,"data",{}),f=this.safeInteger(d,"sequenceStart"),u=this.safeInteger(a,"nonce");if(u<f-1)this.retryFetchOrderBookSnapshot(e,t,i);else{o.reset(a);for(let t=0;t<h.length;t++){const i=h[t];this.handleOrderBookMessage(e,i,o)}this.orderbooks[r]=o,e.resolve(o,n)}}catch(r){r instanceof a?this.retryFetchOrderBookSnapshot(e,t,i):e.reject(r,n)}}handleDelta(e,t,i){const r=this.safeFloat(t,0);if(r>0){if(this.safeInteger(t,2)>i){const i=this.safeFloat(t,1);e.store(r,i)}}}handleDeltas(e,t,i){for(let r=0;r<t.length;r++)this.handleDelta(e,t[r],i)}handleOrderBookMessage(e,t,i){const r=this.safeValue(t,"data",{}),n=this.safeInteger(r,"sequenceEnd");if(n>i.nonce){const e=this.safeInteger(t,"sequenceStart");if(void 0!==e&&e-1>i.nonce)throw new s(this.id+" handleOrderBook received an out-of-order nonce");const a=this.safeValue(r,"changes",{});let o=this.safeValue(a,"asks",[]),h=this.safeValue(a,"bids",[]);o=this.sortBy(o,2),h=this.sortBy(h,2),this.handleDeltas(i.asks,o,i.nonce),this.handleDeltas(i.bids,h,i.nonce),i.nonce=n,i.timestamp=void 0,i.datetime=void 0}return i}handleOrderBook(e,t){const i=this.safeString(t,"topic"),r=this.safeValue(t,"data"),s=this.safeString(r,"symbol"),n=this.safeSymbol(s,void 0,"-"),a=this.orderbooks[n];if(void 0===a.nonce){const r=this.safeValue(e.subscriptions,i);if(void 0===this.safeValue(r,"fetchingOrderBookSnapshot")){r.fetchingOrderBookSnapshot=!0,e.subscriptions[i]=r;const s=this.safeValue(this.options,"fetchOrderBookSnapshot",{}),n=this.safeInteger(s,"delay",this.rateLimit);this.delay(n,this.fetchOrderBookSnapshot,e,t,r)}a.cache.push(t)}else this.handleOrderBookMessage(e,t,a),e.resolve(a,i)}handleOrderBookSubscription(e,t,i){const r=this.safeString(i,"symbol"),s=this.safeString(i,"limit");r in this.orderbooks&&delete this.orderbooks[r],this.orderbooks[r]=this.orderBook({},s)}handleSubscriptionStatus(e,t){const i=this.safeString(t,"id"),r=this.indexBy(e.subscriptions,"id"),s=this.safeValue(r,i,{}),n=this.safeValue(s,"method");return void 0!==n&&n.call(this,e,t,s),t}handleSystemStatus(e,t){return t}async watchOrders(e,t,i,r={}){await this.loadMarkets();const s=await this.negotiate(),n="/spotMarket/tradeOrders";let a=n;if(void 0!==e){const t=this.market(e);e=t.symbol,a=a+":"+t.symbol}const o=await this.subscribe(s,n,a,void 0,void 0,this.extend({privateChannel:!0},r));return this.newUpdates&&(i=o.getLimit(e,i)),this.filterBySymbolSinceLimit(o,e,t,i,!0)}parseWsOrderStatus(e){return this.safeString({open:"open",filled:"closed",match:"open",update:"open",canceled:"canceled"},e,e)}parseWsOrder(e,t){const i=this.safeString(e,"orderId"),r=this.safeString(e,"clientOid"),s=this.safeStringLower(e,"orderType"),n=this.safeString(e,"price"),a=this.safeString(e,"filledSize"),o=this.safeString(e,"size"),h=this.safeString(e,"type"),c=this.parseWsOrderStatus(h),d=this.safeIntegerProduct(e,"orderTime",1e-6),f=this.safeString(e,"symbol"),u=(t=this.safeMarket(f,t)).symbol,l=this.safeStringLower(e,"side");return this.safeOrder({info:e,symbol:u,id:i,clientOrderId:r,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:void 0,type:s,timeInForce:void 0,postOnly:void 0,side:l,price:n,stopPrice:void 0,amount:o,cost:void 0,average:void 0,filled:a,remaining:void 0,status:c,fee:void 0,trades:void 0},t)}handleOrder(e,t){const i="/spotMarket/tradeOrders",r=this.safeValue(t,"data"),s=this.parseWsOrder(r),n=this.safeString(s,"symbol"),a=this.safeString(s,"id");if(void 0!==n){if(void 0===this.orders){const e=this.safeInteger(this.options,"ordersLimit",1e3);this.orders=new c(e)}const t=this.orders,r=this.safeValue(t.hashmap,n,{}),o=this.safeValue(r,a);if(void 0!==o){const e=this.safeValue(o,"stopPrice");void 0!==e&&(s.stopPrice=e),"closed"===o.status&&(s.status="closed")}t.append(s),e.resolve(this.orders,i);const h=i+":"+n;e.resolve(this.orders,h)}}async watchMyTrades(e,t,i,r={}){await this.loadMarkets();const s=await this.negotiate(),n="/spot/tradeFills";let a=n;if(void 0!==e){const t=this.market(e);e=t.symbol,a=a+":"+t.symbol}const o=await this.subscribe(s,n,a,void 0,void 0,this.extend({privateChannel:!0},r));return this.newUpdates&&(i=o.getLimit(e,i)),this.filterBySymbolSinceLimit(o,e,t,i)}handleMyTrade(e,t){let i=this.myTrades;if(void 0===i){const e=this.safeInteger(this.options,"tradesLimit",1e3);i=new c(e)}const r=this.safeValue(t,"data"),s=this.parseWsTrade(r);i.append(s);const n="/spot/tradeFills";e.resolve(i,n);const a=n+":"+s.symbol;e.resolve(i,a)}parseWsTrade(e,t){const i=this.safeString(e,"symbol"),r=(t=this.safeMarket(i,t,"-")).symbol,s=this.safeString(e,"orderType"),n=this.safeString(e,"side"),a=this.safeString(e,"tradeId"),o=this.safeString(e,"price"),h=this.safeString(e,"size"),c=this.safeString(e,"orderId"),d=this.safeIntegerProduct(e,"time",1e-6),f=t.quote,u={cost:void 0,rate:this.safeString(e,"feeRate"),currency:f};return this.safeTrade({info:e,timestamp:d,datetime:this.iso8601(d),symbol:r,id:a,order:c,type:s,takerOrMaker:void 0,side:n,price:o,amount:h,cost:void 0,fee:u},t)}async watchBalance(e={}){await this.loadMarkets();const t=await this.negotiate(),i="/account/balance";return await this.subscribe(t,i,"/account/balance",this.handleBalanceSubscription,void 0,this.extend({privateChannel:!0},e))}handleBalance(e,t){const i=this.safeValue(t,"data",{}),r=this.safeString(t,"topic"),s=this.safeString(i,"currency"),n=this.safeString(i,"relationEvent");let a;if(void 0!==n){const e=n.split(".");a=this.safeString(e,0)}const o=this.safeString2(this.options,"watchBalance","defaultType","trade"),h=this.safeValue(this.options,"accountsByType"),c=this.safeString(h,a,"trade");c in this.balance||(this.balance[c]={});const d=this.safeCurrencyCode(s),f=this.account();f.free=this.safeString(i,"available"),f.used=this.safeString(i,"hold"),f.total=this.safeString(i,"total"),this.balance[c][d]=f,this.balance[c]=this.safeBalance(this.balance[c]),c===o&&e.resolve(this.balance[c],r)}handleBalanceSubscription(e,t,i){this.spawn(this.fetchBalanceSnapshot,e,t)}async fetchBalanceSnapshot(e,t){await this.loadMarkets(),this.checkRequiredCredentials();const i={type:this.safeString2(this.options,"watchBalance","defaultType","spot")},r=await this.fetchBalance(i),s=this.safeValue(r.info,"data",[]);if(s.length>0){const t=this.safeString2(this.options,"watchBalance","defaultType","trade");for(let e=0;e<s.length;e++){const i=s[e],r=this.safeString(i,"type"),n=this.safeValue(this.options,"accountsByType"),a=this.safeString(n,r,"trade");a in this.balance||(this.balance[a]={});const o=this.safeString(i,"currency"),h=this.safeCurrencyCode(o),c=this.account();c.free=this.safeString(i,"available"),c.used=this.safeString(i,"holds"),c.total=this.safeString(i,"total"),this.balance[t][h]=c,this.balance[t]=this.safeBalance(this.balance[t])}e.resolve(this.balance[t],"/account/balance")}}handleSubject(e,t){const i=this.safeString(t,"subject"),r={"trade.l2update":this.handleOrderBook,"trade.ticker":this.handleTicker,"trade.snapshot":this.handleTicker,"trade.l3match":this.handleTrade,"trade.candles.update":this.handleOHLCV,"account.balance":this.handleBalance,"/spot/tradeFills":this.handleMyTrade,orderChange:this.handleOrder},s=this.safeValue(r,i);return void 0===s?t:s.call(this,e,t)}ping(e){return{id:this.requestId().toString(),type:"ping"}}handlePong(e,t){return e.lastPong=this.milliseconds(),t}handleErrorMessage(e,t){return t}handleMessage(e,t){if(this.handleErrorMessage(e,t)){const i=this.safeString(t,"type"),r={welcome:this.handleSystemStatus,ack:this.handleSubscriptionStatus,message:this.handleSubject,pong:this.handlePong},s=this.safeValue(r,i);return void 0===s?t:s.call(this,e,t)}}}},{"./base/Cache":5,ccxt:123,"ccxt/js/base/errors":129}],57:[function(e,t,i){(function(i){"use strict";var r=e("object-assign");
/*!
                     * The buffer module from node.js, for the browser.
                     *
                     * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
                     * @license  MIT
                     */function s(e,t){if(e===t)return 0;for(var i=e.length,r=t.length,s=0,n=Math.min(i,r);s<n;++s)if(e[s]!==t[s]){i=e[s],r=t[s];break}return i<r?-1:r<i?1:0}function n(e){return i.Buffer&&"function"==typeof i.Buffer.isBuffer?i.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var a=e("util/"),o=Object.prototype.hasOwnProperty,h=Array.prototype.slice,c="foo"===function(){}.name;function d(e){return Object.prototype.toString.call(e)}function f(e){return!n(e)&&("function"==typeof i.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var u=t.exports=y,l=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(a.isFunction(e)){if(c)return e.name;var t=e.toString().match(l);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function b(e){if(c||!a.isFunction(e))return a.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,i,r,s){throw new u.AssertionError({message:i,actual:e,expected:t,operator:r,stackStartFunction:s})}function y(e,t){e||g(e,!0,t,"==",u.ok)}function v(e,t,i,r){if(e===t)return!0;if(n(e)&&n(t))return 0===s(e,t);if(a.isDate(e)&&a.isDate(t))return e.getTime()===t.getTime();if(a.isRegExp(e)&&a.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(f(e)&&f(t)&&d(e)===d(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===s(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(n(e)!==n(t))return!1;var o=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,i,r){if(null==e||null==t)return!1;if(a.isPrimitive(e)||a.isPrimitive(t))return e===t;if(i&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var s=w(e),n=w(t);if(s&&!n||!s&&n)return!1;if(s)return v(e=h.call(e),t=h.call(t),i);var o,c,d=k(e),f=k(t);if(d.length!==f.length)return!1;for(d.sort(),f.sort(),c=d.length-1;c>=0;c--)if(d[c]!==f[c])return!1;for(c=d.length-1;c>=0;c--)if(!v(e[o=d[c]],t[o],i,r))return!1;return!0}(e,t,i,r))}return i?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function S(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,i,r){var s;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(r=i,i=null),s=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(i&&i.name?" ("+i.name+").":".")+(r?" "+r:"."),e&&!s&&g(s,i,"Missing expected exception"+r);var n="string"==typeof r,o=!e&&s&&!i;if((!e&&a.isError(s)&&n&&S(s,i)||o)&&g(s,i,"Got unwanted exception"+r),e&&s&&i&&!S(s,i)||!e&&s)throw s}u.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(b(e.actual),128)+" "+e.operator+" "+m(b(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var i=new Error;if(i.stack){var r=i.stack,s=p(t),n=r.indexOf("\n"+s);if(n>=0){var a=r.indexOf("\n",n+1);r=r.substring(a+1)}this.stack=r}}},a.inherits(u.AssertionError,Error),u.fail=g,u.ok=y,u.equal=function(e,t,i){e!=t&&g(e,t,i,"==",u.equal)},u.notEqual=function(e,t,i){e==t&&g(e,t,i,"!=",u.notEqual)},u.deepEqual=function(e,t,i){v(e,t,!1)||g(e,t,i,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(e,t,i){v(e,t,!0)||g(e,t,i,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(e,t,i){v(e,t,!1)&&g(e,t,i,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function e(t,i,r){v(t,i,!0)&&g(t,i,r,"notDeepStrictEqual",e)},u.strictEqual=function(e,t,i){e!==t&&g(e,t,i,"===",u.strictEqual)},u.notStrictEqual=function(e,t,i){e===t&&g(e,t,i,"!==",u.notStrictEqual)},u.throws=function(e,t,i){_(!0,e,t,i)},u.doesNotThrow=function(e,t,i){_(!1,e,t,i)},u.ifError=function(e){if(e)throw e},u.strict=r((function e(t,i){t||g(t,!0,i,"==",e)}),u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var k=Object.keys||function(e){var t=[];for(var i in e)o.call(e,i)&&t.push(i);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":75,"util/":60}],58:[function(e,t,i){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],59:[function(e,t,i){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],60:[function(e,t,i){(function(t,r){var s=/%[sdj%]/g;i.format=function(e){if(!g(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(o(arguments[i]));return t.join(" ")}i=1;for(var r=arguments,n=r.length,a=String(e).replace(s,(function(e){if("%%"===e)return"%";if(i>=n)return e;switch(e){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(e){return"[Circular]"}default:return e}})),h=r[i];i<n;h=r[++i])m(h)||!w(h)?a+=" "+h:a+=" "+o(h);return a},i.deprecate=function(e,s){if(y(r.process))return function(){return i.deprecate(e,s).apply(this,arguments)};if(!0===t.noDeprecation)return e;var n=!1;return function(){if(!n){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),n=!0}return e.apply(this,arguments)}};var n,a={};function o(e,t){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(t)?r.showHidden=t:t&&i._extend(r,t),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=h),d(r,e,r.depth)}function h(e,t){var i=o.styles[t];return i?"["+o.colors[i][0]+"m"+e+"["+o.colors[i][1]+"m":e}function c(e,t){return e}function d(e,t,r){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==i.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(r,e);return g(s)||(s=d(e,s,r)),s}var n=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(g(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(b(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,t);if(n)return n;var a=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),_(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(t);if(0===a.length){if(k(t)){var h=t.name?": "+t.name:"";return e.stylize("[Function"+h+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return f(t)}var c,w="",T=!1,O=["{","}"];(l(t)&&(T=!0,O=["[","]"]),k(t))&&(w=" [Function"+(t.name?": "+t.name:"")+"]");return v(t)&&(w=" "+RegExp.prototype.toString.call(t)),S(t)&&(w=" "+Date.prototype.toUTCString.call(t)),_(t)&&(w=" "+f(t)),0!==a.length||T&&0!=t.length?r<0?v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=T?function(e,t,i,r,s){for(var n=[],a=0,o=t.length;a<o;++a)M(t,String(a))?n.push(u(e,t,i,r,String(a),!0)):n.push("");return s.forEach((function(s){s.match(/^\d+$/)||n.push(u(e,t,i,r,s,!0))})),n}(e,t,r,o,a):a.map((function(i){return u(e,t,r,o,i,T)})),e.seen.pop(),function(e,t,i){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(c,w,O)):O[0]+w+O[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,i,r,s,n){var a,o,h;if((h=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]}).get?o=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(o=e.stylize("[Setter]","special")),M(r,s)||(a="["+s+"]"),o||(e.seen.indexOf(h.value)<0?(o=m(i)?d(e,h.value,null):d(e,h.value,i-1)).indexOf("\n")>-1&&(o=n?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(a)){if(n&&s.match(/^\d+$/))return o;(a=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+o}function l(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function m(e){return null===e}function b(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return w(e)&&"[object RegExp]"===T(e)}function w(e){return"object"==typeof e&&null!==e}function S(e){return w(e)&&"[object Date]"===T(e)}function _(e){return w(e)&&("[object Error]"===T(e)||e instanceof Error)}function k(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}i.debuglog=function(e){if(y(n)&&(n=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;a[e]=function(){var t=i.format.apply(i,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},i.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=l,i.isBoolean=p,i.isNull=m,i.isNullOrUndefined=function(e){return null==e},i.isNumber=b,i.isString=g,i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=y,i.isRegExp=v,i.isObject=w,i.isDate=S,i.isError=_,i.isFunction=k,i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},i.isBuffer=e("./support/isBuffer");var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),x[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.log=function(){console.log("%s - %s",A(),i.format.apply(i,arguments))},i.inherits=e("inherits"),i._extend=function(e,t){if(!t||!w(t))return e;for(var i=Object.keys(t),r=i.length;r--;)e[i[r]]=t[i[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":59,_process:88,inherits:58}],61:[function(e,t,i){"use strict";i.byteLength=function(e){var t=c(e),i=t[0],r=t[1];return 3*(i+r)/4-r},i.toByteArray=function(e){var t,i,r=c(e),a=r[0],o=r[1],h=new n(function(e,t,i){return 3*(t+i)/4-i}(0,a,o)),d=0,f=o>0?a-4:a;for(i=0;i<f;i+=4)t=s[e.charCodeAt(i)]<<18|s[e.charCodeAt(i+1)]<<12|s[e.charCodeAt(i+2)]<<6|s[e.charCodeAt(i+3)],h[d++]=t>>16&255,h[d++]=t>>8&255,h[d++]=255&t;2===o&&(t=s[e.charCodeAt(i)]<<2|s[e.charCodeAt(i+1)]>>4,h[d++]=255&t);1===o&&(t=s[e.charCodeAt(i)]<<10|s[e.charCodeAt(i+1)]<<4|s[e.charCodeAt(i+2)]>>2,h[d++]=t>>8&255,h[d++]=255&t);return h},i.fromByteArray=function(e){for(var t,i=e.length,s=i%3,n=[],a=16383,o=0,h=i-s;o<h;o+=a)n.push(d(e,o,o+a>h?h:o+a));1===s?(t=e[i-1],n.push(r[t>>2]+r[t<<4&63]+"==")):2===s&&(t=(e[i-2]<<8)+e[i-1],n.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return n.join("")};for(var r=[],s=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,h=a.length;o<h;++o)r[o]=a[o],s[a.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function d(e,t,i){for(var s,n,a=[],o=t;o<i;o+=3)s=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[(n=s)>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return a.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},{}],62:[function(e,t,i){},{}],63:[function(e,t,i){(function(t,r){"use strict";var s=e("assert"),n=e("pako/lib/zlib/zstream"),a=e("pako/lib/zlib/deflate.js"),o=e("pako/lib/zlib/inflate.js"),h=e("pako/lib/zlib/constants");for(var c in h)i[c]=h[c];i.NONE=0,i.DEFLATE=1,i.INFLATE=2,i.GZIP=3,i.GUNZIP=4,i.DEFLATERAW=5,i.INFLATERAW=6,i.UNZIP=7;function d(e){if("number"!=typeof e||e<i.DEFLATE||e>i.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,s(this.init_done,"close before init"),s(this.mode<=i.UNZIP),this.mode===i.DEFLATE||this.mode===i.GZIP||this.mode===i.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==i.INFLATE&&this.mode!==i.GUNZIP&&this.mode!==i.INFLATERAW&&this.mode!==i.UNZIP||o.inflateEnd(this.strm),this.mode=i.NONE,this.dictionary=null)},d.prototype.write=function(e,t,i,r,s,n,a){return this._write(!0,e,t,i,r,s,n,a)},d.prototype.writeSync=function(e,t,i,r,s,n,a){return this._write(!1,e,t,i,r,s,n,a)},d.prototype._write=function(e,n,a,o,h,c,d,f){if(s.equal(arguments.length,8),s(this.init_done,"write before init"),s(this.mode!==i.NONE,"already finalized"),s.equal(!1,this.write_in_progress,"write already in progress"),s.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,s.equal(!1,void 0===n,"must provide flush value"),this.write_in_progress=!0,n!==i.Z_NO_FLUSH&&n!==i.Z_PARTIAL_FLUSH&&n!==i.Z_SYNC_FLUSH&&n!==i.Z_FULL_FLUSH&&n!==i.Z_FINISH&&n!==i.Z_BLOCK)throw new Error("Invalid flush value");if(null==a&&(a=r.alloc(0),h=0,o=0),this.strm.avail_in=h,this.strm.input=a,this.strm.next_in=o,this.strm.avail_out=f,this.strm.output=c,this.strm.next_out=d,this.flush=n,!e)return this._process(),this._checkError()?this._afterSync():void 0;var u=this;return t.nextTick((function(){u._process(),u._after()})),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case i.DEFLATE:case i.GZIP:case i.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case i.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=i.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=i.GUNZIP):this.mode=i.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case i.INFLATE:case i.GUNZIP:case i.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===i.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===i.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===i.Z_DATA_ERROR&&(this.err=i.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===i.GUNZIP&&this.err===i.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case i.Z_OK:case i.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===i.Z_FINISH)return this._error("unexpected end of file"),!1;break;case i.Z_STREAM_END:break;case i.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,t,r,n,a){s(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),s(e>=8&&e<=15,"invalid windowBits"),s(t>=-1&&t<=9,"invalid compression level"),s(r>=1&&r<=9,"invalid memlevel"),s(n===i.Z_FILTERED||n===i.Z_HUFFMAN_ONLY||n===i.Z_RLE||n===i.Z_FIXED||n===i.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(t,e,r,n,a),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,t,r,s,h){switch(this.level=e,this.windowBits=t,this.memLevel=r,this.strategy=s,this.flush=i.Z_NO_FLUSH,this.err=i.Z_OK,this.mode!==i.GZIP&&this.mode!==i.GUNZIP||(this.windowBits+=16),this.mode===i.UNZIP&&(this.windowBits+=32),this.mode!==i.DEFLATERAW&&this.mode!==i.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new n,this.mode){case i.DEFLATE:case i.GZIP:case i.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,i.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case i.INFLATE:case i.GUNZIP:case i.INFLATERAW:case i.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==i.Z_OK&&this._error("Init error"),this.dictionary=h,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=i.Z_OK,this.mode){case i.DEFLATE:case i.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==i.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=i.Z_OK,this.mode){case i.DEFLATE:case i.DEFLATERAW:case i.GZIP:this.err=a.deflateReset(this.strm);break;case i.INFLATE:case i.INFLATERAW:case i.GUNZIP:this.err=o.inflateReset(this.strm)}this.err!==i.Z_OK&&this._error("Failed to reset stream")},i.Zlib=d}).call(this,e("_process"),e("buffer").Buffer)},{_process:88,assert:57,buffer:65,"pako/lib/zlib/constants":78,"pako/lib/zlib/deflate.js":80,"pako/lib/zlib/inflate.js":82,"pako/lib/zlib/zstream":86}],64:[function(e,t,i){(function(t){"use strict";var r=e("buffer").Buffer,s=e("stream").Transform,n=e("./binding"),a=e("util"),o=e("assert").ok,h=e("buffer").kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+h.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16384,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(n),f=0;f<d.length;f++){var u=d[f];u.match(/^Z/)&&Object.defineProperty(i,u,{enumerable:!0,value:n[u],writable:!1})}for(var l={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},p=Object.keys(l),m=0;m<p.length;m++){var b=p[m];l[l[b]]=b}function g(e,t,i){var s=[],n=0;function a(){for(var t;null!==(t=e.read());)s.push(t),n+=t.length;e.once("readable",a)}function o(){var t,a=null;n>=h?a=new RangeError(c):t=r.concat(s,n),s=[],e.close(),i(a,t)}e.on("error",(function(t){e.removeListener("end",o),e.removeListener("readable",a),i(t)})),e.on("end",o),e.end(t),a()}function y(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Not a string or buffer");var i=e._finishFlushFlag;return e._processChunk(t,i)}function v(e){if(!(this instanceof v))return new v(e);A.call(this,e,n.DEFLATE)}function w(e){if(!(this instanceof w))return new w(e);A.call(this,e,n.INFLATE)}function S(e){if(!(this instanceof S))return new S(e);A.call(this,e,n.GZIP)}function _(e){if(!(this instanceof _))return new _(e);A.call(this,e,n.GUNZIP)}function k(e){if(!(this instanceof k))return new k(e);A.call(this,e,n.DEFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);A.call(this,e,n.INFLATERAW)}function O(e){if(!(this instanceof O))return new O(e);A.call(this,e,n.UNZIP)}function x(e){return e===n.Z_NO_FLUSH||e===n.Z_PARTIAL_FLUSH||e===n.Z_SYNC_FLUSH||e===n.Z_FULL_FLUSH||e===n.Z_FINISH||e===n.Z_BLOCK}function A(e,t){var a=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||i.Z_DEFAULT_CHUNK,s.call(this,e),e.flush&&!x(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!x(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||n.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:n.Z_FINISH,e.chunkSize&&(e.chunkSize<i.Z_MIN_CHUNK||e.chunkSize>i.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<i.Z_MIN_WINDOWBITS||e.windowBits>i.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<i.Z_MIN_LEVEL||e.level>i.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<i.Z_MIN_MEMLEVEL||e.memLevel>i.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=i.Z_FILTERED&&e.strategy!=i.Z_HUFFMAN_ONLY&&e.strategy!=i.Z_RLE&&e.strategy!=i.Z_FIXED&&e.strategy!=i.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib(t);var o=this;this._hadError=!1,this._handle.onerror=function(e,t){M(o),o._hadError=!0;var r=new Error(e);r.errno=t,r.code=i.codes[t],o.emit("error",r)};var h=i.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(h=e.level);var c=i.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(c=e.strategy),this._handle.init(e.windowBits||i.Z_DEFAULT_WINDOWBITS,h,e.memLevel||i.Z_DEFAULT_MEMLEVEL,c,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=h,this._strategy=c,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function M(e,i){i&&t.nextTick(i),e._handle&&(e._handle.close(),e._handle=null)}function E(e){e.emit("close")}Object.defineProperty(i,"codes",{enumerable:!0,value:Object.freeze(l),writable:!1}),i.Deflate=v,i.Inflate=w,i.Gzip=S,i.Gunzip=_,i.DeflateRaw=k,i.InflateRaw=T,i.Unzip=O,i.createDeflate=function(e){return new v(e)},i.createInflate=function(e){return new w(e)},i.createDeflateRaw=function(e){return new k(e)},i.createInflateRaw=function(e){return new T(e)},i.createGzip=function(e){return new S(e)},i.createGunzip=function(e){return new _(e)},i.createUnzip=function(e){return new O(e)},i.deflate=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new v(t),e,i)},i.deflateSync=function(e,t){return y(new v(t),e)},i.gzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new S(t),e,i)},i.gzipSync=function(e,t){return y(new S(t),e)},i.deflateRaw=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new k(t),e,i)},i.deflateRawSync=function(e,t){return y(new k(t),e)},i.unzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new O(t),e,i)},i.unzipSync=function(e,t){return y(new O(t),e)},i.inflate=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new w(t),e,i)},i.inflateSync=function(e,t){return y(new w(t),e)},i.gunzip=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new _(t),e,i)},i.gunzipSync=function(e,t){return y(new _(t),e)},i.inflateRaw=function(e,t,i){return"function"==typeof t&&(i=t,t={}),g(new T(t),e,i)},i.inflateRawSync=function(e,t){return y(new T(t),e)},a.inherits(A,s),A.prototype.params=function(e,r,s){if(e<i.Z_MIN_LEVEL||e>i.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(r!=i.Z_FILTERED&&r!=i.Z_HUFFMAN_ONLY&&r!=i.Z_RLE&&r!=i.Z_FIXED&&r!=i.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==e||this._strategy!==r){var a=this;this.flush(n.Z_SYNC_FLUSH,(function(){o(a._handle,"zlib binding closed"),a._handle.params(e,r),a._hadError||(a._level=e,a._strategy=r,s&&s())}))}else t.nextTick(s)},A.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},A.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},A.prototype.flush=function(e,i){var s=this,a=this._writableState;("function"==typeof e||void 0===e&&!i)&&(i=e,e=n.Z_FULL_FLUSH),a.ended?i&&t.nextTick(i):a.ending?i&&this.once("end",i):a.needDrain?i&&this.once("drain",(function(){return s.flush(e,i)})):(this._flushFlag=e,this.write(r.alloc(0),"",i))},A.prototype.close=function(e){M(this,e),t.nextTick(E,this)},A.prototype._transform=function(e,t,i){var s,a=this._writableState,o=(a.ending||a.ended)&&(!e||a.length===e.length);return null===e||r.isBuffer(e)?this._handle?(o?s=this._finishFlushFlag:(s=this._flushFlag,e.length>=a.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),void this._processChunk(e,s,i)):i(new Error("zlib binding closed")):i(new Error("invalid input"))},A.prototype._processChunk=function(e,t,i){var s=e&&e.length,n=this._chunkSize-this._offset,a=0,d=this,f="function"==typeof i;if(!f){var u,l=[],p=0;this.on("error",(function(e){u=e})),o(this._handle,"zlib binding closed");do{var m=this._handle.writeSync(t,e,a,s,this._buffer,this._offset,n)}while(!this._hadError&&y(m[0],m[1]));if(this._hadError)throw u;if(p>=h)throw M(this),new RangeError(c);var b=r.concat(l,p);return M(this),b}o(this._handle,"zlib binding closed");var g=this._handle.write(t,e,a,s,this._buffer,this._offset,n);function y(h,c){if(this&&(this.buffer=null,this.callback=null),!d._hadError){var u=n-c;if(o(u>=0,"have should not go down"),u>0){var m=d._buffer.slice(d._offset,d._offset+u);d._offset+=u,f?d.push(m):(l.push(m),p+=m.length)}if((0===c||d._offset>=d._chunkSize)&&(n=d._chunkSize,d._offset=0,d._buffer=r.allocUnsafe(d._chunkSize)),0===c){if(a+=s-h,s=h,!f)return!0;var b=d._handle.write(t,e,a,s,d._buffer,d._offset,d._chunkSize);return b.callback=y,void(b.buffer=e)}if(!f)return!1;i()}}g.buffer=e,g.callback=y},a.inherits(v,A),a.inherits(w,A),a.inherits(S,A),a.inherits(_,A),a.inherits(k,A),a.inherits(T,A),a.inherits(O,A)}).call(this,e("_process"))},{"./binding":63,_process:88,assert:57,buffer:65,stream:108,util:120}],65:[function(e,t,i){(function(t){
/*!
                     * The buffer module from node.js, for the browser.
                     *
                     * @author   Feross Aboukhadijeh <https://feross.org>
                     * @license  MIT
                     */
"use strict";var r=e("base64-js"),s=e("ieee754"),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=t,i.SlowBuffer=function(e){+e!=e&&(e=0);return t.alloc(+e)},i.INSPECT_MAX_BYTES=50;var a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=new Uint8Array(e);return Object.setPrototypeOf(i,t.prototype),i}function t(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return h(e,t,i)}function h(e,i,r){if("string"==typeof e)return function(e,i){"string"==typeof i&&""!==i||(i="utf8");if(!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var r=0|l(e,i),s=o(r),n=s.write(e,i);n!==r&&(s=s.slice(0,n));return s}(e,i);if(ArrayBuffer.isView(e))return f(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return function(e,i,r){if(i<0||e.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<i+(r||0))throw new RangeError('"length" is outside of buffer bounds');var s;s=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r);return Object.setPrototypeOf(s,t.prototype),s}(e,i,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return t.from(s,i,r);var n=function(e){if(t.isBuffer(e)){var i=0|u(e.length),r=o(i);return 0===r.length||e.copy(r,0,0,i),r}if(void 0!==e.length)return"number"!=typeof e.length||z(e.length)?o(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),i,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),o(e<0?0:0|u(e))}function f(e){for(var t=e.length<0?0:0|u(e.length),i=o(t),r=0;r<t;r+=1)i[r]=255&e[r];return i}function u(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function l(e,i){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,s=arguments.length>2&&!0===arguments[2];if(!s&&0===r)return 0;for(var n=!1;;)switch(i){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(n)return s?-1:D(e).length;i=(""+i).toLowerCase(),n=!0}}function p(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,i);case"utf8":case"utf-8":return O(this,t,i);case"ascii":return A(this,t,i);case"latin1":case"binary":return M(this,t,i);case"base64":return T(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function b(e,i,r,s,n){if(0===e.length)return-1;if("string"==typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),z(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof i&&(i=t.from(i,s)),t.isBuffer(i))return 0===i.length?-1:g(e,i,r,s,n);if("number"==typeof i)return i&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,i,r):Uint8Array.prototype.lastIndexOf.call(e,i,r):g(e,[i],r,s,n);throw new TypeError("val must be string, number or Buffer")}function g(e,t,i,r,s){var n,a=1,o=e.length,h=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,h/=2,i/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){var d=-1;for(n=i;n<o;n++)if(c(e,n)===c(t,-1===d?0:n-d)){if(-1===d&&(d=n),n-d+1===h)return d*a}else-1!==d&&(n-=n-d),d=-1}else for(i+h>o&&(i=o-h),n=i;n>=0;n--){for(var f=!0,u=0;u<h;u++)if(c(e,n+u)!==c(t,u)){f=!1;break}if(f)return n}return-1}function y(e,t,i,r){i=Number(i)||0;var s=e.length-i;r?(r=Number(r))>s&&(r=s):r=s;var n=t.length;r>n/2&&(r=n/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(z(o))return a;e[i+a]=o}return a}function v(e,t,i,r){return F(D(t,e.length-i),e,i,r)}function w(e,t,i,r){return F(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function S(e,t,i,r){return w(e,t,i,r)}function _(e,t,i,r){return F(j(t),e,i,r)}function k(e,t,i,r){return F(function(e,t){for(var i,r,s,n=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(i=e.charCodeAt(a))>>8,s=i%256,n.push(s),n.push(r);return n}(t,e.length-i),e,i,r)}function T(e,t,i){return 0===t&&i===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,i))}function O(e,t,i){i=Math.min(e.length,i);for(var r=[],s=t;s<i;){var n,a,o,h,c=e[s],d=null,f=c>239?4:c>223?3:c>191?2:1;if(s+f<=i)switch(f){case 1:c<128&&(d=c);break;case 2:128==(192&(n=e[s+1]))&&(h=(31&c)<<6|63&n)>127&&(d=h);break;case 3:n=e[s+1],a=e[s+2],128==(192&n)&&128==(192&a)&&(h=(15&c)<<12|(63&n)<<6|63&a)>2047&&(h<55296||h>57343)&&(d=h);break;case 4:n=e[s+1],a=e[s+2],o=e[s+3],128==(192&n)&&128==(192&a)&&128==(192&o)&&(h=(15&c)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&h<1114112&&(d=h)}null===d?(d=65533,f=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),s+=f}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var i="",r=0;for(;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=x));return i}(r)}i.kMaxLength=a,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,i){return h(e,t,i)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,i){return function(e,t,i){return c(e),e<=0?o(e):void 0!==t?"string"==typeof i?o(e).fill(t,i):o(e).fill(t):o(e)}(e,t,i)},t.allocUnsafe=function(e){return d(e)},t.allocUnsafeSlow=function(e){return d(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,i){if(V(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),V(i,Uint8Array)&&(i=t.from(i,i.offset,i.byteLength)),!t.isBuffer(e)||!t.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===i)return 0;for(var r=e.length,s=i.length,n=0,a=Math.min(r,s);n<a;++n)if(e[n]!==i[n]){r=e[n],s=i[n];break}return r<s?-1:s<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,i){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===i)for(i=0,r=0;r<e.length;++r)i+=e[r].length;var s=t.allocUnsafe(i),n=0;for(r=0;r<e.length;++r){var a=e[r];if(V(a,Uint8Array)&&(a=t.from(a)),!t.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(s,n),n+=a.length}return s},t.byteLength=l,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):p.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},n&&(t.prototype[n]=t.prototype.inspect),t.prototype.compare=function(e,i,r,s,n){if(V(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===i&&(i=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),i<0||r>e.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&i>=r)return 0;if(s>=n)return-1;if(i>=r)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(s>>>=0),o=(r>>>=0)-(i>>>=0),h=Math.min(a,o),c=this.slice(s,n),d=e.slice(i,r),f=0;f<h;++f)if(c[f]!==d[f]){a=c[f],o=d[f];break}return a<o?-1:o<a?1:0},t.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},t.prototype.indexOf=function(e,t,i){return b(this,e,t,i,!0)},t.prototype.lastIndexOf=function(e,t,i){return b(this,e,t,i,!1)},t.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var n=!1;;)switch(r){case"hex":return y(this,e,t,i);case"utf8":case"utf-8":return v(this,e,t,i);case"ascii":return w(this,e,t,i);case"latin1":case"binary":return S(this,e,t,i);case"base64":return _(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,i);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),n=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function A(e,t,i){var r="";i=Math.min(e.length,i);for(var s=t;s<i;++s)r+=String.fromCharCode(127&e[s]);return r}function M(e,t,i){var r="";i=Math.min(e.length,i);for(var s=t;s<i;++s)r+=String.fromCharCode(e[s]);return r}function E(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var s="",n=t;n<i;++n)s+=q[e[n]];return s}function I(e,t,i){for(var r=e.slice(t,i),s="",n=0;n<r.length;n+=2)s+=String.fromCharCode(r[n]+256*r[n+1]);return s}function B(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function N(e,i,r,s,n,a){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i>n||i<a)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function P(e,t,i,r,s,n){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function R(e,t,i,r,n){return t=+t,i>>>=0,n||P(e,0,i,4),s.write(e,t,i,r,23,4),i+4}function C(e,t,i,r,n){return t=+t,i>>>=0,n||P(e,0,i,8),s.write(e,t,i,r,52,8),i+8}t.prototype.slice=function(e,i){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(i=void 0===i?r:~~i)<0?(i+=r)<0&&(i=0):i>r&&(i=r),i<e&&(i=e);var s=this.subarray(e,i);return Object.setPrototypeOf(s,t.prototype),s},t.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||B(e,t,this.length);for(var r=this[e],s=1,n=0;++n<t&&(s*=256);)r+=this[e+n]*s;return r},t.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||B(e,t,this.length);for(var r=this[e+--t],s=1;t>0&&(s*=256);)r+=this[e+--t]*s;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||B(e,t,this.length);for(var r=this[e],s=1,n=0;++n<t&&(s*=256);)r+=this[e+n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||B(e,t,this.length);for(var r=t,s=1,n=this[e+--r];r>0&&(s*=256);)n+=this[e+--r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},t.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),s.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),s.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),s.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),s.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,i,r){(e=+e,t>>>=0,i>>>=0,r)||N(this,e,t,i,Math.pow(2,8*i)-1,0);var s=1,n=0;for(this[t]=255&e;++n<i&&(s*=256);)this[t+n]=e/s&255;return t+i},t.prototype.writeUIntBE=function(e,t,i,r){(e=+e,t>>>=0,i>>>=0,r)||N(this,e,t,i,Math.pow(2,8*i)-1,0);var s=i-1,n=1;for(this[t+s]=255&e;--s>=0&&(n*=256);)this[t+s]=e/n&255;return t+i},t.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*i-1);N(this,e,t,i,s-1,-s)}var n=0,a=1,o=0;for(this[t]=255&e;++n<i&&(a*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/a>>0)-o&255;return t+i},t.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var s=Math.pow(2,8*i-1);N(this,e,t,i,s-1,-s)}var n=i-1,a=1,o=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/a>>0)-o&255;return t+i},t.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,i){return R(this,e,t,!0,i)},t.prototype.writeFloatBE=function(e,t,i){return R(this,e,t,!1,i)},t.prototype.writeDoubleLE=function(e,t,i){return C(this,e,t,!0,i)},t.prototype.writeDoubleBE=function(e,t,i){return C(this,e,t,!1,i)},t.prototype.copy=function(e,i,r,s){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),s||0===s||(s=this.length),i>=e.length&&(i=e.length),i||(i=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-i<s-r&&(s=e.length-i+r);var n=s-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(i,r,s);else if(this===e&&r<i&&i<s)for(var a=n-1;a>=0;--a)e[a+i]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,s),i);return n},t.prototype.fill=function(e,i,r,s){if("string"==typeof e){if("string"==typeof i?(s=i,i=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!t.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(1===e.length){var n=e.charCodeAt(0);("utf8"===s&&n<128||"latin1"===s)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(i<0||this.length<i||this.length<r)throw new RangeError("Out of range index");if(r<=i)return this;var a;if(i>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=i;a<r;++a)this[a]=e;else{var o=t.isBuffer(e)?e:t.from(e,s),h=o.length;if(0===h)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-i;++a)this[a+i]=o[a%h]}return this};var L=/[^+/0-9A-Za-z-_]/g;function D(e,t){var i;t=t||1/0;for(var r=e.length,s=null,n=[],a=0;a<r;++a){if((i=e.charCodeAt(a))>55295&&i<57344){if(!s){if(i>56319){(t-=3)>-1&&n.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&n.push(239,191,189);continue}s=i;continue}if(i<56320){(t-=3)>-1&&n.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,i<128){if((t-=1)<0)break;n.push(i)}else if(i<2048){if((t-=2)<0)break;n.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;n.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return n}function j(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,i,r){for(var s=0;s<r&&!(s+i>=t.length||s>=e.length);++s)t[s+i]=e[s];return s}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function z(e){return e!=e}var q=function(){for(var e="0123456789abcdef",t=new Array(256),i=0;i<16;++i)for(var r=16*i,s=0;s<16;++s)t[r+s]=e[i]+e[s];return t}()}).call(this,e("buffer").Buffer)},{"base64-js":61,buffer:65,ieee754:71}],66:[function(e,t,i){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],67:[function(e,t,i){t.exports={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:512,O_EXCL:2048,O_NOCTTY:131072,O_TRUNC:1024,O_APPEND:8,O_DIRECTORY:1048576,O_NOFOLLOW:256,O_SYNC:128,O_SYMLINK:2097152,O_NONBLOCK:4,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,E2BIG:7,EACCES:13,EADDRINUSE:48,EADDRNOTAVAIL:49,EAFNOSUPPORT:47,EAGAIN:35,EALREADY:37,EBADF:9,EBADMSG:94,EBUSY:16,ECANCELED:89,ECHILD:10,ECONNABORTED:53,ECONNREFUSED:61,ECONNRESET:54,EDEADLK:11,EDESTADDRREQ:39,EDOM:33,EDQUOT:69,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:65,EIDRM:90,EILSEQ:92,EINPROGRESS:36,EINTR:4,EINVAL:22,EIO:5,EISCONN:56,EISDIR:21,ELOOP:62,EMFILE:24,EMLINK:31,EMSGSIZE:40,EMULTIHOP:95,ENAMETOOLONG:63,ENETDOWN:50,ENETRESET:52,ENETUNREACH:51,ENFILE:23,ENOBUFS:55,ENODATA:96,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:77,ENOLINK:97,ENOMEM:12,ENOMSG:91,ENOPROTOOPT:42,ENOSPC:28,ENOSR:98,ENOSTR:99,ENOSYS:78,ENOTCONN:57,ENOTDIR:20,ENOTEMPTY:66,ENOTSOCK:38,ENOTSUP:45,ENOTTY:25,ENXIO:6,EOPNOTSUPP:102,EOVERFLOW:84,EPERM:1,EPIPE:32,EPROTO:100,EPROTONOSUPPORT:43,EPROTOTYPE:41,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:70,ETIME:101,ETIMEDOUT:60,ETXTBSY:26,EWOULDBLOCK:35,EXDEV:18,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:10,SIGFPE:8,SIGKILL:9,SIGUSR1:30,SIGSEGV:11,SIGUSR2:31,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:20,SIGCONT:19,SIGSTOP:17,SIGTSTP:18,SIGTTIN:21,SIGTTOU:22,SIGURG:16,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:23,SIGSYS:12,SSL_OP_ALL:2147486719,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:32,SSL_OP_MICROSOFT_SESS_ID_BUG:1,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:536870912,SSL_OP_NETSCAPE_CHALLENGE_BUG:2,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:1073741824,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:8,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:16777216,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_SINGLE_DH_USE:1048576,SSL_OP_SINGLE_ECDH_USE:524288,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:128,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:512,SSL_OP_TLS_D5_BUG:256,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_ECDH:16,ENGINE_METHOD_ECDSA:32,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_STORE:256,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_UDP_REUSEADDR:4}},{}],68:[function(e,t,i){(function(e){function t(e){return Object.prototype.toString.call(e)}i.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},i.isBoolean=function(e){return"boolean"==typeof e},i.isNull=function(e){return null===e},i.isNullOrUndefined=function(e){return null==e},i.isNumber=function(e){return"number"==typeof e},i.isString=function(e){return"string"==typeof e},i.isSymbol=function(e){return"symbol"==typeof e},i.isUndefined=function(e){return void 0===e},i.isRegExp=function(e){return"[object RegExp]"===t(e)},i.isObject=function(e){return"object"==typeof e&&null!==e},i.isDate=function(e){return"[object Date]"===t(e)},i.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},i.isFunction=function(e){return"function"==typeof e},i.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},i.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":73}],69:[function(e,t,i){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function n(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,i,r,o,h,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(a(i=this._events[e]))return!1;if(s(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),i.apply(this,o)}else if(n(i))for(o=Array.prototype.slice.call(arguments,1),r=(c=i.slice()).length,h=0;h<r;h++)c[h].apply(this,o);return!0},r.prototype.addListener=function(e,t){var i;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var i=!1;function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var i,r,a,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(i=this._events[e]).length,r=-1,i===t||s(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(i)){for(o=a;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){r=o;break}if(r<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(i=this._events[e]))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],70:[function(e,t,i){var r=e("http"),s=e("url"),n=t.exports;for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a]);function o(e){if("string"==typeof e&&(e=s.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}n.request=function(e,t){return e=o(e),r.request.call(this,e,t)},n.get=function(e,t){return e=o(e),r.get.call(this,e,t)}},{http:109,url:115}],71:[function(e,t,i){i.read=function(e,t,i,r,s){var n,a,o=8*s-r-1,h=(1<<o)-1,c=h>>1,d=-7,f=i?s-1:0,u=i?-1:1,l=e[t+f];for(f+=u,n=l&(1<<-d)-1,l>>=-d,d+=o;d>0;n=256*n+e[t+f],f+=u,d-=8);for(a=n&(1<<-d)-1,n>>=-d,d+=r;d>0;a=256*a+e[t+f],f+=u,d-=8);if(0===n)n=1-c;else{if(n===h)return a?NaN:1/0*(l?-1:1);a+=Math.pow(2,r),n-=c}return(l?-1:1)*a*Math.pow(2,n-r)},i.write=function(e,t,i,r,s,n){var a,o,h,c=8*n-s-1,d=(1<<c)-1,f=d>>1,u=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:n-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),(t+=a+f>=1?u/h:u*Math.pow(2,1-f))*h>=2&&(a++,h/=2),a+f>=d?(o=0,a=d):a+f>=1?(o=(t*h-1)*Math.pow(2,s),a+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[i+l]=255&o,l+=p,o/=256,s-=8);for(a=a<<s|o,c+=s;c>0;e[i+l]=255&a,l+=p,a/=256,c-=8);e[i+l-p]|=128*m}},{}],72:[function(e,t,i){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}},{}],73:[function(e,t,i){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
                 * Determine if an object is a Buffer
                 *
                 * @author   Feross Aboukhadijeh <https://feross.org>
                 * @license  MIT
                 */
t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],74:[function(e,t,i){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],75:[function(e,t,i){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,o,h=a(e),c=1;c<arguments.length;c++){for(var d in i=Object(arguments[c]))s.call(i,d)&&(h[d]=i[d]);if(r){o=r(i);for(var f=0;f<o.length;f++)n.call(i,o[f])&&(h[o[f]]=i[o[f]])}}return h}},{}],76:[function(e,t,i){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)s(i,r)&&(e[r]=i[r])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var n={arraySet:function(e,t,i,r,s){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+r),s);else for(var n=0;n<r;n++)e[s+n]=t[i+n]},flattenChunks:function(e){var t,i,r,s,n,a;for(r=0,t=0,i=e.length;t<i;t++)r+=e[t].length;for(a=new Uint8Array(r),s=0,t=0,i=e.length;t<i;t++)n=e[t],a.set(n,s),s+=n.length;return a}},a={arraySet:function(e,t,i,r,s){for(var n=0;n<r;n++)e[s+n]=t[i+n]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,n)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(r)},{}],77:[function(e,t,i){"use strict";t.exports=function(e,t,i,r){for(var s=65535&e|0,n=e>>>16&65535|0,a=0;0!==i;){i-=a=i>2e3?2e3:i;do{n=n+(s=s+t[r++]|0)|0}while(--a);s%=65521,n%=65521}return s|n<<16|0}},{}],78:[function(e,t,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],79:[function(e,t,i){"use strict";var r=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,s){var n=r,a=s+i;e^=-1;for(var o=s;o<a;o++)e=e>>>8^n[255&(e^t[o])];return-1^e}},{}],80:[function(e,t,i){"use strict";var r,s=e("../utils/common"),n=e("./trees"),a=e("./adler32"),o=e("./crc32"),h=e("./messages"),c=-2,d=258,f=262,u=103,l=113,p=666;function m(e,t){return e.msg=h[t],t}function b(e){return(e<<1)-(e>4?9:0)}function g(e){for(var t=e.length;--t>=0;)e[t]=0}function y(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(s.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function v(e,t){n._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,y(e.strm)}function w(e,t){e.pending_buf[e.pending++]=t}function S(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function _(e,t){var i,r,s=e.max_chain_length,n=e.strstart,a=e.prev_length,o=e.nice_match,h=e.strstart>e.w_size-f?e.strstart-(e.w_size-f):0,c=e.window,u=e.w_mask,l=e.prev,p=e.strstart+d,m=c[n+a-1],b=c[n+a];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(i=t)+a]===b&&c[i+a-1]===m&&c[i]===c[n]&&c[++i]===c[n+1]){n+=2,i++;do{}while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<p);if(r=d-(p-n),n=p-d,r>a){if(e.match_start=t,a=r,r>=o)break;m=c[n+a-1],b=c[n+a]}}}while((t=l[t&u])>h&&0!=--s);return a<=e.lookahead?a:e.lookahead}function k(e){var t,i,r,n,h,c,d,u,l,p,m=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-f)){s.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=i=e.hash_size;do{r=e.head[--t],e.head[t]=r>=m?r-m:0}while(--i);t=i=m;do{r=e.prev[--t],e.prev[t]=r>=m?r-m:0}while(--i);n+=m}if(0===e.strm.avail_in)break;if(c=e.strm,d=e.window,u=e.strstart+e.lookahead,l=n,p=void 0,(p=c.avail_in)>l&&(p=l),i=0===p?0:(c.avail_in-=p,s.arraySet(d,c.input,c.next_in,p,u),1===c.state.wrap?c.adler=a(c.adler,d,p,u):2===c.state.wrap&&(c.adler=o(c.adler,d,p,u)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=i,e.lookahead+e.insert>=3)for(h=e.strstart-e.insert,e.ins_h=e.window[h],e.ins_h=(e.ins_h<<e.hash_shift^e.window[h+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[h+3-1])&e.hash_mask,e.prev[h&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=h,h++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<f&&0!==e.strm.avail_in)}function T(e,t){for(var i,r;;){if(e.lookahead<f){if(k(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-f&&(e.match_length=_(e,i)),e.match_length>=3)if(r=n._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function O(e,t){for(var i,r,s;;){if(e.lookahead<f){if(k(e),e.lookahead<f&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-f&&(e.match_length=_(e,i),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-3,r=n._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(v(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=n._tr_tally(e,0,e.window[e.strstart-1]))&&v(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=n._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}function x(e,t,i,r,s){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=s}function A(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:l,e.adler=2===t.wrap?0:1,t.last_flush=0,n._tr_init(t),0):m(e,c)}function E(e){var t,i=M(e);return 0===i&&((t=e.state).window_size=2*t.w_size,g(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),i}function I(e,t,i,r,n,a){if(!e)return c;var o=1;if(-1===t&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),n<1||n>9||8!==i||r<8||r>15||t<0||t>9||a<0||a>4)return m(e,c);8===r&&(r=9);var h=new A;return e.state=h,h.strm=e,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=n+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new s.Buf8(2*h.w_size),h.head=new s.Buf16(h.hash_size),h.prev=new s.Buf16(h.w_size),h.lit_bufsize=1<<n+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new s.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=t,h.strategy=a,h.method=i,E(e)}r=[new x(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(k(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+i;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,v(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-f&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(v(e,!1),e.strm.avail_out),1)})),new x(4,4,8,4,T),new x(4,5,16,8,T),new x(4,6,32,32,T),new x(4,4,16,16,O),new x(8,16,32,32,O),new x(8,16,128,128,O),new x(8,32,128,256,O),new x(32,128,258,1024,O),new x(32,258,258,4096,O)],i.deflateInit=function(e,t){return I(e,t,8,15,8,0)},i.deflateInit2=I,i.deflateReset=E,i.deflateResetKeep=M,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},i.deflate=function(e,t){var i,s,a,h;if(!e||!e.state||t>5||t<0)return e?m(e,c):c;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===p&&4!==t)return m(e,0===e.avail_out?-5:c);if(s.strm=e,i=s.last_flush,s.last_flush=t,42===s.status)if(2===s.wrap)e.adler=0,w(s,31),w(s,139),w(s,8),s.gzhead?(w(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),w(s,255&s.gzhead.time),w(s,s.gzhead.time>>8&255),w(s,s.gzhead.time>>16&255),w(s,s.gzhead.time>>24&255),w(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),w(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(w(s,255&s.gzhead.extra.length),w(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=o(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(w(s,0),w(s,0),w(s,0),w(s,0),w(s,0),w(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),w(s,3),s.status=l);else{var f=8+(s.w_bits-8<<4)<<8;f|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(f|=32),f+=31-f%31,s.status=l,S(s,f),0!==s.strstart&&(S(s,e.adler>>>16),S(s,65535&e.adler)),e.adler=1}if(69===s.status)if(s.gzhead.extra){for(a=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),y(e),a=s.pending,s.pending!==s.pending_buf_size));)w(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){a=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),y(e),a=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,w(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),0===h&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){a=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),y(e),a=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,w(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),0===h&&(s.status=u)}else s.status=u;if(s.status===u&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&y(e),s.pending+2<=s.pending_buf_size&&(w(s,255&e.adler),w(s,e.adler>>8&255),e.adler=0,s.status=l)):s.status=l),0!==s.pending){if(y(e),0===e.avail_out)return s.last_flush=-1,0}else if(0===e.avail_in&&b(t)<=b(i)&&4!==t)return m(e,-5);if(s.status===p&&0!==e.avail_in)return m(e,-5);if(0!==e.avail_in||0!==s.lookahead||0!==t&&s.status!==p){var _=2===s.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(k(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,i=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(s,t):3===s.strategy?function(e,t){for(var i,r,s,a,o=e.window;;){if(e.lookahead<=d){if(k(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=o[s=e.strstart-1])===o[++s]&&r===o[++s]&&r===o[++s]){a=e.strstart+d;do{}while(r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&r===o[++s]&&s<a);e.match_length=d-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=n._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=n._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(v(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(v(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(v(e,!1),0===e.strm.avail_out)?1:2}(s,t):r[s.level].func(s,t);if(3!==_&&4!==_||(s.status=p),1===_||3===_)return 0===e.avail_out&&(s.last_flush=-1),0;if(2===_&&(1===t?n._tr_align(s):5!==t&&(n._tr_stored_block(s,0,0,!1),3===t&&(g(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),y(e),0===e.avail_out))return s.last_flush=-1,0}return 4!==t?0:s.wrap<=0?1:(2===s.wrap?(w(s,255&e.adler),w(s,e.adler>>8&255),w(s,e.adler>>16&255),w(s,e.adler>>24&255),w(s,255&e.total_in),w(s,e.total_in>>8&255),w(s,e.total_in>>16&255),w(s,e.total_in>>24&255)):(S(s,e.adler>>>16),S(s,65535&e.adler)),y(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)},i.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==u&&t!==l&&t!==p?m(e,c):(e.state=null,t===l?m(e,-3):0):c},i.deflateSetDictionary=function(e,t){var i,r,n,o,h,d,f,u,l=t.length;if(!e||!e.state)return c;if(2===(o=(i=e.state).wrap)||1===o&&42!==i.status||i.lookahead)return c;for(1===o&&(e.adler=a(e.adler,t,l,0)),i.wrap=0,l>=i.w_size&&(0===o&&(g(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new s.Buf8(i.w_size),s.arraySet(u,t,l-i.w_size,i.w_size,0),t=u,l=i.w_size),h=e.avail_in,d=e.next_in,f=e.input,e.avail_in=l,e.next_in=0,e.input=t,k(i);i.lookahead>=3;){r=i.strstart,n=i.lookahead-2;do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+3-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--n);i.strstart=r,i.lookahead=2,k(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=d,e.input=f,e.avail_in=h,i.wrap=o,0},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":76,"./adler32":77,"./crc32":79,"./messages":84,"./trees":85}],81:[function(e,t,i){"use strict";t.exports=function(e,t){var i,r,s,n,a,o,h,c,d,f,u,l,p,m,b,g,y,v,w,S,_,k,T,O,x;i=e.state,r=e.next_in,O=e.input,s=r+(e.avail_in-5),n=e.next_out,x=e.output,a=n-(t-e.avail_out),o=n+(e.avail_out-257),h=i.dmax,c=i.wsize,d=i.whave,f=i.wnext,u=i.window,l=i.hold,p=i.bits,m=i.lencode,b=i.distcode,g=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{p<15&&(l+=O[r++]<<p,p+=8,l+=O[r++]<<p,p+=8),v=m[l&g];t:for(;;){if(l>>>=w=v>>>24,p-=w,0===(w=v>>>16&255))x[n++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=m[(65535&v)+(l&(1<<w)-1)];continue t}if(32&w){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}S=65535&v,(w&=15)&&(p<w&&(l+=O[r++]<<p,p+=8),S+=l&(1<<w)-1,l>>>=w,p-=w),p<15&&(l+=O[r++]<<p,p+=8,l+=O[r++]<<p,p+=8),v=b[l&y];i:for(;;){if(l>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=b[(65535&v)+(l&(1<<w)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(_=65535&v,p<(w&=15)&&(l+=O[r++]<<p,(p+=8)<w&&(l+=O[r++]<<p,p+=8)),(_+=l&(1<<w)-1)>h){e.msg="invalid distance too far back",i.mode=30;break e}if(l>>>=w,p-=w,_>(w=n-a)){if((w=_-w)>d&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(k=0,T=u,0===f){if(k+=c-w,w<S){S-=w;do{x[n++]=u[k++]}while(--w);k=n-_,T=x}}else if(f<w){if(k+=c+f-w,(w-=f)<S){S-=w;do{x[n++]=u[k++]}while(--w);if(k=0,f<S){S-=w=f;do{x[n++]=u[k++]}while(--w);k=n-_,T=x}}}else if(k+=f-w,w<S){S-=w;do{x[n++]=u[k++]}while(--w);k=n-_,T=x}for(;S>2;)x[n++]=T[k++],x[n++]=T[k++],x[n++]=T[k++],S-=3;S&&(x[n++]=T[k++],S>1&&(x[n++]=T[k++]))}else{k=n-_;do{x[n++]=x[k++],x[n++]=x[k++],x[n++]=x[k++],S-=3}while(S>2);S&&(x[n++]=x[k++],S>1&&(x[n++]=x[k++]))}break}}break}}while(r<s&&n<o);r-=S=p>>3,l&=(1<<(p-=S<<3))-1,e.next_in=r,e.next_out=n,e.avail_in=r<s?s-r+5:5-(r-s),e.avail_out=n<o?o-n+257:257-(n-o),i.hold=l,i.bits=p}},{}],82:[function(e,t,i){"use strict";var r=e("../utils/common"),s=e("./adler32"),n=e("./crc32"),a=e("./inffast"),o=e("./inftrees"),h=-2,c=12,d=30;function f(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function l(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):h}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,l(e)):h}function m(e,t){var i,r;return e&&e.state?(r=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,p(e))):h}function b(e,t){var i,r;return e?(r=new u,e.state=r,r.window=null,0!==(i=m(e,t))&&(e.state=null),i):h}var g,y,v=!0;function w(e){if(v){var t;for(g=new r.Buf32(512),y=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,y,0,e.work,{bits:5}),v=!1}e.lencode=g,e.lenbits=9,e.distcode=y,e.distbits=5}function S(e,t,i,s){var n,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),s>=a.wsize?(r.arraySet(a.window,t,i-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((n=a.wsize-a.wnext)>s&&(n=s),r.arraySet(a.window,t,i-s,n,a.wnext),(s-=n)?(r.arraySet(a.window,t,i-s,s,0),a.wnext=s,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}i.inflateReset=p,i.inflateReset2=m,i.inflateResetKeep=l,i.inflateInit=function(e){return b(e,15)},i.inflateInit2=b,i.inflate=function(e,t){var i,u,l,p,m,b,g,y,v,_,k,T,O,x,A,M,E,I,B,N,P,R,C,L,D=0,j=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;(i=e.state).mode===c&&(i.mode=13),m=e.next_out,l=e.output,g=e.avail_out,p=e.next_in,u=e.input,b=e.avail_in,y=i.hold,v=i.bits,_=b,k=g,R=0;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;v<16;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(2&i.wrap&&35615===y){i.check=0,j[0]=255&y,j[1]=y>>>8&255,i.check=n(i.check,j,2,0),y=0,v=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&y)<<8)+(y>>8))%31){e.msg="incorrect header check",i.mode=d;break}if(8!=(15&y)){e.msg="unknown compression method",i.mode=d;break}if(v-=4,P=8+(15&(y>>>=4)),0===i.wbits)i.wbits=P;else if(P>i.wbits){e.msg="invalid window size",i.mode=d;break}i.dmax=1<<P,e.adler=i.check=1,i.mode=512&y?10:c,y=0,v=0;break;case 2:for(;v<16;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(i.flags=y,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=d;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=d;break}i.head&&(i.head.text=y>>8&1),512&i.flags&&(j[0]=255&y,j[1]=y>>>8&255,i.check=n(i.check,j,2,0)),y=0,v=0,i.mode=3;case 3:for(;v<32;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}i.head&&(i.head.time=y),512&i.flags&&(j[0]=255&y,j[1]=y>>>8&255,j[2]=y>>>16&255,j[3]=y>>>24&255,i.check=n(i.check,j,4,0)),y=0,v=0,i.mode=4;case 4:for(;v<16;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}i.head&&(i.head.xflags=255&y,i.head.os=y>>8),512&i.flags&&(j[0]=255&y,j[1]=y>>>8&255,i.check=n(i.check,j,2,0)),y=0,v=0,i.mode=5;case 5:if(1024&i.flags){for(;v<16;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}i.length=y,i.head&&(i.head.extra_len=y),512&i.flags&&(j[0]=255&y,j[1]=y>>>8&255,i.check=n(i.check,j,2,0)),y=0,v=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&((T=i.length)>b&&(T=b),T&&(i.head&&(P=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),r.arraySet(i.head.extra,u,p,T,P)),512&i.flags&&(i.check=n(i.check,u,T,p)),b-=T,p+=T,i.length-=T),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===b)break e;T=0;do{P=u[p+T++],i.head&&P&&i.length<65536&&(i.head.name+=String.fromCharCode(P))}while(P&&T<b);if(512&i.flags&&(i.check=n(i.check,u,T,p)),b-=T,p+=T,P)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===b)break e;T=0;do{P=u[p+T++],i.head&&P&&i.length<65536&&(i.head.comment+=String.fromCharCode(P))}while(P&&T<b);if(512&i.flags&&(i.check=n(i.check,u,T,p)),b-=T,p+=T,P)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;v<16;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(y!==(65535&i.check)){e.msg="header crc mismatch",i.mode=d;break}y=0,v=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=c;break;case 10:for(;v<32;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}e.adler=i.check=f(y),y=0,v=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=m,e.avail_out=g,e.next_in=p,e.avail_in=b,i.hold=y,i.bits=v,2;e.adler=i.check=1,i.mode=c;case c:if(5===t||6===t)break e;case 13:if(i.last){y>>>=7&v,v-=7&v,i.mode=27;break}for(;v<3;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}switch(i.last=1&y,v-=1,3&(y>>>=1)){case 0:i.mode=14;break;case 1:if(w(i),i.mode=20,6===t){y>>>=2,v-=2;break e}break;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=d}y>>>=2,v-=2;break;case 14:for(y>>>=7&v,v-=7&v;v<32;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if((65535&y)!=(y>>>16^65535)){e.msg="invalid stored block lengths",i.mode=d;break}if(i.length=65535&y,y=0,v=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(T=i.length){if(T>b&&(T=b),T>g&&(T=g),0===T)break e;r.arraySet(l,u,p,T,m),b-=T,p+=T,g-=T,m+=T,i.length-=T;break}i.mode=c;break;case 17:for(;v<14;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(i.nlen=257+(31&y),y>>>=5,v-=5,i.ndist=1+(31&y),y>>>=5,v-=5,i.ncode=4+(15&y),y>>>=4,v-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=d;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;v<3;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}i.lens[F[i.have++]]=7&y,y>>>=3,v-=3}for(;i.have<19;)i.lens[F[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,C={bits:i.lenbits},R=o(0,i.lens,0,19,i.lencode,0,i.work,C),i.lenbits=C.bits,R){e.msg="invalid code lengths set",i.mode=d;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;M=(D=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,E=65535&D,!((A=D>>>24)<=v);){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(E<16)y>>>=A,v-=A,i.lens[i.have++]=E;else{if(16===E){for(L=A+2;v<L;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(y>>>=A,v-=A,0===i.have){e.msg="invalid bit length repeat",i.mode=d;break}P=i.lens[i.have-1],T=3+(3&y),y>>>=2,v-=2}else if(17===E){for(L=A+3;v<L;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}v-=A,P=0,T=3+(7&(y>>>=A)),y>>>=3,v-=3}else{for(L=A+7;v<L;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}v-=A,P=0,T=11+(127&(y>>>=A)),y>>>=7,v-=7}if(i.have+T>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=d;break}for(;T--;)i.lens[i.have++]=P}}if(i.mode===d)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=d;break}if(i.lenbits=9,C={bits:i.lenbits},R=o(1,i.lens,0,i.nlen,i.lencode,0,i.work,C),i.lenbits=C.bits,R){e.msg="invalid literal/lengths set",i.mode=d;break}if(i.distbits=6,i.distcode=i.distdyn,C={bits:i.distbits},R=o(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,C),i.distbits=C.bits,R){e.msg="invalid distances set",i.mode=d;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(b>=6&&g>=258){e.next_out=m,e.avail_out=g,e.next_in=p,e.avail_in=b,i.hold=y,i.bits=v,a(e,k),m=e.next_out,l=e.output,g=e.avail_out,p=e.next_in,u=e.input,b=e.avail_in,y=i.hold,v=i.bits,i.mode===c&&(i.back=-1);break}for(i.back=0;M=(D=i.lencode[y&(1<<i.lenbits)-1])>>>16&255,E=65535&D,!((A=D>>>24)<=v);){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(M&&0==(240&M)){for(I=A,B=M,N=E;M=(D=i.lencode[N+((y&(1<<I+B)-1)>>I)])>>>16&255,E=65535&D,!(I+(A=D>>>24)<=v);){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}y>>>=I,v-=I,i.back+=I}if(y>>>=A,v-=A,i.back+=A,i.length=E,0===M){i.mode=26;break}if(32&M){i.back=-1,i.mode=c;break}if(64&M){e.msg="invalid literal/length code",i.mode=d;break}i.extra=15&M,i.mode=22;case 22:if(i.extra){for(L=i.extra;v<L;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}i.length+=y&(1<<i.extra)-1,y>>>=i.extra,v-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;M=(D=i.distcode[y&(1<<i.distbits)-1])>>>16&255,E=65535&D,!((A=D>>>24)<=v);){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(0==(240&M)){for(I=A,B=M,N=E;M=(D=i.distcode[N+((y&(1<<I+B)-1)>>I)])>>>16&255,E=65535&D,!(I+(A=D>>>24)<=v);){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}y>>>=I,v-=I,i.back+=I}if(y>>>=A,v-=A,i.back+=A,64&M){e.msg="invalid distance code",i.mode=d;break}i.offset=E,i.extra=15&M,i.mode=24;case 24:if(i.extra){for(L=i.extra;v<L;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}i.offset+=y&(1<<i.extra)-1,y>>>=i.extra,v-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=d;break}i.mode=25;case 25:if(0===g)break e;if(T=k-g,i.offset>T){if((T=i.offset-T)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=d;break}T>i.wnext?(T-=i.wnext,O=i.wsize-T):O=i.wnext-T,T>i.length&&(T=i.length),x=i.window}else x=l,O=m-i.offset,T=i.length;T>g&&(T=g),g-=T,i.length-=T;do{l[m++]=x[O++]}while(--T);0===i.length&&(i.mode=21);break;case 26:if(0===g)break e;l[m++]=i.length,g--,i.mode=21;break;case 27:if(i.wrap){for(;v<32;){if(0===b)break e;b--,y|=u[p++]<<v,v+=8}if(k-=g,e.total_out+=k,i.total+=k,k&&(e.adler=i.check=i.flags?n(i.check,l,k,m-k):s(i.check,l,k,m-k)),k=g,(i.flags?y:f(y))!==i.check){e.msg="incorrect data check",i.mode=d;break}y=0,v=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;v<32;){if(0===b)break e;b--,y+=u[p++]<<v,v+=8}if(y!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=d;break}y=0,v=0}i.mode=29;case 29:R=1;break e;case d:R=-3;break e;case 31:return-4;default:return h}return e.next_out=m,e.avail_out=g,e.next_in=p,e.avail_in=b,i.hold=y,i.bits=v,(i.wsize||k!==e.avail_out&&i.mode<d&&(i.mode<27||4!==t))&&S(e,e.output,e.next_out,k-e.avail_out)?(i.mode=31,-4):(_-=e.avail_in,k-=e.avail_out,e.total_in+=_,e.total_out+=k,i.total+=k,i.wrap&&k&&(e.adler=i.check=i.flags?n(i.check,l,k,e.next_out-k):s(i.check,l,k,e.next_out-k)),e.data_type=i.bits+(i.last?64:0)+(i.mode===c?128:0)+(20===i.mode||15===i.mode?256:0),(0===_&&0===k||4===t)&&0===R&&(R=-5),R)},i.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,0},i.inflateGetHeader=function(e,t){var i;return e&&e.state?0==(2&(i=e.state).wrap)?h:(i.head=t,t.done=!1,0):h},i.inflateSetDictionary=function(e,t){var i,r=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?h:11===i.mode&&s(1,t,r,0)!==i.check?-3:S(e,t,r,r)?(i.mode=31,-4):(i.havedict=1,0):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":76,"./adler32":77,"./crc32":79,"./inffast":81,"./inftrees":83}],83:[function(e,t,i){"use strict";var r=e("../utils/common"),s=15,n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,c,d,f,u,l){var p,m,b,g,y,v,w,S,_,k=l.bits,T=0,O=0,x=0,A=0,M=0,E=0,I=0,B=0,N=0,P=0,R=null,C=0,L=new r.Buf16(16),D=new r.Buf16(16),j=null,F=0;for(T=0;T<=s;T++)L[T]=0;for(O=0;O<c;O++)L[t[i+O]]++;for(M=k,A=s;A>=1&&0===L[A];A--);if(M>A&&(M=A),0===A)return d[f++]=20971520,d[f++]=20971520,l.bits=1,0;for(x=1;x<A&&0===L[x];x++);for(M<x&&(M=x),B=1,T=1;T<=s;T++)if(B<<=1,(B-=L[T])<0)return-1;if(B>0&&(0===e||1!==A))return-1;for(D[1]=0,T=1;T<s;T++)D[T+1]=D[T]+L[T];for(O=0;O<c;O++)0!==t[i+O]&&(u[D[t[i+O]]++]=O);if(0===e?(R=j=u,v=19):1===e?(R=n,C-=257,j=a,F-=257,v=256):(R=o,j=h,v=-1),P=0,O=0,T=x,y=f,E=M,I=0,b=-1,g=(N=1<<M)-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){w=T-I,u[O]<v?(S=0,_=u[O]):u[O]>v?(S=j[F+u[O]],_=R[C+u[O]]):(S=96,_=0),p=1<<T-I,x=m=1<<E;do{d[y+(P>>I)+(m-=p)]=w<<24|S<<16|_|0}while(0!==m);for(p=1<<T-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,O++,0==--L[T]){if(T===A)break;T=t[i+u[O]]}if(T>M&&(P&g)!==b){for(0===I&&(I=M),y+=x,B=1<<(E=T-I);E+I<A&&!((B-=L[E+I])<=0);)E++,B<<=1;if(N+=1<<E,1===e&&N>852||2===e&&N>592)return 1;d[b=P&g]=M<<24|E<<16|y-f|0}}return 0!==P&&(d[y+P]=T-I<<24|64<<16|0),l.bits=M,0}},{"../utils/common":76}],84:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],85:[function(e,t,i){"use strict";var r=e("../utils/common");function s(e){for(var t=e.length;--t>=0;)e[t]=0}var n=256,a=286,o=30,h=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);s(l);var p=new Array(60);s(p);var m=new Array(512);s(m);var b=new Array(256);s(b);var g=new Array(29);s(g);var y,v,w,S=new Array(o);function _(e,t,i,r,s){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=s,this.has_stree=e&&e.length}function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function T(e){return e<256?m[e]:m[256+(e>>>7)]}function O(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,i){e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,O(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function A(e,t,i){x(e,i[2*t],i[2*t+1])}function M(e,t){var i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}function E(e,t,i){var r,s,n=new Array(16),a=0;for(r=1;r<=h;r++)n[r]=a=a+i[r-1]<<1;for(s=0;s<=t;s++){var o=e[2*s+1];0!==o&&(e[2*s]=M(n[o]++,o))}}function I(e){var t;for(t=0;t<a;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function B(e){e.bi_valid>8?O(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function N(e,t,i,r){var s=2*t,n=2*i;return e[s]<e[n]||e[s]===e[n]&&r[t]<=r[i]}function P(e,t,i){for(var r=e.heap[i],s=i<<1;s<=e.heap_len&&(s<e.heap_len&&N(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!N(t,r,e.heap[s],e.depth));)e.heap[i]=e.heap[s],i=s,s<<=1;e.heap[i]=r}function R(e,t,i){var r,s,a,o,h=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*h]<<8|e.pending_buf[e.d_buf+2*h+1],s=e.pending_buf[e.l_buf+h],h++,0===r?A(e,s,t):(A(e,(a=b[s])+n+1,t),0!==(o=c[a])&&x(e,s-=g[a],o),A(e,a=T(--r),i),0!==(o=d[a])&&x(e,r-=S[a],o))}while(h<e.last_lit);A(e,256,t)}function C(e,t){var i,r,s,n=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,c=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<c;i++)0!==n[2*i]?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):n[2*i+1]=0;for(;e.heap_len<2;)n[2*(s=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[s]=0,e.opt_len--,o&&(e.static_len-=a[2*s+1]);for(t.max_code=d,i=e.heap_len>>1;i>=1;i--)P(e,n,i);s=c;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=r,n[2*s]=n[2*i]+n[2*r],e.depth[s]=(e.depth[i]>=e.depth[r]?e.depth[i]:e.depth[r])+1,n[2*i+1]=n[2*r+1]=s,e.heap[1]=s++,P(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,r,s,n,a,o,c=t.dyn_tree,d=t.max_code,f=t.stat_desc.static_tree,u=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,m=t.stat_desc.max_length,b=0;for(n=0;n<=h;n++)e.bl_count[n]=0;for(c[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)(n=c[2*c[2*(r=e.heap[i])+1]+1]+1)>m&&(n=m,b++),c[2*r+1]=n,r>d||(e.bl_count[n]++,a=0,r>=p&&(a=l[r-p]),o=c[2*r],e.opt_len+=o*(n+a),u&&(e.static_len+=o*(f[2*r+1]+a)));if(0!==b){do{for(n=m-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[m]--,b-=2}while(b>0);for(n=m;0!==n;n--)for(r=e.bl_count[n];0!==r;)(s=e.heap[--i])>d||(c[2*s+1]!==n&&(e.opt_len+=(n-c[2*s+1])*c[2*s],c[2*s+1]=n),r--)}}(e,t),E(n,d,e.bl_count)}function L(e,t,i){var r,s,n=-1,a=t[1],o=0,h=7,c=4;for(0===a&&(h=138,c=3),t[2*(i+1)+1]=65535,r=0;r<=i;r++)s=a,a=t[2*(r+1)+1],++o<h&&s===a||(o<c?e.bl_tree[2*s]+=o:0!==s?(s!==n&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,n=s,0===a?(h=138,c=3):s===a?(h=6,c=3):(h=7,c=4))}function D(e,t,i){var r,s,n=-1,a=t[1],o=0,h=7,c=4;for(0===a&&(h=138,c=3),r=0;r<=i;r++)if(s=a,a=t[2*(r+1)+1],!(++o<h&&s===a)){if(o<c)do{A(e,s,e.bl_tree)}while(0!=--o);else 0!==s?(s!==n&&(A(e,s,e.bl_tree),o--),A(e,16,e.bl_tree),x(e,o-3,2)):o<=10?(A(e,17,e.bl_tree),x(e,o-3,3)):(A(e,18,e.bl_tree),x(e,o-11,7));o=0,n=s,0===a?(h=138,c=3):s===a?(h=6,c=3):(h=7,c=4)}}s(S);var j=!1;function F(e,t,i,s){x(e,0+(s?1:0),3),function(e,t,i,s){B(e),s&&(O(e,i),O(e,~i)),r.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i,!0)}i._tr_init=function(e){j||(!function(){var e,t,i,r,s,n=new Array(16);for(i=0,r=0;r<28;r++)for(g[r]=i,e=0;e<1<<c[r];e++)b[i++]=r;for(b[i-1]=r,s=0,r=0;r<16;r++)for(S[r]=s,e=0;e<1<<d[r];e++)m[s++]=r;for(s>>=7;r<o;r++)for(S[r]=s<<7,e=0;e<1<<d[r]-7;e++)m[256+s++]=r;for(t=0;t<=h;t++)n[t]=0;for(e=0;e<=143;)l[2*e+1]=8,e++,n[8]++;for(;e<=255;)l[2*e+1]=9,e++,n[9]++;for(;e<=279;)l[2*e+1]=7,e++,n[7]++;for(;e<=287;)l[2*e+1]=8,e++,n[8]++;for(E(l,287,n),e=0;e<o;e++)p[2*e+1]=5,p[2*e]=M(e,5);y=new _(l,c,257,a,h),v=new _(p,d,0,o,h),w=new _(new Array(0),f,0,19,7)}(),j=!0),e.l_desc=new k(e.dyn_ltree,y),e.d_desc=new k(e.dyn_dtree,v),e.bl_desc=new k(e.bl_tree,w),e.bi_buf=0,e.bi_valid=0,I(e)},i._tr_stored_block=F,i._tr_flush_block=function(e,t,i,r){var s,a,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),C(e,e.l_desc),C(e,e.d_desc),o=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),C(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=s&&(s=a)):s=a=i+5,i+4<=s&&-1!==t?F(e,t,i,r):4===e.strategy||a===s?(x(e,2+(r?1:0),3),R(e,l,p)):(x(e,4+(r?1:0),3),function(e,t,i,r){var s;for(x(e,t-257,5),x(e,i-1,5),x(e,r-4,4),s=0;s<r;s++)x(e,e.bl_tree[2*u[s]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),R(e,e.dyn_ltree,e.dyn_dtree)),I(e),r&&B(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(b[i]+n+1)]++,e.dyn_dtree[2*T(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){x(e,2,3),A(e,256,l),function(e){16===e.bi_valid?(O(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":76}],86:[function(e,t,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],87:[function(e,t,i){(function(e){"use strict";void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,i,r,s){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var n,a,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,i)}));case 3:return e.nextTick((function(){t.call(null,i,r)}));case 4:return e.nextTick((function(){t.call(null,i,r,s)}));default:for(n=new Array(o-1),a=0;a<n.length;)n[a++]=arguments[a];return e.nextTick((function(){t.apply(null,n)}))}}}:t.exports=e}).call(this,e("_process"))},{_process:88}],88:[function(e,t,i){var r,s,n=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function h(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(e){s=o}}();var c,d=[],f=!1,u=-1;function l(){f&&c&&(f=!1,c.length?d=c.concat(d):u=-1,d.length&&p())}function p(){if(!f){var e=h(l);f=!0;for(var t=d.length;t;){for(c=d,d=[];++u<t;)c&&c[u].run();u=-1,t=d.length}c=null,f=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function b(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new m(e,t)),1!==d.length||f||h(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=b,n.addListener=b,n.once=b,n.off=b,n.removeListener=b,n.removeAllListeners=b,n.emit=b,n.prependListener=b,n.prependOnceListener=b,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],89:[function(e,t,i){(function(e){
/*! https://mths.be/punycode v1.4.1 by @mathias */
!function(r){var s="object"==typeof i&&i&&!i.nodeType&&i,n="object"==typeof t&&t&&!t.nodeType&&t,a="object"==typeof e&&e;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var o,h,c=2147483647,d=36,f=/^xn--/,u=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,b=String.fromCharCode;function g(e){throw new RangeError(p[e])}function y(e,t){for(var i=e.length,r=[];i--;)r[i]=t(e[i]);return r}function v(e,t){var i=e.split("@"),r="";return i.length>1&&(r=i[0]+"@",e=i[1]),r+y((e=e.replace(l,".")).split("."),t).join(".")}function w(e){for(var t,i,r=[],s=0,n=e.length;s<n;)(t=e.charCodeAt(s++))>=55296&&t<=56319&&s<n?56320==(64512&(i=e.charCodeAt(s++)))?r.push(((1023&t)<<10)+(1023&i)+65536):(r.push(t),s--):r.push(t);return r}function S(e){return y(e,(function(e){var t="";return e>65535&&(t+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=b(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,i){var r=0;for(e=i?m(e/700):e>>1,e+=m(e/t);e>455;r+=d)e=m(e/35);return m(r+36*e/(e+38))}function T(e){var t,i,r,s,n,a,o,h,f,u,l,p=[],b=e.length,y=0,v=128,w=72;for((i=e.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)e.charCodeAt(r)>=128&&g("not-basic"),p.push(e.charCodeAt(r));for(s=i>0?i+1:0;s<b;){for(n=y,a=1,o=d;s>=b&&g("invalid-input"),((h=(l=e.charCodeAt(s++))-48<10?l-22:l-65<26?l-65:l-97<26?l-97:d)>=d||h>m((c-y)/a))&&g("overflow"),y+=h*a,!(h<(f=o<=w?1:o>=w+26?26:o-w));o+=d)a>m(c/(u=d-f))&&g("overflow"),a*=u;w=k(y-n,t=p.length+1,0==n),m(y/t)>c-v&&g("overflow"),v+=m(y/t),y%=t,p.splice(y++,0,v)}return S(p)}function O(e){var t,i,r,s,n,a,o,h,f,u,l,p,y,v,S,T=[];for(p=(e=w(e)).length,t=128,i=0,n=72,a=0;a<p;++a)(l=e[a])<128&&T.push(b(l));for(r=s=T.length,s&&T.push("-");r<p;){for(o=c,a=0;a<p;++a)(l=e[a])>=t&&l<o&&(o=l);for(o-t>m((c-i)/(y=r+1))&&g("overflow"),i+=(o-t)*y,t=o,a=0;a<p;++a)if((l=e[a])<t&&++i>c&&g("overflow"),l==t){for(h=i,f=d;!(h<(u=f<=n?1:f>=n+26?26:f-n));f+=d)S=h-u,v=d-u,T.push(b(_(u+S%v,0))),h=m(S/v);T.push(b(_(h,0))),n=k(i,y,r==s),i=0,++r}++i,++t}return T.join("")}if(o={version:"1.4.1",ucs2:{decode:w,encode:S},decode:T,encode:O,toASCII:function(e){return v(e,(function(e){return u.test(e)?"xn--"+O(e):e}))},toUnicode:function(e){return v(e,(function(e){return f.test(e)?T(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return o}));else if(s&&n)if(t.exports==s)n.exports=o;else for(h in o)o.hasOwnProperty(h)&&(s[h]=o[h]);else r.punycode=o}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],90:[function(e,t,i){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,n){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var h=1e3;n&&"number"==typeof n.maxKeys&&(h=n.maxKeys);var c=e.length;h>0&&c>h&&(c=h);for(var d=0;d<c;++d){var f,u,l,p,m=e[d].replace(o,"%20"),b=m.indexOf(i);b>=0?(f=m.substr(0,b),u=m.substr(b+1)):(f=m,u=""),l=decodeURIComponent(f),p=decodeURIComponent(u),r(a,l)?s(a[l])?a[l].push(p):a[l]=[a[l],p]:a[l]=p}return a};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],91:[function(e,t,i){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,i,o){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),(function(a){var o=encodeURIComponent(r(a))+i;return s(e[a])?n(e[a],(function(e){return o+encodeURIComponent(r(e))})).join(t):o+encodeURIComponent(r(e[a]))})).join(t):o?encodeURIComponent(r(o))+i+encodeURIComponent(r(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r++)i.push(t(e[r],r));return i}var a=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},{}],92:[function(e,t,i){"use strict";i.decode=i.parse=e("./decode"),i.encode=i.stringify=e("./encode")},{"./decode":90,"./encode":91}],93:[function(e,t,i){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":94}],94:[function(e,t,i){"use strict";var r=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};t.exports=f;var n=e("core-util-is");n.inherits=e("inherits");var a=e("./_stream_readable"),o=e("./_stream_writable");n.inherits(f,a);for(var h=s(o.prototype),c=0;c<h.length;c++){var d=h[c];f.prototype[d]||(f.prototype[d]=o.prototype[d])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",u)}function u(){this.allowHalfOpen||this._writableState.ended||r.nextTick(l,this)}function l(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{"./_stream_readable":96,"./_stream_writable":98,"core-util-is":68,inherits:72,"process-nextick-args":87}],95:[function(e,t,i){"use strict";t.exports=n;var r=e("./_stream_transform"),s=e("core-util-is");function n(e){if(!(this instanceof n))return new n(e);r.call(this,e)}s.inherits=e("inherits"),s.inherits(n,r),n.prototype._transform=function(e,t,i){i(null,e)}},{"./_stream_transform":97,"core-util-is":68,inherits:72}],96:[function(e,t,i){(function(i,r){"use strict";var s=e("process-nextick-args");t.exports=v;var n,a=e("isarray");v.ReadableState=y;e("events").EventEmitter;var o=function(e,t){return e.listeners(t).length},h=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,d=r.Uint8Array||function(){};var f=e("core-util-is");f.inherits=e("inherits");var u=e("util"),l=void 0;l=u&&u.debuglog?u.debuglog("stream"):function(){};var p,m=e("./internal/streams/BufferList"),b=e("./internal/streams/destroy");f.inherits(v,h);var g=["error","close","destroy","pause","resume"];function y(t,i){t=t||{};var r=i instanceof(n=n||e("./_stream_duplex"));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var s=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=e("string_decoder/").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function v(t){if(n=n||e("./_stream_duplex"),!(this instanceof v))return new v(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function w(e,t,i,r,s){var n,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,T(e)}(e,a)):(s||(n=function(e,t){var i;r=t,c.isBuffer(r)||r instanceof d||"string"==typeof t||void 0===t||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk"));var r;return i}(a,t)),n?e.emit("error",n):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=function(e){return c.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(t=a.decoder.write(t),a.objectMode||0!==t.length?S(e,a,t,!1):x(e,a)):S(e,a,t,!1))):r||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function S(e,t,i,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&T(e)),x(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=b.destroy,v.prototype._undestroy=b.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=c.from(e,t),t=""),i=!0),w(this,e,t,!1,i)},v.prototype.unshift=function(e){return w(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(t){return p||(p=e("string_decoder/").StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var _=8388608;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=_?e=_:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?s.nextTick(O,e):O(e))}function O(e){l("emit readable"),e.emit("readable"),I(e)}function x(e,t){t.readingMore||(t.readingMore=!0,s.nextTick(A,e,t))}function A(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}function M(e){l("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(l("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):i=function(e,t,i){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():i?function(e,t){var i=t.head,r=1,s=i.data;e-=s.length;for(;i=i.next;){var n=i.data,a=e>n.length?n.length:e;if(a===n.length?s+=n:s+=n.slice(0,e),0===(e-=a)){a===n.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=n.slice(a));break}++r}return t.length-=r,s}(e,t):function(e,t){var i=c.allocUnsafe(e),r=t.head,s=1;r.data.copy(i),e-=r.data.length;for(;r=r.next;){var n=r.data,a=e>n.length?n.length:e;if(n.copy(i,i.length-e,0,a),0===(e-=a)){a===n.length?(++s,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=n.slice(a));break}++s}return t.length-=s,i}(e,t);return r}(e,t.buffer,t.decoder),i);var i}function N(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,s.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}v.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):T(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&N(this),null;var r,s=t.needReadable;return l("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",s=!0),t.ended||t.reading?l("reading or ended",s=!1):s&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(i,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&N(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,l("pipe count=%d opts=%j",n.pipesCount,t);var h=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:v;function c(t,i){l("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,l("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",f),e.removeListener("error",b),e.removeListener("unpipe",c),r.removeListener("end",d),r.removeListener("end",v),r.removeListener("data",m),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function d(){l("onend"),e.end()}n.endEmitted?s.nextTick(h):r.once("end",h),e.on("unpipe",c);var f=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,I(e))}}(r);e.on("drain",f);var u=!1;var p=!1;function m(t){l("ondata"),p=!1,!1!==e.write(t)||p||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==R(n.pipes,e))&&!u&&(l("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function b(t){l("onerror",t),v(),e.removeListener("error",b),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),v()}function y(){l("onfinish"),e.removeListener("close",g),v()}function v(){l("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}(e,"error",b),e.once("close",g),e.once("finish",y),e.emit("pipe",r),n.flowing||(l("pipe resume"),r.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var n=0;n<s;n++)r[n].emit("unpipe",this,i);return this}var a=R(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},v.prototype.on=function(e,t){var i=h.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&T(this):s.nextTick(M,this))}return i},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,s.nextTick(E,e,t))}(this,e)),this},v.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,i=this._readableState,r=!1;for(var s in e.on("end",(function(){if(l("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(l("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s)||(i.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause()))})),e)void 0===this[s]&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var n=0;n<g.length;n++)e.on(g[n],this.emit.bind(this,g[n]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=B}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":94,"./internal/streams/BufferList":99,"./internal/streams/destroy":100,"./internal/streams/stream":101,_process:88,"core-util-is":68,events:69,inherits:72,isarray:74,"process-nextick-args":87,"safe-buffer":102,"string_decoder/":103,util:62}],97:[function(e,t,i){"use strict";t.exports=a;var r=e("./_stream_duplex"),s=e("core-util-is");function n(e,t){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,i){h(e,t,i)})):h(this,null,null)}function h(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}s.inherits=e("inherits"),s.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,i){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,i){var r=this._transformState;if(r.writecb=i,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var i=this;r.prototype._destroy.call(this,e,(function(e){t(e),i.emit("close")}))}},{"./_stream_duplex":94,"core-util-is":68,inherits:72}],98:[function(e,t,i){(function(i,r,s){"use strict";var n=e("process-nextick-args");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var r=e.entry;e.entry=null;for(;r;){var s=r.callback;t.pendingcb--,s(i),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=y;var o,h=!i.browser&&["v0.10","v0.9."].indexOf(i.version.slice(0,5))>-1?s:n.nextTick;y.WritableState=g;var c=e("core-util-is");c.inherits=e("inherits");var d={deprecate:e("util-deprecate")},f=e("./internal/streams/stream"),u=e("safe-buffer").Buffer,l=r.Uint8Array||function(){};var p,m=e("./internal/streams/destroy");function b(){}function g(t,i){o=o||e("./_stream_duplex"),t=t||{};var r=i instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var s=t.highWaterMark,c=t.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:r&&(c||0===c)?c:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,r=i.sync,s=i.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,r,s){--t.pendingcb,i?(n.nextTick(s,r),n.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(s(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}(e,i,r,t,s);else{var a=_(i);a||i.corked||i.bufferProcessing||!i.bufferedRequest||S(e,i),r?h(w,e,i,a,s):w(e,i,a,s)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(o=o||e("./_stream_duplex"),!(p.call(y,this)||this instanceof o))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),f.call(this)}function v(e,t,i,r,s,n,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,i?e._writev(s,t.onwrite):e._write(s,n,t.onwrite),t.sync=!1}function w(e,t,i,r){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),T(e,t)}function S(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=t.bufferedRequestCount,s=new Array(r),n=t.corkedRequestsFree;n.entry=i;for(var o=0,h=!0;i;)s[o]=i,i.isBuf||(h=!1),i=i.next,o+=1;s.allBuffers=h,v(e,t,!0,t.length,s,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,d=i.encoding,f=i.callback;if(v(e,t,!1,t.objectMode?1:c.length,c,d,f),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(i){t.pendingcb--,i&&e.emit("error",i),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var i=_(t);return i&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}c.inherits(y,f),g.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(g.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===y&&(e&&e._writableState instanceof g)}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,i){var r,s=this._writableState,a=!1,o=!s.objectMode&&(r=e,u.isBuffer(r)||r instanceof l);return o&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(i=t,t=null),o?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof i&&(i=b),s.ended?function(e,t){var i=new Error("write after end");e.emit("error",i),n.nextTick(t,i)}(this,i):(o||function(e,t,i,r){var s=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),n.nextTick(r,a),s=!1),s}(this,s,e,i))&&(s.pendingcb++,a=function(e,t,i,r,s,n){if(!i){var a=function(e,t,i){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,i));return t}(t,r,s);r!==a&&(i=!0,s="buffer",r=a)}var o=t.objectMode?1:r.length;t.length+=o;var h=t.length<t.highWaterMark;h||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:i,callback:n,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,o,r,s,n);return h}(this,s,o,e,t,i)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||S(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,i){i(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,i){var r=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,i){t.ending=!0,T(e,t),i&&(t.finished?n.nextTick(i):e.once("finish",i));t.ended=!0,e.writable=!1}(this,r,i)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{"./_stream_duplex":94,"./internal/streams/destroy":100,"./internal/streams/stream":101,_process:88,"core-util-is":68,inherits:72,"process-nextick-args":87,"safe-buffer":102,timers:113,"util-deprecate":117}],99:[function(e,t,i){"use strict";var r=e("safe-buffer").Buffer,s=e("util");t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,i,s,n=r.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,i=n,s=o,t.copy(i,s),o+=a.data.length,a=a.next;return n},e}(),s&&s.inspect&&s.inspect.custom&&(t.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":102,util:62}],100:[function(e,t,i){"use strict";var r=e("process-nextick-args");function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var i=this,n=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return n||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(s,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(s,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":87}],101:[function(e,t,i){t.exports=e("events").EventEmitter},{events:69}],102:[function(e,t,i){var r=e("buffer"),s=r.Buffer;function n(e,t){for(var i in e)t[i]=e[i]}function a(e,t,i){return s(e,t,i)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=r:(n(r,i),i.Buffer=a),n(s,a),a.from=function(e,t,i){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,i)},a.alloc=function(e,t,i){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=s(e);return void 0!==t?"string"==typeof i?r.fill(t,i):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:65}],103:[function(e,t,i){"use strict";var r=e("safe-buffer").Buffer,s=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===s||!s(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=h,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=f,t=3;break;default:return this.write=u,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,i=function(e,t,i){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function d(e,t){var i=(e.length-t)%3;return 0===i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function l(e){return e&&e.length?this.write(e):""}i.StringDecoder=n,n.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},n.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},n.prototype.text=function(e,t){var i=function(e,t,i){var r=t.length-1;if(r<i)return 0;var s=a(t[r]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--r<i||-2===s)return 0;if((s=a(t[r]))>=0)return s>0&&(e.lastNeed=s-2),s;if(--r<i||-2===s)return 0;if((s=a(t[r]))>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var r=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},n.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":102}],104:[function(e,t,i){t.exports=e("./readable").PassThrough},{"./readable":105}],105:[function(e,t,i){(i=t.exports=e("./lib/_stream_readable.js")).Stream=i,i.Readable=i,i.Writable=e("./lib/_stream_writable.js"),i.Duplex=e("./lib/_stream_duplex.js"),i.Transform=e("./lib/_stream_transform.js"),i.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":94,"./lib/_stream_passthrough.js":95,"./lib/_stream_readable.js":96,"./lib/_stream_transform.js":97,"./lib/_stream_writable.js":98}],106:[function(e,t,i){t.exports=e("./readable").Transform},{"./readable":105}],107:[function(e,t,i){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":98}],108:[function(e,t,i){t.exports=s;var r=e("events").EventEmitter;function s(){r.call(this)}e("inherits")(s,r),s.Readable=e("readable-stream/readable.js"),s.Writable=e("readable-stream/writable.js"),s.Duplex=e("readable-stream/duplex.js"),s.Transform=e("readable-stream/transform.js"),s.PassThrough=e("readable-stream/passthrough.js"),s.Stream=s,s.prototype.pipe=function(e,t){var i=this;function s(t){e.writable&&!1===e.write(t)&&i.pause&&i.pause()}function n(){i.readable&&i.resume&&i.resume()}i.on("data",s),e.on("drain",n),e._isStdio||t&&!1===t.end||(i.on("end",o),i.on("close",h));var a=!1;function o(){a||(a=!0,e.end())}function h(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){i.removeListener("data",s),e.removeListener("drain",n),i.removeListener("end",o),i.removeListener("close",h),i.removeListener("error",c),e.removeListener("error",c),i.removeListener("end",d),i.removeListener("close",d),e.removeListener("close",d)}return i.on("error",c),e.on("error",c),i.on("end",d),i.on("close",d),e.on("close",d),e.emit("pipe",i),e}},{events:69,inherits:72,"readable-stream/duplex.js":93,"readable-stream/passthrough.js":104,"readable-stream/readable.js":105,"readable-stream/transform.js":106,"readable-stream/writable.js":107}],109:[function(e,t,i){(function(t){var r=e("./lib/request"),s=e("./lib/response"),n=e("xtend"),a=e("builtin-status-codes"),o=e("url"),h=i;h.request=function(e,i){e="string"==typeof e?o.parse(e):n(e);var s=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||s,h=e.hostname||e.host,c=e.port,d=e.path||"/";h&&-1!==h.indexOf(":")&&(h="["+h+"]"),e.url=(h?a+"//"+h:"")+(c?":"+c:"")+d,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var f=new r(e);return i&&f.on("response",i),f},h.get=function(e,t){var i=h.request(e,t);return i.end(),i},h.ClientRequest=r,h.IncomingMessage=s.IncomingMessage,h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.globalAgent=new h.Agent,h.STATUS_CODES=a,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":111,"./lib/response":112,"builtin-status-codes":66,url:115,xtend:122}],110:[function(e,t,i){(function(e){i.fetch=o(e.fetch)&&o(e.ReadableStream),i.writableStream=o(e.WritableStream),i.abortController=o(e.AbortController),i.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),i.blobConstructor=!0}catch(e){}var t;function r(){if(void 0!==t)return t;if(e.XMLHttpRequest){t=new e.XMLHttpRequest;try{t.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){t=null}}else t=null;return t}function s(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var n=void 0!==e.ArrayBuffer,a=n&&o(e.ArrayBuffer.prototype.slice);function o(e){return"function"==typeof e}i.arraybuffer=i.fetch||n&&s("arraybuffer"),i.msstream=!i.fetch&&a&&s("ms-stream"),i.mozchunkedarraybuffer=!i.fetch&&n&&s("moz-chunked-arraybuffer"),i.overrideMimeType=i.fetch||!!r()&&o(r().overrideMimeType),i.vbArray=o(e.VBArray),t=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(e,t,i){(function(i,r,s){var n=e("./capability"),a=e("inherits"),o=e("./response"),h=e("readable-stream"),c=e("to-arraybuffer"),d=o.IncomingMessage,f=o.readyStates;var u=t.exports=function(e){var t,i=this;h.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+new s(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){i.setHeader(t,e.headers[t])}));var r=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!n.abortController)r=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!n.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}i._mode=function(e,t){return n.fetch&&t?"fetch":n.mozchunkedarraybuffer?"moz-chunked-arraybuffer":n.msstream?"ms-stream":n.arraybuffer&&e?"arraybuffer":n.vbArray&&e?"text:vbarray":"text"}(t,r),i._fetchTimer=null,i.on("finish",(function(){i._onFinish()}))};a(u,h.Writable),u.prototype.setHeader=function(e,t){var i=e.toLowerCase();-1===l.indexOf(i)&&(this._headers[i]={name:e,value:t})},u.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},u.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},u.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,a=e._headers,o=null;"GET"!==t.method&&"HEAD"!==t.method&&(o=n.arraybuffer?c(s.concat(e._body)):n.blobConstructor?new r.Blob(e._body.map((function(e){return c(e)})),{type:(a["content-type"]||{}).value||""}):s.concat(e._body).toString());var h=[];if(Object.keys(a).forEach((function(e){var t=a[e].name,i=a[e].value;Array.isArray(i)?i.forEach((function(e){h.push([t,e])})):h.push([t,i])})),"fetch"===e._mode){var d=null;if(n.abortController){var u=new AbortController;d=u.signal,e._fetchAbortController=u,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=r.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}r.fetch(e._opts.url,{method:e._opts.method,headers:h,body:o||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:d}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){r.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var l=e._xhr=new r.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick((function(){e.emit("error",t)}))}"responseType"in l&&(l.responseType=e._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(l.timeout=t.requestTimeout,l.ontimeout=function(){e.emit("requestTimeout")}),h.forEach((function(e){l.setRequestHeader(e[0],e[1])})),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{l.send(o)}catch(t){return void i.nextTick((function(){e.emit("error",t)}))}}}},u.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},u.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},u.prototype._write=function(e,t,i){this._body.push(e),i()},u.prototype.abort=u.prototype.destroy=function(){var e=this;e._destroyed=!0,r.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},u.prototype.end=function(e,t,i){"function"==typeof e&&(i=e,e=void 0),h.Writable.prototype.end.call(this,e,t,i)},u.prototype.flushHeaders=function(){},u.prototype.setTimeout=function(){},u.prototype.setNoDelay=function(){},u.prototype.setSocketKeepAlive=function(){};var l=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":110,"./response":112,_process:88,buffer:65,inherits:72,"readable-stream":105,"to-arraybuffer":114}],112:[function(e,t,i){(function(t,r,s){var n=e("./capability"),a=e("inherits"),o=e("readable-stream"),h=i.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=i.IncomingMessage=function(e,i,a,h){var c=this;if(o.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",(function(){t.nextTick((function(){c.emit("close")}))})),"fetch"===a){if(c._fetchResponse=i,c.url=i.url,c.statusCode=i.status,c.statusMessage=i.statusText,i.headers.forEach((function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)})),n.writableStream){var d=new WritableStream({write:function(e){return new Promise((function(t,i){c._destroyed?i():c.push(new s(e))?t():c._resumeFetch=t}))},close:function(){r.clearTimeout(h),c._destroyed||c.push(null)},abort:function(e){c._destroyed||c.emit("error",e)}});try{return void i.body.pipeTo(d).catch((function(e){r.clearTimeout(h),c._destroyed||c.emit("error",e)}))}catch(e){}}var f=i.body.getReader();!function e(){f.read().then((function(t){if(!c._destroyed){if(t.done)return r.clearTimeout(h),void c.push(null);c.push(new s(t.value)),e()}})).catch((function(e){r.clearTimeout(h),c._destroyed||c.emit("error",e)}))}()}else{if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var i=t[1].toLowerCase();"set-cookie"===i?(void 0===c.headers[i]&&(c.headers[i]=[]),c.headers[i].push(t[2])):void 0!==c.headers[i]?c.headers[i]+=", "+t[2]:c.headers[i]=t[2],c.rawHeaders.push(t[1],t[2])}})),c._charset="x-user-defined",!n.overrideMimeType){var u=c.rawHeaders["mime-type"];if(u){var l=u.match(/;\s*charset=([^;])(;|$)/);l&&(c._charset=l[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(c,o.Readable),c.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,i=null;switch(e._mode){case"text:vbarray":if(t.readyState!==h.DONE)break;try{i=new r.VBArray(t.responseBody).toArray()}catch(e){}if(null!==i){e.push(new s(i));break}case"text":try{i=t.responseText}catch(t){e._mode="text:vbarray";break}if(i.length>e._pos){var n=i.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new s(n.length),o=0;o<n.length;o++)a[o]=255&n.charCodeAt(o);e.push(a)}else e.push(n,e._charset);e._pos=i.length}break;case"arraybuffer":if(t.readyState!==h.DONE||!t.response)break;i=t.response,e.push(new s(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=t.response,t.readyState!==h.LOADING||!i)break;e.push(new s(new Uint8Array(i)));break;case"ms-stream":if(i=t.response,t.readyState!==h.LOADING)break;var c=new r.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new s(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(i)}e._xhr.readyState===h.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":110,_process:88,buffer:65,inherits:72,"readable-stream":105}],113:[function(e,t,i){(function(t,r){var s=e("process/browser.js").nextTick,n=Function.prototype.apply,a=Array.prototype.slice,o={},h=0;function c(e,t){this._id=e,this._clearFn=t}i.setTimeout=function(){return new c(n.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new c(n.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i.setImmediate="function"==typeof t?t:function(e){var t=h++,r=!(arguments.length<2)&&a.call(arguments,1);return o[t]=!0,s((function(){o[t]&&(r?e.apply(null,r):e.call(null),i.clearImmediate(t))})),t},i.clearImmediate="function"==typeof r?r:function(e){delete o[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":88,timers:113}],114:[function(e,t,i){var r=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(r.isBuffer(e)){for(var t=new Uint8Array(e.length),i=e.length,s=0;s<i;s++)t[s]=e[s];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:65}],115:[function(e,t,i){"use strict";var r=e("punycode"),s=e("./util");function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=v,i.resolve=function(e,t){return v(e,!1,!0).resolve(t)},i.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},i.format=function(e){s.isString(e)&&(e=v(e));return e instanceof n?e.format():n.prototype.format.call(e)},i.Url=n;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),f=["%","/","?",";","#"].concat(d),u=["/","?","#"],l=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=e("querystring");function v(e,t,i){if(e&&s.isObject(e)&&e instanceof n)return e;var r=new n;return r.parse(e,t,i),r}n.prototype.parse=function(e,t,i){if(!s.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",c=e.split(o);c[0]=c[0].replace(/\\/g,"/");var v=e=c.join(o);if(v=v.trim(),!i&&1===e.split("#").length){var w=h.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var S=a.exec(v);if(S){var _=(S=S[0]).toLowerCase();this.protocol=_,v=v.substr(S.length)}if(i||S||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===v.substr(0,2);!k||S&&b[S]||(v=v.substr(2),this.slashes=!0)}if(!b[S]&&(k||S&&!g[S])){for(var T,O,x=-1,A=0;A<u.length;A++){-1!==(M=v.indexOf(u[A]))&&(-1===x||M<x)&&(x=M)}-1!==(O=-1===x?v.lastIndexOf("@"):v.lastIndexOf("@",x))&&(T=v.slice(0,O),v=v.slice(O+1),this.auth=decodeURIComponent(T)),x=-1;for(A=0;A<f.length;A++){var M;-1!==(M=v.indexOf(f[A]))&&(-1===x||M<x)&&(x=M)}-1===x&&(x=v.length),this.host=v.slice(0,x),v=v.slice(x),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var I=this.hostname.split(/\./),B=(A=0,I.length);A<B;A++){var N=I[A];if(N&&!N.match(l)){for(var P="",R=0,C=N.length;R<C;R++)N.charCodeAt(R)>127?P+="x":P+=N[R];if(!P.match(l)){var L=I.slice(0,A),D=I.slice(A+1),j=N.match(p);j&&(L.push(j[1]),D.unshift(j[2])),D.length&&(v="/"+D.join(".")+v),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+F,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[_])for(A=0,B=d.length;A<B;A++){var z=d[A];if(-1!==v.indexOf(z)){var q=encodeURIComponent(z);q===z&&(q=escape(z)),v=v.split(z).join(q)}}var U=v.indexOf("#");-1!==U&&(this.hash=v.substr(U),v=v.slice(0,U));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,H)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var G=this.search||"";this.path=F+G}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,a="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),t+n+(i=i.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+r},n.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(s.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var i=new n,r=Object.keys(this),a=0;a<r.length;a++){var o=r[a];i[o]=this[o]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),c=0;c<h.length;c++){var d=h[c];"protocol"!==d&&(i[d]=e[d])}return g[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),u=0;u<f.length;u++){var l=f[u];i[l]=e[l]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||b[e.protocol])i.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var m=i.pathname||"",y=i.search||"";i.path=m+y}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),S=w||v||i.host&&e.pathname,_=S,k=i.pathname&&i.pathname.split("/")||[],T=(p=e.pathname&&e.pathname.split("/")||[],i.protocol&&!g[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===k[0]?k[0]=i.host:k.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),S=S&&(""===p[0]||""===k[0])),w)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,k=p;else if(p.length)k||(k=[]),k.pop(),k=k.concat(p),i.search=e.search,i.query=e.query;else if(!s.isNullOrUndefined(e.search)){if(T)i.hostname=i.host=k.shift(),(E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=E.shift(),i.host=i.hostname=E.shift());return i.search=e.search,i.query=e.query,s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!k.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var O=k.slice(-1)[0],x=(i.host||e.host||k.length>1)&&("."===O||".."===O)||""===O,A=0,M=k.length;M>=0;M--)"."===(O=k[M])?k.splice(M,1):".."===O?(k.splice(M,1),A++):A&&(k.splice(M,1),A--);if(!S&&!_)for(;A--;A)k.unshift("..");!S||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),x&&"/"!==k.join("/").substr(-1)&&k.push("");var E,I=""===k[0]||k[0]&&"/"===k[0].charAt(0);T&&(i.hostname=i.host=I?"":k.length?k.shift():"",(E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=E.shift(),i.host=i.hostname=E.shift()));return(S=S||i.host&&k.length)&&!I&&k.unshift(""),k.length?i.pathname=k.join("/"):(i.pathname=null,i.path=null),s.isNull(i.pathname)&&s.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":116,punycode:89,querystring:92}],116:[function(e,t,i){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],117:[function(e,t,i){(function(e){function i(t){try{if(!e.localStorage)return!1}catch(e){return!1}var i=e.localStorage[t];return null!=i&&"true"===String(i).toLowerCase()}t.exports=function(e,t){if(i("noDeprecation"))return e;var r=!1;return function(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],118:[function(e,t,i){arguments[4][58][0].apply(i,arguments)},{dup:58}],119:[function(e,t,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],120:[function(e,t,i){arguments[4][60][0].apply(i,arguments)},{"./support/isBuffer":119,_process:88,dup:60,inherits:118}],121:[function(e,t,i){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],122:[function(e,t,i){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var s in i)r.call(i,s)&&(e[s]=i[s])}return e};var r=Object.prototype.hasOwnProperty},{}],123:[function(e,t,i){"use strict";const r=e("./js/base/Exchange"),s=e("./js/base/Precise"),n=e("./js/base/functions"),a=e("./js/base/errors"),o="1.90.50";r.ccxtVersion=o;const h={binance:e("./js/binance.js"),coinbasepro:e("./js/coinbasepro.js"),kucoin:e("./js/kucoin.js")};t.exports=Object.assign({version:o,Exchange:r,Precise:s,exchanges:Object.keys(h)},h,n,a)},{"./js/base/Exchange":126,"./js/base/Precise":127,"./js/base/errors":129,"./js/base/functions":130,"./js/binance.js":144,"./js/coinbasepro.js":186,"./js/kucoin.js":219,"./js/vcc.js":290,"./js/wavesexchange.js":291,"./js/wazirx.js":292,"./js/whitebit.js":293,"./js/woo.js":294,"./js/xena.js":295,"./js/yobit.js":296,"./js/zaif.js":297,"./js/zb.js":298,"./js/zipmex.js":299,"./js/zonda.js":300}],126:[function(e,t,i){"use strict";const r=e("./functions"),{isNode:s,clone:n,unCamelCase:a,throttle:o,timeout:h,TimedOut:c,defaultFetch:d}=r,{ExchangeError:f,BadSymbol:u,NullResponse:l,InvalidAddress:p,InvalidOrder:m,NotSupported:b,AuthenticationError:g,DDoSProtection:y,RequestTimeout:v,ExchangeNotAvailable:w,RateLimitExceeded:S,ArgumentsRequired:_}=e("./errors"),{TRUNCATE:k,ROUND:T,DECIMAL_PLACES:O,NO_PADDING:x,TICK_SIZE:A}=r.precisionConstants,M=(e("../static_dependencies/BN/bn"),e("./Precise"));t.exports=class e{describe(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!0,rateLimit:2e3,certified:!1,pro:!1,alias:!1,has:{publicAPI:!0,privateAPI:!0,CORS:void 0,spot:void 0,margin:void 0,swap:void 0,future:void 0,option:void 0,addMargin:void 0,cancelAllOrders:void 0,cancelOrder:!0,cancelOrders:void 0,createDepositAddress:void 0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,createPostOnlyOrder:void 0,createReduceOnlyOrder:void 0,createStopOrder:void 0,createStopLimitOrder:void 0,createStopMarketOrder:void 0,editOrder:"emulated",fetchAccounts:void 0,fetchBalance:!0,fetchBidsAsks:void 0,fetchBorrowInterest:void 0,fetchBorrowRate:void 0,fetchBorrowRateHistory:void 0,fetchBorrowRatesPerSymbol:void 0,fetchBorrowRates:void 0,fetchCanceledOrders:void 0,fetchClosedOrder:void 0,fetchClosedOrders:void 0,fetchCurrencies:"emulated",fetchDeposit:void 0,fetchDepositAddress:void 0,fetchDepositAddresses:void 0,fetchDepositAddressesByNetwork:void 0,fetchDeposits:void 0,fetchTransactionFee:void 0,fetchTransactionFees:void 0,fetchFundingHistory:void 0,fetchFundingRate:void 0,fetchFundingRateHistory:void 0,fetchFundingRates:void 0,fetchIndexOHLCV:void 0,fetchL2OrderBook:!0,fetchLedger:void 0,fetchLedgerEntry:void 0,fetchLeverageTiers:void 0,fetchMarketLeverageTiers:void 0,fetchMarkets:!0,fetchMarkOHLCV:void 0,fetchMyTrades:void 0,fetchOHLCV:"emulated",fetchOpenOrder:void 0,fetchOpenOrders:void 0,fetchOrder:void 0,fetchOrderBook:!0,fetchOrderBooks:void 0,fetchOrders:void 0,fetchOrderTrades:void 0,fetchPermissions:void 0,fetchPosition:void 0,fetchPositions:void 0,fetchPositionsRisk:void 0,fetchPremiumIndexOHLCV:void 0,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:void 0,fetchTime:void 0,fetchTrades:!0,fetchTradingFee:void 0,fetchTradingFees:void 0,fetchTradingLimits:void 0,fetchTransactions:void 0,fetchTransfers:void 0,fetchWithdrawal:void 0,fetchWithdrawals:void 0,reduceMargin:void 0,setLeverage:void 0,setMargin:void 0,setMarginMode:void 0,setPositionMode:void 0,signIn:void 0,transfer:void 0,withdraw:void 0},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:f,418:y,429:S,404:w,409:w,410:w,500:w,501:w,502:w,520:w,521:w,522:w,525:w,526:w,400:w,403:w,405:w,503:w,530:w,408:v,504:v,401:g,511:g},commonCurrencies:{XBT:"BTC",BCC:"BCH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:O,paddingMode:x,limits:{leverage:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}constructor(e={}){Object.assign(this,r),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36",chrome100:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.quoteJsonNumbers=!0,this.number=Number,this.handleContentTypeApplicationZip=!1,this.reduceFees=!0,this.fetchImplementation=d,this.validateServerSsl=!0,this.validateClientSsl=!1,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders=void 0,this.trades={},this.transactions={},this.ohlcvs={},this.myTrades=void 0,this.positions={},this.requiresWeb3=!1,this.requiresEddsa=!1,this.precision={},this.lastRestRequestTimestamp=0,this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;const t=(e=this)=>{if(null!==e){const i=Object.getOwnPropertyNames(e);for(let e=0;e<i.length;e++){const t=i[e];this[a(t)]=this[t]}t(Object.getPrototypeOf(e))}};t();const i=Object.entries(this.describe()).concat(Object.entries(e));for(let e=0;e<i.length;e++){const[t,r]=i[e];r&&Object.getPrototypeOf(r)===Object.prototype?this[t]=this.deepExtend(this[t],r):this[t]=r}const n={keepAlive:!0};this.validateServerSsl||(n.rejectUnauthorized=!1),!this.httpAgent&&d.http&&s&&(this.httpAgent=new d.http.Agent(n)),!this.httpsAgent&&d.https&&s&&(this.httpsAgent=new d.https.Agent(n));const o=Object.keys(this.has);for(let e=0;e<o.length;e++){const t=o[e];this["has"+this.capitalize(t)]=!!this.has[t]}this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}encodeURIComponent(...e){return encodeURIComponent(...e)}checkRequiredVersion(t,i=!0){let r=!0;const[s,n,a]=t.split("."),[o,h,c]=e.ccxtVersion.split("."),d=parseInt(s),f=parseInt(n),u=parseInt(a),l=parseInt(o),p=parseInt(h),m=parseInt(c);if(d>l&&(r=!1),d===l&&(f>p||f===p&&u>m)&&(r=!1),!r){if(i)throw new b("Your current version of CCXT is "+e.ccxtVersion+", a newer version "+t+" is required, please, upgrade your version of CCXT");return i}return r}checkAddress(e){if(void 0===e)throw new p(this.id+" address is undefined");if(1===this.unique(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new p(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}initRestRateLimiter(){if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:.001,capacity:1,cost:1,maxCapacity:1e3,refillRate:this.rateLimit>0?1/this.rateLimit:Number.MAX_VALUE},this.tokenBucket),this.throttle=o(this.tokenBucket),this.executeRestRequest=(e,t="GET",i,r)=>{const n=this.fetchImplementation,a={method:t,headers:i,body:r,timeout:this.timeout};this.agent?a.agent=this.agent:this.httpAgent&&0===e.indexOf("http://")?a.agent=this.httpAgent:this.httpsAgent&&0===e.indexOf("https://")&&(a.agent=this.httpsAgent);const o=n(e,this.extend(a,this.fetchOptions)).catch((i=>{if(s)throw new w([this.id,t,e,i.type,i.message].join(" "));throw i})).then((s=>this.handleRestResponse(s,e,t,i,r)));return h(this.timeout,o).catch((i=>{if(i instanceof c)throw new v(this.id+" "+t+" "+e+" request timed out ("+this.timeout+" ms)");throw i}))}}setSandboxMode(e){if(e){if(!("test"in this.urls))throw new b(this.id+" does not have a sandbox URL");"string"==typeof this.urls.api?(this.urls.apiBackup=this.urls.api,this.urls.api=this.urls.test):(this.urls.apiBackup=n(this.urls.api),this.urls.api=n(this.urls.test))}else"apiBackup"in this.urls&&("string"==typeof this.urls.api?this.urls.api=this.urls.apiBackup:this.urls.api=n(this.urls.apiBackup))}defineRestApiEndpoint(e,t,i,r,s,n,a={}){const o=s.split(/[^a-zA-Z0-9]/),h=o.map(this.capitalize).join(""),c=o.map((e=>e.trim().toLowerCase())).filter((e=>e.length>0)).join("_"),d=[n[0]].concat(n.slice(1).map(this.capitalize)).join(""),f=[n[0]].concat(n.slice(1).map((e=>e.trim())).filter((e=>e.length>0))).join("_"),u=d+r+this.capitalize(h),l=f+"_"+i+"_"+c,p=n.length>1?n:n[0],m=async(i={},r={})=>this[e](s,p,t,i,void 0,void 0,a,r);this[u]=m,this[l]=m}defineRestApi(e,t,i=[]){const r=Object.keys(e);for(let s=0;s<r.length;s++){const n=r[s],a=e[n],o=n.toUpperCase(),h=n.toLowerCase(),c=this.capitalize(h);if(Array.isArray(a))for(let e=0;e<a.length;e++){const r=a[e].trim();this.defineRestApiEndpoint(t,o,h,c,r,i)}else if(n.match(/^(?:get|post|put|delete|head|patch)$/i)){const e=Object.keys(a);for(let r=0;r<e.length;r++){const s=e[r],n=s.trim(),d=a[s];if("object"==typeof d)this.defineRestApiEndpoint(t,o,h,c,n,i,d);else{if("number"!=typeof d)throw new b(this.id+" defineRestApi() API format is not supported, API leafs must strings, objects or numbers");this.defineRestApiEndpoint(t,o,h,c,n,i,{cost:d})}}}else this.defineRestApi(a,t,i.concat([n]))}}log(...e){console.log(...e)}fetch(e,t="GET",i,r){return s&&this.userAgent&&("string"==typeof this.userAgent?i=this.extend({"User-Agent":this.userAgent},i):"object"==typeof this.userAgent&&"User-Agent"in this.userAgent&&(i=this.extend(this.userAgent,i))),"function"==typeof this.proxy?(e=this.proxy(e),s&&(i=this.extend({Origin:this.origin},i))):"string"==typeof this.proxy&&(this.proxy.length&&s&&(i=this.extend({Origin:this.origin},i)),e=this.proxy+e),i=this.extend(this.headers,i),i=this.setHeaders(i),this.verbose&&this.log("fetch Request:\n",this.id,t,e,"\nRequestHeaders:\n",i,"\nRequestBody:\n",r,"\n"),this.executeRestRequest(e,t,i,r)}parseJson(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(this.onJsonResponse(e))}catch(e){return}}getResponseHeaders(e){const t={};return e.headers.forEach(((e,i)=>{i=i.split("-").map((e=>this.capitalize(e))).join("-"),t[i]=e})),t}handleRestResponse(e,t,i="GET",r,s){const n=this.getResponseHeaders(e);if(this.handleContentTypeApplicationZip&&"application/zip"===n["Content-Type"]){const r=e.buffer();return this.enableLastResponseHeaders&&(this.last_response_headers=n),this.enableLastHttpResponse&&(this.last_http_response=r),this.verbose&&this.log("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponseHeaders:\n",n,"ZIP redacted","\n"),r}return e.text().then((a=>{const o=this.onRestResponse(e.status,e.statusText,t,i,n,a,r,s),h=this.parseJson(o);this.enableLastResponseHeaders&&(this.last_response_headers=n),this.enableLastHttpResponse&&(this.last_http_response=a),this.enableLastJsonResponse&&(this.last_json_response=h),this.verbose&&this.log("handleRestResponse:\n",this.id,i,t,e.status,e.statusText,"\nResponseHeaders:\n",n,"\nResponseBody:\n",a,"\n");return this.handleErrors(e.status,e.statusText,t,i,n,a,h,r,s)||this.handleHttpStatusCode(e.status,e.statusText,t,i,a),h||a}))}onRestResponse(e,t,i,r,s,n,a,o){return n.trim()}onJsonResponse(e){return this.quoteJsonNumbers?e.replace(/":([+.0-9eE-]+)([,}])/g,'":"$1"$2'):e}async loadMarketsHelper(e=!1,t={}){if(!e&&this.markets)return this.markets_by_id?this.markets:this.setMarkets(this.markets);let i;!0===this.has.fetchCurrencies&&(i=await this.fetchCurrencies());const r=await this.fetchMarkets(t);return this.setMarkets(r,i)}loadMarkets(e=!1,t={}){return(e&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(e,t).then((e=>(this.reloadingMarkets=!1,e)),(e=>{throw this.reloadingMarkets=!1,e}))),this.marketsLoading}fetchCurrencies(e={}){return new Promise(((e,t)=>e(this.currencies)))}fetchMarkets(e={}){return new Promise(((e,t)=>e(Object.values(this.markets))))}filterBySinceLimit(e,t,i,r="timestamp",s=!1){return null!=t&&(e=e.filter((e=>e[r]>=t))),null!=i&&(e=s?e.slice(-i):e.slice(0,i)),e}filterByValueSinceLimit(e,t,i,r,s,n="timestamp",a=!1){const o=null!=i,h=null!=r;return(o||h)&&(e=e.filter((e=>(!o||e[t]===i)&&(!h||e[n]>=r)))),null!=s&&(e=a?e.slice(-s):e.slice(0,s)),e}checkRequiredDependencies(){}remove0xPrefix(e){return"0x"===e.slice(0,2)?e.slice(2):e}hashMessage(e){const t=this.base16ToBinary(this.remove0xPrefix(e)),i=this.stringToBinary("Ethereum Signed Message:\n"+t.sigBytes);return"0x"+this.hash(this.binaryConcat(i,t),"keccak","hex")}signHash(e,t){const i=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+i.r,s:"0x"+i.s,v:27+i.v}}signMessage(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}signMessageString(e,t){const i=this.signMessage(e,t);return i.r+this.remove0xPrefix(i.s)+this.binaryToBase16(this.numberToBE(i.v))}parseNumber(e,t){if(void 0===e)return t;try{return this.number(e)}catch(e){return t}}checkOrderArguments(e,t,i,r,s,n){if(void 0===s&&"limit"===t)throw new _(this.id+" createOrder() requires a price argument for a limit order");if(r<=0)throw new _(this.id+" createOrder() amount should be above 0")}handleHttpStatusCode(e,t,i,r,s){const n=e.toString();if(n in this.httpExceptions){throw new(0,this.httpExceptions[n])(this.id+" "+r+" "+i+" "+n+" "+t+" "+s)}}safeLedgerEntry(e,t){t=this.safeCurrency(void 0,t);let i=this.safeString(e,"direction"),r=this.safeString(e,"before"),s=this.safeString(e,"after");const n=this.safeString(e,"amount");void 0!==n&&(void 0===r&&void 0!==s?r=M.stringSub(s,n):void 0!==r&&void 0===s&&(s=M.stringAdd(r,n))),void 0!==r&&void 0!==s&&void 0===i&&(M.stringGt(r,s)&&(i="out"),M.stringGt(s,r)&&(i="in"));const a=this.safeValue(e,"fee");void 0!==a&&(a.cost=this.safeNumber(a,"cost"));const o=this.safeInteger(e,"timestamp");return{id:this.safeString(e,"id"),timestamp:o,datetime:this.iso8601(o),direction:i,account:this.safeString(e,"account"),referenceId:this.safeString(e,"referenceId"),referenceAccount:this.safeString(e,"referenceAccount"),type:this.safeString(e,"type"),currency:t.code,amount:this.parseNumber(n),before:this.parseNumber(r),after:this.parseNumber(s),status:this.safeString(e,"status"),fee:a,info:e}}setMarkets(e,t){const i=[],r=this.toArray(e);for(let e=0;e<r.length;e++){const t=this.deepExtend(this.safeMarket(),{precision:this.precision,limits:this.limits},this.fees.trading,r[e]);i.push(t)}this.markets=this.indexBy(i,"symbol"),this.markets_by_id=this.indexBy(e,"id");const s=this.keysort(this.markets),n=this.keysort(this.markets_by_id);if(this.symbols=Object.keys(s),this.ids=Object.keys(n),void 0!==t)this.currencies=this.deepExtend(this.currencies,t);else{let e=[],t=[];for(let r=0;r<i.length;r++){const s=i[r],n=this.precisionMode===O?8:this.parseNumber("0.00000001"),a=this.safeValue(s,"precision",{});if("base"in s){const t=this.safeValue2(a,"base","amount",n),i={id:this.safeString2(s,"baseId","base"),numericId:this.safeString(s,"baseNumericId"),code:this.safeString(s,"base"),precision:t};e.push(i)}if("quote"in s){const e=this.safeValue2(a,"quote","amount",n),i={id:this.safeString2(s,"quoteId","quote"),numericId:this.safeString(s,"quoteNumericId"),code:this.safeString(s,"quote"),precision:e};t.push(i)}}e=this.sortBy(e,"code"),t=this.sortBy(t,"code"),this.baseCurrencies=this.indexBy(e,"code"),this.quoteCurrencies=this.indexBy(t,"code");const r=this.arrayConcat(e,t),s=this.groupBy(r,"code"),n=Object.keys(s),a=[];for(let e=0;e<n.length;e++){const t=n[e],i=this.safeValue(s,t,[]);let r=this.safeValue(i,0);for(let e=1;e<i.length;e++){const t=i[e];r=this.precisionMode===A?t.precision<r.precision?t:r:t.precision>r.precision?t:r}a.push(r)}const o=this.sortBy(a,"code");this.currencies=this.deepExtend(this.currencies,this.indexBy(o,"code"))}this.currencies_by_id=this.indexBy(this.currencies,"id");const a=this.keysort(this.currencies);return this.codes=Object.keys(a),this.markets}safeBalance(e){const t=this.omit(e,["info","timestamp","datetime","free","used","total"]),i=Object.keys(t);e.free={},e.used={},e.total={};for(let t=0;t<i.length;t++){const r=i[t];let s=this.safeString(e[r],"total"),n=this.safeString(e[r],"free"),a=this.safeString(e[r],"used");void 0===s&&void 0!==n&&void 0!==a&&(s=M.stringAdd(n,a)),void 0===n&&void 0!==s&&void 0!==a&&(n=M.stringSub(s,a)),void 0===a&&void 0!==s&&void 0!==n&&(a=M.stringSub(s,n)),e[r].free=this.parseNumber(n),e[r].used=this.parseNumber(a),e[r].total=this.parseNumber(s),e.free[r]=e[r].free,e.used[r]=e[r].used,e.total[r]=e[r].total}return e}safeOrder(e,t){let i=this.omitZero(this.safeString(e,"amount")),r=this.safeString(e,"remaining"),s=this.safeString(e,"filled"),n=this.safeString(e,"cost"),a=this.omitZero(this.safeString(e,"average")),o=this.omitZero(this.safeString(e,"price")),h=this.safeInteger(e,"lastTradeTimestamp");const c=void 0===s,d=void 0===n,f=void 0===h,u=this.safeValue(e,"fee"),l=void 0===u,p=void 0===this.safeValue(e,"fees"),m=l||p,b=this.safeValue(e,"fees",[]);let g=[];if(c||d||m){const i=this.safeValue(e,"trades",g),r=this.number;this.number=String,g=this.parseTrades(i,t,void 0,void 0,{symbol:e.symbol,side:e.side,type:e.type,order:e.id}),this.number=r;let a=0;const o=Array.isArray(g);if(o&&(a=g.length),o&&a>0){void 0===e.symbol&&(e.symbol=g[0].symbol),void 0===e.side&&(e.side=g[0].side),void 0===e.type&&(e.type=g[0].type),void 0===e.id&&(e.id=g[0].order),c&&(s="0"),d&&(n="0");for(let e=0;e<g.length;e++){const t=g[e],i=this.safeString(t,"amount");c&&void 0!==i&&(s=M.stringAdd(s,i));const r=this.safeString(t,"cost");d&&void 0!==r&&(n=M.stringAdd(n,r));const a=this.safeValue(t,"timestamp");if(f&&void 0!==a&&(h=void 0===h?a:Math.max(h,a)),m){const e=this.safeValue(t,"fees");if(void 0!==e)for(let t=0;t<e.length;t++){const i=e[t];b.push(this.extend({},i))}else{const e=this.safeValue(t,"fee");void 0!==e&&b.push(this.extend({},e))}}}}}if(m){const t=this.reduceFees?this.reduceFeesByCurrency(b,!0):b,i=t.length;for(let e=0;e<i;e++)t[e].cost=this.safeNumber(t[e],"cost"),"rate"in t[e]&&(t[e].rate=this.safeNumber(t[e],"rate"));l||0!==i||(u.cost=this.safeNumber(u,"cost"),"rate"in u&&(u.rate=this.safeNumber(u,"rate")),t.push(u)),p&&(e.fees=t),l&&1===i&&(e.fee=t[0])}void 0===i&&(void 0!==s&&void 0!==r?i=M.stringAdd(s,r):"closed"===this.safeString(e,"status")&&(i=s)),void 0===s&&void 0!==i&&void 0!==r&&(s=M.stringSub(i,r)),void 0===r&&void 0!==i&&void 0!==s&&(r=M.stringSub(i,s)),void 0===a&&void 0!==s&&void 0!==n&&M.stringGt(s,"0")&&(a=M.stringDiv(n,s));if(d&&void 0!==s&&(void 0!==a||void 0!==o)){let e;e=void 0===a?o:a;const i=this.safeString(t,"contractSize");if(void 0!==i){this.safeValue(t,"inverse",!1)&&(e=M.stringDiv("1",e)),e=M.stringMul(e,i)}n=M.stringMul(e,s)}const y=this.safeValue(e,"type");(void 0===o||M.stringEquals(o,"0"))&&"market"===y&&(o=a);for(let e=0;e<g.length;e++){const t=g[e];t.amount=this.safeNumber(t,"amount"),t.price=this.safeNumber(t,"price"),t.cost=this.safeNumber(t,"cost");const i=this.safeValue(t,"fee",{});i.cost=this.safeNumber(i,"cost"),"rate"in i&&(i.rate=this.safeNumber(i,"rate")),t.fee=i}let v=this.safeString(e,"timeInForce");return void 0===v&&("market"===this.safeString(e,"type")&&(v="IOC"),this.safeValue(e,"postOnly",!1)&&(v="PO")),this.extend(e,{lastTradeTimestamp:h,price:this.parseNumber(o),amount:this.parseNumber(i),cost:this.parseNumber(n),average:this.parseNumber(a),filled:this.parseNumber(s),remaining:this.parseNumber(r),timeInForce:v,trades:g})}parseOrders(e,t,i,r,s={}){let n=[];if(Array.isArray(e))for(let i=0;i<e.length;i++){const r=this.extend(this.parseOrder(e[i],t),s);n.push(r)}else{const i=Object.keys(e);for(let r=0;r<i.length;r++){const a=i[r],o=this.extend(this.parseOrder(this.extend({id:a},e[a]),t),s);n.push(o)}}n=this.sortBy(n,"timestamp");const a=void 0!==t?t.symbol:void 0,o=void 0===i;return this.filterBySymbolSinceLimit(n,a,i,r,o)}calculateFee(e,t,i,r,s,n="taker",a={}){const o=this.markets[e],h=this.safeString(o,"feeSide","quote");let c,d="quote";"quote"===h?c=r*s:"base"===h?c=r:"get"===h?(c=r,"sell"===i?c*=s:d="base"):"give"===h&&(c=r,"buy"===i?c*=s:d="base");const f=o[n];return void 0!==c&&(c*=f),{type:n,currency:o[d],rate:f,cost:c}}safeTrade(e,t){const i=this.safeString(e,"amount"),r=this.safeString(e,"price");let s=this.safeString(e,"cost");if(void 0===s){const e=this.safeString(t,"contractSize");let n=r;if(void 0!==e){this.safeValue(t,"inverse",!1)&&(n=M.stringDiv("1",r)),n=M.stringMul(n,e)}s=M.stringMul(n,i)}const n=void 0===this.safeValue(e,"fee"),a=void 0===this.safeValue(e,"fees"),o=n||a,h=[];if(o){const t=this.safeValue(e,"fees");if(void 0!==t)for(let e=0;e<t.length;e++){const i=t[e];h.push(this.extend({},i))}else{const t=this.safeValue(e,"fee");void 0!==t&&h.push(this.extend({},t))}}const c=this.safeValue(e,"fee");if(o){const t=this.reduceFees?this.reduceFeesByCurrency(h,!0):h,i=t.length;for(let e=0;e<i;e++)t[e].cost=this.safeNumber(t[e],"cost"),"rate"in t[e]&&(t[e].rate=this.safeNumber(t[e],"rate"));n||0!==i||(c.cost=this.safeNumber(c,"cost"),"rate"in c&&(c.rate=this.safeNumber(c,"rate")),t.push(c)),a&&(e.fees=t),n&&1===i&&(e.fee=t[0]);const r=this.safeValue(e,"fee");void 0!==r&&(r.cost=this.safeNumber(r,"cost"),"rate"in r&&(r.rate=this.safeNumber(r,"rate")),e.fee=r)}return e.amount=this.parseNumber(i),e.price=this.parseNumber(r),e.cost=this.parseNumber(s),e}reduceFeesByCurrency(e,t=!1){const i={};for(let r=0;r<e.length;r++){const s=e[r],n=this.safeString(s,"currency");if(void 0!==n){const e=this.safeString(s,"rate"),r=this.safeValue(s,"cost");n in i||(i[n]={});const a=void 0===e?"":e;a in i[n]?i[n][a].cost=t?M.stringAdd(i[n][a].cost,r):this.sum(i[n][a].cost,r):(i[n][a]={currency:n,cost:t?r:this.parseNumber(r)},void 0!==e&&(i[n][a].rate=t?e:this.parseNumber(e)))}}let r=[];const s=Object.values(i);for(let e=0;e<s.length;e++){const t=Object.values(s[e]);r=this.arrayConcat(r,t)}return r}safeTicker(e,t){let i=this.safeValue(e,"open"),r=this.safeValue(e,"close"),s=this.safeValue(e,"last"),n=this.safeValue(e,"change"),a=this.safeValue(e,"percentage"),o=this.safeValue(e,"average"),h=this.safeValue(e,"vwap");const c=this.safeValue(e,"baseVolume"),d=this.safeValue(e,"quoteVolume");return void 0===h&&(h=M.stringDiv(d,c)),void 0!==s&&void 0===r?r=s:void 0===s&&void 0!==r&&(s=r),void 0!==s&&void 0!==i&&(void 0===n&&(n=M.stringSub(s,i)),void 0===o&&(o=M.stringDiv(M.stringAdd(s,i),"2"))),void 0===a&&void 0!==n&&void 0!==i&&M.stringGt(i,"0")&&(a=M.stringMul(M.stringDiv(n,i),"100")),void 0===n&&void 0!==a&&void 0!==i&&(n=M.stringDiv(M.stringMul(a,i),"100")),void 0===i&&void 0!==s&&void 0!==n&&(i=M.stringSub(s,n)),this.extend(e,{bid:this.safeNumber(e,"bid"),bidVolume:this.safeNumber(e,"bidVolume"),ask:this.safeNumber(e,"ask"),askVolume:this.safeNumber(e,"askVolume"),high:this.safeNumber(e,"high"),low:this.safeNumber(e,"low"),open:this.parseNumber(i),close:this.parseNumber(r),last:this.parseNumber(s),change:this.parseNumber(n),percentage:this.parseNumber(a),average:this.parseNumber(o),vwap:this.parseNumber(h),baseVolume:this.parseNumber(c),quoteVolume:this.parseNumber(d),previousClose:this.safeNumber(e,"previousClose")})}async fetchOHLCV(e,t="1m",i,r,s={}){if(!this.has.fetchTrades)throw new b(this.id+" fetchOHLCV() is not supported yet");await this.loadMarkets();const n=await this.fetchTrades(e,i,r,s),a=this.buildOHLCVC(n,t,i,r),o=[];for(let e=0;e<a.length;e++)o.push([this.safeInteger(a[e],0),this.safeNumber(a[e],1),this.safeNumber(a[e],2),this.safeNumber(a[e],3),this.safeNumber(a[e],4),this.safeNumber(a[e],5)]);return o}convertTradingViewToOHLCV(e,t="t",i="o",r="h",s="l",n="c",a="v",o=!1){const h=[],c=this.safeValue(e,t,[]),d=this.safeValue(e,i,[]),f=this.safeValue(e,r,[]),u=this.safeValue(e,s,[]),l=this.safeValue(e,n,[]),p=this.safeValue(e,a,[]);for(let e=0;e<c.length;e++)h.push([o?this.safeInteger(c,e):this.safeTimestamp(c,e),this.safeValue(d,e),this.safeValue(f,e),this.safeValue(u,e),this.safeValue(l,e),this.safeValue(p,e)]);return h}convertOHLCVToTradingView(e,t="t",i="o",r="h",s="l",n="c",a="v",o=!1){const h={};h[t]=[],h[i]=[],h[r]=[],h[s]=[],h[n]=[],h[a]=[];for(let c=0;c<e.length;c++){const d=o?e[c][0]:parseInt(e[c][0]/1e3);h[t].push(d),h[i].push(e[c][1]),h[r].push(e[c][2]),h[s].push(e[c][3]),h[n].push(e[c][4]),h[a].push(e[c][5])}return h}marketIds(e){const t=[];for(let i=0;i<e.length;i++)t.push(this.marketId(e[i]));return t}marketSymbols(e){if(void 0===e)return e;const t=[];for(let i=0;i<e.length;i++)t.push(this.symbol(e[i]));return t}parseBidsAsks(e,t=0,i=1){e=this.toArray(e);const r=[];for(let s=0;s<e.length;s++)r.push(this.parseBidAsk(e[s],t,i));return r}async fetchL2OrderBook(e,t,i={}){const r=await this.fetchOrderBook(e,t,i);return this.extend(r,{asks:this.sortBy(this.aggregate(r.asks),0),bids:this.sortBy(this.aggregate(r.bids),0,!0)})}filterBySymbol(e,t){if(void 0===t)return e;const i=[];for(let r=0;r<e.length;r++){this.safeString(e[r],"symbol")===t&&i.push(e[r])}return i}parseOHLCV(e,t){return Array.isArray(e)?[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]:e}getNetwork(e,t){const i={ETHEREUM:"ETH",ETHER:"ETH",ERC20:"ETH",ETH:"ETH",TRC20:"TRX",TRON:"TRX",TRX:"TRX",BEP20:"BSC",BSC:"BSC",HRC20:"HT",HECO:"HT",SPL:"SOL",SOL:"SOL",TERRA:"LUNA",LUNA:"LUNA",POLYGON:"MATIC",MATIC:"MATIC",EOS:"EOS",WAVES:"WAVES",AVALANCHE:"AVAX",AVAX:"AVAX",QTUM:"QTUM",CHZ:"CHZ",NEO:"NEO",ONT:"ONT",RON:"RON"};if((e=e.toUpperCase())===t)return e;if(e in i)return i[e];throw new b(this.id+" network "+e+" is not yet supported")}safeNumber2(e,t,i,r){const s=this.safeString2(e,t,i);return this.parseNumber(s,r)}parseOrderBook(e,t,i,r="bids",s="asks",n=0,a=1){const o=this.parseBidsAsks(this.safeValue(e,r,[]),n,a),h=this.parseBidsAsks(this.safeValue(e,s,[]),n,a);return{symbol:t,bids:this.sortBy(o,0,!0),asks:this.sortBy(h,0),timestamp:i,datetime:this.iso8601(i),nonce:void 0}}parseOHLCVs(e,t,i="1m",r,s){const n=[];for(let i=0;i<e.length;i++)n.push(this.parseOHLCV(e[i],t));const a=this.sortBy(n,0),o=void 0===r;return this.filterBySinceLimit(a,r,s,0,o)}parseLeverageTiers(e,t,i){t=this.marketSymbols(t);const r={};for(let s=0;s<e.length;s++){const n=e[s],a=this.safeString(n,i),o=this.safeMarket(a),h=o.symbol;this.safeValue(o,"contract",!1)&&(void 0===t||this.inArray(h,t))&&(r[h]=this.parseMarketLeverageTiers(n,o))}return r}async loadTradingLimits(e,t=!1,i={}){if(this.has.fetchTradingLimits&&(t||!("limitsLoaded"in this.options))){const t=await this.fetchTradingLimits(e);for(let i=0;i<e.length;i++){const r=e[i];this.markets[r]=this.deepExtend(this.markets[r],t[r])}this.options.limitsLoaded=this.milliseconds()}return this.markets}parsePositions(e,t,i={}){t=this.marketSymbols(t),e=this.toArray(e);const r=[];for(let t=0;t<e.length;t++){const s=this.extend(this.parsePosition(e[t],void 0),i);r.push(s)}return this.filterByArray(r,"symbol",t,!1)}parseAccounts(e,t={}){e=this.toArray(e);const i=[];for(let r=0;r<e.length;r++){const s=this.extend(this.parseAccount(e[r]),t);i.push(s)}return i}parseTrades(e,t,i,r,s={}){e=this.toArray(e);let n=[];for(let i=0;i<e.length;i++){const r=this.extend(this.parseTrade(e[i],t),s);n.push(r)}n=this.sortBy2(n,"timestamp","id");const a=void 0!==t?t.symbol:void 0,o=void 0===i;return this.filterBySymbolSinceLimit(n,a,i,r,o)}parseTransactions(e,t,i,r,s={}){e=this.toArray(e);let n=[];for(let i=0;i<e.length;i++){const r=this.extend(this.parseTransaction(e[i],t),s);n.push(r)}n=this.sortBy(n,"timestamp");const a=void 0!==t?t.code:void 0,o=void 0===i;return this.filterByCurrencySinceLimit(n,a,i,r,o)}parseTransfers(e,t,i,r,s={}){e=this.toArray(e);let n=[];for(let i=0;i<e.length;i++){const r=this.extend(this.parseTransfer(e[i],t),s);n.push(r)}n=this.sortBy(n,"timestamp");const a=void 0!==t?t.code:void 0,o=void 0===i;return this.filterByCurrencySinceLimit(n,a,i,r,o)}parseLedger(e,t,i,r,s={}){let n=[];const a=this.toArray(e);for(let e=0;e<a.length;e++){const i=this.parseLedgerEntry(a[e],t);if(Array.isArray(i))for(let e=0;e<i.length;e++)n.push(this.extend(i[e],s));else n.push(this.extend(i,s))}n=this.sortBy(n,"timestamp");const o=void 0!==t?t.code:void 0,h=void 0===i;return this.filterByCurrencySinceLimit(n,o,i,r,h)}nonce(){return this.seconds()}setHeaders(e){return e}marketId(e){const t=this.market(e);return void 0!==t?t.id:e}symbol(e){const t=this.market(e);return this.safeString(t,"symbol",e)}resolvePath(e,t){return[this.implodeParams(e,t),this.omit(t,this.extractParams(e))]}filterByArray(e,t,i,r=!0){if(e=this.toArray(e),void 0===i||!i)return r?this.indexBy(e,t):e;const s=[];for(let r=0;r<e.length;r++)this.inArray(e[r][t],i)&&s.push(e[r]);return r?this.indexBy(s,t):s}async fetch2(e,t="public",i="GET",r={},s,n,a={},o={}){if(this.enableRateLimit){const s=this.calculateRateLimiterCost(t,i,e,r,a,o);await this.throttle(s)}this.lastRestRequestTimestamp=this.milliseconds();const h=this.sign(e,t,i,r,s,n);return await this.fetch(h.url,h.method,h.headers,h.body)}async request(e,t="public",i="GET",r={},s,n,a={},o={}){return await this.fetch2(e,t,i,r,s,n,a,o)}async loadAccounts(e=!1,t={}){if(e)this.accounts=await this.fetchAccounts(t);else{if(this.accounts)return this.accounts;this.accounts=await this.fetchAccounts(t)}return this.accountsById=this.indexBy(this.accounts,"id"),this.accounts}async fetchOHLCVC(e,t="1m",i,r,s={}){if(!this.has.fetchTrades)throw new b(this.id+" fetchOHLCV() is not supported yet");await this.loadMarkets();const n=await this.fetchTrades(e,i,r,s);return this.buildOHLCVC(n,t,i,r)}parseTradingViewOHLCV(e,t,i="1m",r,s){const n=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(n,t,i,r,s)}async editLimitBuyOrder(e,t,i,r,s={}){return await this.editLimitOrder(e,t,"buy",i,r,s)}async editLimitSellOrder(e,t,i,r,s={}){return await this.editLimitOrder(e,t,"sell",i,r,s)}async editLimitOrder(e,t,i,r,s,n={}){return await this.editOrder(e,t,"limit",i,r,s,n)}async editOrder(e,t,i,r,s,n,a={}){return await this.cancelOrder(e,t),await this.createOrder(t,i,r,s,n,a)}async fetchPermissions(e={}){throw new b(this.id+" fetchPermissions() is not supported yet")}async fetchBidsAsks(e,t={}){throw new b(this.id+" fetchBidsAsks() is not supported yet")}parseBidAsk(e,t=0,i=1){return[this.safeNumber(e,t),this.safeNumber(e,i)]}safeCurrency(e,t){if(void 0===e&&void 0!==t)return t;if(void 0!==this.currencies_by_id&&e in this.currencies_by_id)return this.currencies_by_id[e];let i=e;return void 0!==e&&(i=this.commonCurrencyCode(e.toUpperCase())),{id:e,code:i}}safeMarket(e,t,i){const r={id:e,symbol:e,base:void 0,quote:void 0,baseId:void 0,quoteId:void 0,active:void 0,type:void 0,linear:void 0,inverse:void 0,spot:!1,swap:!1,future:!1,option:!1,margin:!1,contract:!1,contractSize:void 0,expiry:void 0,expiryDatetime:void 0,optionType:void 0,strike:void 0,settle:void 0,settleId:void 0,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:void 0};if(void 0!==e)if(void 0!==this.markets_by_id&&e in this.markets_by_id)t=this.markets_by_id[e];else if(void 0!==i){const t=e.split(i);return 2===t.length?(r.baseId=this.safeString(t,0),r.quoteId=this.safeString(t,1),r.base=this.safeCurrencyCode(r.baseId),r.quote=this.safeCurrencyCode(r.quoteId),r.symbol=r.base+"/"+r.quote,r):r}return void 0!==t?t:r}checkRequiredCredentials(e=!0){const t=Object.keys(this.requiredCredentials);for(let i=0;i<t.length;i++){const r=t[i];if(this.requiredCredentials[r]&&!this[r]){if(e)throw new g(this.id+' requires "'+r+'" credential');return e}}return!0}oath(){if(void 0!==this.twofa)return this.totp(this.twofa);throw new f(this.id+" exchange.twofa has not been set for 2FA Two-Factor Authentication")}async fetchBalance(e={}){throw new b(this.id+" fetchBalance() is not supported yet")}async fetchPartialBalance(e,t={}){return(await this.fetchBalance(t))[e]}async fetchFreeBalance(e={}){return await this.fetchPartialBalance("free",e)}async fetchUsedBalance(e={}){return await this.fetchPartialBalance("used",e)}async fetchTotalBalance(e={}){return await this.fetchPartialBalance("total",e)}async fetchStatus(e={}){if(this.has.fetchTime){const t=await this.fetchTime(e);this.status=this.extend(this.status,{updated:t})}return this.status}async fetchFundingFee(e,t={}){if(this.safeValue(this.options,"warnOnFetchFundingFee",!0))throw new b(this.id+' fetchFundingFee() method is deprecated, it will be removed in July 2022, please, use fetchTransactionFee() or set exchange.options["warnOnFetchFundingFee"] = false to suppress this warning');return this.fetchTransactionFee(e,t)}async fetchFundingFees(e,t={}){if(this.safeValue(this.options,"warnOnFetchFundingFees",!0))throw new b(this.id+' fetchFundingFees() method is deprecated, it will be removed in July 2022. Please, use fetchTransactionFees() or set exchange.options["warnOnFetchFundingFees"] = false to suppress this warning');return this.fetchTransactionFees(e,t)}async fetchTransactionFee(e,t={}){if(!this.has.fetchTransactionFees)throw new b(this.id+" fetchTransactionFee() is not supported yet");return this.fetchTransactionFees([e],t)}async fetchTransactionFees(e,t={}){throw new b(this.id+" fetchTransactionFees() is not supported yet")}getSupportedMapping(e,t={}){if(e in t)return t[e];throw new b(this.id+" "+e+" does not have a value in mapping")}async fetchBorrowRate(e,t={}){if(await this.loadMarkets(),!this.has.fetchBorrowRates)throw new b(this.id+" fetchBorrowRate() is not supported yet");const i=await this.fetchBorrowRates(t),r=this.safeValue(i,e);if(void 0===r)throw new f(this.id+" fetchBorrowRate() could not find the borrow rate for currency code "+e);return r}handleMarketTypeAndParams(e,t,i={}){const r=this.safeString2(this.options,"defaultType","type","spot"),s=this.safeValue(this.options,e);let n=r;void 0!==s&&(n="string"==typeof s?s:this.safeString2(s,"defaultType","type",n));const a=void 0===t?n:t.type;return[this.safeString2(i,"defaultType","type",a),i=this.omit(i,["defaultType","type"])]}throwExactlyMatchedException(e,t,i){if(t in e)throw new e[t](i)}throwBroadlyMatchedException(e,t,i){const r=this.findBroadlyMatchedKey(e,t);if(void 0!==r)throw new e[r](i)}findBroadlyMatchedKey(e,t){const i=Object.keys(e);for(let e=0;e<i.length;e++){const r=i[e];if(t.indexOf(r)>=0)return r}}handleErrors(e,t,i,r,s,n,a,o,h){}calculateRateLimiterCost(e,t,i,r,s={},n={}){return this.safeValue(s,"cost",1)}async fetchTicker(e,t={}){if(this.has.fetchTickers){const i=await this.fetchTickers([e],t),r=this.safeValue(i,e);if(void 0===r)throw new l(this.id+" fetchTickers() could not find a ticker for "+e);return r}throw new b(this.id+" fetchTicker() is not supported yet")}async fetchTickers(e,t={}){throw new b(this.id+" fetchTickers() is not supported yet")}async fetchOrder(e,t,i={}){throw new b(this.id+" fetchOrder() is not supported yet")}async fetchOrderStatus(e,t,i={}){return(await this.fetchOrder(e,t,i)).status}async fetchUnifiedOrder(e,t={}){return await this.fetchOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}async createOrder(e,t,i,r,s,n={}){throw new b(this.id+" createOrder() is not supported yet")}async cancelOrder(e,t,i={}){throw new b(this.id+" cancelOrder() is not supported yet")}async cancelUnifiedOrder(e,t={}){return this.cancelOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}async fetchOrders(e,t,i,r={}){throw new b(this.id+" fetchOrders() is not supported yet")}async fetchOpenOrders(e,t,i,r={}){throw new b(this.id+" fetchOpenOrders() is not supported yet")}async fetchClosedOrders(e,t,i,r={}){throw new b(this.id+" fetchClosedOrders() is not supported yet")}async fetchMyTrades(e,t,i,r={}){throw new b(this.id+" fetchMyTrades() is not supported yet")}async fetchTransactions(e,t,i,r={}){throw new b(this.id+" fetchTransactions() is not supported yet")}async fetchDeposits(e,t,i,r={}){throw new b(this.id+" fetchDeposits() is not supported yet")}async fetchWithdrawals(e,t,i,r={}){throw new b(this.id+" fetchWithdrawals() is not supported yet")}async fetchDepositAddress(e,t={}){if(this.has.fetchDepositAddresses){const i=await this.fetchDepositAddresses([e],t),r=this.safeValue(i,e);if(void 0===r)throw new p(this.id+" fetchDepositAddress() could not find a deposit address for "+e+", make sure you have created a corresponding deposit address in your wallet on the exchange website");return r}throw new b(this.id+" fetchDepositAddress() is not supported yet")}account(){return{free:void 0,used:void 0,total:void 0}}commonCurrencyCode(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}currency(e){if(void 0===this.currencies)throw new f(this.id+" currencies not loaded");if("string"==typeof e){if(e in this.currencies)return this.currencies[e];if(e in this.currencies_by_id)return this.currencies_by_id[e]}throw new f(this.id+" does not have currency code "+e)}market(e){if(void 0===this.markets)throw new f(this.id+" markets not loaded");if(void 0===this.markets_by_id)throw new f(this.id+" markets not loaded");if("string"==typeof e){if(e in this.markets)return this.markets[e];if(e in this.markets_by_id)return this.markets_by_id[e]}throw new u(this.id+" does not have market symbol "+e)}handleWithdrawTagAndParams(e,t){return"object"==typeof e&&(t=this.extend(e,t),e=void 0),void 0===e&&void 0!==(e=this.safeString(t,"tag"))&&(t=this.omit(t,"tag")),[e,t]}async createLimitOrder(e,t,i,r,s={}){return await this.createOrder(e,"limit",t,i,r,s)}async createMarketOrder(e,t,i,r,s={}){return await this.createOrder(e,"market",t,i,r,s)}async createLimitBuyOrder(e,t,i,r={}){return await this.createOrder(e,"limit","buy",t,i,r)}async createLimitSellOrder(e,t,i,r={}){return await this.createOrder(e,"limit","sell",t,i,r)}async createMarketBuyOrder(e,t,i={}){return await this.createOrder(e,"market","buy",t,void 0,i)}async createMarketSellOrder(e,t,i={}){return await this.createOrder(e,"market","sell",t,void 0,i)}costToPrecision(e,t){const i=this.market(e);return this.decimalToPrecision(t,k,i.precision.price,this.precisionMode,this.paddingMode)}priceToPrecision(e,t){const i=this.market(e);return this.decimalToPrecision(t,T,i.precision.price,this.precisionMode,this.paddingMode)}amountToPrecision(e,t){const i=this.market(e);return this.decimalToPrecision(t,k,i.precision.amount,this.precisionMode,this.paddingMode)}feeToPrecision(e,t){const i=this.market(e);return this.decimalToPrecision(t,T,i.precision.price,this.precisionMode,this.paddingMode)}currencyToPrecision(e,t,i){const r=this.currencies[e];let s=this.safeValue(r,"precision");if(void 0!==i){const e=this.safeValue(r,"networks",{}),t=this.safeValue(e,i,{});s=this.safeValue(t,"precision",s)}return void 0===s?t:this.decimalToPrecision(t,T,s,this.precisionMode,this.paddingMode)}safeNumber(e,t,i){const r=this.safeString(e,t);return this.parseNumber(r,i)}safeNumberN(e,t,i){const r=this.safeStringN(e,t);return this.parseNumber(r,i)}parsePrecision(e){if(void 0!==e)return"1e"+M.stringNeg(e)}async loadTimeDifference(e={}){const t=await this.fetchTime(e),i=this.milliseconds();return this.options.timeDifference=i-t,this.options.timeDifference}implodeHostname(e){return this.implodeParams(e,{hostname:this.hostname})}async fetchMarketLeverageTiers(e,t={}){if(this.has.fetchLeverageTiers){if(!(await this.market(e)).contract)throw new u(this.id+" fetchMarketLeverageTiers() supports contract markets only");const t=await this.fetchLeverageTiers([e]);return this.safeValue(t,e)}throw new b(this.id+" fetchMarketLeverageTiers() is not supported yet")}async createPostOnlyOrder(e,t,i,r,s,n={}){if(!this.has.createPostOnlyOrder)throw new b(this.id+"createPostOnlyOrder() is not supported yet");const a=this.extend(n,{postOnly:!0});return await this.createOrder(e,t,i,r,s,a)}async createReduceOnlyOrder(e,t,i,r,s,n={}){if(!this.has.createReduceOnlyOrder)throw new b(this.id+"createReduceOnlyOrder() is not supported yet");const a=this.extend(n,{reduceOnly:!0});return await this.createOrder(e,t,i,r,s,a)}async createStopOrder(e,t,i,r,s,n,a={}){if(!this.has.createStopOrder)throw new b(this.id+" createStopOrder() is not supported yet");if(void 0===n)throw new _(this.id+" create_stop_order() requires a stopPrice argument");const o=this.extend(a,{stopPrice:n});return await this.createOrder(e,t,i,r,s,o)}async createStopLimitOrder(e,t,i,r,s,n={}){if(!this.has.createStopLimitOrder)throw new b(this.id+" createStopLimitOrder() is not supported yet");const a=this.extend(n,{stopPrice:s});return await this.createOrder(e,"limit",t,i,r,a)}async createStopMarketOrder(e,t,i,r,s={}){if(!this.has.createStopMarketOrder)throw new b(this.id+" createStopMarketOrder() is not supported yet");const n=this.extend(s,{stopPrice:r});return await this.createOrder(e,"market",t,i,void 0,n)}safeCurrencyCode(e,t){return(t=this.safeCurrency(e,t)).code}filterBySymbolSinceLimit(e,t,i,r,s=!1){return this.filterByValueSinceLimit(e,"symbol",t,i,r,"timestamp",s)}filterByCurrencySinceLimit(e,t,i,r,s=!1){return this.filterByValueSinceLimit(e,"currency",t,i,r,"timestamp",s)}parseTickers(e,t,i={}){const r=[];if(Array.isArray(e))for(let t=0;t<e.length;t++){const s=this.extend(this.parseTicker(e[t]),i);r.push(s)}else{const t=Object.keys(e);for(let s=0;s<t.length;s++){const n=t[s],a=this.safeMarket(n),o=this.extend(this.parseTicker(e[n],a),i);r.push(o)}}return t=this.marketSymbols(t),this.filterByArray(r,"symbol",t)}parseDepositAddresses(e,t,i=!0,r={}){let s=[];for(let t=0;t<e.length;t++){const i=this.extend(this.parseDepositAddress(e[t]),r);s.push(i)}return void 0!==t&&(s=this.filterByArray(s,"currency",t,!1)),s=i?this.indexBy(s,"currency"):s,s}parseBorrowInterests(e,t){const i=[];for(let r=0;r<e.length;r++){const s=e[r];i.push(this.parseBorrowInterest(s,t))}return i}parseFundingRateHistories(e,t,i,r){const s=[];for(let i=0;i<e.length;i++){const r=e[i];s.push(this.parseFundingRateHistory(r,t))}const n=this.sortBy(s,"timestamp"),a=void 0===t?void 0:t.symbol;return this.filterBySymbolSinceLimit(n,a,i,r)}safeSymbol(e,t,i){return(t=this.safeMarket(e,t,i)).symbol}parseFundingRate(e,t){throw new b(this.id+" parseFundingRate() is not supported yet")}parseFundingRates(e,t){const i={};for(let r=0;r<e.length;r++){const s=this.parseFundingRate(e[r],t);i[s.symbol]=s}return i}isPostOnly(e,t,i={}){const r=this.safeStringUpper(i,"timeInForce");let s=this.safeValue2(i,"postOnly","post_only",!1);if(s=s||"PO"===r||t,s){if("IOC"===r||"FOK"===r)throw new m(this.id+" postOnly orders cannot have timeInForce equal to "+r);if(e)throw new m(this.id+" market orders cannot be postOnly");return!0}return!1}async fetchTradingFees(e={}){throw new b(this.id+" fetchTradingFees() is not supported yet")}async fetchTradingFee(e,t={}){if(!this.has.fetchTradingFees)throw new b(this.id+" fetchTradingFee() is not supported yet");return await this.fetchTradingFees(t)}parseOpenInterest(e,t){throw new b(this.id+" parseOpenInterest () is not supported yet")}parseOpenInterests(e,t,i,r){const s=[];for(let i=0;i<e.length;i++){const r=e[i],n=this.parseOpenInterest(r,t);s.push(n)}const n=this.sortBy(s,"timestamp"),a=this.safeString(t,"symbol");return this.filterBySymbolSinceLimit(n,a,i,r)}async fetchFundingRate(e,t={}){if(this.has.fetchFundingRates){if(!(await this.market(e)).contract)throw new u(this.id+" fetchFundingRate() supports contract markets only");const i=await this.fetchFundingRates([e],t),r=this.safeValue(i,e);if(void 0===r)throw new l(this.id+" fetchFundingRate () returned no data for "+e);return r}throw new b(this.id+" fetchFundingRate () is not supported yet")}async fetchMarkOHLCV(e,t="1m",i,r,s={}){if(this.has.fetchMarkOHLCV){const n={price:"mark"};return await this.fetchOHLCV(e,t,i,r,this.extend(n,s))}throw new b(this.id+" fetchMarkOHLCV () is not supported yet")}async fetchIndexOHLCV(e,t="1m",i,r,s={}){if(this.has.fetchIndexOHLCV){const n={price:"index"};return await this.fetchOHLCV(e,t,i,r,this.extend(n,s))}throw new b(this.id+" fetchIndexOHLCV () is not supported yet")}async fetchPremiumIndexOHLCV(e,t="1m",i,r,s={}){if(this.has.fetchPremiumIndexOHLCV){const n={price:"premiumIndex"};return await this.fetchOHLCV(e,t,i,r,this.extend(n,s))}throw new b(this.id+" fetchPremiumIndexOHLCV () is not supported yet")}handleTimeInForce(e={}){const t=this.safeStringUpper(e,"timeInForce");if(void 0!==t){const e=this.safeString(this.options.timeInForce,t);if(void 0===e)throw new f(this.id+' does not support timeInForce "'+t+'"');return e}}}},{"../static_dependencies/BN/bn":244,"./Precise":127,"./errors":129,"./functions":130}],127:[function(e,t,i){"use strict";const r=BigInt(0),s=BigInt(-1),n=BigInt(10);class a{constructor(e,t){if(void 0===t){let t=0;(e=e.toLowerCase()).indexOf("e")>-1&&([e,t]=e.split("e"),t=parseInt(t));const i=e.indexOf(".");this.decimals=i>-1?e.length-i-1:0;const r=e.replace(".","");this.integer=BigInt(r),this.decimals=this.decimals-t}else this.integer=e,this.decimals=t}mul(e){const t=this.integer*e.integer;return new a(t,this.decimals+e.decimals)}div(e,t=18){const i=t-this.decimals+e.decimals;let r;if(0===i)r=this.integer;else if(i<0){const e=n**BigInt(-i);r=this.integer/e}else{const e=n**BigInt(i);r=this.integer*e}const s=r/e.integer;return new a(s,t)}add(e){if(this.decimals===e.decimals){const t=this.integer+e.integer;return new a(t,this.decimals)}{const[t,i]=this.decimals>e.decimals?[e,this]:[this,e],r=i.decimals-t.decimals,s=t.integer*n**BigInt(r)+i.integer;return new a(s,i.decimals)}}mod(e){const t=Math.max(-this.decimals+e.decimals,0),i=this.integer*n**BigInt(t),r=Math.max(-e.decimals+this.decimals,0),s=e.integer*n**BigInt(r);return new a(i%s,r+e.decimals)}sub(e){const t=new a(-e.integer,e.decimals);return this.add(t)}abs(){return new a(this.integer<0?this.integer*s:this.integer,this.decimals)}neg(){return new a(-this.integer,this.decimals)}min(e){return this.lt(e)?this:e}max(e){return this.gt(e)?this:e}gt(e){return this.sub(e).integer>0}ge(e){return this.sub(e).integer>=0}lt(e){return e.gt(this)}le(e){return e.ge(this)}reduce(){const e=this.integer.toString(),t=e.length-1;if(0===t)return"0"===e&&(this.decimals=0),this;let i;for(i=t;i>=0&&"0"===e.charAt(i);i--);const r=t-i;if(0===r)return this;this.decimals-=r,this.integer=BigInt(e.slice(0,i+1))}equals(e){return this.reduce(),e.reduce(),this.decimals===e.decimals&&this.integer===e.integer}toString(){let e,t;this.reduce(),this.integer<0?(e="-",t=-this.integer):(e="",t=this.integer);const i=Array.from(t.toString(this.base).padStart(this.decimals,"0")),r=i.length-this.decimals;let s;return s=0===r?"0.":this.decimals<0?"0".repeat(-this.decimals):0===this.decimals?"":".",i.splice(r,0,s),e+i.join("")}static stringMul(e,t){if(void 0!==e&&void 0!==t)return new a(e).mul(new a(t)).toString()}static stringDiv(e,t,i=18){if(void 0===e||void 0===t)return;const s=new a(t);return s.integer!==r?new a(e).div(s,i).toString():void 0}static stringAdd(e,t){if(void 0!==e||void 0!==t)return void 0===e?t:void 0===t?e:new a(e).add(new a(t)).toString()}static stringSub(e,t){if(void 0!==e&&void 0!==t)return new a(e).sub(new a(t)).toString()}static stringAbs(e){if(void 0!==e)return new a(e).abs().toString()}static stringNeg(e){if(void 0!==e)return new a(e).neg().toString()}static stringMod(e,t){if(void 0!==e&&void 0!==t)return new a(e).mod(new a(t)).toString()}static stringEquals(e,t){if(void 0!==e&&void 0!==t)return new a(e).equals(new a(t))}static stringEq(e,t){if(void 0!==e&&void 0!==t)return new a(e).equals(new a(t))}static stringMin(e,t){if(void 0!==e&&void 0!==t)return new a(e).min(new a(t)).toString()}static stringMax(e,t){if(void 0!==e&&void 0!==t)return new a(e).max(new a(t)).toString()}static stringGt(e,t){if(void 0!==e&&void 0!==t)return new a(e).gt(new a(t))}static stringGe(e,t){if(void 0!==e&&void 0!==t)return new a(e).ge(new a(t))}static stringLt(e,t){if(void 0!==e&&void 0!==t)return new a(e).lt(new a(t))}static stringLe(e,t){if(void 0!==e&&void 0!==t)return new a(e).le(new a(t))}}t.exports=a},{}],128:[function(e,t,i){"use strict";t.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{AccountNotEnabled:{}},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{},MarginModeAlreadySet:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},{}],129:[function(e,t,i){"use strict";const r=e("./errorHierarchy.js");t.exports=function e(t,i,r={}){for(const[s,n]of Object.entries(i)){const i=Object.assign(r,{[s]:class extends t{constructor(e){super(e),this.constructor=i,this.__proto__=i.prototype,this.name=s,this.message=e,Object.setPrototypeOf(this,i.prototype)}}})[s];e(i,n,r)}return r}(Error,r)},{"./errorHierarchy.js":128}],130:[function(e,t,i){"use strict";const{unCamelCase:r}=e("./functions/string");t.exports=(e=>{for(const t in e)e[r(t)]=e[t];return e})(Object.assign({},e("./functions/platform"),e("./functions/generic"),e("./functions/string"),e("./functions/type"),e("./functions/number"),e("./functions/encode"),e("./functions/crypto"),e("./functions/time"),e("./functions/throttle"),e("./functions/misc")))},{"./functions/crypto":131,"./functions/encode":132,"./functions/generic":133,"./functions/misc":134,"./functions/number":135,"./functions/platform":136,"./functions/string":137,"./functions/throttle":138,"./functions/time":139,"./functions/type":140}],131:[function(e,t,i){"use strict";const r=e("../../static_dependencies/crypto-js/crypto-js"),{capitalize:s}=e("./string"),{stringToBase64:n,urlencodeBase64:a}=e("./encode"),o=e("./../../static_dependencies/node-rsa/NodeRSA"),{binaryToBase58:h,byteArrayToWordArray:c}=e("./encode"),d=e("./../../static_dependencies/elliptic/lib/elliptic"),f=d.ec,u=d.eddsa,{ArgumentsRequired:l}=e("./../errors"),p=e("../../static_dependencies/BN/bn.js"),m=(e,t="md5",i="hex")=>{const n={};"keccak"===t&&(t="SHA3",n.outputLength=256);const a=r[t.toUpperCase()](e,n);return"binary"===i?a:a.toString(r.enc[s(i)])},b=(e,t,i="sha256",n="hex")=>{const a=r["Hmac"+i.toUpperCase()](e,t);if(n){const e="binary"===n?"Latin1":s(n);return a.toString(r.enc[s(e)])}return a};function g(e,t,i="RS256"){const r={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(i in r))throw new ExchangeError(i+" is not a supported rsa signing algorithm.");return new o(t,{environment:"browser",signingScheme:r[i]}).sign(e,"base64","binary")}t.exports={hash:m,hmac:b,jwt:function(e,t,i="HS256"){const r=[a(n(JSON.stringify({alg:i,typ:"JWT"}))),a(n(JSON.stringify(e)))].join("."),s=i.slice(0,2);let o;return"HS"===s?o=a(b(r,t,{HS256:"sha256",HS384:"sha384",HS512:"sha512"}[i],"base64")):"RS"===s&&(o=a(g(r,t,i))),[r,o].join(".")},totp:e=>{const t=e=>parseInt(e,16),i=(e,t)=>(t+e).slice(-t.length);return(e=>{e=e.replace(" ","");let s=Math.round((new Date).getTime()/1e3),n=i(((a=Math.floor(s/30))<15.5?"0":"")+Math.round(a).toString(16),"0000000000000000");var a;let o=b(r.enc.Hex.parse(n),r.enc.Hex.parse((e=>{let t="",r="";for(let r=0;r<e.length;r++){let s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(r).toUpperCase());t+=i(s.toString(2),"00000")}for(let e=0;e+4<=t.length;e+=4){let i=t.substr(e,4);r+=parseInt(i,2).toString(16)}return r})(e)),"sha1","hex"),h=t(o.substring(o.length-1)),c=(t(o.substr(2*h,8))&t("7fffffff"))+"";return c=c.substr(c.length-6,6),c})(e)},rsa:g,ecdsa:function(e,t,i="p256",r,s=!1){let n=e;void 0!==r&&(n=m(e,r,"hex"));const a=new f(i);let o=a.sign(n,t,"hex",{canonical:!0}),h=new p("0");const c=new p("1").shln(248).sub(new p("1"));for(;s&&(o.r.gt(a.nh)||o.r.lte(c)||o.s.lte(c));)o=a.sign(n,t,"hex",{canonical:!0,extraEntropy:h.toArray("le",32)}),h=h.add(new p("1"));return{r:o.r.toString(16).padStart(64,"0"),s:o.s.toString(16).padStart(64,"0"),v:o.recoveryParam}},eddsa:function(e,t,i="ed25519"){const r=new u(i).signModified(e,t);return h(c(r.toBytes()))}}},{"../../static_dependencies/BN/bn.js":244,"../../static_dependencies/crypto-js/crypto-js":245,"./../../static_dependencies/elliptic/lib/elliptic":246,"./../../static_dependencies/node-rsa/NodeRSA":264,"./../errors":129,"./encode":132,"./string":137}],132:[function(e,t,i){"use strict";const r=e("../../static_dependencies/crypto-js/crypto-js"),s=e("../../static_dependencies/qs/index"),n=e("../../static_dependencies/BN/bn"),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let o=null,h=null;function c(e){const t=[];for(let i=0;i<e.length;i++)t[i/4|0]|=e[i]<<24-8*i;return r.lib.WordArray.create(t,e.length)}t.exports={json:(e,t)=>JSON.stringify(e),isJsonEncodedObject:e=>"string"==typeof e&&e.length>=2&&("{"===e[0]||"["===e[0]),stringToBinary:e=>r.enc.Latin1.parse(e),stringToBase64:e=>r.enc.Latin1.parse(e).toString(r.enc.Base64),base64ToBinary:e=>r.enc.Base64.parse(e),base64ToString:e=>r.enc.Base64.parse(e).toString(r.enc.Utf8),binaryToBase64:e=>e.toString(r.enc.Base64),base16ToBinary:e=>r.enc.Hex.parse(e),binaryToBase16:e=>e.toString(r.enc.Hex),binaryConcat:(...e)=>e.reduce(((e,t)=>e.concat(t))),binaryConcatArray:e=>e.reduce(((e,t)=>e.concat(t))),urlencode:e=>s.stringify(e),urlencodeNested:e=>s.stringify(e),urlencodeWithArrayRepeat:e=>s.stringify(e,{arrayFormat:"repeat"}),rawencode:e=>s.stringify(e,{encode:!1}),encode:e=>e,decode:e=>e,urlencodeBase64:e=>e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_"),numberToLE:(e,t)=>c(new n(e).toArray("le",t)),numberToBE:(e,t)=>c(new n(e).toArray("be",t)),base58ToBinary:e=>{if(!o){o={},h={};for(let e=0;e<58;e++){const t=a[e],i=new n(e);o[t]=i,h[i]=t}}let t=new n(0);const i=new n(58);for(let r=0;r<e.length;r++){const s=e[r];t.imul(i),t.iadd(o[s])}return c(t.toArray("be"))},binaryToBase58:e=>{if(!h){o={},h={};for(let e=0;e<58;e++){const t=a[e],i=new n(e);o[t]=i,h[i]=t}}const t=new n(58),i=e.toString(r.enc.Hex);let s=new n(i,16),c=[];for(;!s.isZero();){const{div:e,mod:i}=s.divmod(t);s=e,c.push(h[i])}return c.reverse().join("")}},t.exports.byteArrayToWordArray=c},{"../../static_dependencies/BN/bn":244,"../../static_dependencies/crypto-js/crypto-js":245,"../../static_dependencies/qs/index":280}],133:[function(e,t,i){"use strict";const{isNumber:r,isDictionary:s,isArray:n}=e("./type"),a=Object.keys,o=e=>n(e)?e:Object.values(e),h=e=>new Set(o(e)),c=(...e)=>Object.assign({},...e),d=e=>n(e)?Array.from(e):c(e);t.exports={keys:a,values:o,extend:c,clone:d,index:h,ordered:e=>e,unique:e=>Array.from(h(e)),arrayConcat:(e,t)=>e.concat(t),inArray:(e,t)=>t.includes(e),toArray:e=>Object.values(e),isEmpty:e=>!e||(Array.isArray(e)?e:Object.keys(e)).length<1,keysort(e,t={}){for(const i of a(e).sort())t[i]=e[i];return t},indexBy(e,t,i={}){for(const r of o(e))t in r&&(i[r[t]]=r);return i},groupBy(e,t,i={}){for(const r of o(e))if(t in r){const e=r[t];i[e]=i[e]||[],i[e].push(r)}return i},filterBy(e,t,i,r=[]){for(const s of o(e))s[t]===i&&r.push(s);return r},sortBy:(e,t,i=!1,r=(i?-1:1))=>e.sort(((e,i)=>e[t]<i[t]?-r:e[t]>i[t]?r:0)),sortBy2:(e,t,i,r=!1,s=(r?-1:1))=>e.sort(((e,r)=>e[t]<r[t]?-s:e[t]>r[t]?s:e[i]<r[i]?-s:e[i]>r[i]?s:0)),flatten:function e(t,i=[]){for(const r of t)n(r)?e(r,i):i.push(r);return i},pluck:(e,t)=>o(e).filter((e=>t in e)).map((e=>e[t])),omit(e,...t){if(!Array.isArray(e)){const i=d(e);for(const e of t)if(n(e))for(const t of e)delete i[t];else delete i[e];return i}return e},sum(...e){const t=e.filter(r);return t.length>0?t.reduce(((e,t)=>e+t),0):void 0},deepExtend:function e(...t){let i;for(const r of t)if(s(r)){s(i)||(i={});for(const t in r)i[t]=e(i[t],r[t])}else i=r;return i},merge(e,...t){const i={},r=Object.assign({},...t),s=Object.keys(r);for(let t=0;t<s.length;t++){const n=s[t];void 0===e[n]&&(i[n]=r[n])}return Object.assign({},e,i)}}},{"./type":140}],134:[function(e,t,i){"use strict";const{ROUND_UP:r,ROUND_DOWN:s}=e("./number"),{NotSupported:n}=e("../errors"),a=e=>{const t=e.slice(0,-1),i=e.slice(-1);let r;if("y"===i)r=31536e3;else if("M"===i)r=2592e3;else if("w"===i)r=604800;else if("d"===i)r=86400;else if("h"===i)r=3600;else if("m"===i)r=60;else{if("s"!==i)throw new n("timeframe unit "+i+" is not supported");r=1}return t*r};t.exports={aggregate(e){const t={};for(let i=0;i<e.length;i++){const[r,s]=e[i];s>0&&(t[r]=(t[r]||0)+s)}return Object.keys(t).map((e=>[parseFloat(e),parseFloat(t[e])]))},parseTimeframe:a,roundTimeframe:(e,t,i=s)=>{const n=1e3*a(e);return t-t%n+(i===r?n:0)},buildOHLCVC:(e,t="1m",i=-1/0,r=1/0)=>{const s=1e3*a(t),n=[],[o,,h,c,d,f,u]=[0,1,2,3,4,5,6],l=Math.min(e.length-1,r);for(let t=0;t<=l;t++){const r=e[t];if(r.timestamp<i)continue;const a=Math.floor(r.timestamp/s)*s,l=n.length-1;-1===l||a>=n[l][o]+s?n.push([a,r.price,r.price,r.price,r.price,r.amount,1]):(n[l][h]=Math.max(n[l][h],r.price),n[l][c]=Math.min(n[l][c],r.price),n[l][d]=r.price,n[l][f]+=r.amount,n[l][u]++)}return n},ROUND_UP:r,ROUND_DOWN:s,implodeParams:(e,t)=>{if(!Array.isArray(t)){const i=Object.keys(t);for(let r=0;r<i.length;r++){const s=i[r];Array.isArray(t[s])||(e=e.replace("{"+s+"}",t[s]))}}return e},extractParams:e=>{const t=/{([\w-]+)}/g,i=[];let r=t.exec(e);for(;r;)i.push(r[1]),r=t.exec(e);return i},vwap:function(e,t){return void 0!==e&&void 0!==t&&e>0?t/e:void 0}}},{"../errors":129,"./number":135}],135:[function(e,t,i){"use strict";const r={ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1};function s(e){if(void 0===e)return;if("number"!=typeof e)return e.toString();const t=e.toString();if(Math.abs(e)<1){const i=t.split("e-"),r=i[0].replace(".",""),s=parseInt(i[1]),n="-"===t[0];if(s)return e=(n?"-":"")+"0."+new Array(s).join("0")+r.substring(n)}else{const e=t.split("e");if(e[1]){let t=parseInt(e[1]);const i=e[0].split(".");let r="";return i[1]&&(t-=i[1].length,r=i[1]),i[0]+r+new Array(t+1).join("0")}}return t}const n=[],a=(e,t=0)=>{if(e=s(e),t>0){const i=n[t]||(n[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),[,r]=e.toString().match(i)||[null,e];return r.toString()}return parseInt(e).toString()};function o(e){const t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}const h=(e,t,i,r=0,n=0)=>{if(2===r&&i<=0)throw new Error("TICK_SIZE cant be used with negative or zero numPrecisionDigits");if(i<0){const s=Math.pow(10,-i);if(0===t)return(s*h(e/s,t,0,r,n)).toString();if(1===t)return(e-e%s).toString()}if(2===r){const r=o(h(i,0,22,0,0));let s=e%i;s=Number(h(s,0,8,0,0));return 0!==o(h(s/i,0,Math.max(r,8),0,0))&&(0===t?e>0?s>=i/2?e=e-s+i:e-=s:e=s>=i/2?Number(e)-s:Number(e)-s-i:1===t&&(e-=s)),h(e,0,r,0,n)}const a=s(e),c="-"===a[0],d=c?1:0,f=a.length;for(var u=0;u<f&&"."!==a[u];u++);const l=u<a.length,p=48,m=new Uint8Array(f-d+(l?0:1));m[0]=p;let b=m.length,g=-1,y=-1;for(var v=1,w=d;w<f;w++,v++){const e=a.charCodeAt(w);if(46===e)b=v--;else{if(e<p||e>57)throw new Error(`${a}: invalid number (contains an illegal character '${a[v-1]}')`);m[v]=e,e!==p&&g<0&&(g=v)}}g<0&&(g=1);let S=0===r?b:g,_=S+i;y=-1;let k=!0,T=c;for(let e=m.length-1,r=0;e>=0;e--){let s=m[e];if(0!==e){if(s+=r,e>=S+i){s=0===t&&s>=53&&!(53===s&&r)?58:p}s>57?(s=p,r=1):r=0}else r&&(s=49);m[e]=s,s!==p&&(k=!1,g=e,y=y<0?e+1:y)}1===r&&(S=g,_=S+i),k&&(T=!1);const O=g>=b||k?b-1:g,x=y<b?b:y,A=T?1:0,M=A+(b-O),E=Math.max(x-b,0),I=x-O,B=0===n?I:_-O,N=Math.max(B-I,0),P=M+1+E,R=P+N,C=E+N===0,L=new Uint8Array(M+(C?0:1)+E+N);for(T&&(L[0]=45),v=A,w=O;v<M;v++,w++)L[v]=m[w];for(C||(L[M]=46),v=M+1,w=b;v<P;v++,w++)L[v]=m[w];for(v=P;v<R;v++)L[v]=p;return String.fromCharCode(...L)};t.exports={numberToString:s,precisionFromString:o,decimalToPrecision:h,truncate_to_string:a,truncate:(e,t=0)=>parseFloat(a(e,t)),omitZero:function(e){if(void 0!==e&&""!==e&&0!==parseFloat(e))return e},precisionConstants:r,ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},{}],136:[function(e,t,i){(function(i){"use strict";const r="undefined"!=typeof window,s=void 0!==i&&void 0!==i.versions&&void 0!==i.versions.electron,n="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,a=void 0!==i&&"win32"===i.platform,o=!(r||n),h="undefined"==typeof fetch?e("../../static_dependencies/fetch-ponyfill/fetch-node")().fetch:fetch;t.exports={isBrowser:r,isElectron:s,isWebWorker:n,isNode:o,isWindows:a,defaultFetch:h}}).call(this,e("_process"))},{"../../static_dependencies/fetch-ponyfill/fetch-node":262,_process:88}],137:[function(e,t,i){"use strict";const r=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,r),s=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e5]+100+400+8e3).replace(/[018]/g,s),n=e=>e?(e^16*Math.random()>>e/4).toString(16):([1e7]+1e3+4e3+8e5).replace(/[018]/g,n);t.exports={uuid:r,uuid16:s,uuid22:n,unCamelCase:e=>e.match(/[A-Z]/)?e.replace(/[a-z0-9][A-Z]/g,(e=>e[0]+"_"+e[1])).replace(/[A-Z0-9][A-Z0-9][a-z][^$]/g,(e=>e[0]+"_"+e[1]+e[2]+e[3])).replace(/[a-z][0-9]$/g,(e=>e[0]+"_"+e[1])).toLowerCase():e,capitalize:e=>e.length?e.charAt(0).toUpperCase()+e.slice(1):e,strip:e=>e.replace(/^\s+|\s+$/g,"")}},{}],138:[function(e,t,i){"use strict";const{now:r,sleep:s}=e("./time");class n{constructor(e){this.config={refillRate:1,delay:.001,capacity:1,maxCapacity:2e3,tokens:0,cost:1},Object.assign(this.config,e),this.queue=[],this.running=!1}async loop(){let e=r();for(;this.running;){const{resolver:t,cost:i}=this.queue[0];if(this.config.tokens>=0)this.config.tokens-=i,t(),this.queue.shift(),await Promise.resolve(),0===this.queue.length&&(this.running=!1);else{await s(1e3*this.config.delay);const t=r(),i=t-e;e=t;const n=this.config.tokens+this.config.refillRate*i;this.config.tokens=Math.min(n,this.config.capacity)}}}}t.exports={throttle:function(e){const t=new n(e),i=function(e){let t;const i=new Promise(((e,i)=>{t=e}));if(this.queue.length>this.config.maxCapacity)throw new Error("throttle queue is over maxCapacity");return e=void 0===e?this.config.cost:e,this.queue.push({resolver:t,cost:e}),this.running||(this.running=!0,this.loop()),i}.bind(t);return i.config=t.config,i}}},{"./time":139}],139:[function(e,t,i){"use strict";const r=Date.now,s=()=>1e3*r(),n=r,a=setTimeout,o=(e,t,i=a,s=r()+t)=>{if(t>=2147483647)throw new Exception("setTimeout() function was called with unrealistic value of "+t.toString());let n=()=>{},h=!0;const c=i((()=>{h=!0;const t=s-r();t>0?n=o(e,t,i,s):e()}),t);return function(){h&&(h=!1,clearTimeout(c)),n()}};class h extends Error{constructor(){const e="timed out";super(e),this.constructor=h,this.__proto__=h.prototype,this.message=e}}const c=e=>{if("string"==typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{const t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(e){return}},d=(e,t,i=!0)=>{t=t||"";const r=new Date(e),s=r.getUTCFullYear(),n=(i?s:s-2e3).toString();let a=r.getUTCMonth()+1,o=r.getUTCDate();return a=a<10?"0"+a:a.toString(),o=o<10?"0"+o:o.toString(),n+t+a+t+o};t.exports={now:r,microseconds:s,milliseconds:n,seconds:()=>Math.floor(r()/1e3),iso8601:e=>{let t;if(t="number"==typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(e){return}},parse8601:c,rfc2616:e=>new Date(e).toUTCString(),uuidv1:()=>{const e=(10*s()+122192928e9).toString(16);return e.slice(7,15)+e.slice(3,7)+"1"+e.slice(0,3)+"9696"+"ff".repeat(6)},parseDate:e=>{if("string"==typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(e){return}return c(e)}},mdy:(e,t="-")=>{t=t||"";const i=new Date(e),r=i.getUTCFullYear().toString();let s=i.getUTCMonth()+1,n=i.getUTCDate();return s=s<10?"0"+s:s.toString(),n=n<10?"0"+n:n.toString(),s+t+n+t+r},ymd:d,yymmdd:(e,t="")=>d(e,t,!1),yyyymmdd:(e,t="-")=>d(e,t,!0),ymdhms:(e,t=" ")=>{const i=new Date(e),r=i.getUTCFullYear();let s=i.getUTCMonth()+1,n=i.getUTCDate(),a=i.getUTCHours(),o=i.getUTCMinutes(),h=i.getUTCSeconds();return s=s<10?"0"+s:s,n=n<10?"0"+n:n,a=a<10?"0"+a:a,o=o<10?"0"+o:o,h=h<10?"0"+h:h,r+"-"+s+"-"+n+t+a+":"+o+":"+h},setTimeout_safe:o,sleep:e=>new Promise((t=>o(t,e))),TimedOut:h,timeout:async(e,t)=>{let i=()=>{};const r=new Promise((t=>i=o(t,e)));try{return await Promise.race([t,r.then((()=>{throw new h}))])}finally{i()}}}},{}],140:[function(e,t,i){"use strict";const r=Number.isFinite,s=Number.isInteger,n=Array.isArray,a=e=>null!=e,o=e=>"string"==typeof e,h=e=>null!==e&&"object"==typeof e,c=e=>a(e)&&e.toString||r(e),d=(e,t)=>h(e)&&""!==e[t]&&null!==e[t]?e[t]:void 0,f=(e,t,i)=>h(e)?void 0!==e[t]&&""!==e[t]&&null!==e[t]?e[t]:""!==e[i]&&null!==e[i]?e[i]:void 0:void 0,u=(e,t)=>e[t.find((t=>void 0!==d(e,t)))],l=e=>r(e)||o(e)&&0!==e.length?parseFloat(e):NaN,p=e=>r(e)||o(e)&&0!==e.length?Math.trunc(Number(e)):NaN;t.exports={isNumber:r,isInteger:s,isArray:n,isObject:h,isString:o,isStringCoercible:c,isDictionary:e=>h(e)&&Object.getPrototypeOf(e)===Object.prototype&&!n(e)&&!(e=>e instanceof RegExp)(e),hasProps:a,prop:d,asFloat:l,asInteger:p,safeFloat:(e,t,i,s=l(d(e,t)))=>r(s)?s:i,safeInteger:(e,t,i,s=p(d(e,t)))=>r(s)?s:i,safeIntegerProduct:(e,t,i,s,n=p(d(e,t)))=>r(n)?parseInt(n*i):s,safeTimestamp:(e,t,i,s=l(d(e,t)))=>r(s)?parseInt(1e3*s):i,safeValue:(e,t,i,r=d(e,t))=>a(r)?r:i,safeString:(e,t,i,r=d(e,t))=>c(r)?String(r):i,safeStringLower:(e,t,i,r=d(e,t))=>c(r)?String(r).toLowerCase():i,safeStringUpper:(e,t,i,r=d(e,t))=>c(r)?String(r).toUpperCase():i,safeFloat2:(e,t,i,s,n=l(f(e,t,i)))=>r(n)?n:s,safeInteger2:(e,t,i,s,n=p(f(e,t,i)))=>r(n)?n:s,safeIntegerProduct2:(e,t,i,s,n,a=p(f(e,t,i)))=>r(a)?parseInt(a*s):n,safeTimestamp2:(e,t,i,s,n=l(f(e,t,i)))=>r(n)?parseInt(1e3*n):s,safeValue2:(e,t,i,r,s=f(e,t,i))=>a(s)?s:r,safeString2:(e,t,i,r,s=f(e,t,i))=>c(s)?String(s):r,safeStringLower2:(e,t,i,r,s=f(e,t,i))=>c(s)?String(s).toLowerCase():r,safeStringUpper2:(e,t,i,r,s=f(e,t,i))=>c(s)?String(s).toUpperCase():r,safeFloatN:(e,t,i,s=l(u(e,t)))=>r(s)?s:i,safeIntegerN:(e,t,i,s=p(u(e,t)))=>r(s)?s:i,safeIntegerProductN:(e,t,i,s,n=p(u(e,t)))=>r(n)?parseInt(n*i):s,safeTimestampN:(e,t,i,s=l(u(e,t)))=>r(s)?parseInt(1e3*s):i,safeValueN:(e,t,i,r=u(e,t))=>a(r)?r:i,safeStringN:(e,t,i,r=u(e,t))=>c(r)?String(r):i,safeStringLowerN:(e,t,i,r=u(e,t))=>c(r)?String(r).toLowerCase():i,safeStringUpperN:(e,t,i,r=u(e,t))=>c(r)?String(r).toUpperCase():i}},{}],144:[function(e,t,i){"use strict";const r=e("./base/Exchange"),{ExchangeError:s,ArgumentsRequired:n,ExchangeNotAvailable:a,InsufficientFunds:o,OrderNotFound:h,InvalidOrder:c,DDoSProtection:d,InvalidNonce:f,AuthenticationError:u,RateLimitExceeded:l,PermissionDenied:p,NotSupported:m,BadRequest:b,BadSymbol:g,AccountSuspended:y,OrderImmediatelyFillable:v,OnMaintenance:w,BadResponse:S,RequestTimeout:_,OrderNotFillable:k,MarginModeAlreadySet:T}=e("./base/errors"),{TRUNCATE:O,DECIMAL_PLACES:x}=e("./base/functions/number"),A=e("./base/Precise");t.exports=class extends r{describe(){return this.deepExtend(super.describe(),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:50,certified:!0,pro:!0,has:{CORS:void 0,spot:!0,margin:!0,swap:!0,future:!0,option:void 0,addMargin:!0,borrowMargin:!0,cancelAllOrders:!0,cancelOrder:!0,cancelOrders:void 0,createDepositAddress:!1,createOrder:!0,createReduceOnlyOrder:!0,createStopLimitOrder:!0,createStopMarketOrder:!1,createStopOrder:!0,fetchAccounts:void 0,fetchBalance:!0,fetchBidsAsks:!0,fetchBorrowInterest:!0,fetchBorrowRate:!0,fetchBorrowRateHistories:!1,fetchBorrowRateHistory:!0,fetchBorrowRates:!1,fetchBorrowRatesPerSymbol:!1,fetchCanceledOrders:!1,fetchClosedOrder:!1,fetchClosedOrders:"emulated",fetchCurrencies:!0,fetchDeposit:!1,fetchDepositAddress:!0,fetchDepositAddresses:!1,fetchDepositAddressesByNetwork:!1,fetchDeposits:!0,fetchFundingHistory:!0,fetchFundingRate:!0,fetchFundingRateHistory:!0,fetchFundingRates:!0,fetchIndexOHLCV:!0,fetchL3OrderBook:!1,fetchLedger:void 0,fetchLeverage:!1,fetchLeverageTiers:!0,fetchMarketLeverageTiers:"emulated",fetchMarkets:!0,fetchMarkOHLCV:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenInterestHistory:!0,fetchOpenOrder:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchOrderTrades:!0,fetchPosition:void 0,fetchPositions:!0,fetchPositionsRisk:!0,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTradingLimits:void 0,fetchTransactionFee:void 0,fetchTransactionFees:!0,fetchTransactions:!1,fetchTransfers:!0,fetchWithdrawal:!1,fetchWithdrawals:!0,fetchWithdrawalWhitelist:!1,reduceMargin:!0,repayMargin:!0,setLeverage:!0,setMargin:!1,setMarginMode:!0,setPositionMode:!0,signIn:!1,transfer:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",test:{dapiPublic:"https://testnet.binancefuture.com/dapi/v1",dapiPrivate:"https://testnet.binancefuture.com/dapi/v1",vapiPublic:"https://testnet.binanceops.com/vapi/v1",vapiPrivate:"https://testnet.binanceops.com/vapi/v1",fapiPublic:"https://testnet.binancefuture.com/fapi/v1",fapiPrivate:"https://testnet.binancefuture.com/fapi/v1",fapiPrivateV2:"https://testnet.binancefuture.com/fapi/v2",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v1"},api:{wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",sapiV3:"https://api.binance.com/sapi/v3",dapiPublic:"https://dapi.binance.com/dapi/v1",dapiPrivate:"https://dapi.binance.com/dapi/v1",vapiPublic:"https://vapi.binance.com/vapi/v1",vapiPrivate:"https://vapi.binance.com/vapi/v1",dapiPrivateV2:"https://dapi.binance.com/dapi/v2",dapiData:"https://dapi.binance.com/futures/data",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",fapiData:"https://fapi.binance.com/futures/data",fapiPrivateV2:"https://fapi.binance.com/fapi/v2",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:{url:"https://www.binance.com/en/register?ref=D7YA7CLY",discount:.1},doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},depth:1,api:{sapi:{get:{"system/status":.1,accountSnapshot:240,"margin/asset":1,"margin/pair":1,"margin/allAssets":.1,"margin/allPairs":.1,"margin/priceIndex":1,"asset/assetDividend":1,"asset/dribblet":.1,"asset/transfer":.1,"asset/assetDetail":.1,"asset/tradeFee":.1,"margin/loan":1,"margin/repay":1,"margin/account":1,"margin/transfer":.1,"margin/interestHistory":.1,"margin/forceLiquidationRec":.1,"margin/order":1,"margin/openOrders":1,"margin/allOrders":20,"margin/myTrades":1,"margin/maxBorrowable":5,"margin/maxTransferable":5,"margin/isolated/transfer":.1,"margin/isolated/account":1,"margin/isolated/pair":1,"margin/isolated/allPairs":1,"margin/isolated/accountLimit":.1,"margin/interestRateHistory":.1,"margin/orderList":1,"margin/allOrderList":20,"margin/openOrderList":1,"margin/crossMarginData":{cost:.1,noCoin:.5},"margin/isolatedMarginData":{cost:.1,noCoin:1},"margin/isolatedMarginTier":.1,"margin/rateLimit/order":2,"margin/dribblet":.1,"loan/income":40,"fiat/orders":600.03,"fiat/payments":.1,"futures/transfer":1,"futures/loan/borrow/history":1,"futures/loan/repay/history":1,"futures/loan/wallet":1,"futures/loan/configs":1,"futures/loan/calcAdjustLevel":5,"futures/loan/calcMaxAdjustAmount":5,"futures/loan/adjustCollateral/history":1,"futures/loan/liquidationHistory":1,"rebate/taxQuery":20.001,"capital/config/getall":1,"capital/deposit/address":1,"capital/deposit/hisrec":.1,"capital/deposit/subAddress":.1,"capital/deposit/subHisrec":.1,"capital/withdraw/history":.1,"convert/tradeFlow":.6667,"account/status":.1,"account/apiTradingStatus":.1,"account/apiRestrictions/ipRestriction":.1,bnbBurn:.1,"sub-account/futures/account":1,"sub-account/futures/accountSummary":.1,"sub-account/futures/positionRisk":1,"sub-account/futures/internalTransfer":.1,"sub-account/list":.1,"sub-account/margin/account":1,"sub-account/margin/accountSummary":1,"sub-account/spotSummary":.1,"sub-account/status":1,"sub-account/sub/transfer/history":.1,"sub-account/transfer/subUserHistory":.1,"sub-account/universalTransfer":.1,"managed-subaccount/asset":.1,"managed-subaccount/accountSnapshot":240,"lending/daily/product/list":.1,"lending/daily/userLeftQuota":.1,"lending/daily/userRedemptionQuota":.1,"lending/daily/token/position":.1,"lending/union/account":.1,"lending/union/purchaseRecord":.1,"lending/union/redemptionRecord":.1,"lending/union/interestHistory":.1,"lending/project/list":.1,"lending/project/position/list":.1,"mining/pub/algoList":.1,"mining/pub/coinList":.1,"mining/worker/detail":.5,"mining/worker/list":.5,"mining/payment/list":.5,"mining/statistics/user/status":.5,"mining/statistics/user/list":.5,"mining/payment/uid":.5,"bswap/pools":.1,"bswap/liquidity":{cost:.1,noPoolId:1},"bswap/liquidityOps":20.001,"bswap/quote":1.00005,"bswap/swap":20.001,"bswap/poolConfigure":1.00005,"bswap/addLiquidityPreview":1.00005,"bswap/removeLiquidityPreview":1.00005,"bswap/unclaimedRewards":6.667,"bswap/claimedHistory":6.667,"blvt/tokenInfo":.1,"blvt/subscribe/record":.1,"blvt/redeem/record":.1,"blvt/userLimit":.1,"apiReferral/ifNewUser":1,"apiReferral/customization":1,"apiReferral/userCustomization":1,"apiReferral/rebate/recentRecord":1,"apiReferral/rebate/historicalRecord":1,"apiReferral/kickback/recentRecord":1,"apiReferral/kickback/historicalRecord":1,"broker/subAccountApi":1,"broker/subAccount":1,"broker/subAccountApi/commission/futures":1,"broker/subAccountApi/commission/coinFutures":1,"broker/info":1,"broker/transfer":1,"broker/transfer/futures":1,"broker/rebate/recentRecord":1,"broker/rebate/historicalRecord":1,"broker/subAccount/bnbBurn/status":1,"broker/subAccount/depositHist":1,"broker/subAccount/spotSummary":1,"broker/subAccount/marginSummary":1,"broker/subAccount/futuresSummary":1,"broker/rebate/futures/recentRecord":1,"broker/subAccountApi/ipRestriction":1,"broker/universalTransfer":1,"account/apiRestrictions":.1,"c2c/orderMatch/listUserOrderHistory":.1,"nft/history/transactions":20.001,"nft/history/deposit":20.001,"nft/history/withdraw":20.001,"nft/user/getAsset":20.001,"pay/transactions":20.001,"giftcard/verify":.1,"giftcard/cryptography/rsa-public-key":.1,"algo/futures/openOrders":.1,"algo/futures/historicalOrders":.1,"algo/futures/subOrders":.1,"portfolio/account":.1,"staking/productList":.1,"staking/position":.1,"staking/stakingRecord":.1,"staking/personalLeftQuota":.1},post:{"asset/dust":1,"asset/dust-btc":.1,"asset/transfer":.1,"asset/get-funding-asset":.1,"account/disableFastWithdrawSwitch":.1,"account/enableFastWithdrawSwitch":.1,"capital/withdraw/apply":.1,"margin/transfer":1,"margin/loan":20.001,"margin/repay":20.001,"margin/order":.040002,"margin/order/oco":.040002,"margin/isolated/transfer":4.0002,"margin/isolated/account":2.0001,bnbBurn:.1,"sub-account/margin/transfer":4.0002,"sub-account/margin/enable":.1,"sub-account/futures/enable":.1,"sub-account/futures/transfer":.1,"sub-account/futures/internalTransfer":.1,"sub-account/transfer/subToSub":.1,"sub-account/transfer/subToMaster":.1,"sub-account/universalTransfer":.1,"managed-subaccount/deposit":.1,"managed-subaccount/withdraw":.1,userDataStream:.1,"userDataStream/isolated":.1,"futures/transfer":.1,"futures/loan/borrow":20.001,"futures/loan/repay":20.001,"futures/loan/adjustCollateral":20.001,"lending/customizedFixed/purchase":.1,"lending/daily/purchase":.1,"lending/daily/redeem":.1,"bswap/liquidityAdd":60,"bswap/liquidityRemove":60,"bswap/swap":60,"bswap/claimRewards":6.667,"blvt/subscribe":.1,"blvt/redeem":.1,"apiReferral/customization":1,"apiReferral/userCustomization":1,"apiReferral/rebate/historicalRecord":1,"apiReferral/kickback/historicalRecord":1,"broker/subAccount":1,"broker/subAccount/margin":1,"broker/subAccount/futures":1,"broker/subAccountApi":1,"broker/subAccountApi/permission":1,"broker/subAccountApi/commission":1,"broker/subAccountApi/commission/futures":1,"broker/subAccountApi/commission/coinFutures":1,"broker/transfer":1,"broker/transfer/futures":1,"broker/rebate/historicalRecord":1,"broker/subAccount/bnbBurn/spot":1,"broker/subAccount/bnbBurn/marginInterest":1,"broker/subAccount/blvt":1,"broker/subAccountApi/ipRestriction":1,"broker/subAccountApi/ipRestriction/ipList":1,"broker/universalTransfer":1,"broker/subAccountApi/permission/universalTransfer":1,"broker/subAccountApi/permission/vanillaOptions":1,"giftcard/createCode":.1,"giftcard/redeemCode":.1,"algo/futures/newOrderVp":20.001,"algo/futures/newOrderTwap":20.001,"staking/purchase":.1,"staking/redeem":.1,"staking/setAutoStaking":.1},put:{userDataStream:.1,"userDataStream/isolated":.1},delete:{"margin/openOrders":.1,"margin/order":.0066667,"margin/orderList":.0066667,"margin/isolated/account":2.0001,userDataStream:.1,"userDataStream/isolated":.1,"broker/subAccountApi":1,"broker/subAccountApi/ipRestriction/ipList":1,"algo/futures/order":.1}},sapiV3:{get:{"sub-account/assets":1},post:{"asset/getUserAsset":.5}},wapi:{post:{withdraw:1,"sub-account/transfer":1},get:{depositHistory:1,withdrawHistory:1,depositAddress:1,accountStatus:1,systemStatus:1,apiTradingStatus:1,userAssetDribbletLog:1,tradeFee:1,assetDetail:1,"sub-account/list":1,"sub-account/transfer/history":1,"sub-account/assets":1}},dapiPublic:{get:{ping:1,time:1,exchangeInfo:1,depth:{cost:2,byLimit:[[50,2],[100,5],[500,10],[1e3,20]]},trades:1,historicalTrades:20,aggTrades:20,premiumIndex:10,fundingRate:1,klines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},continuousKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},indexPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},markPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2},openInterest:1,pmExchangeInfo:1}},dapiData:{get:{openInterestHist:1,topLongShortAccountRatio:1,topLongShortPositionRatio:1,globalLongShortAccountRatio:1,takerBuySellVol:1,basis:1}},dapiPrivate:{get:{"positionSide/dual":30,order:1,openOrder:1,openOrders:{cost:1,noSymbol:5},allOrders:{cost:20,noSymbol:40},balance:1,account:5,"positionMargin/history":1,positionRisk:1,userTrades:{cost:20,noSymbol:40},income:20,leverageBracket:1,forceOrders:{cost:20,noSymbol:50},adlQuantile:5,orderAmendment:1},post:{"positionSide/dual":1,order:4,batchOrders:5,countdownCancelAll:10,leverage:1,marginType:1,positionMargin:1,listenKey:1},put:{listenKey:1,order:1,batchOrders:5},delete:{order:1,allOpenOrders:1,batchOrders:5,listenKey:1}},dapiPrivateV2:{get:{leverageBracket:1}},fapiPublic:{get:{ping:1,time:1,exchangeInfo:1,depth:{cost:2,byLimit:[[50,2],[100,5],[500,10],[1e3,20]]},trades:1,historicalTrades:20,aggTrades:20,klines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},continuousKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},markPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},indexPriceKlines:{cost:1,byLimit:[[99,1],[499,2],[1e3,5],[1e4,10]]},fundingRate:1,premiumIndex:1,"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2},openInterest:1,indexInfo:1,apiTradingStatus:{cost:1,noSymbol:10},lvtKlines:1,pmExchangeInfo:1}},fapiData:{get:{openInterestHist:1,topLongShortAccountRatio:1,topLongShortPositionRatio:1,globalLongShortAccountRatio:1,takerlongshortRatio:1}},fapiPrivate:{get:{forceOrders:{cost:20,noSymbol:50},allOrders:5,openOrder:1,openOrders:1,order:1,account:5,balance:5,leverageBracket:1,"positionMargin/history":1,positionRisk:5,"positionSide/dual":30,userTrades:5,income:30,commissionRate:20,apiTradingStatus:1,multiAssetsMargin:30,"apiReferral/ifNewUser":1,"apiReferral/customization":1,"apiReferral/userCustomization":1,"apiReferral/traderNum":1,"apiReferral/overview":1,"apiReferral/tradeVol":1,"apiReferral/rebateVol":1,"apiReferral/traderSummary":1,adlQuantile:5},post:{batchOrders:5,"positionSide/dual":1,positionMargin:1,marginType:1,order:4,leverage:1,listenKey:1,countdownCancelAll:10,multiAssetsMargin:1,"apiReferral/customization":1,"apiReferral/userCustomization":1},put:{listenKey:1},delete:{batchOrders:1,order:1,allOpenOrders:1,listenKey:1}},fapiPrivateV2:{get:{account:1,balance:1,positionRisk:1}},vapiPublic:{get:["ping","time","optionInfo","exchangeInfo","index","ticker","mark","depth","klines","trades","historicalTrades"]},vapiPrivate:{get:["account","position","order","openOrders","historyOrders","userTrades"],post:["transfer","bill","order","batchOrders","userDataStream","openAccount"],put:["userDataStream"],delete:["order","batchOrders","allOpenOrders","userDataStream"]},public:{get:{ping:1,time:1,depth:{cost:1,byLimit:[[100,1],[500,5],[1e3,10],[5e3,50]]},trades:1,aggTrades:1,historicalTrades:5,klines:1,"ticker/24hr":{cost:1,noSymbol:40},"ticker/price":{cost:1,noSymbol:2},"ticker/bookTicker":{cost:1,noSymbol:2},exchangeInfo:10},put:{userDataStream:1},post:{userDataStream:1},delete:{userDataStream:1}},private:{get:{allOrderList:10,openOrderList:3,orderList:2,order:2,openOrders:{cost:3,noSymbol:40},allOrders:10,account:10,myTrades:10,"rateLimit/order":20},post:{"order/oco":1,order:1,"order/test":1},delete:{openOrders:1,orderList:1,order:1}}},fees:{trading:{feeSide:"get",tierBased:!1,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001")},future:{trading:{feeSide:"quote",tierBased:!0,percentage:!0,taker:this.parseNumber("0.000400"),maker:this.parseNumber("0.000200"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.000400")],[this.parseNumber("250"),this.parseNumber("0.000400")],[this.parseNumber("2500"),this.parseNumber("0.000350")],[this.parseNumber("7500"),this.parseNumber("0.000320")],[this.parseNumber("22500"),this.parseNumber("0.000300")],[this.parseNumber("50000"),this.parseNumber("0.000270")],[this.parseNumber("100000"),this.parseNumber("0.000250")],[this.parseNumber("200000"),this.parseNumber("0.000220")],[this.parseNumber("400000"),this.parseNumber("0.000200")],[this.parseNumber("750000"),this.parseNumber("0.000170")]],maker:[[this.parseNumber("0"),this.parseNumber("0.000200")],[this.parseNumber("250"),this.parseNumber("0.000160")],[this.parseNumber("2500"),this.parseNumber("0.000140")],[this.parseNumber("7500"),this.parseNumber("0.000120")],[this.parseNumber("22500"),this.parseNumber("0.000100")],[this.parseNumber("50000"),this.parseNumber("0.000080")],[this.parseNumber("100000"),this.parseNumber("0.000060")],[this.parseNumber("200000"),this.parseNumber("0.000040")],[this.parseNumber("400000"),this.parseNumber("0.000020")],[this.parseNumber("750000"),this.parseNumber("0")]]}}},delivery:{trading:{feeSide:"base",tierBased:!0,percentage:!0,taker:this.parseNumber("0.000500"),maker:this.parseNumber("0.000100"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.000500")],[this.parseNumber("250"),this.parseNumber("0.000450")],[this.parseNumber("2500"),this.parseNumber("0.000400")],[this.parseNumber("7500"),this.parseNumber("0.000300")],[this.parseNumber("22500"),this.parseNumber("0.000250")],[this.parseNumber("50000"),this.parseNumber("0.000240")],[this.parseNumber("100000"),this.parseNumber("0.000240")],[this.parseNumber("200000"),this.parseNumber("0.000240")],[this.parseNumber("400000"),this.parseNumber("0.000240")],[this.parseNumber("750000"),this.parseNumber("0.000240")]],maker:[[this.parseNumber("0"),this.parseNumber("0.000100")],[this.parseNumber("250"),this.parseNumber("0.000080")],[this.parseNumber("2500"),this.parseNumber("0.000050")],[this.parseNumber("7500"),this.parseNumber("0.0000030")],[this.parseNumber("22500"),this.parseNumber("0")],[this.parseNumber("50000"),this.parseNumber("-0.000050")],[this.parseNumber("100000"),this.parseNumber("-0.000060")],[this.parseNumber("200000"),this.parseNumber("-0.000070")],[this.parseNumber("400000"),this.parseNumber("-0.000080")],[this.parseNumber("750000"),this.parseNumber("-0.000090")]]}}},option:{}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},precisionMode:x,options:{fetchCurrencies:!0,defaultTimeInForce:"GTC",defaultType:"spot",defaultMarginMode:"cross",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,throwMarginModeAlreadySet:!1,fetchPositions:"positionRisk",recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,newOrderRespType:{market:"FULL",limit:"FULL"},settle:{USDT:"linear",BUSD:"linear"},quoteOrderQty:!0,broker:{spot:"x-R4BD3S82",margin:"x-R4BD3S82",future:"x-xcKtGhcu",delivery:"x-xcKtGhcu"},accountsByType:{main:"MAIN",spot:"MAIN",funding:"FUNDING",margin:"MARGIN",future:"UMFUTURE",delivery:"CMFUTURE",mining:"MINING"},accountsById:{MAIN:"spot",FUNDING:"funding",MARGIN:"margin",UMFUTURE:"future",CMFUTURE:"delivery",MINING:"mining"},networks:{ERC20:"ETH",TRC20:"TRX",BEP2:"BNB",BEP20:"BSC",OMNI:"OMNI",EOS:"EOS",SPL:"SOL"},reverseNetworks:{"tronscan.org":"TRC20","etherscan.io":"ERC20","bscscan.com":"BSC","explorer.binance.org":"BEP2","bithomp.com":"XRP","bloks.io":"EOS","stellar.expert":"XLM","blockchair.com/bitcoin":"BTC","blockchair.com/bitcoin-cash":"BCH","blockchair.com/ecash":"XEC","explorer.litecoin.net":"LTC","explorer.avax.network":"AVAX","solscan.io":"SOL","polkadot.subscan.io":"DOT","dashboard.internetcomputer.org":"ICP","explorer.chiliz.com":"CHZ","cardanoscan.io":"ADA","mainnet.theoan.com":"AION","algoexplorer.io":"ALGO","explorer.ambrosus.com":"AMB","viewblock.io/zilliqa":"ZIL","viewblock.io/arweave":"AR","explorer.ark.io":"ARK","atomscan.com":"ATOM","www.mintscan.io":"CTK","explorer.bitcoindiamond.org":"BCD","btgexplorer.com":"BTG","bts.ai":"BTS","explorer.celo.org":"CELO","explorer.nervos.org":"CKB","cerebro.cortexlabs.ai":"CTXC","chainz.cryptoid.info":"VIA","explorer.dcrdata.org":"DCR","digiexplorer.info":"DGB","dock.subscan.io":"DOCK","dogechain.info":"DOGE","explorer.elrond.com":"EGLD","blockscout.com":"ETC","explore-fetchhub.fetch.ai":"FET","filfox.info":"FIL","fio.bloks.io":"FIO","explorer.firo.org":"FIRO","neoscan.io":"NEO","ftmscan.com":"FTM","explorer.gochain.io":"GO","block.gxb.io":"GXS","hash-hash.info":"HBAR","www.hiveblockexplorer.com":"HIVE","explorer.helium.com":"HNT","tracker.icon.foundation":"ICX","www.iostabc.com":"IOST","explorer.iota.org":"IOTA","iotexscan.io":"IOTX","irishub.iobscan.io":"IRIS","kava.mintscan.io":"KAVA","scope.klaytn.com":"KLAY","kmdexplorer.io":"KMD","kusama.subscan.io":"KSM","explorer.lto.network":"LTO","polygonscan.com":"POLYGON","explorer.ont.io":"ONT","minaexplorer.com":"MINA","nanolooker.com":"NANO","explorer.nebulas.io":"NAS","explorer.nbs.plus":"NBS","explorer.nebl.io":"NEBL","nulscan.io":"NULS","nxscan.com":"NXS","explorer.harmony.one":"ONE","explorer.poa.network":"POA","qtum.info":"QTUM","explorer.rsk.co":"RSK","www.oasisscan.com":"ROSE","ravencoin.network":"RVN","sc.tokenview.com":"SC","secretnodes.com":"SCRT","explorer.skycoin.com":"SKY","steemscan.com":"STEEM","explorer.stacks.co":"STX","www.thetascan.io":"THETA","scan.tomochain.com":"TOMO","explore.vechain.org":"VET","explorer.vite.net":"VITE","www.wanscan.org":"WAN","wavesexplorer.com":"WAVES","wax.eosx.io":"WAXP","waltonchain.pro":"WTC","chain.nem.ninja":"XEM","verge-blockchain.info":"XVG","explorer.yoyow.org":"YOYOW","explorer.zcha.in":"ZEC","explorer.zensystem.io":"ZEN"},impliedNetworks:{ETH:{ERC20:"ETH"},TRX:{TRC20:"TRX"}},legalMoney:{MXN:!0,UGX:!0,SEK:!0,CHF:!0,VND:!0,AED:!0,DKK:!0,KZT:!0,HUF:!0,PEN:!0,PHP:!0,USD:!0,TRY:!0,EUR:!0,NGN:!0,PLN:!0,BRL:!0,ZAR:!0,KES:!0,ARS:!0,RUB:!0,AUD:!0,NOK:!0,CZK:!0,GBP:!0,UAH:!0,GHS:!0,HKD:!0,CAD:!0,INR:!0,JPY:!0,NZD:!0}},exceptions:{exact:{"System is under maintenance.":w,"System abnormality":s,"You are not authorized to execute this request.":p,"API key does not exist":u,"Order would trigger immediately.":v,"Stop price would trigger immediately.":v,"Order would immediately match and take.":v,"Account has insufficient balance for requested action.":o,"Rest API trading is not enabled.":a,"You don't have permission.":p,"Market is closed.":a,"Too many requests. Please try again later.":d,"This action disabled is on this account.":y,"-1000":a,"-1001":a,"-1002":u,"-1003":l,"-1004":d,"-1005":p,"-1006":S,"-1007":_,"-1010":S,"-1011":p,"-1013":c,"-1014":c,"-1015":l,"-1016":a,"-1020":b,"-1021":f,"-1022":u,"-1023":b,"-1099":u,"-1100":b,"-1101":b,"-1102":b,"-1103":b,"-1104":b,"-1105":b,"-1106":b,"-1108":b,"-1109":u,"-1110":b,"-1111":b,"-1112":c,"-1113":b,"-1114":b,"-1115":b,"-1116":b,"-1117":b,"-1118":b,"-1119":b,"-1120":b,"-1121":g,"-1125":u,"-1127":b,"-1128":b,"-1130":b,"-1131":b,"-1136":b,"-2008":u,"-2010":s,"-2011":h,"-2013":h,"-2014":u,"-2015":u,"-2016":b,"-2018":o,"-2019":o,"-2020":k,"-2021":v,"-2022":c,"-2023":o,"-2024":o,"-2025":c,"-2026":c,"-2027":c,"-2028":o,"-3000":s,"-3001":u,"-3002":g,"-3003":b,"-3004":s,"-3005":o,"-3006":o,"-3007":s,"-3008":o,"-3009":b,"-3010":s,"-3011":b,"-3012":s,"-3013":b,"-3014":y,"-3015":s,"-3016":b,"-3017":s,"-3018":y,"-3019":y,"-3020":o,"-3021":b,"-3022":y,"-3023":b,"-3024":s,"-3025":b,"-3026":b,"-3027":g,"-3028":g,"-3029":s,"-3036":y,"-3037":s,"-3038":b,"-3041":o,"-3042":b,"-3043":b,"-3044":d,"-3045":s,"-3999":s,"-4001":b,"-4002":b,"-4003":b,"-4004":u,"-4005":l,"-4006":b,"-4007":b,"-4008":b,"-4010":b,"-4011":b,"-4012":b,"-4013":u,"-4014":p,"-4015":s,"-4016":p,"-4017":p,"-4018":g,"-4019":g,"-4021":b,"-4022":b,"-4023":s,"-4024":o,"-4025":o,"-4026":o,"-4027":s,"-4028":b,"-4029":b,"-4030":s,"-4031":s,"-4032":s,"-4033":b,"-4034":s,"-4035":p,"-4036":b,"-4037":s,"-4038":s,"-4039":b,"-4040":b,"-4041":s,"-4042":s,"-4043":b,"-4044":b,"-4045":s,"-4046":u,"-4047":b,"-5001":b,"-5002":o,"-5003":o,"-5004":b,"-5005":o,"-5006":b,"-5007":b,"-5008":o,"-5009":b,"-5010":s,"-5011":b,"-5012":s,"-5013":o,"-5021":b,"-6001":b,"-6003":b,"-6004":s,"-6005":c,"-6006":b,"-6007":b,"-6008":b,"-6009":l,"-6011":b,"-6012":o,"-6013":s,"-6014":b,"-6015":b,"-6016":b,"-6017":b,"-6018":b,"-6019":u,"-6020":b,"-7001":b,"-7002":b,"-9000":o,"-10017":b,"-11008":o,"-12014":l,"-13000":b,"-13001":b,"-13002":b,"-13003":b,"-13004":b,"-13005":b,"-13006":c,"-13007":u,"-21001":b,"-21002":b,"-21003":b,100001003:b},broad:{"has no operation privilege":p,MAX_POSITION:c}}})}costToPrecision(e,t){return this.decimalToPrecision(t,O,this.markets[e].precision.quote,this.precisionMode,this.paddingMode)}currencyToPrecision(e,t,i){return void 0!==this.safeValue(this.currencies[e],"precision")?this.decimalToPrecision(t,O,this.currencies[e].precision,this.precisionMode,this.paddingMode):this.numberToString(t)}nonce(){return this.milliseconds()-this.options.timeDifference}async fetchTime(e={}){const t=this.safeString2(this.options,"fetchTime","defaultType","spot"),i=this.safeString(e,"type",t),r=this.omit(e,"type");let s="publicGetTime";"future"===i?s="fapiPublicGetTime":"delivery"===i&&(s="dapiPublicGetTime");const n=await this[s](r);return this.safeInteger(n,"serverTime")}async fetchCurrencies(e={}){if(!this.safeValue(this.options,"fetchCurrencies"))return;if(!this.checkRequiredCredentials(!1))return;if(void 0!==this.safeString(this.urls,"apiBackup"))return;const t=await this.sapiGetCapitalConfigGetall(e),i={};for(let e=0;e<t.length;e++){const r=t[e],s=this.safeString(r,"coin"),n=this.safeString(r,"name"),a=this.safeCurrencyCode(s),o=void 0;let h=!0,c=!0;const d=this.safeValue(r,"networkList",[]),f={};let u;for(let e=0;e<d.length;e++){const t=d[e],i=this.safeString(t,"network"),r=this.safeNumber(t,"withdrawFee"),s=this.safeValue(t,"depositEnable"),n=this.safeValue(t,"withdrawEnable");c=c||s,h=h||n,f[i]=r;(this.safeValue(t,"isDefault")||void 0===u)&&(u=r)}const l=this.safeValue(r,"trading"),p=h&&c&&l;i[a]={id:s,name:n,code:a,precision:o,info:r,active:p,deposit:c,withdraw:h,networks:d,fee:u,fees:f,limits:this.limits}}return i}async fetchMarkets(e={}){const t=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),i=this.safeString(e,"type",t),r=this.omit(e,"type"),n="spot"===i,a="future"===i,o="delivery"===i;if(!(n||"margin"===i||a||o))throw new s(this.id+" does not support '"+i+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'delivery' or 'future'");let h="publicGetExchangeInfo";a?h="fapiPublicGetExchangeInfo":o&&(h="dapiPublicGetExchangeInfo");const c=await this[h](r);this.options.adjustForTimeDifference&&await this.loadTimeDifference();const d=this.safeValue(c,"symbols",[]),f=this.safeValue(this.options,"settle",{}),u=[];for(let e=0;e<d.length;e++){const t=d[e],r=this.safeString(t,"symbol"),s=this.safeStringLower(t,"symbol"),h=this.safeString(t,"baseAsset"),c=this.safeString(t,"quoteAsset"),l=this.safeString(t,"marginAsset"),p=this.safeCurrencyCode(h),m=this.safeCurrencyCode(c),b=this.safeCurrencyCode(l),g=a||o,y=this.safeString(t,"contractType");let v,w;g&&"PERPETUAL"!==y?(v=r,w=this.safeInteger(t,"deliveryDate")):v=p+"/"+m;const S=this.safeValue(t,"filters",[]),_=this.indexBy(S,"filterType"),k=this.safeString2(t,"status","contractStatus");let T,O=this.fees;g&&(T=this.safeNumber(t,"contractSize",this.parseNumber("1")),O=this.fees[i]);let x="TRADING"===k;if(n){const e=this.safeValue(t,"permissions",[]);for(let t=0;t<e.length;t++)if("TRD_GRP_003"===e[t]){x=!1;break}}const A=this.safeValue(t,"isMarginTradingAllowed",!1),M=this.safeString(f,b,"inverse"),E="linear"===M,I="inverse"===M,B={id:r,lowercaseId:s,symbol:v,base:p,quote:m,settle:b,baseId:h,quoteId:c,settleId:l,type:i,spot:n,margin:n&&A,swap:a,future:a,delivery:o,option:!1,active:x,contract:g,linear:g?E:void 0,inverse:g?I:void 0,taker:O.trading.taker,maker:O.trading.maker,contractSize:T,expiry:w,expiryDatetime:this.iso8601(w),strike:void 0,optionType:void 0,precision:{amount:this.safeInteger(t,"quantityPrecision"),price:this.safeInteger(t,"pricePrecision"),base:this.safeInteger(t,"baseAssetPrecision"),quote:this.safeInteger(t,"quotePrecision")},limits:{leverage:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:t};if("PRICE_FILTER"in _){const e=this.safeValue(_,"PRICE_FILTER",{}),t=this.safeString(e,"tickSize");B.precision.price=this.precisionFromString(t),B.limits.price={min:this.safeNumber(e,"minPrice"),max:this.safeNumber(e,"maxPrice")},B.precision.price=this.precisionFromString(e.tickSize)}if("LOT_SIZE"in _){const e=this.safeValue(_,"LOT_SIZE",{}),t=this.safeString(e,"stepSize");B.precision.amount=this.precisionFromString(t),B.limits.amount={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")}}if("MARKET_LOT_SIZE"in _){const e=this.safeValue(_,"MARKET_LOT_SIZE",{});B.limits.market={min:this.safeNumber(e,"minQty"),max:this.safeNumber(e,"maxQty")}}if("MIN_NOTIONAL"in _){const e=this.safeValue(_,"MIN_NOTIONAL",{});B.limits.cost.min=this.safeNumber2(e,"minNotional","notional")}u.push(B)}return u}parseBalance(e,t){const i={info:e};let r;if("spot"===t||"margin"===t){r=this.safeInteger(e,"updateTime");const t=this.safeValue2(e,"balances","userAssets",[]);for(let e=0;e<t.length;e++){const r=t[e],s=this.safeString(r,"asset"),n=this.safeCurrencyCode(s),a=this.account();a.free=this.safeString(r,"free"),a.used=this.safeString(r,"locked"),i[n]=a}}else if("savings"===t){const t=this.safeValue(e,"positionAmountVos",[]);for(let e=0;e<t.length;e++){const r=t[e],s=this.safeString(r,"asset"),n=this.safeCurrencyCode(s),a=this.account(),o=this.safeString(r,"amount");a.total=o,a.used=o,i[n]=a}}else if("funding"===t)for(let t=0;t<e.length;t++){const r=e[t],s=this.account(),n=this.safeString(r,"asset"),a=this.safeCurrencyCode(n);s.free=this.safeString(r,"free");const o=this.safeString(r,"freeze"),h=this.safeString(r,"withdrawing"),c=this.safeString(r,"locked");s.used=A.stringAdd(o,A.stringAdd(c,h)),i[a]=s}else{let t=e;Array.isArray(e)||(t=this.safeValue(e,"assets",[]));for(let e=0;e<t.length;e++){const r=t[e],s=this.safeString(r,"asset"),n=this.safeCurrencyCode(s),a=this.account();a.free=this.safeString(r,"availableBalance"),a.used=this.safeString(r,"initialMargin"),a.total=this.safeString2(r,"marginBalance","balance"),i[n]=a}}return i.timestamp=r,i.datetime=this.iso8601(r),this.safeBalance(i)}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t);let r="privateGetAccount";if("future"===i){const e=this.safeValue(this.options,i,{}),t=this.safeValue(e,"fetchBalance",{});r=this.safeString(t,"method","fapiPrivateV2GetAccount")}else if("delivery"===i){const e=this.safeValue(this.options,i,{}),t=this.safeValue(e,"fetchBalance",{});r=this.safeString(t,"method","dapiPrivateGetAccount")}else"margin"===i?r="sapiGetMarginAccount":"savings"===i?r="sapiGetLendingUnionAccount":"funding"===i&&(r="sapiPostAssetGetFundingAsset");const s=this.omit(e,"type"),n=await this[r](s);return this.parseBalance(n,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const r=this.market(e),s={symbol:r.id};void 0!==t&&(s.limit=t);let n="publicGetDepth";r.linear?n="fapiPublicGetDepth":r.inverse&&(n="dapiPublicGetDepth");const a=await this[n](this.extend(s,i)),o=this.safeInteger(a,"T"),h=this.parseOrderBook(a,e,o);return h.nonce=this.safeInteger(a,"lastUpdateId"),h}parseTicker(e,t){const i=this.safeInteger(e,"closeTime"),r=this.safeString(e,"symbol"),s=this.safeSymbol(r,t),n=this.safeString(e,"lastPrice");let a,o;return"baseVolume"in e?(a=this.safeString(e,"baseVolume"),o=this.safeString(e,"volume")):(a=this.safeString(e,"volume"),o=this.safeString(e,"quoteVolume")),this.safeTicker({symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeString(e,"highPrice"),low:this.safeString(e,"lowPrice"),bid:this.safeString(e,"bidPrice"),bidVolume:this.safeString(e,"bidQty"),ask:this.safeString(e,"askPrice"),askVolume:this.safeString(e,"askQty"),vwap:this.safeString(e,"weightedAvgPrice"),open:this.safeString(e,"openPrice"),close:n,last:n,previousClose:this.safeString(e,"prevClosePrice"),change:this.safeString(e,"priceChange"),percentage:this.safeString(e,"priceChangePercent"),average:void 0,baseVolume:a,quoteVolume:o,info:e},t)}async fetchStatus(e={}){const t=await this.sapiGetSystemStatus(e),i=this.safeString(t,"status");return{status:this.safeString({0:"ok",1:"maintenance"},i,i),updated:void 0,eta:void 0,url:void 0,info:t}}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),r={symbol:i.id};let s="publicGetTicker24hr";i.linear?s="fapiPublicGetTicker24hr":i.inverse&&(s="dapiPublicGetTicker24hr");const n=await this[s](this.extend(r,t));if(Array.isArray(n)){const e=this.safeValue(n,0,{});return this.parseTicker(e,i)}return this.parseTicker(n,i)}async fetchBidsAsks(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),r=this.safeString(t,"type",i),s=this.omit(t,"type");let n;n="future"===r?"fapiPublicGetTickerBookTicker":"delivery"===r?"dapiPublicGetTickerBookTicker":"publicGetTickerBookTicker";const a=await this[n](s);return this.parseTickers(a,e)}async fetchTickers(e,t={}){await this.loadMarkets();const i=this.safeString2(this.options,"fetchTickers","defaultType","spot"),r=this.safeString(t,"type",i),s=this.omit(t,"type");let n;n="future"===r?"fapiPublicGetTicker24hr":"delivery"===r?"dapiPublicGetTicker24hr":"publicGetTicker24hr";const a=this.safeString(this.options,"fetchTickersMethod",n),o=await this[a](s);return this.parseTickers(o,e)}parseOHLCV(e,t){return[this.safeInteger(e,0),this.safeNumber(e,1),this.safeNumber(e,2),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,r,s={}){await this.loadMarkets();const n=this.market(e),a=this.safeString(s,"price"),o=this.safeInteger(s,"until");s=this.omit(s,["price","until"]),r=void 0===r?500:Math.min(r,1500);const h={interval:this.timeframes[t],limit:r};if("index"===a?h.pair=n.id:h.symbol=n.id,void 0!==i&&(h.startTime=i,n.inverse&&i>0)){const e=this.parseTimeframe(t),s=this.sum(i,r*e*1e3-1),n=this.milliseconds();h.endTime=Math.min(n,s)}void 0!==o&&(h.endTime=o);let c="publicGetKlines";"mark"===a?c=n.inverse?"dapiPublicGetMarkPriceKlines":"fapiPublicGetMarkPriceKlines":"index"===a?c=n.inverse?"dapiPublicGetIndexPriceKlines":"fapiPublicGetIndexPriceKlines":n.linear?c="fapiPublicGetKlines":n.inverse&&(c="dapiPublicGetKlines");const d=await this[c](this.extend(h,s));return this.parseOHLCVs(d,n,t,i,r)}parseTrade(e,t){if("isDustTrade"in e)return this.parseDustTrade(e,t);const i=this.safeInteger2(e,"T","time"),r=this.safeString2(e,"p","price"),s=this.safeString2(e,"q","qty"),n=this.safeString2(e,"quoteQty","baseQty"),a=this.safeString(e,"symbol"),o=this.safeSymbol(a,t);let h,c=this.safeString2(e,"t","a");c=this.safeString2(e,"id","tradeId",c);const d=this.safeString(e,"orderId"),f=this.safeValue2(e,"m","isBuyerMaker");let u,l;return void 0!==f?(h=f?"sell":"buy",u="taker"):"side"in e?h=this.safeStringLower(e,"side"):"isBuyer"in e&&(h=e.isBuyer?"buy":"sell"),"commission"in e&&(l={cost:this.safeString(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))}),"isMaker"in e&&(u=e.isMaker?"maker":"taker"),"maker"in e&&(u=e.maker?"maker":"taker"),this.safeTrade({info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,id:c,order:d,type:void 0,side:h,takerOrMaker:u,price:r,amount:s,cost:n,fee:l},t)}async fetchTrades(e,t,i,r={}){await this.loadMarkets();const s=this.market(e),n={symbol:s.id},[a,o]=this.handleMarketTypeAndParams("fetchTrades",s,r);let h;"future"===a?s.linear?h="fapiPublicGetAggTrades":s.inverse&&(h="dapiPublicGetAggTrades"):h="delivery"===a?"dapiPublicGetAggTrades":"publicGetAggTrades";let c=this.safeString(this.options,"fetchTradesMethod",h);"publicGetAggTrades"===c?"future"===a?s.linear?c="fapiPublicGetAggTrades":s.inverse&&(c="dapiPublicGetAggTrades"):"delivery"===a&&(c="dapiPublicGetAggTrades"):"publicGetHistoricalTrades"===c&&("future"===a?s.linear?c="fapiPublicGetHistoricalTrades":s.inverse&&(c="dapiPublicGetHistoricalTrades"):"delivery"===a&&(c="dapiPublicGetHistoricalTrades")),void 0!==t&&(n.startTime=t,n.endTime=this.sum(t,36e5)),void 0!==i&&(n.limit=i);const d=await this[c](this.extend(n,o));return this.parseTrades(d,s,t,i)}parseOrderStatus(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}parseOrder(e,t){const i=this.parseOrderStatus(this.safeString(e,"status")),r=this.safeString(e,"symbol"),s=this.safeSymbol(r,t),n=this.safeString(e,"executedQty","0");let a,o;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e?a=this.safeInteger(e,"transactTime"):"updateTime"in e&&"open"===i&&(A.stringGt(n,"0")?o=this.safeInteger(e,"updateTime"):a=this.safeInteger(e,"updateTime"));const h=this.safeString(e,"avgPrice"),c=this.safeString(e,"price"),d=this.safeString(e,"origQty");let f=this.safeString2(e,"cummulativeQuoteQty","cumQuote");f=this.safeString(e,"cumBase",f);const u=this.safeString(e,"orderId");let l=this.safeStringLower(e,"type");const p=this.safeStringLower(e,"side"),m=this.safeValue(e,"fills",[]),b=this.safeString(e,"clientOrderId");let g=this.safeString(e,"timeInForce");"GTX"===g&&(g="PO");const y="limit_maker"===l||"PO"===g;"limit_maker"===l&&(l="limit");const v=this.safeString(e,"stopPrice"),w=this.parseNumber(this.omitZero(v));return this.safeOrder({info:e,id:u,clientOrderId:b,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:o,symbol:s,type:l,timeInForce:g,postOnly:y,reduceOnly:this.safeValue(e,"reduceOnly"),side:p,price:c,stopPrice:w,amount:d,cost:f,average:h,filled:n,remaining:void 0,status:i,fee:void 0,trades:m},t)}async createOrder(e,t,i,r,s,n={}){await this.loadMarkets();const a=this.market(e),o=this.safeString2(this.options,"createOrder","defaultType","spot"),h=this.safeString(n,"type",o),d=this.safeString2(n,"newClientOrderId","clientOrderId"),f=this.safeValue(n,"postOnly",!1);n=this.omit(n,["type","newClientOrderId","clientOrderId","postOnly"]);if(void 0!==this.safeValue(n,"reduceOnly")&&"future"!==h&&"delivery"!==h)throw new c(this.id+" createOrder() does not support reduceOnly for "+h+" orders, reduceOnly orders are supported for future and delivery markets only");let u="privatePostOrder";if("future"===h?u="fapiPrivatePostOrder":"delivery"===h?u="dapiPrivatePostOrder":"margin"===h&&(u="sapiPostMarginOrder"),a.spot){this.safeValue(n,"test",!1)&&(u+="Test"),n=this.omit(n,"test"),f&&(t="LIMIT_MAKER")}const l=t.toUpperCase();let p=l;const m=this.safeNumber(n,"stopPrice");void 0!==m&&(n=this.omit(n,"stopPrice"),"MARKET"===p?p=a.contract?"STOP_MARKET":"STOP_LOSS":"LIMIT"===p&&(p=a.contract?"STOP":"STOP_LOSS_LIMIT"));const b=this.safeValue(a.info,"orderTypes");if(!this.inArray(p,b))throw new c(l!==p?this.id+" stopPrice parameter is not allowed for "+e+" "+t+" orders":this.id+" "+t+" is not a valid order type for the "+e+" market");const g={symbol:a.id,type:p,side:i.toUpperCase()};if(void 0===d){const e=this.safeValue(this.options,"broker");if(void 0!==e){const t=this.safeString(e,h);void 0!==t&&(g.newClientOrderId=t+this.uuid22())}}else g.newClientOrderId=d;g.newOrderRespType="spot"===h||"margin"===h?this.safeValue(this.options.newOrderRespType,t,"RESULT"):"RESULT";let y=!1,v=!1,w=!1,S=!1;if("MARKET"===p)if(a.spot){if(this.safeValue(this.options,"quoteOrderQty",!0)){const e=this.safeValue2(n,"quoteOrderQty","cost"),t=a.precision.price;void 0!==e?(g.quoteOrderQty=this.decimalToPrecision(e,O,t,this.precisionMode),n=this.omit(n,["quoteOrderQty","cost"])):void 0!==s?g.quoteOrderQty=this.decimalToPrecision(r*s,O,t,this.precisionMode):S=!0}else S=!0}else S=!0;else if("LIMIT"===p)v=!0,y=!0,S=!0;else if("STOP_LOSS"===p||"TAKE_PROFIT"===p)w=!0,S=!0,(a.linear||a.inverse)&&(v=!0);else if("STOP_LOSS_LIMIT"===p||"TAKE_PROFIT_LIMIT"===p)S=!0,w=!0,v=!0,y=!0;else if("LIMIT_MAKER"===p)v=!0,S=!0;else if("STOP"===p)S=!0,w=!0,v=!0;else if("STOP_MARKET"===p||"TAKE_PROFIT_MARKET"===p){void 0===this.safeValue(n,"closePosition")&&(S=!0),w=!0}else if("TRAILING_STOP_MARKET"===p){S=!0;if(void 0===this.safeNumber(n,"callbackRate"))throw new c(this.id+" createOrder() requires a callbackRate extra param for a "+t+" order")}if(S&&(g.quantity=this.amountToPrecision(e,r)),v){if(void 0===s)throw new c(this.id+" createOrder() requires a price argument for a "+t+" order");g.price=this.priceToPrecision(e,s)}if(y&&(g.timeInForce=this.options.defaultTimeInForce),w){if(void 0===m)throw new c(this.id+" createOrder() requires a stopPrice extra param for a "+t+" order");g.stopPrice=this.priceToPrecision(e,m)}const _=await this[u](this.extend(g,n));return this.parseOrder(_,a)}async fetchOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" fetchOrder() requires a symbol argument");await this.loadMarkets();const r=this.market(t),s=this.safeString2(this.options,"fetchOrder","defaultType","spot"),a=this.safeString(i,"type",s);let o="privateGetOrder";"future"===a?o="fapiPrivateGetOrder":"delivery"===a?o="dapiPrivateGetOrder":"margin"===a&&(o="sapiGetMarginOrder");const h={symbol:r.id},c=this.safeValue2(i,"origClientOrderId","clientOrderId");void 0!==c?h.origClientOrderId=c:h.orderId=e;const d=this.omit(i,["type","clientOrderId","origClientOrderId"]),f=await this[o](this.extend(h,d));return this.parseOrder(f,r)}async fetchOrders(e,t,i,r={}){if(void 0===e)throw new n(this.id+" fetchOrders() requires a symbol argument");await this.loadMarkets();const s=this.market(e),a=this.safeString2(this.options,"fetchOrders","defaultType","spot"),o=this.safeString(r,"type",a);let h="privateGetAllOrders";"future"===o?h="fapiPrivateGetAllOrders":"delivery"===o?h="dapiPrivateGetAllOrders":"margin"===o&&(h="sapiGetMarginAllOrders");const c={symbol:s.id};void 0!==t&&(c.startTime=t),void 0!==i&&(c.limit=i);const d=this.omit(r,"type"),f=await this[h](this.extend(c,d));return this.parseOrders(f,s,t,i)}async fetchOpenOrders(e,t,i,r={}){let n,a,o;await this.loadMarkets();const h={};if(void 0!==e){n=this.market(e),h.symbol=n.id;const t=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),i="type"in n?n.type:t;o=this.safeString(r,"type",i),a=this.omit(r,"type")}else{if(this.options.warnOnFetchOpenOrdersWithoutSymbol){const e=this.symbols.length,t=parseInt(e/2);throw new s(this.id+" fetchOpenOrders() WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+t.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.')}{const e=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot");o=this.safeString(r,"type",e),a=this.omit(r,"type")}}let c="privateGetOpenOrders";"future"===o?c="fapiPrivateGetOpenOrders":"delivery"===o?c="dapiPrivateGetOpenOrders":"margin"===o&&(c="sapiGetMarginOpenOrders");const d=await this[c](this.extend(h,a));return this.parseOrders(d,n,t,i)}async fetchClosedOrders(e,t,i,r={}){const s=await this.fetchOrders(e,t,i,r);return this.filterBy(s,"status","closed")}async cancelOrder(e,t,i={}){if(void 0===t)throw new n(this.id+" cancelOrder() requires a symbol argument");await this.loadMarkets();const r=this.market(t),s=this.safeString2(this.options,"cancelOrder","defaultType","spot"),a=this.safeString(i,"type",s),o=this.safeValue2(i,"origClientOrderId","clientOrderId"),h={symbol:r.id};void 0===o?h.orderId=e:h.origClientOrderId=o;let c="privateDeleteOrder";"future"===a?c="fapiPrivateDeleteOrder":"delivery"===a?c="dapiPrivateDeleteOrder":"margin"===a&&(c="sapiDeleteMarginOrder");const d=this.omit(i,["type","origClientOrderId","clientOrderId"]),f=await this[c](this.extend(h,d));return this.parseOrder(f,r)}async cancelAllOrders(e,t={}){if(void 0===e)throw new n(this.id+" cancelAllOrders() requires a symbol argument");await this.loadMarkets();const i=this.market(e),r={symbol:i.id},s=this.safeString2(this.options,"cancelAllOrders","defaultType","spot"),a=this.safeString(t,"type",s),o=this.omit(t,"type");let h="privateDeleteOpenOrders";"margin"===a?h="sapiDeleteMarginOpenOrders":"future"===a?h="fapiPrivateDeleteAllOpenOrders":"delivery"===a&&(h="dapiPrivateDeleteAllOpenOrders");const c=await this[h](this.extend(r,o));return Array.isArray(c)?this.parseOrders(c,i):c}async fetchOrderTrades(e,t,i,r,s={}){if(void 0===t)throw new n(this.id+" fetchOrderTrades() requires a symbol argument");await this.loadMarkets();const a=this.market(t),o=this.safeString(s,"type",a.type);if(s=this.omit(s,"type"),"spot"!==o)throw new m(this.id+" fetchOrderTrades() supports spot markets only");const h={orderId:e};return await this.fetchMyTrades(t,i,r,this.extend(h,s))}async fetchMyTrades(e,t,i,r={}){if(void 0===e)throw new n(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const s=this.market(e),a=this.safeString(r,"type",s.type);let o;r=this.omit(r,"type"),"spot"===a?o="privateGetMyTrades":"margin"===a?o="sapiGetMarginMyTrades":"future"===a?o="fapiPrivateGetUserTrades":"delivery"===a&&(o="dapiPrivateGetUserTrades");const h={symbol:s.id};void 0!==t&&(h.startTime=t),void 0!==i&&(h.limit=i);const c=await this[o](this.extend(h,r));return this.parseTrades(c,s,t,i)}async fetchMyDustTrades(e,t,i,r={}){await this.loadMarkets();const s={};void 0!==t&&(s.startTime=t,s.endTime=this.sum(t,7776e6));const n=await this.sapiGetAssetDribblet(this.extend(s,r)),a=this.safeValue(n,"userAssetDribblets",[]),o=this.safeInteger(n,"total",0),h=[];for(let e=0;e<o;e++){const t=this.safeValue(a[e],"userAssetDribbletDetails",[]);for(let e=0;e<t.length;e++)t[e].isDustTrade=!0,h.push(t[e])}const c=this.parseTrades(h,void 0,t,i);return this.filterBySinceLimit(c,t,i)}parseDustTrade(e,t){const i=this.safeString(e,"transId"),r=this.safeInteger(e,"operateTime"),s=this.safeString(e,"fromAsset"),n=this.safeCurrencyCode(s),a=this.currency("BNB").code,o=a+"/"+n;let h=!1;o in this.markets&&(h=!0);const c=this.safeString(e,"serviceChargeAmount"),d={currency:a,cost:this.parseNumber(c)};let f,u,l,p,m;h?(f=o,u=this.safeString(e,"transferedAmount"),l=this.safeString(e,"amount"),p="buy"):(f=n+"/"+a,u=this.safeString(e,"amount"),l=this.safeString(e,"transferedAmount"),p="sell"),void 0!==l&&u&&(m=A.stringDiv(l,u));const b=this.parseNumber(u),g=this.parseNumber(m),y=this.parseNumber(l);return{id:undefined,timestamp:r,datetime:this.iso8601(r),symbol:f,order:i,type:undefined,takerOrMaker:undefined,side:p,amount:b,price:g,cost:y,fee:d,info:e}}async fetchDeposits(e,t,i,r={}){let s,n;await this.loadMarkets();const a={},o=this.safeValue(this.options,"legalMoney",{}),h=this.safeInteger(r,"until");if(e in o){void 0!==e&&(s=this.currency(e)),a.transactionType=0,void 0!==t&&(a.beginTime=t),void 0!==h&&(a.endTime=h);const i=await this.sapiGetFiatOrders(this.extend(a,r));n=this.safeValue(i,"data")}else{if(void 0!==e&&(s=this.currency(e),a.coin=s.id),void 0!==t){a.startTime=t;let e=this.sum(t,7776e6);void 0!==h&&(e=Math.min(e,h)),a.endTime=e}void 0!==i&&(a.limit=i),n=await this.sapiGetCapitalDepositHisrec(this.extend(a,r))}return this.parseTransactions(n,s,t,i)}async fetchWithdrawals(e,t,i,r={}){await this.loadMarkets();const s={};let n,a;if(e in this.safeValue(this.options,"legalMoney",{})){void 0!==e&&(a=this.currency(e)),s.transactionType=1,void 0!==t&&(s.beginTime=t);const i=await this.sapiGetFiatOrders(this.extend(s,r));n=this.safeValue(i,"data")}else void 0!==e&&(a=this.currency(e),s.coin=a.id),void 0!==t&&(s.startTime=t,s.endTime=this.sum(t,7776e6)),void 0!==i&&(s.limit=i),n=await this.sapiGetCapitalWithdrawHistory(this.extend(s,r));return this.parseTransactions(n,a,t,i)}parseTransactionStatusByType(e,t){const i=this.safeValue({deposit:{0:"pending",1:"ok",Processing:"pending",Failed:"failed",Successful:"ok",Refunding:"canceled",Refunded:"canceled","Refund Failed":"failed"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok",Processing:"pending",Failed:"failed",Successful:"ok",Refunding:"canceled",Refunded:"canceled","Refund Failed":"failed"}},t,{});return this.safeString(i,e,e)}parseTransaction(e,t){const i=this.safeString2(e,"id","orderNo"),r=this.safeString(e,"address");let s=this.safeString(e,"addressTag");void 0!==s&&s.length<1&&(s=void 0);let n=this.safeString(e,"txId");void 0!==n&&n.indexOf("Internal transfer ")>=0&&(n=n.slice(18));const a=this.safeString2(e,"coin","fiatCurrency"),o=this.safeCurrencyCode(a,t);let h;const c=this.safeInteger2(e,"insertTime","createTime"),d=this.parse8601(this.safeString(e,"applyTime"));let f=this.safeString(e,"type");void 0===f&&(void 0!==c&&void 0===d?(f="deposit",h=c):void 0===c&&void 0!==d&&(f="withdrawal",h=d));const u=this.parseTransactionStatusByType(this.safeString(e,"status"),f),l=this.safeNumber(e,"amount"),p=this.safeNumber2(e,"transactionFee","totalFee");let m;void 0!==p&&(m={currency:o,cost:p});const b=this.safeInteger2(e,"successTime","updateTime");let g=this.safeInteger(e,"transferType");void 0!==g&&(g=!!g);const y=this.safeString(e,"network");return{info:e,id:i,txid:n,timestamp:h,datetime:this.iso8601(h),network:y,address:r,addressTo:r,addressFrom:void 0,tag:s,tagTo:s,tagFrom:void 0,type:f,amount:l,currency:o,status:u,updated:b,internal:g,fee:m}}parseTransferStatus(e){return this.safeString({CONFIRMED:"ok"},e,e)}parseTransfer(e,t){const i=this.safeString(e,"tranId"),r=this.safeString(e,"asset"),s=this.safeCurrencyCode(r,t),n=this.safeNumber(e,"amount"),a=this.safeString(e,"type");let o,h;const c=this.safeValue(this.options,"accountsById",{});if(void 0!==a){const e=a.split("_");o=this.safeValue(e,0),h=this.safeValue(e,1),o=this.safeString(c,o,o),h=this.safeString(c,h,h)}const d=this.safeInteger(e,"timestamp"),f=this.parseTransferStatus(this.safeString(e,"status"));return{info:e,id:i,timestamp:d,datetime:this.iso8601(d),currency:s,amount:n,fromAccount:o,toAccount:h,status:f}}parseIncome(e,t){const i=this.safeString(e,"symbol"),r=this.safeSymbol(i,t),s=this.safeNumber(e,"income"),n=this.safeString(e,"asset"),a=this.safeCurrencyCode(n),o=this.safeString(e,"tranId"),h=this.safeInteger(e,"time");return{info:e,symbol:r,code:a,timestamp:h,datetime:this.iso8601(h),id:o,amount:s}}parseIncomes(e,t,i,r){const s=[];for(let i=0;i<e.length;i++){const r=e[i],n=this.parseIncome(r,t);s.push(n)}const n=this.sortBy(s,"timestamp");return this.filterBySinceLimit(n,i,r)}async transfer(e,t,i,r,s={}){await this.loadMarkets();const n=this.currency(e);let a=this.safeString(s,"type");if(void 0===a){const e=this.safeValue(this.options,"accountsByType",{});a=this.safeString(e,i,i)+"_"+this.safeString(e,r,r)}const o={asset:n.id,amount:this.currencyToPrecision(e,t),type:a},h=await this.sapiPostAssetTransfer(this.extend(o,s)),c=this.parseTransfer(h,n);return this.extend(c,{amount:t,currency:e,fromAccount:i,toAccount:r})}async fetchTransfers(e,t,i,r={}){let n;await this.loadMarkets(),void 0!==e&&(n=this.currency(e));const a=this.safeString2(this.options,"fetchTransfers","defaultType","spot"),o=this.safeString(r,"fromAccount",a),h="future"===o?"spot":"future",c=this.safeString(r,"toAccount",h);let d=this.safeString(r,"type");const f=this.safeValue(this.options,"accountsByType",{}),u=this.safeString(f,o),l=this.safeString(f,c);if(void 0===d){if(void 0===u){const e=Object.keys(f);throw new s(this.id+" fromAccount parameter must be one of "+e.join(", "))}if(void 0===l){const e=Object.keys(f);throw new s(this.id+" toAccount parameter must be one of "+e.join(", "))}d=u+"_"+l}const p={type:d};void 0!==t&&(p.startTime=t),void 0!==i&&(p.size=i);const m=await this.sapiGetAssetTransfer(this.extend(p,r)),b=this.safeValue(m,"rows",[]);return this.parseTransfers(b,n,t,i)}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={coin:this.currency(e).id},r=this.safeValue(this.options,"networks",{});let s=this.safeStringUpper(t,"network");s=this.safeString(r,s,s),void 0!==s&&(i.network=s,t=this.omit(t,"network"));const n=await this.sapiGetCapitalDepositAddress(this.extend(i,t)),a=this.safeString(n,"address"),o=this.safeString(n,"url");let h;if(void 0!==o){const t=this.safeValue(this.options,"reverseNetworks",{}),i=o.split("/");let r=this.safeString(i,2);if("blockchair.com"===r||"viewblock.io"===r){const e=this.safeString(i,3);void 0!==e&&(r=r+"/"+e)}h=this.safeString(t,r);const s=this.safeValue(this.options,"impliedNetworks",{ETH:{ERC20:"ETH"},TRX:{TRC20:"TRX"}});if(e in s){const t=this.safeValue(s,e,{});h=this.safeString(t,h,h)}}let c=this.safeString(n,"tag","");return 0===c.length&&(c=void 0),this.checkAddress(a),{currency:e,address:a,tag:c,network:h,info:n}}async fetchTransactionFees(e,t={}){await this.loadMarkets();const i=await this.sapiGetCapitalConfigGetall(t),r={};for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"coin"),n=this.safeCurrencyCode(s),a=this.safeValue(t,"networkList",[]);r[n]={};for(let e=0;e<a.length;e++){const t=a[e],i=this.safeString(t,"network"),s=this.safeCurrencyCode(i),o=this.safeNumber(t,"withdrawFee");r[n][s]=o}}return{withdraw:r,deposit:{},info:i}}async withdraw(e,t,i,r,s={}){[r,s]=this.handleWithdrawTagAndParams(r,s),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e),a={coin:n.id,address:i,amount:t};void 0!==r&&(a.addressTag=r);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(s,"network");h=this.safeString(o,h,h),void 0!==h&&(a.network=h,s=this.omit(s,"network"));const c=await this.sapiPostCapitalWithdrawApply(this.extend(a,s));return this.parseTransaction(c,n)}parseTradingFee(e,t){const i=this.safeString(e,"symbol");return{info:e,symbol:this.safeSymbol(i),maker:this.safeNumber(e,"makerCommission"),taker:this.safeNumber(e,"takerCommission")}}async fetchTradingFee(e,t={}){await this.loadMarkets();const i={symbol:this.market(e).id},r=await this.sapiGetAssetTradeFee(this.extend(i,t)),s=this.safeValue(r,0,{});return this.parseTradingFee(s)}async fetchTradingFees(e={}){let t;await this.loadMarkets();const i=this.safeString2(this.options,"fetchTradingFees","defaultType","future"),r=this.safeString(e,"type",i),s=this.omit(e,"type");"spot"===r||"margin"===r?t="sapiGetAssetTradeFee":"future"===r?t="fapiPrivateGetAccount":"delivery"===r&&(t="dapiPrivateGetAccount");const n=await this[t](s);if("spot"===r||"margin"===r){const e={};for(let t=0;t<n.length;t++){const i=this.parseTradingFee(n[t]);e[i.symbol]=i}return e}if("future"===r){const e=Object.keys(this.markets),t={},i=this.safeInteger(n,"feeTier"),s=this.fees[r].trading.tiers,a=s.maker[i][1],o=s.taker[i][1];for(let r=0;r<e.length;r++){const s=e[r];t[s]={info:{feeTier:i},symbol:s,maker:a,taker:o}}return t}if("delivery"===r){const e=Object.keys(this.markets),t={},i=this.safeInteger(n,"feeTier"),s=this.fees[r].trading.tiers,a=s.maker[i][1],o=s.taker[i][1];for(let r=0;r<e.length;r++){const s=e[r];t[s]={info:{feeTier:i},symbol:s,maker:a,taker:o}}return t}}async futuresTransfer(e,t,i,r={}){if(i<1||i>4)throw new n(this.id+" type must be between 1 and 4");await this.loadMarkets();const s=this.currency(e),a={asset:s.id,amount:t,type:i},o=await this.sapiPostFuturesTransfer(this.extend(a,r));return this.parseTransfer(o,s)}async fetchFundingRate(e,t={}){await this.loadMarkets();const i=this.market(e),r={symbol:i.id};let s;if(i.linear)s="fapiPublicGetPremiumIndex";else{if(!i.inverse)throw new m(this.id+" fetchFundingRate() supports linear and inverse contracts only");s="dapiPublicGetPremiumIndex"}let n=await this[s](this.extend(r,t));return i.inverse&&(n=n[0]),this.parseFundingRate(n,i)}async fetchFundingRateHistory(e,t,i,r={}){await this.loadMarkets();const s={};let n;const a=this.safeString2(this.options,"fetchFundingRateHistory","defaultType","future"),o=this.safeString(r,"type",a);if(r=this.omit(r,"type"),"future"===o?n="fapiPublicGetFundingRate":"delivery"===o&&(n="dapiPublicGetFundingRate"),void 0!==e){const t=this.market(e);e=t.symbol,s.symbol=t.id,t.linear?n="fapiPublicGetFundingRate":t.inverse&&(n="dapiPublicGetFundingRate")}if(void 0===n)throw new m(this.id+" fetchFundingRateHistory() is not supported for "+o+" markets");void 0!==t&&(s.startTime=t);const h=this.safeInteger2(r,"until","till"),c=this.safeString(r,"endTime",h);r=this.omit(r,["endTime","till","until"]),void 0!==c&&(s.endTime=c),void 0!==i&&(s.limit=i);const d=await this[n](this.extend(s,r)),f=[];for(let e=0;e<d.length;e++){const t=d[e],i=this.safeInteger(t,"fundingTime");f.push({info:t,symbol:this.safeSymbol(this.safeString(t,"symbol")),fundingRate:this.safeNumber(t,"fundingRate"),timestamp:i,datetime:this.iso8601(i)})}const u=this.sortBy(f,"timestamp");return this.filterBySymbolSinceLimit(u,e,t,i)}async fetchFundingRates(e,t={}){let i;await this.loadMarkets();const r=this.safeString2(this.options,"fetchFundingRates","defaultType","future"),s=this.safeString(t,"type",r),n=this.omit(t,"type");if("future"===s)i="fapiPublicGetPremiumIndex";else{if("delivery"!==s)throw new m(this.id+" fetchFundingRates() supports linear and inverse contracts only");i="dapiPublicGetPremiumIndex"}const a=await this[i](n),o=[];for(let e=0;e<a.length;e++){const t=a[e],i=this.parseFundingRate(t);o.push(i)}return this.filterByArray(o,"symbol",e)}parseFundingRate(e,t){const i=this.safeInteger(e,"time"),r=this.safeString(e,"symbol"),s=this.safeSymbol(r,t),n=this.safeNumber(e,"markPrice"),a=this.safeNumber(e,"indexPrice"),o=this.safeNumber(e,"interestRate"),h=this.safeNumber(e,"estimatedSettlePrice"),c=this.safeNumber(e,"lastFundingRate"),d=this.safeInteger(e,"nextFundingTime");return{info:e,symbol:s,markPrice:n,indexPrice:a,interestRate:o,estimatedSettlePrice:h,timestamp:i,datetime:this.iso8601(i),fundingRate:c,fundingTimestamp:d,fundingDatetime:this.iso8601(d),nextFundingRate:void 0,nextFundingTimestamp:void 0,nextFundingDatetime:void 0,previousFundingRate:void 0,previousFundingTimestamp:void 0,previousFundingDatetime:void 0}}parseAccountPositions(e){const t=this.safeValue(e,"positions"),i=this.safeValue(e,"assets",[]),r={};for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"asset"),n=this.safeCurrencyCode(s),a=this.safeString(t,"crossWalletBalance"),o=this.safeString(t,"crossUnPnl");r[n]={crossMargin:A.stringAdd(a,o),crossWalletBalance:a}}const s=[];for(let e=0;e<t.length;e++){const i=t[e],n=this.safeString(i,"symbol"),a=this.safeMarket(n),o="future"===this.options.defaultType?a.quote:a.base;if(o in r){const e=this.parseAccountPosition(this.extend(i,{crossMargin:r[o].crossMargin,crossWalletBalance:r[o].crossWalletBalance}),a);s.push(e)}}return s}parseAccountPosition(e,t){const i=this.safeString(e,"symbol");t=this.safeMarket(i,t);const r=this.safeString(t,"symbol"),s=this.safeString(e,"leverage"),n=parseInt(s),a=this.safeString(e,"initialMargin"),o=this.parseNumber(a);let h=A.stringDiv("1",s,8);1e3%n==0||(h=A.stringDiv(A.stringAdd(h,"1e-8"),"1",8));const c="notional"in e,d=this.safeString(e,"maintMargin"),f=this.parseNumber(d),u=this.safeString(e,"entryPrice");let l=this.parseNumber(u);const p=this.safeString2(e,"notional","notionalValue"),m=A.stringAbs(p),b=this.parseNumber(m);let g=this.safeString(e,"positionAmt"),y=A.stringAbs(g);if(void 0===g){const e=A.stringMul(A.stringMul(s,a),u),i=this.safeString(t,"contractSize");g=A.stringDiv(e,i),y=A.stringDiv(A.stringAdd(g,"0.5"),"1",0)}const v=this.parseNumber(y),w=this.safeValue(this.options,"leverageBrackets",{}),S=this.safeValue(w,r,[]);let _;for(let e=0;e<S.length;e++){const t=S[e];if(A.stringLt(m,t[0]))break;_=t[1]}const k=this.parseNumber(_),T=this.safeString(e,"unrealizedProfit"),O=this.parseNumber(T);let x=this.safeInteger(e,"updateTime");0===x&&(x=void 0);let M,E,I;this.safeValue(e,"isolated")?(M="isolated",I=this.safeString(e,"isolatedWallet"),E=A.stringAdd(I,T)):(M="cross",I=this.safeString(e,"crossWalletBalance"),E=this.safeString(e,"crossMargin"));const B=this.parseNumber(E);let N,P,R,C,L;const D=this.safeValue(t,"contractSize"),j=this.numberToString(D);if(A.stringEquals(p,"0"))l=void 0;else{if(P=A.stringLt(p,"0")?"short":"long",N=this.parseNumber(A.stringDiv(A.stringAdd(A.stringDiv(d,E),"5e-5"),"1",4)),R=this.parseNumber(A.stringMul(A.stringDiv(T,a,4),"100")),c){let e,t=u;"short"===P?e=A.stringAdd("1",_):(e=A.stringAdd("-1",_),t=A.stringMul("-1",t));const i=A.stringDiv(I,A.stringMul(y,e)),r=A.stringDiv(t,e);C=A.stringAdd(i,r)}else{let e,t=u;"short"===P?e=A.stringSub("1",_):(e=A.stringSub("-1",_),t=A.stringMul("-1",t));const i=A.stringMul(y,j),r=A.stringMul(i,e),s=A.stringSub(A.stringMul(A.stringDiv("1",t),i),I);C=A.stringDiv(r,s)}const e=t.precision.price,i=(e+1).toString(),r=new A("5e-"+i).toString(),s=A.stringAdd(r,C);let n=A.stringDiv(s,"1",e);"-"===n[0]&&(n=void 0),L=this.parseNumber(n)}const F="BOTH"!==this.safeString(e,"positionSide");return{info:e,symbol:r,timestamp:x,datetime:this.iso8601(x),initialMargin:o,initialMarginPercentage:this.parseNumber(h),maintenanceMargin:f,maintenanceMarginPercentage:k,entryPrice:l,notional:b,leverage:this.parseNumber(s),unrealizedPnl:O,contracts:v,contractSize:D,marginRatio:N,liquidationPrice:L,markPrice:void 0,collateral:B,marginMode:M,side:P,hedged:F,percentage:R}}parsePositionRisk(e,t){const i=this.safeString(e,"symbol");t=this.safeMarket(i,t);const r=this.safeString(t,"symbol"),s=this.safeValue(this.options,"leverageBrackets",{}),n=this.safeValue(s,r,[]),a=this.safeString2(e,"notional","notionalValue"),o=A.stringAbs(a);let h;for(let e=0;e<n.length;e++){const t=n[e];if(A.stringLt(o,t[0]))break;h=t[1]}const c=this.parseNumber(o),d=A.stringAbs(this.safeString(e,"positionAmt")),f=this.parseNumber(d),u=this.safeString(e,"unRealizedProfit"),l=this.parseNumber(u),p=this.safeString(e,"leverage"),m=parseInt(p),b=this.omitZero(this.safeString(e,"liquidationPrice")),g=this.parseNumber(b);let y;const v=this.safeString(e,"marginType");let w;A.stringGt(a,"0")?w="long":A.stringLt(a,"0")&&(w="short");const S=this.safeString(e,"entryPrice"),_=this.parseNumber(S),k=this.safeValue(t,"contractSize"),T=this.numberToString(k),O="notional"in e;if("cross"===v){const e=this.safeValue(t,"precision",{});if(O){let t,i=S;"short"===w?(t=A.stringAdd("1",h),i=A.stringMul("-1",i)):t=A.stringAdd("-1",h);const r=A.stringMul(b,t),s=A.stringAdd(r,i),n=this.safeInteger(e,"price"),a=this.safeInteger(e,"quote",n);void 0!==a&&(y=A.stringDiv(A.stringMul(s,d),"1",a))}else{let t,i=S;"short"===w?t=A.stringSub("1",h):(t=A.stringSub("-1",h),i=A.stringMul("-1",i));const r=A.stringMul(d,T),s=A.stringSub(A.stringDiv("1",i),A.stringDiv(t,b)),n=this.safeInteger(e,"base");void 0!==n&&(y=A.stringDiv(A.stringMul(r,s),"1",n))}}else y=this.safeString(e,"isolatedMargin");y=void 0===y?"0":y;const x=this.parseNumber(y),M=this.parseNumber(this.omitZero(this.safeString(e,"markPrice")));let E=this.safeInteger(e,"updateTime");0===E&&(E=void 0);const I=this.parseNumber(h),B=A.stringMul(h,o),N=this.parseNumber(B);let P=A.stringDiv("1",p,8);1e3%m==0||(P=A.stringAdd(P,"1e-8"));const R=A.stringDiv(A.stringMul(o,P),"1",8),C=this.parseNumber(R);let L,D;A.stringEquals(y,"0")||(L=this.parseNumber(A.stringDiv(A.stringAdd(A.stringDiv(B,y),"5e-5"),"1",4)),D=this.parseNumber(A.stringMul(A.stringDiv(u,R,4),"100")));const j="BOTH"!==this.safeString(e,"positionSide");return{info:e,symbol:r,contracts:f,contractSize:k,unrealizedPnl:l,leverage:this.parseNumber(p),liquidationPrice:g,collateral:x,notional:c,markPrice:M,entryPrice:_,timestamp:E,initialMargin:C,initialMarginPercentage:this.parseNumber(P),maintenanceMargin:N,maintenanceMarginPercentage:I,marginRatio:L,datetime:this.iso8601(E),marginMode:v,marginType:v,side:w,hedged:j,percentage:D}}async loadLeverageBrackets(e=!1,t={}){await this.loadMarkets();if(void 0===this.safeValue(this.options,"leverageBrackets")||e){let e;const i=this.safeString(this.options,"defaultType","future"),r=this.safeString(t,"type",i),s=this.omit(t,"type");if("future"===r)e="fapiPrivateGetLeverageBracket";else{if("delivery"!==r)throw new m(this.id+" loadLeverageBrackets() supports linear and inverse contracts only");e="dapiPrivateV2GetLeverageBracket"}const n=await this[e](s);this.options.leverageBrackets={};for(let e=0;e<n.length;e++){const t=n[e],i=this.safeString(t,"symbol"),r=this.safeSymbol(i),s=this.safeValue(t,"brackets",[]),a=[];for(let e=0;e<s.length;e++){const t=s[e],i=this.safeString2(t,"notionalFloor","qtyFloor"),r=this.safeString(t,"maintMarginRatio");a.push([i,r])}this.options.leverageBrackets[r]=a}}return this.options.leverageBrackets}async fetchLeverageTiers(e,t={}){await this.loadMarkets();const[i,r]=this.handleMarketTypeAndParams("fetchLeverageTiers",void 0,t);let s;if("future"===i)s="fapiPrivateGetLeverageBracket";else{if("delivery"!==i)throw new m(this.id+" fetchLeverageTiers() supports linear and inverse contracts only");s="dapiPrivateV2GetLeverageBracket"}const n=await this[s](r);return this.parseLeverageTiers(n,e,"symbol")}parseMarketLeverageTiers(e,t){const i=this.safeString(e,"symbol");t=this.safeMarket(i,t);const r=this.safeValue(e,"brackets",[]),s=[];for(let e=0;e<r.length;e++){const i=r[e];s.push({tier:this.safeNumber(i,"bracket"),currency:t.quote,minNotional:this.safeNumber2(i,"notionalFloor","qtyFloor"),maxNotional:this.safeNumber2(i,"notionalCap","qtyCap"),maintenanceMarginRate:this.safeNumber(i,"maintMarginRatio"),maxLeverage:this.safeNumber(i,"initialLeverage"),info:i})}return s}async fetchPositions(e,t={}){const i=this.safeString(this.options,"fetchPositions","positionRisk");if("positionRisk"===i)return await this.fetchPositionsRisk(e,t);if("account"===i)return await this.fetchAccountPositions(e,t);throw new m(this.id+'.options["fetchPositions"] = "'+i+'" is invalid, please choose between "account" and "positionRisk"')}async fetchAccountPositions(e,t={}){if(void 0!==e&&!Array.isArray(e))throw new n(this.id+" fetchPositions() requires an array argument for symbols");let i;await this.loadMarkets(),await this.loadLeverageBrackets();const r=this.safeString(this.options,"defaultType","future"),s=this.safeString(t,"type",r),a=this.omit(t,"type");if("future"===s)i="fapiPrivateGetAccount";else{if("delivery"!==s)throw new m(this.id+" fetchPositions() supports linear and inverse contracts only");i="dapiPrivateGetAccount"}const o=await this[i](a),h=this.parseAccountPositions(o);return this.filterByArray(h,"symbol",e,!1)}async fetchPositionsRisk(e,t={}){if(void 0!==e&&!Array.isArray(e))throw new n(this.id+" fetchPositionsRisk() requires an array argument for symbols");await this.loadMarkets(),await this.loadLeverageBrackets();let i,r="future";r=this.safeString(this.options,"defaultType",r);const s=this.safeString(t,"type",r);if(t=this.omit(t,"type"),"future"===s||"linear"===s)i="fapiPrivateGetPositionRisk";else{if("delivery"!==s&&"inverse"!==s)throw new m(this.id+" fetchPositionsRisk() supports linear and inverse contracts only");i="dapiPrivateGetPositionRisk"}const a=await this[i](this.extend({},t)),o=[];for(let e=0;e<a.length;e++){const t=this.parsePositionRisk(a[e]);o.push(t)}return this.filterByArray(o,"symbol",e,!1)}async fetchFundingHistory(e,t,i,r={}){let s,n;await this.loadMarkets();let a="future";const o={incomeType:"FUNDING_FEE"};if(void 0!==e)if(s=this.market(e),o.symbol=s.id,s.linear)a="future";else{if(!s.inverse)throw new m(this.id+" fetchFundingHistory() supports linear and inverse contracts only");a="delivery"}void 0!==t&&(o.startTime=t),void 0!==i&&(o.limit=i),a=this.safeString2(this.options,"fetchFundingHistory","defaultType",a);const h=this.safeString(r,"type",a);if(r=this.omit(r,"type"),"future"===h||"linear"===h)n="fapiPrivateGetIncome";else{if("delivery"!==h&&"inverse"!==h)throw new m(this.id+" fetchFundingHistory() supports linear and inverse contracts only");n="dapiPrivateGetIncome"}const c=await this[n](this.extend(o,r));return this.parseIncomes(c,s,t,i)}async setLeverage(e,t,i={}){if(void 0===t)throw new n(this.id+" setLeverage() requires a symbol argument");if(e<1||e>125)throw new b(this.id+" leverage should be between 1 and 125");await this.loadMarkets();const r=this.market(t);let s;if(r.linear)s="fapiPrivatePostLeverage";else{if(!r.inverse)throw new m(this.id+" setLeverage() supports linear and inverse contracts only");s="dapiPrivatePostLeverage"}const a={symbol:r.id,leverage:e};return await this[s](this.extend(a,i))}async setMarginMode(e,t,i={}){if(void 0===t)throw new n(this.id+" setMarginMode() requires a symbol argument");if("CROSS"===(e=e.toUpperCase())&&(e="CROSSED"),"ISOLATED"!==e&&"CROSSED"!==e)throw new b(this.id+" marginMode must be either isolated or cross");await this.loadMarkets();const r=this.market(t);let s;if(r.linear)s="fapiPrivatePostMarginType";else{if(!r.inverse)throw new m(this.id+" setMarginMode() supports linear and inverse contracts only");s="dapiPrivatePostMarginType"}const a={symbol:r.id,marginType:e};let o;try{o=await this[s](this.extend(a,i))}catch(e){if(e instanceof T){if(this.safeValue(this.options,"throwMarginModeAlreadySet",!1))throw e;o={code:-4046,msg:"No need to change margin type."}}}return o}async setPositionMode(e,t,i={}){const r=this.safeString(this.options,"defaultType","future"),s=this.safeString(i,"type",r);let n;i=this.omit(i,["type"]),n=e?"true":"false";const a={dualSidePosition:n};let o;return o="delivery"===s?"dapiPrivatePostPositionSideDual":"fapiPrivatePostPositionSideDual",await this[o](this.extend(a,i))}sign(e,t="public",i="GET",r={},s,n){if(!(t in this.urls.api))throw new m(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");let a=this.urls.api[t];if(a+="/"+e,"wapi"===t&&(a+=".html"),"historicalTrades"===e){if(!this.apiKey)throw new u(this.id+" historicalTrades endpoint requires `apiKey` credential");s={"X-MBX-APIKEY":this.apiKey}}if("userDataStream"===e||"listenKey"===e){if(!this.apiKey)throw new u(this.id+" userDataStream endpoint requires `apiKey` credential");s={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"},"GET"!==i&&(n=this.urlencode(r))}else if("private"===t||"sapi"===t&&"system/status"!==e||"sapiV3"===t||"wapi"===t&&"systemStatus"!==e||"dapiPrivate"===t||"dapiPrivateV2"===t||"fapiPrivate"===t||"fapiPrivateV2"===t){let o;this.checkRequiredCredentials();const h=this.safeInteger(this.options,"recvWindow"),c=this.extend({timestamp:this.nonce()},r);void 0!==h&&(c.recvWindow=h);const d=this.safeInteger(r,"recvWindow");void 0!==d&&(c.recvWindow=d),o="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(c):"batchOrders"===e||e.indexOf("sub-account")>=0||"capital/withdraw/apply"===e?this.rawencode(c):this.urlencode(c);o+="&signature="+this.hmac(this.encode(o),this.encode(this.secret)),s={"X-MBX-APIKEY":this.apiKey},"GET"===i||"DELETE"===i||"wapi"===t?a+="?"+o:(n=o,s["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(r).length&&(a+="?"+this.urlencode(r));return{url:a,method:i,body:n,headers:s}}handleErrors(e,t,i,r,n,a,o,h,f){if(418===e||429===e)throw new d(this.id+" "+e.toString()+" "+t+" "+a);if(e>=400){if(a.indexOf("Price * QTY is zero or less")>=0)throw new c(this.id+" order cost = amount * price is zero or less "+a);if(a.indexOf("LOT_SIZE")>=0)throw new c(this.id+" order amount should be evenly divisible by lot size "+a);if(a.indexOf("PRICE_FILTER")>=0)throw new c(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid value in general, use this.priceToPrecision (symbol, amount) "+a)}if(void 0===o)return;const u=this.safeValue(o,"success",!0);if(!u){const e=this.safeString(o,"msg");let t;if(void 0!==e){try{t=JSON.parse(e)}catch(e){t=void 0}void 0!==t&&(o=t)}}const l=this.safeString(o,"msg");void 0!==l&&(this.throwExactlyMatchedException(this.exceptions.exact,l,this.id+" "+l),this.throwBroadlyMatchedException(this.exceptions.broad,l,this.id+" "+l));const p=this.safeString(o,"code");if(void 0!==p){if("200"===p||A.stringEquals(p,"0"))return;if("-2015"===p&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new d(this.id+" "+a);const e=this.id+" "+a;if("No need to change margin type."===l)throw new T(e);throw this.throwExactlyMatchedException(this.exceptions.exact,p,e),new s(e)}if(!u)throw new s(this.id+" "+a)}calculateRateLimiterCost(e,t,i,r,s={},n={}){if("noCoin"in s&&!("coin"in r))return s.noCoin;if("noSymbol"in s&&!("symbol"in r))return s.noSymbol;if("noPoolId"in s&&!("poolId"in r))return s.noPoolId;if("byLimit"in s&&"limit"in r){const e=r.limit,t=s.byLimit;for(let i=0;i<t.length;i++){const r=t[i];if(e<=r[0])return r[1]}}return this.safeInteger(s,"cost",1)}async request(e,t="public",i="GET",r={},s,n,a={},o={}){const h=await this.fetch2(e,t,i,r,s,n,a,o);return"private"!==t&&"wapi"!==t||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),h}async modifyMarginHelper(e,t,i,r={}){let s=this.safeString(this.options,"defaultType","future");"spot"===s&&(s="future");const n=this.safeString(r,"type",s);if("margin"===n||"spot"===n)throw new m(this.id+" add / reduce margin only supported with type future or delivery");await this.loadMarkets();const a=this.market(e);t=this.amountToPrecision(e,t);const o={type:i,symbol:a.id,amount:t};let h,c;"future"===n?(h="fapiPrivatePostPositionMargin",c=a.quote):(h="dapiPrivatePostPositionMargin",c=a.base);const d=await this[h](this.extend(o,r));return this.extend(this.parseMarginModification(d,a),{code:c})}parseMarginModification(e,t){const i=1===this.safeInteger(e,"type")?"add":"reduce",r=this.safeNumber(e,"amount"),s="200"===this.safeString(e,"code")?"ok":"failed";return{info:e,type:i,amount:r,code:void 0,symbol:t.symbol,status:s}}async reduceMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,2,i)}async addMargin(e,t,i={}){return await this.modifyMarginHelper(e,t,1,i)}async fetchBorrowRate(e,t={}){await this.loadMarkets();const i={asset:this.currency(e).id},r=await this.sapiGetMarginInterestRateHistory(this.extend(i,t)),s=this.safeValue(r,0);return this.parseBorrowRate(s)}async fetchBorrowRateHistory(e,t,i,r={}){if(await this.loadMarkets(),void 0===i)i=93;else if(i>93)throw new b(this.id+" fetchBorrowRateHistory() limit parameter cannot exceed 92");const s={asset:this.currency(e).id,limit:i};if(void 0!==t){s.startTime=t;const e=this.sum(t,864e5*i)-1,r=this.milliseconds();s.endTime=Math.min(e,r)}const n=await this.sapiGetMarginInterestRateHistory(this.extend(s,r));return this.parseBorrowRateHistory(n)}parseBorrowRateHistory(e,t,i,r){const s=[];for(let t=0;t<e.length;t++){const i=e[t],r=this.parseBorrowRate(i);s.push(r)}const n=this.sortBy(s,"timestamp");return this.filterByCurrencySinceLimit(n,t,i,r)}parseBorrowRate(e,t){const i=this.safeNumber(e,"timestamp");return t=this.safeString(e,"asset"),{currency:this.safeCurrencyCode(t),rate:this.safeNumber(e,"dailyInterestRate"),period:864e5,timestamp:i,datetime:this.iso8601(i),info:e}}async createGiftCode(e,t,i={}){await this.loadMarkets();const r={token:this.currency(e).id,amount:t},s=await this.sapiPostGiftcardCreateCode(this.extend(r,i)),n=this.safeValue(s,"data"),a=this.safeString(n,"code");return{info:s,id:this.safeString(n,"referenceNo"),code:a,currency:e,amount:t}}async redeemGiftCode(e,t={}){const i={code:e};return await this.sapiPostGiftcardRedeemCode(this.extend(i,t))}async verifyGiftCode(e,t={}){const i={referenceNo:e};return await this.sapiGetGiftcardVerify(this.extend(i,t))}async fetchBorrowInterest(e,t,i,r,s={}){await this.loadMarkets();const n={};let a;if(void 0!==e){const t=this.currency(e);n.asset=t.id}void 0!==i&&(n.startTime=i),void 0!==r&&(n.size=r),void 0!==t&&(a=this.market(t),n.isolatedSymbol=a.id);const o=await this.sapiGetMarginInterestHistory(this.extend(n,s)),h=this.safeValue(o,"rows"),c=this.parseBorrowInterests(h,a);return this.filterByCurrencySinceLimit(c,e,i,r)}parseBorrowInterest(e,t){const i=this.safeString(e,"isolatedSymbol"),r=this.safeNumber(e,"interestAccuredTime");return{account:void 0===i?"cross":i,symbol:i,marginMode:void 0===i?"cross":"isolated",currency:this.safeCurrencyCode(this.safeString(e,"asset")),interest:this.safeNumber(e,"interest"),interestRate:this.safeNumber(e,"interestRate"),amountBorrowed:this.safeNumber(e,"principal"),timestamp:r,datetime:this.iso8601(r),info:e}}async repayMargin(e,t,i,r={}){let s;await this.loadMarkets(),void 0!==i&&(s=this.market(i),i=s.symbol);const a=this.currency(e),o={asset:a.id,amount:this.currencyToPrecision(e,t)},h=this.safeString2(this.options,"defaultMarginMode","marginMode","cross");if("isolated"===this.safeString(r,"marginMode",h)){if(void 0===i)throw new n(this.id+" repayMargin() requires a symbol argument for isolated margin");o.isIsolated="TRUE",o.symbol=s.id}r=this.omit(r,"marginMode");const c=await this.sapiPostMarginRepay(this.extend(o,r)),d=this.parseMarginLoan(c,a);return this.extend(d,{amount:t,symbol:i})}async borrowMargin(e,t,i,r={}){let s;await this.loadMarkets(),void 0!==i&&(s=this.market(i),i=s.symbol);const a=this.currency(e),o={asset:a.id,amount:this.currencyToPrecision(e,t)},h=this.safeString2(this.options,"defaultMarginMode","marginMode","cross");if("isolated"===this.safeString(r,"marginMode",h)){if(void 0===i)throw new n(this.id+" borrowMargin() requires a symbol argument for isolated margin");o.isIsolated="TRUE",o.symbol=s.id}r=this.omit(r,"marginMode");const c=await this.sapiPostMarginLoan(this.extend(o,r)),d=this.parseMarginLoan(c,a);return this.extend(d,{amount:t,symbol:i})}parseMarginLoan(e,t){return{id:this.safeInteger(e,"tranId"),currency:this.safeCurrencyCode(void 0,t),amount:void 0,symbol:void 0,timestamp:void 0,datetime:void 0,info:e}}async fetchOpenInterestHistory(e,t="5m",i,r,s={}){if("1m"===t)throw new b(this.id+"fetchOpenInterestHistory cannot use the 1m timeframe");await this.loadMarkets();const n=this.market(e),a={period:this.timeframes[t]};void 0!==r&&(a.limit=r);a[n.linear?"symbol":"pair"]=n.id,n.delivery&&(a.contractType=this.safeString(s,"contractType","CURRENT_QUARTER")),void 0!==i&&(a.startTime=i);const o=this.safeInteger2(s,"until","till"),h=this.safeString(s,"endTime",o);if(s=this.omit(s,["endTime","until","till"]),h)a.endTime=h;else if(i){void 0===r&&(r=30);const e=this.parseTimeframe(t);a.endTime=this.sum(i,e*r*1e3)}let c="fapiDataGetOpenInterestHist";n.inverse&&(c="dapiDataGetOpenInterestHist");const d=await this[c](this.extend(a,s));return this.parseOpenInterests(d,e,i,r)}parseOpenInterest(e,t){const i=this.safeInteger(e,"timestamp"),r=this.safeString(e,"symbol");return t=this.safeMarket(r,t),{symbol:this.safeSymbol(r),baseVolume:this.safeNumber(e,"sumOpenInterest"),quoteVolume:this.safeNumber(e,"sumOpenInterestValue"),timestamp:i,datetime:this.iso8601(i),info:e}}}},{"./base/Exchange":126,"./base/Precise":127,"./base/errors":129,"./base/functions/number":135}],186:[function(e,t,i){"use strict";const r=e("./base/Exchange"),{InsufficientFunds:s,ArgumentsRequired:n,ExchangeError:a,InvalidOrder:o,InvalidAddress:h,AuthenticationError:c,NotSupported:d,OrderNotFound:f,OnMaintenance:u,PermissionDenied:l,RateLimitExceeded:p}=e("./base/errors"),{TICK_SIZE:m}=e("./base/functions/number"),b=e("./base/Precise");t.exports=class extends r{describe(){return this.deepExtend(super.describe(),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:100,userAgent:this.userAgents.chrome,pro:!0,has:{CORS:!0,spot:!0,margin:!1,swap:!1,future:!1,option:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,createStopLimitOrder:!0,createStopMarketOrder:!0,createStopOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:void 0,fetchDeposits:!0,fetchLedger:!0,fetchMarginMode:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchPositionMode:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},hostname:"pro.coinbase.com",urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time","products/spark-lines"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","fills","funding","fees","margin/profile_information","margin/buying_power","margin/withdrawal_power","margin/withdrawal_power_all","margin/exit_plan","margin/liquidation_history","margin/position_refresh_amounts","margin/status","oracle","orders","orders/{id}","orders/client:{client_oid}","otc/orders","payment-methods","position","profiles","profiles/{id}","reports/{report_id}","transfers","transfers/{transfer_id}","users/self/exchange-limits","users/self/hold-balances","users/self/trailing-volume","withdrawals/fee-estimate"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","profiles/transfer","reports","withdrawals/coinbase","withdrawals/coinbase-account","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/client:{client_oid}","orders/{id}"]}},commonCurrencies:{CGLD:"CELO"},precisionMode:m,fees:{trading:{tierBased:!0,percentage:!0,maker:.004,taker:.006},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":s,NotFound:f,"Invalid API Key":c,"invalid signature":c,"Invalid Passphrase":c,"Invalid order id":o,"Private rate limit exceeded":p,"Trading pair not available":l,"Product not found":o},broad:{"Order already done":f,"order not found":f,"price too small":o,"price too precise":o,"under maintenance":u,"size is too small":o,"Cancel only mode":u}}})}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i={};for(let e=0;e<t.length;e++){const r=t[e],s=this.safeString(r,"id"),n=this.safeString(r,"name"),a=this.safeCurrencyCode(s),o=this.safeValue(r,"details",{}),h="online"===this.safeString(r,"status");i[a]={id:s,code:a,info:r,type:this.safeString(o,"type"),name:n,active:h,deposit:void 0,withdraw:void 0,fee:void 0,precision:this.safeNumber(r,"max_precision"),limits:{amount:{min:this.safeNumber(o,"min_size"),max:void 0},withdraw:{min:this.safeNumber(o,"min_withdrawal_amount"),max:void 0}}}}return i}async fetchMarkets(e={}){const t=await this.publicGetProducts(e),i=[];for(let e=0;e<t.length;e++){const r=t[e],s=this.safeString(r,"id"),[n,a]=s.split("-"),o=this.safeCurrencyCode(n),h=this.safeCurrencyCode(a),c=this.safeString(r,"status");i.push(this.extend(this.fees.trading,{id:s,symbol:o+"/"+h,base:o,quote:h,settle:void 0,baseId:n,quoteId:a,settleId:void 0,type:"spot",spot:!0,margin:this.safeValue(r,"margin_enabled"),swap:!1,future:!1,option:!1,active:"online"===c,contract:!1,linear:void 0,inverse:void 0,contractSize:void 0,expiry:void 0,expiryDatetime:void 0,strike:void 0,optionType:void 0,precision:{amount:this.safeNumber(r,"base_increment"),price:this.safeNumber(r,"quote_increment")},limits:{leverage:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(r,"min_market_funds"),max:void 0}},info:r}))}return i}async fetchAccounts(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e);return this.parseAccounts(t,e)}parseAccount(e){const t=this.safeString(e,"currency");return{id:this.safeString(e,"id"),type:void 0,code:this.safeCurrencyCode(t),info:e}}parseBalance(e){const t={info:e};for(let i=0;i<e.length;i++){const r=e[i],s=this.safeString(r,"currency"),n=this.safeCurrencyCode(s),a=this.account();a.free=this.safeString(r,"available"),a.used=this.safeString(r,"hold"),a.total=this.safeString(r,"balance"),t[n]=a}return this.safeBalance(t)}async fetchBalance(e={}){await this.loadMarkets();const t=await this.privateGetAccounts(e);return this.parseBalance(t)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const r={id:this.marketId(e),level:2},s=await this.publicGetProductsIdBook(this.extend(r,i)),n=this.parseOrderBook(s,e);return n.nonce=this.safeInteger(s,"sequence"),n}parseTicker(e,t){let i,r,s,n,a,o,h,c;const d=void 0===t?void 0:t.symbol;return Array.isArray(e)?(n=this.safeString(e,4),i=this.milliseconds()):(i=this.parse8601(this.safeValue(e,"time")),r=this.safeString(e,"bid"),s=this.safeString(e,"ask"),a=this.safeString(e,"high"),o=this.safeString(e,"low"),h=this.safeString(e,"open"),n=this.safeString2(e,"price","last"),c=this.safeString(e,"volume")),this.safeTicker({symbol:d,timestamp:i,datetime:this.iso8601(i),high:a,low:o,bid:r,bidVolume:void 0,ask:s,askVolume:void 0,vwap:void 0,open:h,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:void 0,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetProductsSparkLines(this.extend({},t)),r={},s=Object.keys(i);for(let e=0;e<s.length;e++){const t=s[e],n=this.safeValue(i,t,[]),a=this.safeValue(n,0,[]),o=this.safeMarket(t,void 0,"-");r[o.symbol]=this.parseTicker(a,o)}return this.filterByArray(r,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),r={id:i.id},s=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),n=await this[s](this.extend(r,t));return this.parseTicker(n,i)}parseTrade(e,t){const i=this.parse8601(this.safeString2(e,"time","created_at")),r=this.safeString(e,"product_id");let s,n,a;t=this.safeMarket(r,t,"-");const o=this.safeStringLower(t,"quoteId");if(void 0!==o){const i=o+"_value";a=this.safeString(e,i);const r=this.safeString(e,"liquidity");void 0!==r&&(n="T"===r?"taker":"maker",s=this.safeString(t,n))}const h={cost:this.safeString2(e,"fill_fees","fee"),currency:t.quote,rate:s},c=this.safeString(e,"trade_id");let d="buy"===e.side?"sell":"buy";const f=this.safeString(e,"order_id"),u=this.safeString(e,"maker_order_id"),l=this.safeString(e,"taker_order_id");(void 0!==f||void 0!==u&&void 0!==l)&&(d="buy"===e.side?"buy":"sell");const p=this.safeString(e,"price"),m=this.safeString(e,"size");return this.safeTrade({id:c,order:f,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,takerOrMaker:n,side:d,price:p,amount:m,fee:h,cost:a},t)}async fetchMyTrades(e,t,i,r={}){if(void 0===e)throw new n(this.id+" fetchMyTrades() requires a symbol argument");await this.loadMarkets();const s=this.market(e),a={product_id:s.id};void 0!==i&&(a.limit=i);const o=await this.privateGetFills(this.extend(a,r));return this.parseTrades(o,s,t,i)}async fetchTrades(e,t,i,r={}){await this.loadMarkets();const s=this.market(e),n={id:s.id};void 0!==i&&(n.limit=i);const a=await this.publicGetProductsIdTrades(this.extend(n,r));return this.parseTrades(a,s,t,i)}async fetchTradingFees(e={}){await this.loadMarkets();const t=await this.privateGetFees(e),i=this.safeNumber(t,"maker_fee_rate"),r=this.safeNumber(t,"taker_fee_rate"),s={};for(let e=0;e<this.symbols.length;e++){const n=this.symbols[e];s[n]={info:t,symbol:n,maker:i,taker:r,percentage:!0,tierBased:!0}}return s}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,3),this.safeNumber(e,2),this.safeNumber(e,1),this.safeNumber(e,4),this.safeNumber(e,5)]}async fetchOHLCV(e,t="1m",i,r,s={}){await this.loadMarkets();const n=this.market(e),a=this.timeframes[t],o={id:n.id,granularity:a};void 0!==i&&(o.start=this.iso8601(i),r=void 0===r?300:Math.min(300,r),o.end=this.iso8601(this.sum((r-1)*a*1e3,i)));const h=await this.publicGetProductsIdCandles(this.extend(o,s));return this.parseOHLCVs(h,n,t,i,r)}async fetchTime(e={}){const t=await this.publicGetTime(e);return this.safeTimestamp(t,"epoch")}parseOrderStatus(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}parseOrder(e,t){const i=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"product_id");t=this.safeMarket(r,t,"-");let s=this.parseOrderStatus(this.safeString(e,"status"));const n=this.safeString(e,"done_reason");"closed"===s&&"canceled"===n&&(s="canceled");const a=this.safeString(e,"price"),o=this.safeString(e,"filled_size"),h=this.safeString(e,"size",o),c=this.safeString(e,"executed_value"),d=this.safeNumber(e,"fill_fees");let f;void 0!==d&&(f={cost:d,currency:t.quote,rate:void 0});const u=this.safeString(e,"id"),l=this.safeString(e,"type"),p=this.safeString(e,"side"),m=this.safeString(e,"time_in_force"),b=this.safeValue(e,"post_only"),g=this.safeNumber(e,"stop_price"),y=this.safeString(e,"client_oid");return this.safeOrder({id:u,clientOrderId:y,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:s,symbol:t.symbol,type:l,timeInForce:m,postOnly:b,side:p,price:a,stopPrice:g,cost:c,amount:h,filled:o,remaining:void 0,fee:f,average:void 0,trades:void 0},t)}async fetchOrder(e,t,i={}){await this.loadMarkets();const r={},s=this.safeString2(i,"clientOrderId","client_oid");let n;void 0===s?(n="privateGetOrdersId",r.id=e):(n="privateGetOrdersClientClientOid",r.client_oid=s,i=this.omit(i,["clientOrderId","client_oid"]));const a=await this[n](this.extend(r,i));return this.parseOrder(a)}async fetchOrderTrades(e,t,i,r,s={}){let n;await this.loadMarkets(),void 0!==t&&(n=this.market(t));const a={order_id:e},o=await this.privateGetFills(this.extend(a,s));return this.parseTrades(o,n,i,r)}async fetchOrders(e,t,i,r={}){return await this.fetchOpenOrders(e,t,i,this.extend({status:"all"},r))}async fetchOpenOrders(e,t,i,r={}){await this.loadMarkets();const s={};let n;void 0!==e&&(n=this.market(e),s.product_id=n.id),void 0!==i&&(s.limit=i);const a=await this.privateGetOrders(this.extend(s,r));return this.parseOrders(a,n,t,i)}async fetchClosedOrders(e,t,i,r={}){return await this.fetchOpenOrders(e,t,i,this.extend({status:"done"},r))}async createOrder(e,t,i,r,s,n={}){await this.loadMarkets();const a=this.market(e),o={type:t,side:i,product_id:a.id},h=this.safeString2(n,"clientOrderId","client_oid");void 0!==h&&(o.client_oid=h);const c=this.safeNumber2(n,"stopPrice","stop_price");void 0!==c&&(o.stop_price=this.priceToPrecision(e,c));const d=this.safeString2(n,"timeInForce","time_in_force");void 0!==d&&(o.time_in_force=d);if(this.safeValue2(n,"postOnly","post_only",!1)&&(o.post_only=!0),n=this.omit(n,["timeInForce","time_in_force","stopPrice","stop_price","clientOrderId","client_oid","postOnly","post_only"]),"limit"===t)o.price=this.priceToPrecision(e,s),o.size=this.amountToPrecision(e,r);else if("market"===t){let t=this.safeNumber2(n,"cost","funds");void 0===t?void 0!==s&&(t=r*s):n=this.omit(n,["cost","funds"]),void 0!==t?o.funds=this.costToPrecision(e,t):o.size=this.amountToPrecision(e,r)}const f=await this.privatePostOrders(this.extend(o,n));return this.parseOrder(f,a)}async cancelOrder(e,t,i={}){await this.loadMarkets();const r={},s=this.safeString2(i,"clientOrderId","client_oid");let n,a;return void 0===s?(n="privateDeleteOrdersId",r.id=e):(n="privateDeleteOrdersClientClientOid",r.client_oid=s,i=this.omit(i,["clientOrderId","client_oid"])),void 0!==t&&(a=this.market(t),r.product_id=a.symbol),await this[n](this.extend(r,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let r;return void 0!==e&&(r=this.market(e),i.product_id=r.symbol),await this.privateDeleteOrders(this.extend(i,t))}async fetchPaymentMethods(e={}){return await this.privateGetPaymentMethods(e)}async deposit(e,t,i,r={}){await this.loadMarkets();const s={currency:this.currency(e).id,amount:t};let n="privatePostDeposits";if("payment_method_id"in r)n+="PaymentMethod";else{if(!("coinbase_account_id"in r))throw new d(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");n+="CoinbaseAccount"}const o=await this[n](this.extend(s,r));if(!o)throw new a(this.id+" deposit() error: "+this.json(o));return{info:o,id:o.id}}async withdraw(e,t,i,r,s={}){[r,s]=this.handleWithdrawTagAndParams(r,s),this.checkAddress(i),await this.loadMarkets();const n=this.currency(e),o={currency:n.id,amount:t};let h="privatePostWithdrawals";"payment_method_id"in s?h+="PaymentMethod":"coinbase_account_id"in s?h+="CoinbaseAccount":(h+="Crypto",o.crypto_address=i,void 0!==r&&(o.destination_tag=r));const c=await this[h](this.extend(o,s));if(!c)throw new a(this.id+" withdraw() error: "+this.json(c));return this.parseTransaction(c,n)}parseLedgerEntryType(e){return this.safeString({transfer:"transfer",match:"trade",fee:"fee",rebate:"rebate",conversion:"trade"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id");let r,s=this.safeString(e,"amount");const n=this.safeString(e,"balance"),a=b.stringSub(n,s);b.stringLt(s,"0")?(r="out",s=b.stringAbs(s)):r="in";const o=this.parseNumber(s),h=this.parseNumber(n),c=this.parseNumber(a),d=this.parse8601(this.safeValue(e,"created_at")),f=this.parseLedgerEntryType(this.safeString(e,"type")),u=this.safeCurrencyCode(void 0,t),l=this.safeValue(e,"details",{});let p,m,g;"transfer"===f?(p=this.safeString(l,"from"),m=this.safeString(l,"to"),g=this.safeString(l,"profile_transfer_id")):g=this.safeString(l,"order_id");return{id:i,currency:u,account:p,referenceAccount:m,referenceId:g,status:"ok",amount:o,before:c,after:h,fee:void 0,direction:r,timestamp:d,datetime:this.iso8601(d),type:f,info:e}}async fetchLedger(e,t,i,r={}){if(void 0===e)throw new n(this.id+" fetchLedger() requires a code param");await this.loadMarkets(),await this.loadAccounts();const s=this.currency(e),o=this.indexBy(this.accounts,"code"),h=this.safeValue(o,e);if(void 0===h)throw new a(this.id+" fetchLedger() could not find account id for "+e);const c={id:h.id};void 0!==t&&(c.start_date=this.iso8601(t)),void 0!==i&&(c.limit=i);const d=await this.privateGetAccountsIdLedger(this.extend(c,r));for(let t=0;t<d.length;t++)d[t].currency=e;return this.parseLedger(d,s,t,i)}async fetchTransactions(e,t,i,r={}){let s;await this.loadMarkets(),await this.loadAccounts();let n=this.safeString(r,"id");if(void 0===n&&void 0!==e){s=this.currency(e);const t=this.indexBy(this.accounts,"code"),i=this.safeValue(t,e);if(void 0===i)throw new a(this.id+" fetchTransactions() could not find account id for "+e);n=i.id}const o={};let h;if(void 0!==n&&(o.id=n),void 0!==i&&(o.limit=i),void 0===n){h=await this.privateGetTransfers(this.extend(o,r));for(let e=0;e<h.length;e++){const t=this.safeString(h[e],"account_id"),i=this.safeValue(this.accountsById,t),r=this.safeString(i,"code");h[e].currency=r}}else{h=await this.privateGetAccountsIdTransfers(this.extend(o,r));for(let t=0;t<h.length;t++)h[t].currency=e}return this.parseTransactions(h,s,t,i)}async fetchDeposits(e,t,i,r={}){return await this.fetchTransactions(e,t,i,this.extend({type:"deposit"},r))}async fetchWithdrawals(e,t,i,r={}){return await this.fetchTransactions(e,t,i,this.extend({type:"withdraw"},r))}parseTransactionStatus(e){if(this.safeValue(e,"canceled_at"))return"canceled";const t=this.safeValue(e,"processed_at"),i=this.safeValue(e,"completed_at");return i?"ok":t&&!i?"failed":"pending"}parseTransaction(e,t){const i=this.safeValue(e,"details",{}),r=this.safeString(e,"id"),s=this.safeString(i,"crypto_transaction_hash"),n=this.parse8601(this.safeString(e,"created_at")),a=this.parse8601(this.safeString(e,"processed_at")),o=this.safeString(e,"currency"),h=this.safeCurrencyCode(o,t),c=this.parseTransactionStatus(e);let d=this.safeNumber(e,"amount"),f=this.safeString(e,"type"),u=this.safeString(i,"crypto_address");const l=this.safeString(i,"destination_tag");let p;if(u=this.safeString(e,"crypto_address",u),"withdraw"===f){f="withdrawal",u=this.safeString(i,"sent_to_address",u);const e=this.safeNumber(i,"fee");void 0!==e&&(void 0!==d&&(d-=e),p={cost:e,currency:h})}return{info:e,id:r,txid:s,timestamp:n,datetime:this.iso8601(n),network:void 0,address:u,addressTo:void 0,addressFrom:void 0,tag:l,tagTo:void 0,tagFrom:void 0,type:f,amount:d,currency:h,status:c,updated:a,fee:p}}async createDepositAddress(e,t={}){await this.loadMarkets();const i=this.currency(e);let r=this.safeValue(this.options,"coinbaseAccounts");void 0===r&&(r=await this.privateGetCoinbaseAccounts(),this.options.coinbaseAccounts=r,this.options.coinbaseAccountsByCurrencyId=this.indexBy(r,"currency"));const s=i.id,n=this.safeValue(this.options.coinbaseAccountsByCurrencyId,s);if(void 0===n)throw new h(this.id+" createDepositAddress() could not find currency code "+e+" with id = "+s+" in this.options['coinbaseAccountsByCurrencyId']");const a={id:n.id},o=await this.privatePostCoinbaseAccountsIdAddresses(this.extend(a,t)),c=this.safeString(o,"address"),d=this.safeString(o,"destination_tag");return{currency:e,address:this.checkAddress(c),tag:d,info:o}}sign(e,t="public",i="GET",r={},s,n){let a="/"+this.implodeParams(e,r);const o=this.omit(r,this.extractParams(e));"GET"===i&&Object.keys(o).length&&(a+="?"+this.urlencode(o));const h=this.implodeHostname(this.urls.api[t])+a;if("private"===t){this.checkRequiredCredentials();const e=this.nonce().toString();let t="";"GET"!==i&&Object.keys(o).length&&(t=n=this.json(o));const r=e+i+a+t;let h;try{h=this.base64ToBinary(this.secret)}catch(e){throw new c(this.id+" sign() invalid base64 secret")}const d=this.hmac(this.encode(r),h,"sha256","base64");s={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":d,"CB-ACCESS-TIMESTAMP":e,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:h,method:i,body:n,headers:s}}handleErrors(e,t,i,r,s,n,o,h,c){if(400===e||404===e){if("{"===n[0]){const e=this.safeString(o,"message"),t=this.id+" "+e;throw this.throwExactlyMatchedException(this.exceptions.exact,e,t),this.throwBroadlyMatchedException(this.exceptions.broad,e,t),new a(t)}throw new a(this.id+" "+n)}}async request(e,t="public",i="GET",r={},s,n,o={},h={}){const c=await this.fetch2(e,t,i,r,s,n,o,h);if("string"!=typeof c&&"message"in c)throw new a(this.id+" "+this.json(c));return c}}},{"./base/Exchange":126,"./base/Precise":127,"./base/errors":129,"./base/functions/number":135}],219:[function(e,t,i){"use strict";const r=e("./base/Exchange"),{ExchangeError:s,ExchangeNotAvailable:n,InsufficientFunds:a,OrderNotFound:o,InvalidOrder:h,AccountSuspended:c,InvalidNonce:d,NotSupported:f,BadRequest:u,AuthenticationError:l,BadSymbol:p,RateLimitExceeded:m,PermissionDenied:b,InvalidAddress:g}=e("./base/errors"),{TICK_SIZE:y}=e("./base/functions/number"),v=e("./base/Precise");t.exports=class extends r{describe(){return this.deepExtend(super.describe(),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:50,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",quoteJsonNumbers:!1,has:{CORS:void 0,spot:!0,margin:void 0,swap:!1,future:!1,option:void 0,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,createStopLimitOrder:!0,createStopMarketOrder:!0,createStopOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchBorrowRate:!1,fetchBorrowRates:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingHistory:!1,fetchFundingRate:!1,fetchFundingRateHistory:!1,fetchFundingRates:!1,fetchIndexOHLCV:!1,fetchL3OrderBook:!0,fetchLedger:!0,fetchMarginMode:!1,fetchMarkets:!0,fetchMarkOHLCV:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenInterestHistory:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrdersByStatus:!0,fetchOrderTrades:!0,fetchPositionMode:!1,fetchPremiumIndexOHLCV:!1,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!1,fetchTransactionFee:!0,fetchWithdrawals:!0,transfer:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295558-132aaf80-c50e-11ea-9801-a2fb0c57c799.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://api.kucoin.com",private:"https://api.kucoin.com",futuresPrivate:"https://api-futures.kucoin.com",futuresPublic:"https://api-futures.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com",futuresPrivate:"https://api-sandbox-futures.kucoin.com",futuresPublic:"https://api-sandbox-futures.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:{timestamp:1,status:1,symbols:1,markets:1,"market/allTickers":1,"market/orderbook/level{level}_{limit}":1,"market/orderbook/level2_20":1,"market/orderbook/level2_100":1,"market/histories":1,"market/candles":1,"market/stats":1,currencies:1,"currencies/{currency}":1,prices:1,"mark-price/{symbol}/current":1,"margin/config":1},post:{"bullet-public":1}},private:{get:{"market/orderbook/level{level}":1,"market/orderbook/level2":{v3:2},"market/orderbook/level3":1,accounts:1,"accounts/{accountId}":1,"accounts/ledgers":3.333,"accounts/{accountId}/holds":1,"accounts/transferable":1,"base-fee":1,"sub/user":1,"sub-accounts":1,"sub-accounts/{subUserId}":1,"deposit-addresses":1,deposits:10,"hist-deposits":10,"hist-orders":1,"hist-withdrawals":10,withdrawals:10,"withdrawals/quotas":1,orders:2,"order/client-order/{clientOid}":1,"orders/{orderId}":1,"limit/orders":1,fills:6.66667,"limit/fills":1,"margin/account":1,"margin/borrow":1,"margin/borrow/outstanding":1,"margin/borrow/borrow/repaid":1,"margin/lend/active":1,"margin/lend/done":1,"margin/lend/trade/unsettled":1,"margin/lend/trade/settled":1,"margin/lend/assets":1,"margin/market":1,"margin/trade/last":1,"stop-order/{orderId}":1,"stop-order":1,"stop-order/queryOrderByClientOid":1,"trade-fees":1.3333},post:{accounts:1,"accounts/inner-transfer":{v2:1},"accounts/sub-transfer":{v2:25},"deposit-addresses":1,withdrawals:1,orders:4,"orders/multi":20,"margin/borrow":1,"margin/order":1,"margin/repay/all":1,"margin/repay/single":1,"margin/lend":1,"margin/toggle-auto-lend":1,"bullet-private":1,"stop-order":1},delete:{"withdrawals/{withdrawalId}":1,orders:20,"order/client-order/{clientOid}":1,"orders/{orderId}":1,"margin/lend/{orderId}":1,"stop-order/cancelOrderByClientOid":1,"stop-order/{orderId}":1,"stop-order/cancel":1}},futuresPublic:{get:{"contracts/active":1.3953,"contracts/{symbol}":1.3953,ticker:1.3953,"level2/snapshot":2,"level2/depth20":1.3953,"level2/depth100":1.3953,"level2/message/query":1.3953,"level3/message/query":1.3953,"level3/snapshot":1.3953,"trade/history":1.3953,"interest/query":1.3953,"index/query":1.3953,"mark-price/{symbol}/current":1.3953,"premium/query":1.3953,"funding-rate/{symbol}/current":1.3953,timestamp:1.3953,status:1.3953,"kline/query":1.3953},post:{"bullet-public":1.3953}},futuresPrivate:{get:{"account-overview":2,"transaction-history":6.666,"deposit-address":1.3953,"deposit-list":1.3953,"withdrawals/quotas":1.3953,"withdrawal-list":1.3953,"transfer-list":1.3953,orders:1.3953,stopOrders:1.3953,recentDoneOrders:1.3953,"orders/{orderId}":1.3953,"orders/byClientOid":1.3953,fills:6.666,recentFills:6.666,openOrderStatistics:1.3953,position:1.3953,positions:6.666,"funding-history":6.666},post:{withdrawals:1.3953,"transfer-out":1.3953,orders:1.3953,"position/margin/auto-deposit-status":1.3953,"position/margin/deposit-margin":1.3953,"bullet-private":1.3953},delete:{"withdrawals/{withdrawalId}":1.3953,"cancel/transfer-out":1.3953,"orders/{orderId}":1.3953,orders:6.666,stopOrders:1.3953}}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},precisionMode:y,exceptions:{exact:{"order not exist":o,"order not exist.":o,order_not_exist:o,order_not_exist_or_not_allow_to_cancel:h,"Order size below the minimum requirement.":h,"The withdrawal amount is below the minimum requirement.":s,"Unsuccessful! Exceeded the max. funds out-transfer limit":a,400:u,401:l,403:f,404:f,405:f,429:m,500:n,503:n,101030:b,200004:a,230003:a,260100:a,3e5:h,4e5:p,400001:l,400002:d,400003:l,400004:l,400005:l,400006:l,400007:l,400008:f,400100:u,400200:h,400350:h,400370:h,400500:h,400600:p,400760:h,401e3:u,411100:c,415e3:u,5e5:n,260220:g},broad:{"Exceeded the access frequency":m,"require more permission":b}},fees:{trading:{tierBased:!0,percentage:!0,taker:this.parseNumber("0.001"),maker:this.parseNumber("0.001"),tiers:{taker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("50"),this.parseNumber("0.001")],[this.parseNumber("200"),this.parseNumber("0.0009")],[this.parseNumber("500"),this.parseNumber("0.0008")],[this.parseNumber("1000"),this.parseNumber("0.0007")],[this.parseNumber("2000"),this.parseNumber("0.0007")],[this.parseNumber("4000"),this.parseNumber("0.0006")],[this.parseNumber("8000"),this.parseNumber("0.0005")],[this.parseNumber("15000"),this.parseNumber("0.00045")],[this.parseNumber("25000"),this.parseNumber("0.0004")],[this.parseNumber("40000"),this.parseNumber("0.00035")],[this.parseNumber("60000"),this.parseNumber("0.0003")],[this.parseNumber("80000"),this.parseNumber("0.00025")]],maker:[[this.parseNumber("0"),this.parseNumber("0.001")],[this.parseNumber("50"),this.parseNumber("0.0009")],[this.parseNumber("200"),this.parseNumber("0.0007")],[this.parseNumber("500"),this.parseNumber("0.0005")],[this.parseNumber("1000"),this.parseNumber("0.0003")],[this.parseNumber("2000"),this.parseNumber("0")],[this.parseNumber("4000"),this.parseNumber("0")],[this.parseNumber("8000"),this.parseNumber("0")],[this.parseNumber("15000"),this.parseNumber("-0.00005")],[this.parseNumber("25000"),this.parseNumber("-0.00005")],[this.parseNumber("40000"),this.parseNumber("-0.00005")],[this.parseNumber("60000"),this.parseNumber("-0.00005")],[this.parseNumber("80000"),this.parseNumber("-0.00005")]]}},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias",VAI:"VAIOT"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:"trade",fetchMarkets:{fetchTickersFees:!0},versions:{public:{GET:{"currencies/{currency}":"v2",status:"v1","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1","market/orderbook/level{level}_{limit}":"v1"}},private:{GET:{"market/orderbook/level2":"v3","market/orderbook/level3":"v3","market/orderbook/level{level}":"v3"},POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}},futuresPrivate:{GET:{"account-overview":"v1",positions:"v1"},POST:{"transfer-out":"v2"}},futuresPublic:{GET:{"level3/snapshot":"v2"}}},accountsByType:{spot:"trade",margin:"margin",main:"main",funding:"main",future:"contract",mining:"pool"},networks:{ETH:"eth",ERC20:"eth",TRX:"trx",TRC20:"trx",KCC:"kcc",TERRA:"luna",LTC:"ltc"}}})}nonce(){return this.milliseconds()}async fetchTime(e={}){const t=await this.publicGetTimestamp(e);return this.safeInteger(t,"data")}async fetchStatus(e={}){const t=await this.publicGetStatus(e),i=this.safeValue(t,"data",{});return{status:"open"===this.safeString(i,"status")?"ok":"maintenance",updated:void 0,eta:void 0,url:void 0,info:t}}async fetchMarkets(e={}){const t=await this.publicGetSymbols(e),i=this.safeValue(t,"data"),r=this.safeValue(this.options,"fetchMarkets",{});let s={};this.safeValue(r,"fetchTickersFees",!0)&&(s=await this.publicGetMarketAllTickers(e));const n=this.safeValue(s,"data",{}),a=this.safeValue(n,"ticker",[]),o=this.indexBy(a,"symbol"),h=[];for(let e=0;e<i.length;e++){const t=i[e],r=this.safeString(t,"symbol"),[s,n]=r.split("-"),a=this.safeCurrencyCode(s),c=this.safeCurrencyCode(n),d=this.safeValue(o,r,{}),f=this.safeString(d,"makerFeeRate"),u=this.safeString(d,"makerFeeRate"),l=this.safeString(d,"makerCoefficient"),p=this.safeString(d,"takerCoefficient");h.push({id:r,symbol:a+"/"+c,base:a,quote:c,settle:void 0,baseId:s,quoteId:n,settleId:void 0,type:"spot",spot:!0,margin:this.safeValue(t,"isMarginEnabled"),swap:!1,future:!1,option:!1,active:this.safeValue(t,"enableTrading"),contract:!1,linear:void 0,inverse:void 0,taker:this.parseNumber(v.stringMul(u,p)),maker:this.parseNumber(v.stringMul(f,l)),contractSize:void 0,expiry:void 0,expiryDatetime:void 0,strike:void 0,optionType:void 0,precision:{amount:this.safeNumber(t,"baseIncrement"),price:this.safeNumber(t,"priceIncrement")},limits:{leverage:{min:void 0,max:void 0},amount:{min:this.safeNumber(t,"baseMinSize"),max:this.safeNumber(t,"baseMaxSize")},price:{min:void 0,max:void 0},cost:{min:this.safeNumber(t,"quoteMinSize"),max:this.safeNumber(t,"quoteMaxSize")}},info:t})}return h}async fetchCurrencies(e={}){const t=await this.publicGetCurrencies(e),i=this.safeValue(t,"data",[]),r={};for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"currency"),n=this.safeString(t,"fullName"),a=this.safeCurrencyCode(s),o=this.safeValue(t,"isWithdrawEnabled",!1),h=this.safeValue(t,"isDepositEnabled",!1),c=this.safeNumber(t,"withdrawalMinFee"),d=o&&h;r[a]={id:s,name:n,code:a,precision:this.parseNumber(this.parsePrecision(this.safeString(t,"precision"))),info:t,active:d,deposit:h,withdraw:o,fee:c,limits:this.limits}}return r}async fetchAccounts(e={}){const t=await this.privateGetAccounts(e),i=this.safeValue(t,"data",[]),r=[];for(let e=0;e<i.length;e++){const t=i[e],s=this.safeString(t,"id"),n=this.safeString(t,"currency"),a=this.safeCurrencyCode(n),o=this.safeString(t,"type");r.push({id:s,type:o,currency:a,info:t})}return r}async fetchTransactionFee(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},r=await this.privateGetWithdrawalsQuotas(this.extend(i,t)),s=r.data,n={};return n[e]=this.safeNumber(s,"withdrawMinFee"),{info:r,withdraw:n,deposit:{}}}isFuturesMethod(e,t){const i=this.safeString2(this.options,e,"defaultType","trade"),r=this.safeString(t,"type",i),n=this.safeValue(this.options,"accountsByType"),a=this.safeString(n,r);if(void 0===a){const e=Object.keys(n);throw new s(this.id+" isFuturesMethod() type must be one of "+e.join(", "))}return t=this.omit(t,"type"),"contract"===a||"future"===a||"futures"===a}parseTicker(e,t){let i=this.safeString(e,"changeRate");void 0!==i&&(i=v.stringMul(i,"100"));let r=this.safeString2(e,"last","lastTradedPrice");r=this.safeString(e,"price",r);const s=this.safeString(e,"symbol"),n=(t=this.safeMarket(s,t,"-")).symbol,a=this.safeString(e,"vol"),o=this.safeString(e,"volValue"),h=this.safeInteger2(e,"time","datetime");return this.safeTicker({symbol:n,timestamp:h,datetime:this.iso8601(h),high:this.safeString(e,"high"),low:this.safeString(e,"low"),bid:this.safeString2(e,"buy","bestBid"),bidVolume:this.safeString(e,"bestBidSize"),ask:this.safeString2(e,"sell","bestAsk"),askVolume:this.safeString(e,"bestAskSize"),vwap:void 0,open:this.safeString(e,"open"),close:r,last:r,previousClose:void 0,change:this.safeString(e,"changePrice"),percentage:i,average:this.safeString(e,"averagePrice"),baseVolume:a,quoteVolume:o,info:e},t)}async fetchTickers(e,t={}){await this.loadMarkets();const i=await this.publicGetMarketAllTickers(t),r=this.safeValue(i,"data",{}),s=this.safeValue(r,"ticker",[]),n=this.safeInteger(r,"time"),a={};for(let e=0;e<s.length;e++){s[e].time=n;const t=this.parseTicker(s[e]),i=this.safeString(t,"symbol");void 0!==i&&(a[i]=t)}return this.filterByArray(a,"symbol",e)}async fetchTicker(e,t={}){await this.loadMarkets();const i=this.market(e),r={symbol:i.id},s=await this.publicGetMarketStats(this.extend(r,t));return this.parseTicker(s.data,i)}parseOHLCV(e,t){return[this.safeTimestamp(e,0),this.safeNumber(e,1),this.safeNumber(e,3),this.safeNumber(e,4),this.safeNumber(e,2),this.safeNumber(e,5)]}async fetchOHLCV(e,t="15m",i,r,s={}){await this.loadMarkets();const n=this.market(e),a={symbol:n.id,type:this.timeframes[t]},o=1e3*this.parseTimeframe(t);let h=this.milliseconds();void 0!==i?(a.startAt=parseInt(Math.floor(i/1e3)),void 0===r&&(r=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),h=this.sum(i,r*o)):void 0!==r&&(i=h-r*o,a.startAt=parseInt(Math.floor(i/1e3))),a.endAt=parseInt(Math.floor(h/1e3));const c=await this.publicGetMarketCandles(this.extend(a,s)),d=this.safeValue(c,"data",[]);return this.parseOHLCVs(d,n,t,i,r)}async createDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},r=await this.privatePostDepositAddresses(this.extend(i,t)),s=this.safeValue(r,"data",{});let n=this.safeString(s,"address");void 0!==n&&(n=n.replace("bitcoincash:",""));const a=this.safeString(s,"memo");return"NIM"!==e&&this.checkAddress(n),{info:r,currency:e,network:this.safeString(s,"chain"),address:n,tag:a}}async fetchDepositAddress(e,t={}){await this.loadMarkets();const i={currency:this.currency(e).id},r=this.safeValue(this.options,"networks",{});let s=this.safeStringUpper(t,"network");s=this.safeStringLower(r,s,s),void 0!==s&&(i.chain=s,t=this.omit(t,"network"));const n=await this.privateGetDepositAddresses(this.extend(i,t)),a=this.safeValue(n,"data",{}),o=this.safeString(a,"address"),h=this.safeString(a,"memo");return"NIM"!==e&&this.checkAddress(o),{info:n,currency:e,address:o,tag:h,network:s}}async fetchOrderBook(e,t,i={}){await this.loadMarkets();const r=this.market(e),n=this.safeInteger(i,"level",2),a={symbol:r.id};let o="publicGetMarketOrderbookLevelLevelLimit";let h;if(this.checkRequiredCredentials(!1)&&void 0===t)o="privateGetMarketOrderbookLevel2";else if(2===n){if(a.level=n,void 0!==t){if(20!==t&&100!==t)throw new s(this.id+" fetchOrderBook() limit argument must be 20 or 100");a.limit=t}a.limit=t||100}h=await this[o](this.extend(a,i));const c=this.safeValue(h,"data",{}),d=this.safeInteger(c,"time"),f=this.parseOrderBook(c,r.symbol,d,"bids","asks",n-2,n-1);return f.nonce=this.safeInteger(c,"sequence"),f}async createOrder(e,t,i,r,n,a={}){await this.loadMarkets();const o=this.marketId(e),h=this.safeString2(a,"clientOid","clientOrderId",this.uuid());a=this.omit(a,["clientOid","clientOrderId"]);const c={clientOid:h,side:i,symbol:o,type:t},d=this.safeNumber2(a,"cost","funds");let f,u;"market"===t?void 0!==d?(a=this.omit(a,["cost","funds"]),u=this.amountToPrecision(e,d),c.funds=u):(f=this.amountToPrecision(e,r),c.size=this.amountToPrecision(e,r)):(f=this.amountToPrecision(e,r),c.size=f,c.price=this.priceToPrecision(e,n));const l=this.safeValue(a,"stopLossPrice"),p=this.safeValue2(a,"takeProfitPrice","stopPrice"),m=void 0!==l,b=void 0!==p;if(m&&b)throw new s(this.id+" createOrder() stopLossPrice and takeProfitPrice cannot both be defined");const g=this.safeString(a,"tradeType");a=this.omit(a,["stopLossPrice","takeProfitPrice","stopPrice"]);let y="privatePostOrders";if(m||b){c.stop=m?"entry":"loss";const t=m?l:p;c.stopPrice=this.priceToPrecision(e,t),y="privatePostStopOrder"}else"MARGIN_TRADE"===g&&(y="privatePostMarginOrder");const v=await this[y](this.extend(c,a)),w=this.safeValue(v,"data",{}),S=this.milliseconds();return{id:this.safeString(w,"orderId"),clientOrderId:h,info:w,timestamp:S,datetime:this.iso8601(S),lastTradeTimestamp:void 0,symbol:e,type:t,side:i,price:n,amount:this.parseNumber(f),cost:this.parseNumber(u),average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0}}async cancelOrder(e,t,i={}){await this.loadMarkets();const r={},s=this.safeString2(i,"clientOid","clientOrderId"),n=this.safeValue(i,"stop");let a="privateDeleteOrdersOrderId";return void 0!==s?(r.clientOid=s,a=n?"privateDeleteStopOrderCancelOrderByClientOid":"privateDeleteOrderClientOrderClientOid"):(n&&(a="privateDeleteStopOrderOrderId"),r.orderId=e),i=this.omit(i,["clientOid","clientOrderId","stop"]),await this[a](this.extend(r,i))}async cancelAllOrders(e,t={}){await this.loadMarkets();const i={};let r;void 0!==e&&(r=this.market(e),i.symbol=r.id);let s="privateDeleteOrders";return this.safeValue(t,"stop")&&(s="privateDeleteStopOrderCancel"),await this[s](this.extend(i,t))}async fetchOrdersByStatus(e,t,i,r,s={}){await this.loadMarkets();let n=e.toLowerCase();"open"===n?n="active":"closed"===n&&(n="done");const a={status:n};let o;void 0!==t&&(o=this.market(t),a.symbol=o.id),void 0!==i&&(a.startAt=i),void 0!==r&&(a.pageSize=r);const h=this.safeInteger2(s,"until","till");h&&(a.endAt=h);const c=this.safeValue(s,"stop");s=this.omit(s,["stop","till","until"]);let d="privateGetOrders";c&&(d="privateGetStopOrder");const f=await this[d](this.extend(a,s)),u=this.safeValue(f,"data",{}),l=this.safeValue(u,"items",[]);return this.parseOrders(l,o,i,r)}async fetchClosedOrders(e,t,i,r={}){return await this.fetchOrdersByStatus("done",e,t,i,r)}async fetchOpenOrders(e,t,i,r={}){return await this.fetchOrdersByStatus("active",e,t,i,r)}async fetchOrder(e,t,i={}){await this.loadMarkets();const r={},s=this.safeString2(i,"clientOid","clientOrderId"),n=this.safeValue(i,"stop");let a;void 0!==t&&(a=this.market(t)),i=this.omit(i,"stop");let o="privateGetOrdersOrderId";if(void 0!==s)r.clientOid=s,n?(o="privateGetStopOrderQueryOrderByClientOid",void 0!==t&&(r.symbol=a.id)):o="privateGetOrderClientOrderClientOid";else{if(void 0===e)throw new h(this.id+" fetchOrder() requires an order id");n&&(o="privateGetStopOrderOrderId"),r.orderId=e}i=this.omit(i,["clientOid","clientOrderId"]);const c=await this[o](this.extend(r,i));let d=this.safeValue(c,"data");return"privateGetStopOrderQueryOrderByClientOid"===o&&(d=this.safeValue(d,0)),this.parseOrder(d,a)}parseOrder(e,t){const i=this.safeString(e,"symbol"),r=this.safeSymbol(i,t,"-"),s=this.safeString(e,"id"),n=this.safeString(e,"type"),a=this.safeInteger(e,"createdAt"),o=this.iso8601(a),h=this.safeString(e,"price"),c=this.safeString(e,"side"),d=this.safeString(e,"feeCurrency"),f=this.safeCurrencyCode(d),u=this.safeNumber(e,"fee"),l=this.safeString(e,"size"),p=this.safeString(e,"dealSize"),m=this.safeString(e,"dealFunds"),b=this.safeValue(e,"isActive",!1),g=this.safeValue(e,"cancelExist",!1),y=this.safeString(e,"stop"),v=this.safeValue(e,"stopTriggered",!1);let w=b?"open":"closed";w=g||!b&&y&&!v?"canceled":w;const S={currency:f,cost:u},_=this.safeString(e,"clientOid"),k=this.safeString(e,"timeInForce"),T=this.safeNumber(e,"stopPrice"),O=this.safeValue(e,"postOnly");return this.safeOrder({id:s,clientOrderId:_,symbol:r,type:n,timeInForce:k,postOnly:O,side:c,amount:l,price:h,stopPrice:T,cost:m,filled:p,remaining:void 0,timestamp:a,datetime:o,fee:S,status:w,info:e,lastTradeTimestamp:void 0,average:void 0,trades:void 0},t)}async fetchOrderTrades(e,t,i,r,s={}){const n={orderId:e};return await this.fetchMyTrades(t,i,r,this.extend(n,s))}async fetchMyTrades(e,t,i,r={}){await this.loadMarkets();const n={};let a;void 0!==e&&(a=this.market(e),n.symbol=a.id),void 0!==i&&(n.pageSize=i);const o=this.options.fetchMyTradesMethod;let h=!1;if("private_get_fills"===o)void 0!==t&&(n.startAt=t);else if("private_get_limit_fills"===o)h=!0;else{if("private_get_hist_orders"!==o)throw new s(this.id+" fetchMyTradesMethod() invalid method");void 0!==t&&(n.startAt=parseInt(t/1e3))}const c=await this[o](this.extend(n,r)),d=this.safeValue(c,"data",{});let f;return f=h?d:this.safeValue(d,"items",[]),this.parseTrades(f,a,t,i)}async fetchTrades(e,t,i,r={}){await this.loadMarkets();const s=this.market(e),n={symbol:s.id},a=await this.publicGetMarketHistories(this.extend(n,r)),o=this.safeValue(a,"data",[]);return this.parseTrades(o,s,t,i)}parseTrade(e,t){const i=this.safeString(e,"symbol");t=this.safeMarket(i,t,"-");const r=this.safeString2(e,"tradeId","id"),s=this.safeString(e,"orderId"),n=this.safeString(e,"liquidity");let a=this.safeInteger(e,"time");void 0!==a?a=parseInt(a/1e6):(a=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==a&&(a*=1e3));const o=this.safeString2(e,"price","dealPrice"),h=this.safeString2(e,"size","amount"),c=this.safeString(e,"side");let d;const f=this.safeString(e,"fee");if(void 0!==f){const i=this.safeString(e,"feeCurrency");let r=this.safeCurrencyCode(i);void 0===r&&(r="sell"===c?t.quote:t.base),d={cost:f,currency:r,rate:this.safeString(e,"feeRate")}}let u=this.safeString(e,"type");"match"===u&&(u=void 0);const l=this.safeString2(e,"funds","dealValue");return this.safeTrade({info:e,id:r,order:s,timestamp:a,datetime:this.iso8601(a),symbol:t.symbol,type:u,takerOrMaker:n,side:c,price:o,amount:h,cost:l,fee:d},t)}async fetchTradingFee(e,t={}){await this.loadMarkets();const i=this.market(e),r={symbols:i.id},s=await this.privateGetTradeFees(this.extend(r,t)),n=this.safeValue(s,"data",[]),a=this.safeValue(n,0),o=this.safeString(a,"symbol");return{info:s,symbol:this.safeSymbol(o,i),maker:this.safeNumber(a,"makerFeeRate"),taker:this.safeNumber(a,"takerFeeRate"),percentage:!0,tierBased:!0}}async withdraw(e,t,i,r,s={}){[r,s]=this.handleWithdrawTagAndParams(r,s),await this.loadMarkets(),this.checkAddress(i);const n=this.currency(e),a={currency:n.id,address:i,amount:t};void 0!==r&&(a.memo=r);const o=this.safeValue(this.options,"networks",{});let h=this.safeStringUpper(s,"network");h=this.safeStringLower(o,h,h),void 0!==h&&(a.chain=h,s=this.omit(s,"network"));const c=await this.privatePostWithdrawals(this.extend(a,s)),d=this.safeValue(c,"data",{});return this.parseTransaction(d,n)}parseTransactionStatus(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}parseTransaction(e,t){const i=this.safeString(e,"currency"),r=this.safeCurrencyCode(i,t);let s=this.safeString(e,"address");const n=this.safeNumber(e,"amount");let a=this.safeString(e,"walletTxId");if(void 0!==a){const e=a.split("@");e.length>1&&void 0===s&&e[1].length>1&&(s=e[1]),a=e[0]}let o=void 0===a?"withdrawal":"deposit";const h=this.safeString(e,"status"),c=this.parseTransactionStatus(h);let d;const f=this.safeNumber(e,"fee");if(void 0!==f){let e;void 0!==n&&(e=f/n),d={cost:f,rate:e,currency:r}}const u=this.safeString(e,"memo");let l=this.safeInteger2(e,"createdAt","createAt");const p=this.safeString2(e,"id","withdrawalId");let m=this.safeInteger(e,"updatedAt");!("createdAt"in e)&&(o="address"in e?"withdrawal":"deposit",void 0!==l&&(l*=1e3),void 0!==m&&(m*=1e3));const b=this.safeString(e,"remark");return{id:p,info:e,timestamp:l,datetime:this.iso8601(l),network:void 0,address:s,addressTo:s,addressFrom:void 0,tag:u,tagTo:u,tagFrom:void 0,currency:r,amount:n,txid:a,type:o,status:c,comment:b,fee:d,updated:m}}async fetchDeposits(e,t,i,r={}){await this.loadMarkets();const s={};let n;void 0!==e&&(n=this.currency(e),s.currency=n.id),void 0!==i&&(s.pageSize=i);let a="privateGetDeposits";void 0!==t&&(t<1550448e6?(s.startAt=parseInt(t/1e3),a="privateGetHistDeposits"):s.startAt=t);const o=(await this[a](this.extend(s,r))).data.items;return this.parseTransactions(o,n,t,i,{type:"deposit"})}async fetchWithdrawals(e,t,i,r={}){await this.loadMarkets();const s={};let n;void 0!==e&&(n=this.currency(e),s.currency=n.id),void 0!==i&&(s.pageSize=i);let a="privateGetWithdrawals";void 0!==t&&(t<1550448e6?(s.startAt=parseInt(t/1e3),a="privateGetHistWithdrawals"):s.startAt=t);const o=(await this[a](this.extend(s,r))).data.items;return this.parseTransactions(o,n,t,i,{type:"withdrawal"})}async fetchBalance(e={}){await this.loadMarkets();const t=this.safeString2(this.options,"fetchBalance","defaultType","spot"),i=this.safeString(e,"type",t),r=this.safeValue(this.options,"accountsByType"),s=this.safeString(r,i,i);e=this.omit(e,"type");const n={type:s},a=await this.privateGetAccounts(this.extend(n,e)),o=this.safeValue(a,"data",[]),h={info:a,timestamp:void 0,datetime:void 0};for(let e=0;e<o.length;e++){const t=o[e];if(this.safeString(t,"type")===s){const e=this.safeString(t,"currency"),i=this.safeCurrencyCode(e),r=this.account();r.total=this.safeString(t,"balance"),r.free=this.safeString(t,"available"),r.used=this.safeString(t,"holds"),h[i]=r}}return this.safeBalance(h)}async transfer(e,t,i,r,n={}){await this.loadMarkets();const a=this.currency(e),o=this.currencyToPrecision(e,t),h=this.safeValue(this.options,"accountsByType",{}),c=this.safeString(h,i,i),d=this.safeString(h,r,r);if("contract"===c){if("main"!==d)throw new s(this.id+" transfer() only supports transferring from futures account to main account");const e={currency:a.id,amount:o};"bizNo"in n||(e.bizNo=this.uuid22());const t=await this.futuresPrivatePostTransferOut(this.extend(e,n)),i=this.safeValue(t,"data");return this.parseTransfer(i,a)}{const e={currency:a.id,from:c,to:d,amount:o};"clientOid"in n||(e.clientOid=this.uuid());const t=await this.privatePostAccountsInnerTransfer(this.extend(e,n)),i=this.safeValue(t,"data");return this.parseTransfer(i,a)}}parseTransfer(e,t){const i=this.safeInteger(e,"createdAt"),r=this.safeString(e,"currency"),s=this.safeString(e,"status"),n=this.safeStringLower(e,"payAccountType"),a=this.safeStringLower(e,"recAccountType"),o=this.safeValue(this.options,"accountsByType"),h=this.safeString(o,n,n),c=this.safeString(o,a,a);return{id:this.safeString2(e,"applyId","orderId"),currency:this.safeCurrencyCode(r,t),timestamp:i,datetime:this.iso8601(i),amount:this.safeNumber(e,"amount"),fromAccount:h,toAccount:c,status:this.parseTransferStatus(s),info:e}}parseTransferStatus(e){return this.safeString({PROCESSING:"pending"},e,e)}parseLedgerEntryType(e){return this.safeString({"Assets Transferred in After Upgrading":"transfer",Deposit:"transaction",Withdrawal:"transaction",Transfer:"transfer",Trade_Exchange:"trade","KuCoin Bonus":"bonus","Referral Bonus":"referral",Rewards:"bonus","Airdrop/Fork":"airdrop","Other rewards":"bonus","Fee Rebate":"rebate","Buy Crypto":"trade","Sell Crypto":"sell","Public Offering Purchase":"trade","Refunded Fees":"fee","KCS Pay Fees":"fee","Margin Trade":"trade",Loans:"Loans","Instant Exchange":"trade","Sub-account transfer":"transfer","Liquidation Fees":"fee"},e,e)}parseLedgerEntry(e,t){const i=this.safeString(e,"id"),r=this.safeString(e,"currency"),s=this.safeCurrencyCode(r,t),n=this.safeNumber(e,"amount"),a=this.safeString(e,"bizType"),o=this.parseLedgerEntryType(a),h=this.safeString(e,"direction"),c=this.safeInteger(e,"createdAt"),d=this.iso8601(c),f=this.safeString(e,"accountType"),u=this.safeString(e,"context");let l,p;if(void 0!==u&&""!==u){const e=JSON.parse(u),t=this.safeString(e,"orderId"),i=this.safeString(e,"tradeId");l=void 0!==i?i:t}const m=this.safeNumber(e,"fee");let b;return 0!==m&&(b=s,p={cost:m,currency:b}),{id:i,direction:h,account:f,referenceId:l,referenceAccount:f,type:o,currency:s,amount:n,timestamp:c,datetime:d,before:void 0,after:undefined,status:void 0,fee:p,info:e}}async fetchLedger(e,t,i,r={}){await this.loadMarkets(),await this.loadAccounts();const s={};let n;void 0!==t&&(s.startAt=t),void 0!==e&&(n=this.currency(e),s.currency=n.id);const a=await this.privateGetAccountsLedgers(this.extend(s,r)),o=this.safeValue(a,"data"),h=this.safeValue(o,"items");return this.parseLedger(h,n,t,i)}calculateRateLimiterCost(e,t,i,r,s={},n={}){const a=this.safeValue(this.options,"versions",{}),o=this.safeValue(a,e,{}),h=this.safeValue(o,t,{}),c=this.safeString(h,i,this.options.version),d=this.safeString(r,"version",c);return"v3"===d&&"v3"in s?s.v3:"v2"===d&&"v2"in s?s.v2:"v1"===d&&"v1"in s?s.v1:this.safeInteger(s,"cost",1)}sign(e,t="public",i="GET",r={},s,n){const a=this.safeValue(this.options,"versions",{}),o=this.safeValue(a,t,{}),h=this.safeValue(o,i,{}),c=this.safeString(h,e,this.options.version),d=this.safeString(r,"version",c);r=this.omit(r,"version");let f="/api/"+d+"/"+this.implodeParams(e,r);const u=this.omit(r,this.extractParams(e));let l="";s=void 0!==s?s:{},Object.keys(u).length&&("GET"===i||"DELETE"===i?f+="?"+this.rawencode(u):(l=n=this.json(u),s["Content-Type"]="application/json"));const p=this.urls.api[t]+f;if("private"===t||"futuresPrivate"===t){this.checkRequiredCredentials();const e=this.nonce().toString();s=this.extend({"KC-API-KEY-VERSION":"2","KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":e},s);if("2"===this.safeString(s,"KC-API-KEY-VERSION")){const e=this.hmac(this.encode(this.password),this.encode(this.secret),"sha256","base64");s["KC-API-PASSPHRASE"]=e}else s["KC-API-PASSPHRASE"]=this.password;const t=e+i+f+l,r=this.hmac(this.encode(t),this.encode(this.secret),"sha256","base64");s["KC-API-SIGN"]=r;const n=this.safeValue(this.options,"partner",{}),a=this.safeString(n,"id"),o=this.safeString(n,"secret");if(void 0!==a&&void 0!==o){const t=e+a+this.apiKey,i=this.hmac(this.encode(t),this.encode(o),"sha256","base64");s["KC-API-PARTNER-SIGN"]=i,s["KC-API-PARTNER"]=a}}return{url:p,method:i,body:n,headers:s}}handleErrors(e,t,i,r,s,n,a,o,h){if(!a)return void this.throwBroadlyMatchedException(this.exceptions.broad,n,n);const c=this.safeString(a,"code"),d=this.safeString(a,"msg",""),f=this.id+" "+d;this.throwExactlyMatchedException(this.exceptions.exact,d,f),this.throwExactlyMatchedException(this.exceptions.exact,c,f),this.throwBroadlyMatchedException(this.exceptions.broad,n,f)}}},{"./base/Exchange":126,"./base/Precise":127,"./base/errors":129,"./base/functions/number":135}],244:[function(e,t,i){!function(t,i){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function s(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}function n(e,t,i){if(n.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(i=t,t=10),this._init(e||0,t||10,i||"be"))}var a;"object"==typeof t?t.exports=n:i.BN=n,n.BN=n,n.wordSize=26;try{a=e("buffer").Buffer}catch(e){}function o(e,t,i){for(var s=0,n=Math.min(e.length,i),a=0,o=t;o<n;o++){var h,c=e.charCodeAt(o)-48;s<<=4,s|=h=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c,a|=h}return r(!(240&a),"Invalid character in "+e),s}function h(e,t,i,s){for(var n=0,a=0,o=Math.min(e.length,i),h=t;h<o;h++){var c=e.charCodeAt(h)-48;n*=s,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<s,"Invalid character"),n+=a}return n}function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}n.isBN=function(e){return e instanceof n||null!==e&&"object"==typeof e&&e.constructor.wordSize===n.wordSize&&Array.isArray(e.words)},n.max=function(e,t){return e.cmp(t)>0?e:t},n.min=function(e,t){return e.cmp(t)<0?e:t},n.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&s++,16===t?this._parseHex(e,s):this._parseBase(e,t,s),"-"===e[0]&&(this.negative=1),this._strip(),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},n.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var n,a,o=0;if("be"===i)for(s=e.length-1,n=0;s>=0;s-=3)a=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[n]|=a<<o&67108863,this.words[n+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(s=0,n=0;s<e.length;s+=3)a=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[n]|=a<<o&67108863,this.words[n+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this._strip()},n.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,s,n=0;for(i=e.length-6,r=0;i>=t;i-=6)s=o(e,i,i+6),this.words[r]|=s<<n&67108863,this.words[r+1]|=s>>>26-n&4194303,(n+=24)>=26&&(n-=26,r++);i+6!==t&&(s=o(e,t,i+6),this.words[r]|=s<<n&67108863,this.words[r+1]|=s>>>26-n&4194303),this._strip()},n.prototype._parseBase=function(e,t,i){this.words=[0],this.length=1;for(var r=0,s=1;s<=67108863;s*=t)r++;r--,s=s/t|0;for(var n=e.length-i,a=n%r,o=Math.min(n,n-a)+i,c=0,d=i;d<o;d+=r)c=h(e,d,d+r,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var f=1;for(c=h(e,d,e.length,t),d=0;d<a;d++)f*=t;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},n.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},n.prototype.clone=function(){var e=new n(null);return this.copy(e),e},n.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?n.prototype[Symbol.for("nodejs.util.inspect.custom")]=c:n.prototype.inspect=c;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(e,t){var i;if(t=0|t||1,16===(e=e||10)||"hex"===e){i="";for(var s=0,n=0,a=0;a<this.length;a++){var o=this.words[a],h=(16777215&(o<<s|n)).toString(16);i=0!==(n=o>>>24-s&16777215)||a!==this.length-1?d[6-h.length]+h+i:h+i,(s+=2)>=26&&(s-=26,a--)}for(0!==n&&(i=n.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],l=u[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(l).toString(e);i=(p=p.idivn(l)).isZero()?m+i:d[c-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},n.prototype.toJSON=function(){return this.toString(16,2)},a&&(n.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),n.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function l(e,t,i){i.negative=t.negative^e.negative;var r=e.length+t.length|0;i.length=r,r=r-1|0;var s=0|e.words[0],n=0|t.words[0],a=s*n,o=67108863&a,h=a/67108864|0;i.words[0]=o;for(var c=1;c<r;c++){for(var d=h>>>26,f=67108863&h,u=Math.min(c,t.length-1),l=Math.max(0,c-e.length+1);l<=u;l++){var p=c-l|0;d+=(a=(s=0|e.words[p])*(n=0|t.words[l])+f)/67108864|0,f=67108863&a}i.words[c]=0|f,h=0|d}return 0!==h?i.words[c]=0|h:i.length--,i._strip()}n.prototype.toArrayLike=function(e,t,i){this._strip();var s=this.byteLength(),n=i||Math.max(1,s);r(s<=n,"byte array longer than desired length"),r(n>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,n);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,s),a},n.prototype._toArrayLikeLE=function(e,t){for(var i=0,r=0,s=0,n=0;s<this.length;s++){var a=this.words[s]<<n|r;e[i++]=255&a,i<e.length&&(e[i++]=a>>8&255),i<e.length&&(e[i++]=a>>16&255),6===n?(i<e.length&&(e[i++]=a>>24&255),r=0,n=0):(r=a>>>24,n+=2)}if(i<e.length)for(e[i++]=r;i<e.length;)e[i++]=0},n.prototype._toArrayLikeBE=function(e,t){for(var i=e.length-1,r=0,s=0,n=0;s<this.length;s++){var a=this.words[s]<<n|r;e[i--]=255&a,i>=0&&(e[i--]=a>>8&255),i>=0&&(e[i--]=a>>16&255),6===n?(i>=0&&(e[i--]=a>>24&255),r=0,n=0):(r=a>>>24,n+=2)}if(i>=0)for(e[i--]=r;i>=0;)e[i--]=0},Math.clz32?n.prototype._countBits=function(e){return 32-Math.clz32(e)}:n.prototype._countBits=function(e){var t=e,i=0;return t>=4096&&(i+=13,t>>>=13),t>=64&&(i+=7,t>>>=7),t>=8&&(i+=4,t>>>=4),t>=2&&(i+=2,t>>>=2),i+t},n.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,i=0;return 0==(8191&t)&&(i+=13,t>>>=13),0==(127&t)&&(i+=7,t>>>=7),0==(15&t)&&(i+=4,t>>>=4),0==(3&t)&&(i+=2,t>>>=2),0==(1&t)&&i++,i},n.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var i=this._zeroBits(this.words[t]);if(e+=i,26!==i)break}return e},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},n.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},n.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},n.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},n.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},n.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]&e.words[i];return this.length=t.length,this._strip()},n.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},n.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},n.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},n.prototype.iuxor=function(e){var t,i;this.length>e.length?(t=this,i=e):(t=e,i=this);for(var r=0;r<i.length;r++)this.words[r]=t.words[r]^i.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},n.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},n.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},n.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},n.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this._strip()},n.prototype.notn=function(e){return this.clone().inotn(e)},n.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<s:this.words[i]&~(1<<s),this._strip()},n.prototype.iadd=function(e){var t,i,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(i=this,r=e):(i=e,r=this);for(var s=0,n=0;n<r.length;n++)t=(0|i.words[n])+(0|r.words[n])+s,this.words[n]=67108863&t,s=t>>>26;for(;0!==s&&n<i.length;n++)t=(0|i.words[n])+s,this.words[n]=67108863&t,s=t>>>26;if(this.length=i.length,0!==s)this.words[this.length]=s,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},n.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},n.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i,r,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(i=this,r=e):(i=e,r=this);for(var n=0,a=0;a<r.length;a++)n=(t=(0|i.words[a])-(0|r.words[a])+n)>>26,this.words[a]=67108863&t;for(;0!==n&&a<i.length;a++)n=(t=(0|i.words[a])+n)>>26,this.words[a]=67108863&t;if(0===n&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,i){var r,s,n,a=e.words,o=t.words,h=i.words,c=0,d=0|a[0],f=8191&d,u=d>>>13,l=0|a[1],p=8191&l,m=l>>>13,b=0|a[2],g=8191&b,y=b>>>13,v=0|a[3],w=8191&v,S=v>>>13,_=0|a[4],k=8191&_,T=_>>>13,O=0|a[5],x=8191&O,A=O>>>13,M=0|a[6],E=8191&M,I=M>>>13,B=0|a[7],N=8191&B,P=B>>>13,R=0|a[8],C=8191&R,L=R>>>13,D=0|a[9],j=8191&D,F=D>>>13,V=0|o[0],z=8191&V,q=V>>>13,U=0|o[1],H=8191&U,G=U>>>13,K=0|o[2],W=8191&K,Z=K>>>13,X=0|o[3],Y=8191&X,$=X>>>13,J=0|o[4],Q=8191&J,ee=J>>>13,te=0|o[5],ie=8191&te,re=te>>>13,se=0|o[6],ne=8191&se,ae=se>>>13,oe=0|o[7],he=8191&oe,ce=oe>>>13,de=0|o[8],fe=8191&de,ue=de>>>13,le=0|o[9],pe=8191&le,me=le>>>13;i.negative=e.negative^t.negative,i.length=19;var be=(c+(r=Math.imul(f,z))|0)+((8191&(s=(s=Math.imul(f,q))+Math.imul(u,z)|0))<<13)|0;c=((n=Math.imul(u,q))+(s>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(p,z),s=(s=Math.imul(p,q))+Math.imul(m,z)|0,n=Math.imul(m,q);var ge=(c+(r=r+Math.imul(f,H)|0)|0)+((8191&(s=(s=s+Math.imul(f,G)|0)+Math.imul(u,H)|0))<<13)|0;c=((n=n+Math.imul(u,G)|0)+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,z),s=(s=Math.imul(g,q))+Math.imul(y,z)|0,n=Math.imul(y,q),r=r+Math.imul(p,H)|0,s=(s=s+Math.imul(p,G)|0)+Math.imul(m,H)|0,n=n+Math.imul(m,G)|0;var ye=(c+(r=r+Math.imul(f,W)|0)|0)+((8191&(s=(s=s+Math.imul(f,Z)|0)+Math.imul(u,W)|0))<<13)|0;c=((n=n+Math.imul(u,Z)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,z),s=(s=Math.imul(w,q))+Math.imul(S,z)|0,n=Math.imul(S,q),r=r+Math.imul(g,H)|0,s=(s=s+Math.imul(g,G)|0)+Math.imul(y,H)|0,n=n+Math.imul(y,G)|0,r=r+Math.imul(p,W)|0,s=(s=s+Math.imul(p,Z)|0)+Math.imul(m,W)|0,n=n+Math.imul(m,Z)|0;var ve=(c+(r=r+Math.imul(f,Y)|0)|0)+((8191&(s=(s=s+Math.imul(f,$)|0)+Math.imul(u,Y)|0))<<13)|0;c=((n=n+Math.imul(u,$)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(k,z),s=(s=Math.imul(k,q))+Math.imul(T,z)|0,n=Math.imul(T,q),r=r+Math.imul(w,H)|0,s=(s=s+Math.imul(w,G)|0)+Math.imul(S,H)|0,n=n+Math.imul(S,G)|0,r=r+Math.imul(g,W)|0,s=(s=s+Math.imul(g,Z)|0)+Math.imul(y,W)|0,n=n+Math.imul(y,Z)|0,r=r+Math.imul(p,Y)|0,s=(s=s+Math.imul(p,$)|0)+Math.imul(m,Y)|0,n=n+Math.imul(m,$)|0;var we=(c+(r=r+Math.imul(f,Q)|0)|0)+((8191&(s=(s=s+Math.imul(f,ee)|0)+Math.imul(u,Q)|0))<<13)|0;c=((n=n+Math.imul(u,ee)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(x,z),s=(s=Math.imul(x,q))+Math.imul(A,z)|0,n=Math.imul(A,q),r=r+Math.imul(k,H)|0,s=(s=s+Math.imul(k,G)|0)+Math.imul(T,H)|0,n=n+Math.imul(T,G)|0,r=r+Math.imul(w,W)|0,s=(s=s+Math.imul(w,Z)|0)+Math.imul(S,W)|0,n=n+Math.imul(S,Z)|0,r=r+Math.imul(g,Y)|0,s=(s=s+Math.imul(g,$)|0)+Math.imul(y,Y)|0,n=n+Math.imul(y,$)|0,r=r+Math.imul(p,Q)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,n=n+Math.imul(m,ee)|0;var Se=(c+(r=r+Math.imul(f,ie)|0)|0)+((8191&(s=(s=s+Math.imul(f,re)|0)+Math.imul(u,ie)|0))<<13)|0;c=((n=n+Math.imul(u,re)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(E,z),s=(s=Math.imul(E,q))+Math.imul(I,z)|0,n=Math.imul(I,q),r=r+Math.imul(x,H)|0,s=(s=s+Math.imul(x,G)|0)+Math.imul(A,H)|0,n=n+Math.imul(A,G)|0,r=r+Math.imul(k,W)|0,s=(s=s+Math.imul(k,Z)|0)+Math.imul(T,W)|0,n=n+Math.imul(T,Z)|0,r=r+Math.imul(w,Y)|0,s=(s=s+Math.imul(w,$)|0)+Math.imul(S,Y)|0,n=n+Math.imul(S,$)|0,r=r+Math.imul(g,Q)|0,s=(s=s+Math.imul(g,ee)|0)+Math.imul(y,Q)|0,n=n+Math.imul(y,ee)|0,r=r+Math.imul(p,ie)|0,s=(s=s+Math.imul(p,re)|0)+Math.imul(m,ie)|0,n=n+Math.imul(m,re)|0;var _e=(c+(r=r+Math.imul(f,ne)|0)|0)+((8191&(s=(s=s+Math.imul(f,ae)|0)+Math.imul(u,ne)|0))<<13)|0;c=((n=n+Math.imul(u,ae)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(N,z),s=(s=Math.imul(N,q))+Math.imul(P,z)|0,n=Math.imul(P,q),r=r+Math.imul(E,H)|0,s=(s=s+Math.imul(E,G)|0)+Math.imul(I,H)|0,n=n+Math.imul(I,G)|0,r=r+Math.imul(x,W)|0,s=(s=s+Math.imul(x,Z)|0)+Math.imul(A,W)|0,n=n+Math.imul(A,Z)|0,r=r+Math.imul(k,Y)|0,s=(s=s+Math.imul(k,$)|0)+Math.imul(T,Y)|0,n=n+Math.imul(T,$)|0,r=r+Math.imul(w,Q)|0,s=(s=s+Math.imul(w,ee)|0)+Math.imul(S,Q)|0,n=n+Math.imul(S,ee)|0,r=r+Math.imul(g,ie)|0,s=(s=s+Math.imul(g,re)|0)+Math.imul(y,ie)|0,n=n+Math.imul(y,re)|0,r=r+Math.imul(p,ne)|0,s=(s=s+Math.imul(p,ae)|0)+Math.imul(m,ne)|0,n=n+Math.imul(m,ae)|0;var ke=(c+(r=r+Math.imul(f,he)|0)|0)+((8191&(s=(s=s+Math.imul(f,ce)|0)+Math.imul(u,he)|0))<<13)|0;c=((n=n+Math.imul(u,ce)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(C,z),s=(s=Math.imul(C,q))+Math.imul(L,z)|0,n=Math.imul(L,q),r=r+Math.imul(N,H)|0,s=(s=s+Math.imul(N,G)|0)+Math.imul(P,H)|0,n=n+Math.imul(P,G)|0,r=r+Math.imul(E,W)|0,s=(s=s+Math.imul(E,Z)|0)+Math.imul(I,W)|0,n=n+Math.imul(I,Z)|0,r=r+Math.imul(x,Y)|0,s=(s=s+Math.imul(x,$)|0)+Math.imul(A,Y)|0,n=n+Math.imul(A,$)|0,r=r+Math.imul(k,Q)|0,s=(s=s+Math.imul(k,ee)|0)+Math.imul(T,Q)|0,n=n+Math.imul(T,ee)|0,r=r+Math.imul(w,ie)|0,s=(s=s+Math.imul(w,re)|0)+Math.imul(S,ie)|0,n=n+Math.imul(S,re)|0,r=r+Math.imul(g,ne)|0,s=(s=s+Math.imul(g,ae)|0)+Math.imul(y,ne)|0,n=n+Math.imul(y,ae)|0,r=r+Math.imul(p,he)|0,s=(s=s+Math.imul(p,ce)|0)+Math.imul(m,he)|0,n=n+Math.imul(m,ce)|0;var Te=(c+(r=r+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,ue)|0)+Math.imul(u,fe)|0))<<13)|0;c=((n=n+Math.imul(u,ue)|0)+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(j,z),s=(s=Math.imul(j,q))+Math.imul(F,z)|0,n=Math.imul(F,q),r=r+Math.imul(C,H)|0,s=(s=s+Math.imul(C,G)|0)+Math.imul(L,H)|0,n=n+Math.imul(L,G)|0,r=r+Math.imul(N,W)|0,s=(s=s+Math.imul(N,Z)|0)+Math.imul(P,W)|0,n=n+Math.imul(P,Z)|0,r=r+Math.imul(E,Y)|0,s=(s=s+Math.imul(E,$)|0)+Math.imul(I,Y)|0,n=n+Math.imul(I,$)|0,r=r+Math.imul(x,Q)|0,s=(s=s+Math.imul(x,ee)|0)+Math.imul(A,Q)|0,n=n+Math.imul(A,ee)|0,r=r+Math.imul(k,ie)|0,s=(s=s+Math.imul(k,re)|0)+Math.imul(T,ie)|0,n=n+Math.imul(T,re)|0,r=r+Math.imul(w,ne)|0,s=(s=s+Math.imul(w,ae)|0)+Math.imul(S,ne)|0,n=n+Math.imul(S,ae)|0,r=r+Math.imul(g,he)|0,s=(s=s+Math.imul(g,ce)|0)+Math.imul(y,he)|0,n=n+Math.imul(y,ce)|0,r=r+Math.imul(p,fe)|0,s=(s=s+Math.imul(p,ue)|0)+Math.imul(m,fe)|0,n=n+Math.imul(m,ue)|0;var Oe=(c+(r=r+Math.imul(f,pe)|0)|0)+((8191&(s=(s=s+Math.imul(f,me)|0)+Math.imul(u,pe)|0))<<13)|0;c=((n=n+Math.imul(u,me)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(j,H),s=(s=Math.imul(j,G))+Math.imul(F,H)|0,n=Math.imul(F,G),r=r+Math.imul(C,W)|0,s=(s=s+Math.imul(C,Z)|0)+Math.imul(L,W)|0,n=n+Math.imul(L,Z)|0,r=r+Math.imul(N,Y)|0,s=(s=s+Math.imul(N,$)|0)+Math.imul(P,Y)|0,n=n+Math.imul(P,$)|0,r=r+Math.imul(E,Q)|0,s=(s=s+Math.imul(E,ee)|0)+Math.imul(I,Q)|0,n=n+Math.imul(I,ee)|0,r=r+Math.imul(x,ie)|0,s=(s=s+Math.imul(x,re)|0)+Math.imul(A,ie)|0,n=n+Math.imul(A,re)|0,r=r+Math.imul(k,ne)|0,s=(s=s+Math.imul(k,ae)|0)+Math.imul(T,ne)|0,n=n+Math.imul(T,ae)|0,r=r+Math.imul(w,he)|0,s=(s=s+Math.imul(w,ce)|0)+Math.imul(S,he)|0,n=n+Math.imul(S,ce)|0,r=r+Math.imul(g,fe)|0,s=(s=s+Math.imul(g,ue)|0)+Math.imul(y,fe)|0,n=n+Math.imul(y,ue)|0;var xe=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((n=n+Math.imul(m,me)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(j,W),s=(s=Math.imul(j,Z))+Math.imul(F,W)|0,n=Math.imul(F,Z),r=r+Math.imul(C,Y)|0,s=(s=s+Math.imul(C,$)|0)+Math.imul(L,Y)|0,n=n+Math.imul(L,$)|0,r=r+Math.imul(N,Q)|0,s=(s=s+Math.imul(N,ee)|0)+Math.imul(P,Q)|0,n=n+Math.imul(P,ee)|0,r=r+Math.imul(E,ie)|0,s=(s=s+Math.imul(E,re)|0)+Math.imul(I,ie)|0,n=n+Math.imul(I,re)|0,r=r+Math.imul(x,ne)|0,s=(s=s+Math.imul(x,ae)|0)+Math.imul(A,ne)|0,n=n+Math.imul(A,ae)|0,r=r+Math.imul(k,he)|0,s=(s=s+Math.imul(k,ce)|0)+Math.imul(T,he)|0,n=n+Math.imul(T,ce)|0,r=r+Math.imul(w,fe)|0,s=(s=s+Math.imul(w,ue)|0)+Math.imul(S,fe)|0,n=n+Math.imul(S,ue)|0;var Ae=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(s=(s=s+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((n=n+Math.imul(y,me)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(j,Y),s=(s=Math.imul(j,$))+Math.imul(F,Y)|0,n=Math.imul(F,$),r=r+Math.imul(C,Q)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(L,Q)|0,n=n+Math.imul(L,ee)|0,r=r+Math.imul(N,ie)|0,s=(s=s+Math.imul(N,re)|0)+Math.imul(P,ie)|0,n=n+Math.imul(P,re)|0,r=r+Math.imul(E,ne)|0,s=(s=s+Math.imul(E,ae)|0)+Math.imul(I,ne)|0,n=n+Math.imul(I,ae)|0,r=r+Math.imul(x,he)|0,s=(s=s+Math.imul(x,ce)|0)+Math.imul(A,he)|0,n=n+Math.imul(A,ce)|0,r=r+Math.imul(k,fe)|0,s=(s=s+Math.imul(k,ue)|0)+Math.imul(T,fe)|0,n=n+Math.imul(T,ue)|0;var Me=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(s=(s=s+Math.imul(w,me)|0)+Math.imul(S,pe)|0))<<13)|0;c=((n=n+Math.imul(S,me)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(j,Q),s=(s=Math.imul(j,ee))+Math.imul(F,Q)|0,n=Math.imul(F,ee),r=r+Math.imul(C,ie)|0,s=(s=s+Math.imul(C,re)|0)+Math.imul(L,ie)|0,n=n+Math.imul(L,re)|0,r=r+Math.imul(N,ne)|0,s=(s=s+Math.imul(N,ae)|0)+Math.imul(P,ne)|0,n=n+Math.imul(P,ae)|0,r=r+Math.imul(E,he)|0,s=(s=s+Math.imul(E,ce)|0)+Math.imul(I,he)|0,n=n+Math.imul(I,ce)|0,r=r+Math.imul(x,fe)|0,s=(s=s+Math.imul(x,ue)|0)+Math.imul(A,fe)|0,n=n+Math.imul(A,ue)|0;var Ee=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(s=(s=s+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;c=((n=n+Math.imul(T,me)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(j,ie),s=(s=Math.imul(j,re))+Math.imul(F,ie)|0,n=Math.imul(F,re),r=r+Math.imul(C,ne)|0,s=(s=s+Math.imul(C,ae)|0)+Math.imul(L,ne)|0,n=n+Math.imul(L,ae)|0,r=r+Math.imul(N,he)|0,s=(s=s+Math.imul(N,ce)|0)+Math.imul(P,he)|0,n=n+Math.imul(P,ce)|0,r=r+Math.imul(E,fe)|0,s=(s=s+Math.imul(E,ue)|0)+Math.imul(I,fe)|0,n=n+Math.imul(I,ue)|0;var Ie=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(s=(s=s+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((n=n+Math.imul(A,me)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(j,ne),s=(s=Math.imul(j,ae))+Math.imul(F,ne)|0,n=Math.imul(F,ae),r=r+Math.imul(C,he)|0,s=(s=s+Math.imul(C,ce)|0)+Math.imul(L,he)|0,n=n+Math.imul(L,ce)|0,r=r+Math.imul(N,fe)|0,s=(s=s+Math.imul(N,ue)|0)+Math.imul(P,fe)|0,n=n+Math.imul(P,ue)|0;var Be=(c+(r=r+Math.imul(E,pe)|0)|0)+((8191&(s=(s=s+Math.imul(E,me)|0)+Math.imul(I,pe)|0))<<13)|0;c=((n=n+Math.imul(I,me)|0)+(s>>>13)|0)+(Be>>>26)|0,Be&=67108863,r=Math.imul(j,he),s=(s=Math.imul(j,ce))+Math.imul(F,he)|0,n=Math.imul(F,ce),r=r+Math.imul(C,fe)|0,s=(s=s+Math.imul(C,ue)|0)+Math.imul(L,fe)|0,n=n+Math.imul(L,ue)|0;var Ne=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(s=(s=s+Math.imul(N,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((n=n+Math.imul(P,me)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(j,fe),s=(s=Math.imul(j,ue))+Math.imul(F,fe)|0,n=Math.imul(F,ue);var Pe=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((n=n+Math.imul(L,me)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Re=(c+(r=Math.imul(j,pe))|0)+((8191&(s=(s=Math.imul(j,me))+Math.imul(F,pe)|0))<<13)|0;return c=((n=Math.imul(F,me))+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,h[0]=be,h[1]=ge,h[2]=ye,h[3]=ve,h[4]=we,h[5]=Se,h[6]=_e,h[7]=ke,h[8]=Te,h[9]=Oe,h[10]=xe,h[11]=Ae,h[12]=Me,h[13]=Ee,h[14]=Ie,h[15]=Be,h[16]=Ne,h[17]=Pe,h[18]=Re,0!==c&&(h[19]=c,i.length++),i};function m(e,t,i){i.negative=t.negative^e.negative,i.length=e.length+t.length;for(var r=0,s=0,n=0;n<i.length-1;n++){var a=s;s=0;for(var o=67108863&r,h=Math.min(n,t.length-1),c=Math.max(0,n-e.length+1);c<=h;c++){var d=n-c,f=(0|e.words[d])*(0|t.words[c]),u=67108863&f;o=67108863&(u=u+o|0),s+=(a=(a=a+(f/67108864|0)|0)+(u>>>26)|0)>>>26,a&=67108863}i.words[n]=o,r=a,a=s}return 0!==r?i.words[n]=r:i.length--,i._strip()}function b(e,t,i){return m(e,t,i)}function g(e,t){this.x=e,this.y=t}Math.imul||(p=l),n.prototype.mulTo=function(e,t){var i=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):i<63?l(this,e,t):i<1024?m(this,e,t):b(this,e,t)},g.prototype.makeRBT=function(e){for(var t=new Array(e),i=n.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,i,e);return t},g.prototype.revBin=function(e,t,i){if(0===e||e===i-1)return e;for(var r=0,s=0;s<t;s++)r|=(1&e)<<t-s-1,e>>=1;return r},g.prototype.permute=function(e,t,i,r,s,n){for(var a=0;a<n;a++)r[a]=t[e[a]],s[a]=i[e[a]]},g.prototype.transform=function(e,t,i,r,s,n){this.permute(n,e,t,i,r,s);for(var a=1;a<s;a<<=1)for(var o=a<<1,h=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),d=0;d<s;d+=o)for(var f=h,u=c,l=0;l<a;l++){var p=i[d+l],m=r[d+l],b=i[d+l+a],g=r[d+l+a],y=f*b-u*g;g=f*g+u*b,b=y,i[d+l]=p+b,r[d+l]=m+g,i[d+l+a]=p-b,r[d+l+a]=m-g,l!==o&&(y=h*f-c*u,u=h*u+c*f,f=y)}},g.prototype.guessLen13b=function(e,t){var i=1|Math.max(t,e),r=1&i,s=0;for(i=i/2|0;i;i>>>=1)s++;return 1<<s+1+r},g.prototype.conjugate=function(e,t,i){if(!(i<=1))for(var r=0;r<i/2;r++){var s=e[r];e[r]=e[i-r-1],e[i-r-1]=s,s=t[r],t[r]=-t[i-r-1],t[i-r-1]=-s}},g.prototype.normalize13b=function(e,t){for(var i=0,r=0;r<t/2;r++){var s=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+i;e[r]=67108863&s,i=s<67108864?0:s/67108864|0}return e},g.prototype.convert13b=function(e,t,i,s){for(var n=0,a=0;a<t;a++)n+=0|e[a],i[2*a]=8191&n,n>>>=13,i[2*a+1]=8191&n,n>>>=13;for(a=2*t;a<s;++a)i[a]=0;r(0===n),r(0==(-8192&n))},g.prototype.stub=function(e){for(var t=new Array(e),i=0;i<e;i++)t[i]=0;return t},g.prototype.mulp=function(e,t,i){var r=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(r),n=this.stub(r),a=new Array(r),o=new Array(r),h=new Array(r),c=new Array(r),d=new Array(r),f=new Array(r),u=i.words;u.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,n,o,h,r,s),this.transform(c,n,d,f,r,s);for(var l=0;l<r;l++){var p=o[l]*d[l]-h[l]*f[l];h[l]=o[l]*f[l]+h[l]*d[l],o[l]=p}return this.conjugate(o,h,r),this.transform(o,h,u,n,r,s),this.conjugate(u,n,r),this.normalize13b(u,r),i.negative=e.negative^t.negative,i.length=e.length+t.length,i._strip()},n.prototype.mul=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},n.prototype.mulf=function(e){var t=new n(null);return t.words=new Array(this.length+e.length),b(this,e,t)},n.prototype.imul=function(e){return this.clone().mulTo(e,this)},n.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var i=0,s=0;s<this.length;s++){var n=(0|this.words[s])*e,a=(67108863&n)+(67108863&i);i>>=26,i+=n/67108864|0,i+=a>>>26,this.words[s]=67108863&a}return 0!==i&&(this.words[s]=i,this.length++),t?this.ineg():this},n.prototype.muln=function(e){return this.clone().imuln(e)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),i=0;i<t.length;i++){var r=i/26|0,s=i%26;t[i]=e.words[r]>>>s&1}return t}(e);if(0===t.length)return new n(1);for(var i=this,r=0;r<t.length&&0===t[r];r++,i=i.sqr());if(++r<t.length)for(var s=i.sqr();r<t.length;r++,s=s.sqr())0!==t[r]&&(i=i.mul(s));return i},n.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,s=(e-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&n,h=(0|this.words[t])-o<<i;this.words[t]=h|a,a=o>>>26-i}a&&(this.words[t]=a,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this._strip()},n.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},n.prototype.iushrn=function(e,t,i){var s;r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var n=e%26,a=Math.min((e-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(s-=a,s=Math.max(0,s),h){for(var c=0;c<a;c++)h.words[c]=this.words[c];h.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var d=0;for(c=this.length-1;c>=0&&(0!==d||c>=s);c--){var f=0|this.words[c];this.words[c]=d<<26-n|f>>>n,d=f&o}return h&&0!==d&&(h.words[h.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},n.prototype.shln=function(e){return this.clone().ishln(e)},n.prototype.ushln=function(e){return this.clone().iushln(e)},n.prototype.shrn=function(e){return this.clone().ishrn(e)},n.prototype.ushrn=function(e){return this.clone().iushrn(e)},n.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,s=1<<t;return!(this.length<=i)&&!!(this.words[i]&s)},n.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this._strip()},n.prototype.maskn=function(e){return this.clone().imaskn(e)},n.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},n.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},n.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},n.prototype.addn=function(e){return this.clone().iaddn(e)},n.prototype.subn=function(e){return this.clone().isubn(e)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(e,t,i){var s,n,a=e.length+i;this._expand(a);var o=0;for(s=0;s<e.length;s++){n=(0|this.words[s+i])+o;var h=(0|e.words[s])*t;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[s+i]=67108863&n}for(;s<this.length-i;s++)o=(n=(0|this.words[s+i])+o)>>26,this.words[s+i]=67108863&n;if(0===o)return this._strip();for(r(-1===o),o=0,s=0;s<this.length;s++)o=(n=-(0|this.words[s])+o)>>26,this.words[s]=67108863&n;return this.negative=1,this._strip()},n.prototype._wordDiv=function(e,t){var i=(this.length,e.length),r=this.clone(),s=e,a=0|s.words[s.length-1];0!==(i=26-this._countBits(a))&&(s=s.ushln(i),r.iushln(i),a=0|s.words[s.length-1]);var o,h=r.length-s.length;if("mod"!==t){(o=new n(null)).length=h+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var d=r.clone()._ishlnsubmul(s,1,h);0===d.negative&&(r=d,o&&(o.words[h]=1));for(var f=h-1;f>=0;f--){var u=67108864*(0|r.words[s.length+f])+(0|r.words[s.length+f-1]);for(u=Math.min(u/a|0,67108863),r._ishlnsubmul(s,u,f);0!==r.negative;)u--,r.negative=0,r._ishlnsubmul(s,1,f),r.isZero()||(r.negative^=1);o&&(o.words[f]=u)}return o&&o._strip(),r._strip(),"div"!==t&&0!==i&&r.iushrn(i),{div:o||null,mod:r}},n.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(s=o.div.neg()),"div"!==t&&(a=o.mod.neg(),i&&0!==a.negative&&a.iadd(e)),{div:s,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(s=o.div.neg()),{div:s,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),i&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new n(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new n(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new n(this.modrn(e.words[0]))}:this._wordDiv(e,t);var s,a,o},n.prototype.div=function(e){return this.divmod(e,"div",!1).div},n.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},n.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},n.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var i=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),s=e.andln(1),n=i.cmp(r);return n<0||1===s&&0===n?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},n.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var i=(1<<26)%e,s=0,n=this.length-1;n>=0;n--)s=(i*s+(0|this.words[n]))%e;return t?-s:s},n.prototype.modn=function(e){return this.modrn(e)},n.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var i=0,s=this.length-1;s>=0;s--){var n=(0|this.words[s])+67108864*i;this.words[s]=n/e|0,i=n%e}return this._strip(),t?this.ineg():this},n.prototype.divn=function(e){return this.clone().idivn(e)},n.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s=new n(1),a=new n(0),o=new n(0),h=new n(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var d=i.clone(),f=t.clone();!t.isZero();){for(var u=0,l=1;0==(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)(s.isOdd()||a.isOdd())&&(s.iadd(d),a.isub(f)),s.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(d),h.isub(f)),o.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),s.isub(o),a.isub(h)):(i.isub(t),o.isub(s),h.isub(a))}return{a:o,b:h,gcd:i.iushln(c)}},n.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var s,a=new n(1),o=new n(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,d=1;0==(t.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);for(var f=0,u=1;0==(i.words[0]&u)&&f<26;++f,u<<=1);if(f>0)for(i.iushrn(f);f-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);t.cmp(i)>=0?(t.isub(i),a.isub(o)):(i.isub(t),o.isub(a))}return(s=0===t.cmpn(1)?a:o).cmpn(0)<0&&s.iadd(e),s},n.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),i=e.clone();t.negative=0,i.negative=0;for(var r=0;t.isEven()&&i.isEven();r++)t.iushrn(1),i.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;i.isEven();)i.iushrn(1);var s=t.cmp(i);if(s<0){var n=t;t=i,i=n}else if(0===s||0===i.cmpn(1))break;t.isub(i)}return i.iushln(r)},n.prototype.invm=function(e){return this.egcd(e).a.umod(e)},n.prototype.isEven=function(){return 0==(1&this.words[0])},n.prototype.isOdd=function(){return 1==(1&this.words[0])},n.prototype.andln=function(e){return this.words[0]&e},n.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,s=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=s,this;for(var n=s,a=i;0!==n&&a<this.length;a++){var o=0|this.words[a];n=(o+=n)>>>26,o&=67108863,this.words[a]=o}return 0!==n&&(this.words[a]=n,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},n.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},n.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],s=0|e.words[i];if(r!==s){r<s?t=-1:r>s&&(t=1);break}}return t},n.prototype.gtn=function(e){return 1===this.cmpn(e)},n.prototype.gt=function(e){return 1===this.cmp(e)},n.prototype.gten=function(e){return this.cmpn(e)>=0},n.prototype.gte=function(e){return this.cmp(e)>=0},n.prototype.ltn=function(e){return-1===this.cmpn(e)},n.prototype.lt=function(e){return-1===this.cmp(e)},n.prototype.lten=function(e){return this.cmpn(e)<=0},n.prototype.lte=function(e){return this.cmp(e)<=0},n.prototype.eqn=function(e){return 0===this.cmpn(e)},n.prototype.eq=function(e){return 0===this.cmp(e)},n.red=function(e){return new T(e)},n.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},n.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(e){return this.red=e,this},n.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},n.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},n.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},n.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},n.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},n.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},n.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},n.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},n.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new n(t,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"==typeof e){var t=n._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function O(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new n(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,i=e;do{this.split(i,this.tmp),t=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):i._strip(),i},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},s(w,v),w.prototype.split=function(e,t){for(var i=4194303,r=Math.min(e.length,9),s=0;s<r;s++)t.words[s]=e.words[s];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var n=e.words[9];for(t.words[t.length++]=n&i,s=10;s<e.length;s++){var a=0|e.words[s];e.words[s-10]=(a&i)<<4|n>>>22,n=a}n>>>=22,e.words[s-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,i=0;i<e.length;i++){var r=0|e.words[i];t+=977*r,e.words[i]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},s(S,v),s(_,v),s(k,v),k.prototype.imulK=function(e){for(var t=0,i=0;i<e.length;i++){var r=19*(0|e.words[i])+t,s=67108863&r;r>>>=26,e.words[i]=s,t=r}return 0!==t&&(e.words[e.length++]=t),e},n._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new S;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return y[e]=t,t},T.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var i=e.add(t);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var i=e.iadd(t);return i.cmp(this.m)>=0&&i.isub(this.m),i},T.prototype.sub=function(e,t){this._verify2(e,t);var i=e.sub(t);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var i=e.isub(t);return i.cmpn(0)<0&&i.iadd(this.m),i},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new n(1)).iushrn(2);return this.pow(e,i)}for(var s=this.m.subn(1),a=0;!s.isZero()&&0===s.andln(1);)a++,s.iushrn(1);r(!s.isZero());var o=new n(1).toRed(this),h=o.redNeg(),c=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new n(2*d*d).toRed(this);0!==this.pow(d,c).cmp(h);)d.redIAdd(h);for(var f=this.pow(d,s),u=this.pow(e,s.addn(1).iushrn(1)),l=this.pow(e,s),p=a;0!==l.cmp(o);){for(var m=l,b=0;0!==m.cmp(o);b++)m=m.redSqr();r(b<p);var g=this.pow(f,new n(1).iushln(p-b-1));u=u.redMul(g),f=g.redSqr(),l=l.redMul(f),p=b}return u},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new n(1).toRed(this);if(0===t.cmpn(1))return e.clone();var i=new Array(16);i[0]=new n(1).toRed(this),i[1]=e;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],e);var s=i[0],a=0,o=0,h=t.bitLength()%26;for(0===h&&(h=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],d=h-1;d>=0;d--){var f=c>>d&1;s!==i[0]&&(s=this.sqr(s)),0!==f||0!==a?(a<<=1,a|=f,(4===++o||0===r&&0===d)&&(s=this.mul(s,i[a]),o=0,a=0)):o=0}h=26}return s},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},n.mont=function(e){return new O(e)},s(O,T),O.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},O.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},O.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var i=e.imul(t),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},O.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new n(0)._forceRed(this);var i=e.mul(t),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(r).iushrn(this.shift),a=s;return s.cmp(this.m)>=0?a=s.isub(this.m):s.cmpn(0)<0&&(a=s.iadd(this.m)),a._forceRed(this)},O.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)},{buffer:65}],245:[function(e,t,i){var r,s;r=this,s=function(){var e,t,i,r,s,n=n||function(e,t){var i=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),r={},s=r.lib={},n=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=s.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,i=e.words,r=this.sigBytes,s=e.sigBytes;if(this.clamp(),r%4)for(var n=0;n<s;n++){var a=i[n>>>2]>>>24-n%4*8&255;t[r+n>>>2]|=a<<24-(r+n)%4*8}else for(n=0;n<s;n+=4)t[r+n>>>2]=i[n>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i,r=[],s=function(t){var i=987654321,r=4294967295;return function(){var s=((i=36969*(65535&i)+(i>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return s/=4294967296,(s+=.5)*(e.random()>.5?1:-1)}},n=0;n<t;n+=4){var o=s(4294967296*(i||e.random()));i=987654071*o(),r.push(4294967296*o()|0)}return new a.init(r,t)}}),o=r.enc={},h=o.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],s=0;s<i;s++){var n=t[s>>>2]>>>24-s%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new a.init(i,t/2)}},c=o.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],s=0;s<i;s++){var n=t[s>>>2]>>>24-s%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new a.init(i,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,r=i.words,s=i.sigBytes,n=this.blockSize,o=s/(4*n),h=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*n,c=e.min(4*h,s);if(h){for(var d=0;d<h;d+=n)this._doProcessBlock(r,d);var f=r.splice(0,h);i.sigBytes-=c}return new a.init(f,c)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),u=(s.Hasher=f.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}}),r.algo={});return r}(Math);return t=(e=n).lib.WordArray,e.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,r=this._map;e.clamp();for(var s=[],n=0;n<i;n+=3)for(var a=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,o=0;o<4&&n+.75*o<i;o++)s.push(r.charAt(a>>>6*(3-o)&63));var h=r.charAt(64);if(h)for(;s.length%4;)s.push(h);return s.join("")},parse:function(e){var i=e.length,r=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var n=0;n<r.length;n++)s[r.charCodeAt(n)]=n}var a=r.charAt(64);if(a){var o=e.indexOf(a);-1!==o&&(i=o)}return function(e,i,r){for(var s=[],n=0,a=0;a<i;a++)if(a%4){var o=r[e.charCodeAt(a-1)]<<a%4*2,h=r[e.charCodeAt(a)]>>>6-a%4*2;s[n>>>2]|=(o|h)<<24-n%4*8,n++}return t.create(s,n)}(e,i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){var t=n,i=t.lib,r=i.WordArray,s=i.Hasher,a=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var h=a.MD5=s.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var r=t+i,s=e[r];e[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var n=this._hash.words,a=e[t+0],h=e[t+1],l=e[t+2],p=e[t+3],m=e[t+4],b=e[t+5],g=e[t+6],y=e[t+7],v=e[t+8],w=e[t+9],S=e[t+10],_=e[t+11],k=e[t+12],T=e[t+13],O=e[t+14],x=e[t+15],A=n[0],M=n[1],E=n[2],I=n[3];A=c(A,M,E,I,a,7,o[0]),I=c(I,A,M,E,h,12,o[1]),E=c(E,I,A,M,l,17,o[2]),M=c(M,E,I,A,p,22,o[3]),A=c(A,M,E,I,m,7,o[4]),I=c(I,A,M,E,b,12,o[5]),E=c(E,I,A,M,g,17,o[6]),M=c(M,E,I,A,y,22,o[7]),A=c(A,M,E,I,v,7,o[8]),I=c(I,A,M,E,w,12,o[9]),E=c(E,I,A,M,S,17,o[10]),M=c(M,E,I,A,_,22,o[11]),A=c(A,M,E,I,k,7,o[12]),I=c(I,A,M,E,T,12,o[13]),E=c(E,I,A,M,O,17,o[14]),A=d(A,M=c(M,E,I,A,x,22,o[15]),E,I,h,5,o[16]),I=d(I,A,M,E,g,9,o[17]),E=d(E,I,A,M,_,14,o[18]),M=d(M,E,I,A,a,20,o[19]),A=d(A,M,E,I,b,5,o[20]),I=d(I,A,M,E,S,9,o[21]),E=d(E,I,A,M,x,14,o[22]),M=d(M,E,I,A,m,20,o[23]),A=d(A,M,E,I,w,5,o[24]),I=d(I,A,M,E,O,9,o[25]),E=d(E,I,A,M,p,14,o[26]),M=d(M,E,I,A,v,20,o[27]),A=d(A,M,E,I,T,5,o[28]),I=d(I,A,M,E,l,9,o[29]),E=d(E,I,A,M,y,14,o[30]),A=f(A,M=d(M,E,I,A,k,20,o[31]),E,I,b,4,o[32]),I=f(I,A,M,E,v,11,o[33]),E=f(E,I,A,M,_,16,o[34]),M=f(M,E,I,A,O,23,o[35]),A=f(A,M,E,I,h,4,o[36]),I=f(I,A,M,E,m,11,o[37]),E=f(E,I,A,M,y,16,o[38]),M=f(M,E,I,A,S,23,o[39]),A=f(A,M,E,I,T,4,o[40]),I=f(I,A,M,E,a,11,o[41]),E=f(E,I,A,M,p,16,o[42]),M=f(M,E,I,A,g,23,o[43]),A=f(A,M,E,I,w,4,o[44]),I=f(I,A,M,E,k,11,o[45]),E=f(E,I,A,M,x,16,o[46]),A=u(A,M=f(M,E,I,A,l,23,o[47]),E,I,a,6,o[48]),I=u(I,A,M,E,y,10,o[49]),E=u(E,I,A,M,O,15,o[50]),M=u(M,E,I,A,b,21,o[51]),A=u(A,M,E,I,k,6,o[52]),I=u(I,A,M,E,p,10,o[53]),E=u(E,I,A,M,S,15,o[54]),M=u(M,E,I,A,h,21,o[55]),A=u(A,M,E,I,v,6,o[56]),I=u(I,A,M,E,x,10,o[57]),E=u(E,I,A,M,g,15,o[58]),M=u(M,E,I,A,T,21,o[59]),A=u(A,M,E,I,m,6,o[60]),I=u(I,A,M,E,_,10,o[61]),E=u(E,I,A,M,l,15,o[62]),M=u(M,E,I,A,w,21,o[63]),n[0]=n[0]+A|0,n[1]=n[1]+M|0,n[2]=n[2]+E|0,n[3]=n[3]+I|0},_doFinalize:function(){var t=this._data,i=t.words,r=8*this._nDataBytes,s=8*t.sigBytes;i[s>>>5]|=128<<24-s%32;var n=e.floor(r/4294967296),a=r;i[15+(s+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i[14+(s+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(i.length+1),this._process();for(var o=this._hash,h=o.words,c=0;c<4;c++){var d=h[c];h[c]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,i,r,s,n,a){var o=e+(t&i|~t&r)+s+a;return(o<<n|o>>>32-n)+t}function d(e,t,i,r,s,n,a){var o=e+(t&r|i&~r)+s+a;return(o<<n|o>>>32-n)+t}function f(e,t,i,r,s,n,a){var o=e+(t^i^r)+s+a;return(o<<n|o>>>32-n)+t}function u(e,t,i,r,s,n,a){var o=e+(i^(t|~r))+s+a;return(o<<n|o>>>32-n)+t}t.MD5=s._createHelper(h),t.HmacMD5=s._createHmacHelper(h)}(Math),function(){var e=n,t=e.lib,i=t.WordArray,r=t.Hasher,s=e.algo,a=[],o=s.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],s=i[1],n=i[2],o=i[3],h=i[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var d=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=d<<1|d>>>31}var f=(r<<5|r>>>27)+h+a[c];f+=c<20?1518500249+(s&n|~s&o):c<40?1859775393+(s^n^o):c<60?(s&n|s&o|n&o)-1894007588:(s^n^o)-899497514,h=o,o=n,n=s<<30|s>>>2,s=r,r=f}i[0]=i[0]+r|0,i[1]=i[1]+s|0,i[2]=i[2]+n|0,i[3]=i[3]+o|0,i[4]=i[4]+h|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(o),e.HmacSHA1=r._createHmacHelper(o)}(),function(e){var t=n,i=t.lib,r=i.WordArray,s=i.Hasher,a=t.algo,o=[],h=[];!function(){function t(t){for(var i=e.sqrt(t),r=2;r<=i;r++)if(!(t%r))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var r=2,s=0;s<64;)t(r)&&(s<8&&(o[s]=i(e.pow(r,.5))),h[s]=i(e.pow(r,1/3)),s++),r++}();var c=[],d=a.SHA256=s.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],s=i[1],n=i[2],a=i[3],o=i[4],d=i[5],f=i[6],u=i[7],l=0;l<64;l++){if(l<16)c[l]=0|e[t+l];else{var p=c[l-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,b=c[l-2],g=(b<<15|b>>>17)^(b<<13|b>>>19)^b>>>10;c[l]=m+c[l-7]+g+c[l-16]}var y=r&s^r&n^s&n,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=u+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&f)+h[l]+c[l];u=f,f=d,d=o,o=a+w|0,a=n,n=s,s=r,r=w+(v+y)|0}i[0]=i[0]+r|0,i[1]=i[1]+s|0,i[2]=i[2]+n|0,i[3]=i[3]+a|0,i[4]=i[4]+o|0,i[5]=i[5]+d|0,i[6]=i[6]+f|0,i[7]=i[7]+u|0},_doFinalize:function(){var t=this._data,i=t.words,r=8*this._nDataBytes,s=8*t.sigBytes;return i[s>>>5]|=128<<24-s%32,i[14+(s+64>>>9<<4)]=e.floor(r/4294967296),i[15+(s+64>>>9<<4)]=r,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(d),t.HmacSHA256=s._createHmacHelper(d)}(Math),function(){var e=n,t=e.lib.WordArray,i=e.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],s=0;s<i;s+=2){var n=t[s>>>2]>>>16-s%4*8&65535;r.push(String.fromCharCode(n))}return r.join("")},parse:function(e){for(var i=e.length,r=[],s=0;s<i;s++)r[s>>>1]|=e.charCodeAt(s)<<16-s%2*16;return t.create(r,2*i)}},i.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,s=[],n=0;n<i;n+=2){var a=r(t[n>>>2]>>>16-n%4*8&65535);s.push(String.fromCharCode(a))}return s.join("")},parse:function(e){for(var i=e.length,s=[],n=0;n<i;n++)s[n>>>1]|=r(e.charCodeAt(n)<<16-n%2*16);return t.create(s,2*i)}}}(),function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init,i=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var i=e.byteLength,r=[],s=0;s<i;s++)r[s>>>2]|=e[s]<<24-s%4*8;t.call(this,r,i)}else t.apply(this,arguments)};i.prototype=e}}(),
/** @preserve
	(c) 2012 by Cdric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=n,i=t.lib,r=i.WordArray,s=i.Hasher,a=t.algo,o=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),h=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=r.create([0,1518500249,1859775393,2400959708,2840853838]),u=r.create([1352829926,1548603684,1836072691,2053994217,0]),l=a.RIPEMD160=s.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var r=t+i,s=e[r];e[r]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var n,a,l,w,S,_,k,T,O,x,A,M=this._hash.words,E=f.words,I=u.words,B=o.words,N=h.words,P=c.words,R=d.words;for(_=n=M[0],k=a=M[1],T=l=M[2],O=w=M[3],x=S=M[4],i=0;i<80;i+=1)A=n+e[t+B[i]]|0,A+=i<16?p(a,l,w)+E[0]:i<32?m(a,l,w)+E[1]:i<48?b(a,l,w)+E[2]:i<64?g(a,l,w)+E[3]:y(a,l,w)+E[4],A=(A=v(A|=0,P[i]))+S|0,n=S,S=w,w=v(l,10),l=a,a=A,A=_+e[t+N[i]]|0,A+=i<16?y(k,T,O)+I[0]:i<32?g(k,T,O)+I[1]:i<48?b(k,T,O)+I[2]:i<64?m(k,T,O)+I[3]:p(k,T,O)+I[4],A=(A=v(A|=0,R[i]))+x|0,_=x,x=O,O=v(T,10),T=k,k=A;A=M[1]+l+O|0,M[1]=M[2]+w+x|0,M[2]=M[3]+S+_|0,M[3]=M[4]+n+k|0,M[4]=M[0]+a+T|0,M[0]=A},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,n=s.words,a=0;a<5;a++){var o=n[a];n[a]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return s},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,i){return e^t^i}function m(e,t,i){return e&t|~e&i}function b(e,t,i){return(e|~t)^i}function g(e,t,i){return e&i|t&~i}function y(e,t,i){return e^(t|~i)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=s._createHelper(l),t.HmacRIPEMD160=s._createHmacHelper(l)}(Math),function(){var e=n,t=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,s=4*r;t.sigBytes>s&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),a=this._iKey=t.clone(),o=n.words,h=a.words,c=0;c<r;c++)o[c]^=1549556828,h[c]^=909522486;n.sigBytes=a.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})}(),function(){var e=n,t=e.lib,i=t.Base,r=t.WordArray,s=e.algo,a=s.SHA1,o=s.HMAC,h=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=o.create(i.hasher,e),n=r.create(),a=r.create([1]),h=n.words,c=a.words,d=i.keySize,f=i.iterations;h.length<d;){var u=s.update(t).finalize(a);s.reset();for(var l=u.words,p=l.length,m=u,b=1;b<f;b++){m=s.finalize(m),s.reset();for(var g=m.words,y=0;y<p;y++)l[y]^=g[y]}n.concat(u),c[0]++}return n.sigBytes=4*d,n}});e.PBKDF2=function(e,t,i){return h.create(i).compute(e,t)}}(),function(){var e=n,t=e.lib,i=t.Base,r=t.WordArray,s=e.algo,a=s.MD5,o=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,s=i.hasher.create(),n=r.create(),a=n.words,o=i.keySize,h=i.iterations;a.length<o;){c&&s.update(c);var c=s.update(e).finalize(t);s.reset();for(var d=1;d<h;d++)c=s.finalize(c),s.reset();n.concat(c)}return n.sigBytes=4*o,n}});e.EvpKDF=function(e,t,i){return o.create(i).compute(e,t)}}(),function(){var e=n,t=e.lib.WordArray,i=e.algo,r=i.SHA256,s=i.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(s),e.HmacSHA224=r._createHmacHelper(s)}(),function(e){var t=n,i=t.lib,r=i.Base,s=i.WordArray,a=t.x64={};a.Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],r=0;r<t;r++){var n=e[r];i.push(n.high),i.push(n.low)}return s.create(i,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),i=t.length,s=0;s<i;s++)t[s]=t[s].clone();return e}})}(),function(e){var t=n,i=t.lib,r=i.WordArray,s=i.Hasher,a=t.x64.Word,o=t.algo,h=[],c=[],d=[];!function(){for(var e=1,t=0,i=0;i<24;i++){h[e+5*t]=(i+1)*(i+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var s=1,n=0;n<24;n++){for(var o=0,f=0,u=0;u<7;u++){if(1&s){var l=(1<<u)-1;l<32?f^=1<<l:o^=1<<l-32}128&s?s=s<<1^113:s<<=1}d[n]=a.create(o,f)}}();var f=[];!function(){for(var e=0;e<25;e++)f[e]=a.create()}();var u=o.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,r=this.blockSize/2,s=0;s<r;s++){var n=e[t+2*s],a=e[t+2*s+1];n=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(M=i[s]).high^=a,M.low^=n}for(var o=0;o<24;o++){for(var u=0;u<5;u++){for(var l=0,p=0,m=0;m<5;m++)l^=(M=i[u+5*m]).high,p^=M.low;var b=f[u];b.high=l,b.low=p}for(u=0;u<5;u++){var g=f[(u+4)%5],y=f[(u+1)%5],v=y.high,w=y.low;for(l=g.high^(v<<1|w>>>31),p=g.low^(w<<1|v>>>31),m=0;m<5;m++)(M=i[u+5*m]).high^=l,M.low^=p}for(var S=1;S<25;S++){var _=(M=i[S]).high,k=M.low,T=h[S];T<32?(l=_<<T|k>>>32-T,p=k<<T|_>>>32-T):(l=k<<T-32|_>>>64-T,p=_<<T-32|k>>>64-T);var O=f[c[S]];O.high=l,O.low=p}var x=f[0],A=i[0];for(x.high=A.high,x.low=A.low,u=0;u<5;u++)for(m=0;m<5;m++){var M=i[S=u+5*m],E=f[S],I=f[(u+1)%5+5*m],B=f[(u+2)%5+5*m];M.high=E.high^~I.high&B.high,M.low=E.low^~I.low&B.low}M=i[0];var N=d[o];M.high^=N.high,M.low^=N.low}},_doFinalize:function(){var t=this._data,i=t.words,s=(this._nDataBytes,8*t.sigBytes),n=32*this.blockSize;i[s>>>5]|=1<<24-s%32,i[(e.ceil((s+1)/n)*n>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var a=this._state,o=this.cfg.outputLength/8,h=o/8,c=[],d=0;d<h;d++){var f=a[d],u=f.high,l=f.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c.push(l),c.push(u)}return new r.init(c,o)},clone:function(){for(var e=s.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});t.SHA3=s._createHelper(u),t.HmacSHA3=s._createHmacHelper(u)}(Math),function(){var e=n,t=e.lib.Hasher,i=e.x64,r=i.Word,s=i.WordArray,a=e.algo;function o(){return r.create.apply(r,arguments)}var h=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=o()}();var d=a.SHA512=t.extend({_doReset:function(){this._hash=new s.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],s=i[1],n=i[2],a=i[3],o=i[4],d=i[5],f=i[6],u=i[7],l=r.high,p=r.low,m=s.high,b=s.low,g=n.high,y=n.low,v=a.high,w=a.low,S=o.high,_=o.low,k=d.high,T=d.low,O=f.high,x=f.low,A=u.high,M=u.low,E=l,I=p,B=m,N=b,P=g,R=y,C=v,L=w,D=S,j=_,F=k,V=T,z=O,q=x,U=A,H=M,G=0;G<80;G++){var K=c[G];if(G<16)var W=K.high=0|e[t+2*G],Z=K.low=0|e[t+2*G+1];else{var X=c[G-15],Y=X.high,$=X.low,J=(Y>>>1|$<<31)^(Y>>>8|$<<24)^Y>>>7,Q=($>>>1|Y<<31)^($>>>8|Y<<24)^($>>>7|Y<<25),ee=c[G-2],te=ee.high,ie=ee.low,re=(te>>>19|ie<<13)^(te<<3|ie>>>29)^te>>>6,se=(ie>>>19|te<<13)^(ie<<3|te>>>29)^(ie>>>6|te<<26),ne=c[G-7],ae=ne.high,oe=ne.low,he=c[G-16],ce=he.high,de=he.low;W=(W=(W=J+ae+((Z=Q+oe)>>>0<Q>>>0?1:0))+re+((Z+=se)>>>0<se>>>0?1:0))+ce+((Z+=de)>>>0<de>>>0?1:0),K.high=W,K.low=Z}var fe,ue=D&F^~D&z,le=j&V^~j&q,pe=E&B^E&P^B&P,me=I&N^I&R^N&R,be=(E>>>28|I<<4)^(E<<30|I>>>2)^(E<<25|I>>>7),ge=(I>>>28|E<<4)^(I<<30|E>>>2)^(I<<25|E>>>7),ye=(D>>>14|j<<18)^(D>>>18|j<<14)^(D<<23|j>>>9),ve=(j>>>14|D<<18)^(j>>>18|D<<14)^(j<<23|D>>>9),we=h[G],Se=we.high,_e=we.low,ke=U+ye+((fe=H+ve)>>>0<H>>>0?1:0),Te=ge+me;U=z,H=q,z=F,q=V,F=D,V=j,D=C+(ke=(ke=(ke=ke+ue+((fe+=le)>>>0<le>>>0?1:0))+Se+((fe+=_e)>>>0<_e>>>0?1:0))+W+((fe+=Z)>>>0<Z>>>0?1:0))+((j=L+fe|0)>>>0<L>>>0?1:0)|0,C=P,L=R,P=B,R=N,B=E,N=I,E=ke+(be+pe+(Te>>>0<ge>>>0?1:0))+((I=fe+Te|0)>>>0<fe>>>0?1:0)|0}p=r.low=p+I,r.high=l+E+(p>>>0<I>>>0?1:0),b=s.low=b+N,s.high=m+B+(b>>>0<N>>>0?1:0),y=n.low=y+R,n.high=g+P+(y>>>0<R>>>0?1:0),w=a.low=w+L,a.high=v+C+(w>>>0<L>>>0?1:0),_=o.low=_+j,o.high=S+D+(_>>>0<j>>>0?1:0),T=d.low=T+V,d.high=k+F+(T>>>0<V>>>0?1:0),x=f.low=x+q,f.high=O+z+(x>>>0<q>>>0?1:0),M=u.low=M+H,u.high=A+U+(M>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(r+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(d),e.HmacSHA512=t._createHmacHelper(d)}(),function(){var e=n,t=e.x64,i=t.Word,r=t.WordArray,s=e.algo,a=s.SHA512,o=s.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=a._createHelper(o),e.HmacSHA384=a._createHmacHelper(o)}(),n.lib.Cipher||function(e){var t=n,i=t.lib,r=i.Base,s=i.WordArray,a=i.BufferedBlockAlgorithm,o=t.enc,h=(o.Utf8,o.Base64),c=t.algo.EvpKDF,d=i.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:g}return function(t){return{encrypt:function(i,r,s){return e(r).encrypt(t,i,r,s)},decrypt:function(i,r,s){return e(r).decrypt(t,i,r,s)}}}}()}),f=(i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),u=i.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),l=f.CBC=function(){var e=u.extend();function t(e,t,i){var r=this._iv;if(r){var s=r;this._iv=void 0}else s=this._prevBlock;for(var n=0;n<i;n++)e[t+n]^=s[n]}return e.Encryptor=e.extend({processBlock:function(e,i){var r=this._cipher,s=r.blockSize;t.call(this,e,i,s),r.encryptBlock(e,i),this._prevBlock=e.slice(i,i+s)}}),e.Decryptor=e.extend({processBlock:function(e,i){var r=this._cipher,s=r.blockSize,n=e.slice(i,i+s);r.decryptBlock(e,i),t.call(this,e,i,s),this._prevBlock=n}}),e}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,r=i-e.sigBytes%i,n=r<<24|r<<16|r<<8|r,a=[],o=0;o<r;o+=4)a.push(n);var h=s.create(a,r);e.concat(h)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},m=(i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:l,padding:p}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=i.createEncryptor;else r=i.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(i,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),b=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var r=s.create([1398893684,1701076831]).concat(i).concat(t);else r=t;return r.toString(h)},parse:function(e){var t=h.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var r=s.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return m.create({ciphertext:t,salt:r})}},g=i.SerializableCipher=r.extend({cfg:r.extend({format:b}),encrypt:function(e,t,i,r){r=this.cfg.extend(r);var s=e.createEncryptor(i,r),n=s.finalize(t),a=s.cfg;return m.create({ciphertext:n,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,i,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(i,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,i,r){r||(r=s.random(8));var n=c.create({keySize:t+i}).compute(e,r),a=s.create(n.words.slice(t),4*i);return n.sigBytes=4*t,m.create({key:n,iv:a,salt:r})}},v=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:y}),encrypt:function(e,t,i,r){var s=(r=this.cfg.extend(r)).kdf.execute(i,e.keySize,e.ivSize);r.iv=s.iv;var n=g.encrypt.call(this,e,t,s.key,r);return n.mixIn(s),n},decrypt:function(e,t,i,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var s=r.kdf.execute(i,e.keySize,e.ivSize,t.salt);return r.iv=s.iv,g.decrypt.call(this,e,t,s.key,r)}})}(),n.mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,i,r){var s=this._iv;if(s){var n=s.slice(0);this._iv=void 0}else n=this._prevBlock;r.encryptBlock(n,0);for(var a=0;a<i;a++)e[t+a]^=n[a]}return e.Encryptor=e.extend({processBlock:function(e,i){var r=this._cipher,s=r.blockSize;t.call(this,e,i,s,r),this._prevBlock=e.slice(i,i+s)}}),e.Decryptor=e.extend({processBlock:function(e,i){var r=this._cipher,s=r.blockSize,n=e.slice(i,i+s);t.call(this,e,i,s,r),this._prevBlock=n}}),e}(),n.mode.ECB=((i=n.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),i.Decryptor=i.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),i),n.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,r=4*t,s=r-i%r,n=i+s-1;e.clamp(),e.words[n>>>2]|=s<<24-n%4*8,e.sigBytes+=s},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126={pad:function(e,t){var i=4*t,r=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(r-1)).concat(n.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.mode.OFB=(r=n.lib.BlockCipherMode.extend(),s=r.Encryptor=r.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,s=this._iv,n=this._keystream;s&&(n=this._keystream=s.slice(0),this._iv=void 0),i.encryptBlock(n,0);for(var a=0;a<r;a++)e[t+a]^=n[a]}}),r.Decryptor=s,r),n.pad.NoPadding={pad:function(){},unpad:function(){}},function(e){var t=n,i=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return i.create({ciphertext:t})}}}(),function(){var e=n,t=e.lib.BlockCipher,i=e.algo,r=[],s=[],a=[],o=[],h=[],c=[],d=[],f=[],u=[],l=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var p=n^n<<1^n<<2^n<<3^n<<4;p=p>>>8^255&p^99,r[i]=p,s[p]=i;var m=e[i],b=e[m],g=e[b],y=257*e[p]^16843008*p;a[i]=y<<24|y>>>8,o[i]=y<<16|y>>>16,h[i]=y<<8|y>>>24,c[i]=y,y=16843009*g^65537*b^257*m^16843008*i,d[p]=y<<24|y>>>8,f[p]=y<<16|y>>>16,u[p]=y<<8|y>>>24,l[p]=y,i?(i=m^e[e[e[g^m]]],n^=e[e[n]]):i=n=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,s=4*((this._nRounds=i+6)+1),n=this._keySchedule=[],a=0;a<s;a++)if(a<i)n[a]=t[a];else{var o=n[a-1];a%i?i>6&&a%i==4&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=p[a/i|0]<<24),n[a]=n[a-i]^o}for(var h=this._invKeySchedule=[],c=0;c<s;c++)a=s-c,o=c%4?n[a]:n[a-4],h[c]=c<4||a<=4?o:d[r[o>>>24]]^f[r[o>>>16&255]]^u[r[o>>>8&255]]^l[r[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,h,c,r)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,d,f,u,l,s),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,r,s,n,a,o){for(var h=this._nRounds,c=e[t]^i[0],d=e[t+1]^i[1],f=e[t+2]^i[2],u=e[t+3]^i[3],l=4,p=1;p<h;p++){var m=r[c>>>24]^s[d>>>16&255]^n[f>>>8&255]^a[255&u]^i[l++],b=r[d>>>24]^s[f>>>16&255]^n[u>>>8&255]^a[255&c]^i[l++],g=r[f>>>24]^s[u>>>16&255]^n[c>>>8&255]^a[255&d]^i[l++],y=r[u>>>24]^s[c>>>16&255]^n[d>>>8&255]^a[255&f]^i[l++];c=m,d=b,f=g,u=y}m=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[f>>>8&255]<<8|o[255&u])^i[l++],b=(o[d>>>24]<<24|o[f>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^i[l++],g=(o[f>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^i[l++],y=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&f])^i[l++],e[t]=m,e[t+1]=b,e[t+2]=g,e[t+3]=y},keySize:8});e.AES=t._createHelper(m)}(),function(){var e=n,t=e.lib,i=t.WordArray,r=t.BlockCipher,s=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=s.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var r=a[i]-1;t[i]=e[r>>>5]>>>31-r%32&1}for(var s=this._subKeys=[],n=0;n<16;n++){var c=s[n]=[],d=h[n];for(i=0;i<24;i++)c[i/6|0]|=t[(o[i]-1+d)%28]<<31-i%6,c[4+(i/6|0)]|=t[28+(o[i+24]-1+d)%28]<<31-i%6;for(c[0]=c[0]<<1|c[0]>>>31,i=1;i<7;i++)c[i]=c[i]>>>4*(i-1)+3;c[7]=c[7]<<5|c[7]>>>27}var f=this._invSubKeys=[];for(i=0;i<16;i++)f[i]=s[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],u.call(this,4,252645135),u.call(this,16,65535),l.call(this,2,858993459),l.call(this,8,16711935),u.call(this,1,1431655765);for(var r=0;r<16;r++){for(var s=i[r],n=this._lBlock,a=this._rBlock,o=0,h=0;h<8;h++)o|=c[h][((a^s[h])&d[h])>>>0];this._lBlock=a,this._rBlock=n^o}var f=this._lBlock;this._lBlock=this._rBlock,this._rBlock=f,u.call(this,1,1431655765),l.call(this,8,16711935),l.call(this,2,858993459),u.call(this,16,65535),u.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function u(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function l(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=r._createHelper(f);var p=s.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=f.createEncryptor(i.create(e.slice(0,2))),this._des2=f.createEncryptor(i.create(e.slice(2,4))),this._des3=f.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(p)}(),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,r=this._S=[],s=0;s<256;s++)r[s]=s;s=0;for(var n=0;s<256;s++){var a=s%i,o=t[a>>>2]>>>24-a%4*8&255;n=(n+r[s]+o)%256;var h=r[s];r[s]=r[n],r[n]=h}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=s.call(this)},keySize:8,ivSize:0});function s(){for(var e=this._S,t=this._i,i=this._j,r=0,s=0;s<4;s++){i=(i+e[t=(t+1)%256])%256;var n=e[t];e[t]=e[i],e[i]=n,r|=e[(e[t]+e[i])%256]<<24-8*s}return this._i=t,this._j=i,r}e.RC4=t._createHelper(r);var a=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)s.call(this)}});e.RC4Drop=t._createHelper(a)}(),
/** @preserve
                     * Counter block mode compatible with  Dr Brian Gladman fileenc.c
                     * derived from CryptoJS.mode.CTR
                     * Jan Hruby jhruby.web@gmail.com
                     */
n.mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,r=255&e;255===t?(t=0,255===i?(i=0,255===r?r=0:++r):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=r}else e+=1<<24;return e}var i=e.Encryptor=e.extend({processBlock:function(e,i){var r=this._cipher,s=r.blockSize,n=this._iv,a=this._counter;n&&(a=this._counter=n.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(a);var o=a.slice(0);r.encryptBlock(o,0);for(var h=0;h<s;h++)e[i+h]^=o[h]}});return e.Decryptor=i,e}(),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=[],s=[],a=[],o=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],s=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,i=0;i<4;i++)h.call(this);for(i=0;i<8;i++)s[i]^=r[i+4&7];if(t){var n=t.words,a=n[0],o=n[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),f=c>>>16|4294901760&d,u=d<<16|65535&c;for(s[0]^=c,s[1]^=f,s[2]^=d,s[3]^=u,s[4]^=c,s[5]^=f,s[6]^=d,s[7]^=u,i=0;i<4;i++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)s[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,i=0;i<8;i++){var r=e[i]+t[i],n=65535&r,o=r>>>16,h=((n*n>>>17)+n*o>>>15)+o*o,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[i]=h^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=t._createHelper(o)}(),n.mode.CTR=function(){var e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,s=this._iv,n=this._counter;s&&(n=this._counter=s.slice(0),this._iv=void 0);var a=n.slice(0);i.encryptBlock(a,0),n[r-1]=n[r-1]+1|0;for(var o=0;o<r;o++)e[t+o]^=a[o]}});return e.Decryptor=t,e}(),function(){var e=n,t=e.lib.StreamCipher,i=e.algo,r=[],s=[],a=[],o=i.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var s=0;s<4;s++)h.call(this);for(s=0;s<8;s++)r[s]^=i[s+4&7];if(t){var n=t.words,a=n[0],o=n[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),f=c>>>16|4294901760&d,u=d<<16|65535&c;for(r[0]^=c,r[1]^=f,r[2]^=d,r[3]^=u,r[4]^=c,r[5]^=f,r[6]^=d,r[7]^=u,s=0;s<4;s++)h.call(this)}},_doProcessBlock:function(e,t){var i=this._X;h.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var s=0;s<4;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),e[t+s]^=r[s]},blockSize:4,ivSize:2});function h(){for(var e=this._X,t=this._C,i=0;i<8;i++)s[i]=t[i];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0,i=0;i<8;i++){var r=e[i]+t[i],n=65535&r,o=r>>>16,h=((n*n>>>17)+n*o>>>15)+o*o,c=((4294901760&r)*r|0)+((65535&r)*r|0);a[i]=h^c}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=t._createHelper(o)}(),n.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},n},"object"==typeof i?t.exports=i=s():"function"==typeof define&&define.amd?define([],s):r.CryptoJS=s()},{}],246:[function(e,t,i){"use strict";var r=i;r.inherits=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e},r.version="6.5.0",r.utils=e("./elliptic/utils"),r.curve=e("./elliptic/curve"),r.curves=e("./elliptic/curves"),r.ec=e("./elliptic/ec"),r.eddsa=e("./elliptic/eddsa")},{"./elliptic/curve":249,"./elliptic/curves":252,"./elliptic/ec":253,"./elliptic/eddsa":256,"./elliptic/utils":260}],247:[function(e,t,i){"use strict";var r=e("../../../../BN/bn"),s=e("../../elliptic").utils,n=s.getNAF,a=s.getJSF,o=s.assert;function h(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}t.exports=h,h.prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(e,t){o(e.precomputed);var i=e._getDoubles(),r=n(t,1),s=(1<<i.step+1)-(i.step%2==0?2:1);s/=3;for(var a=[],h=0;h<r.length;h+=i.step){var c=0;for(t=h+i.step-1;t>=h;t--)c=(c<<1)+r[t];a.push(c)}for(var d=this.jpoint(null,null,null),f=this.jpoint(null,null,null),u=s;u>0;u--){for(h=0;h<a.length;h++){(c=a[h])===u?f=f.mixedAdd(i.points[h]):c===-u&&(f=f.mixedAdd(i.points[h].neg()))}d=d.add(f)}return d.toP()},h.prototype._wnafMul=function(e,t){var i=4,r=e._getNAFPoints(i);i=r.wnd;for(var s=r.points,a=n(t,i),h=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(t=0;c>=0&&0===a[c];c--)t++;if(c>=0&&t++,h=h.dblp(t),c<0)break;var d=a[c];o(0!==d),h="affine"===e.type?d>0?h.mixedAdd(s[d-1>>1]):h.mixedAdd(s[-d-1>>1].neg()):d>0?h.add(s[d-1>>1]):h.add(s[-d-1>>1].neg())}return"affine"===e.type?h.toP():h},h.prototype._wnafMulAdd=function(e,t,i,r,s){for(var o=this._wnafT1,h=this._wnafT2,c=this._wnafT3,d=0,f=0;f<r;f++){var u=(O=t[f])._getNAFPoints(e);o[f]=u.wnd,h[f]=u.points}for(f=r-1;f>=1;f-=2){var l=f-1,p=f;if(1===o[l]&&1===o[p]){var m=[t[l],null,null,t[p]];0===t[l].y.cmp(t[p].y)?(m[1]=t[l].add(t[p]),m[2]=t[l].toJ().mixedAdd(t[p].neg())):0===t[l].y.cmp(t[p].y.redNeg())?(m[1]=t[l].toJ().mixedAdd(t[p]),m[2]=t[l].add(t[p].neg())):(m[1]=t[l].toJ().mixedAdd(t[p]),m[2]=t[l].toJ().mixedAdd(t[p].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],g=a(i[l],i[p]);d=Math.max(g[0].length,d),c[l]=new Array(d),c[p]=new Array(d);for(var y=0;y<d;y++){var v=0|g[0][y],w=0|g[1][y];c[l][y]=b[3*(v+1)+(w+1)],c[p][y]=0,h[l]=m}}else c[l]=n(i[l],o[l]),c[p]=n(i[p],o[p]),d=Math.max(c[l].length,d),d=Math.max(c[p].length,d)}var S=this.jpoint(null,null,null),_=this._wnafT4;for(f=d;f>=0;f--){for(var k=0;f>=0;){var T=!0;for(y=0;y<r;y++)_[y]=0|c[y][f],0!==_[y]&&(T=!1);if(!T)break;k++,f--}if(f>=0&&k++,S=S.dblp(k),f<0)break;for(y=0;y<r;y++){var O,x=_[y];0!==x&&(x>0?O=h[y][x-1>>1]:x<0&&(O=h[y][-x-1>>1].neg()),S="affine"===O.type?S.mixedAdd(O):S.add(O))}}for(f=0;f<r;f++)h[f]=null;return s?S:S.toP()},h.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(e,t){e=s.toArray(e,t);var i=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*i)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));if((2===e[0]||3===e[0])&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return s.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,s=0;s<t;s+=e){for(var n=0;n<e;n++)r=r.dbl();i.push(r)}return{step:e,points:i}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,r=1===i?null:this.dbl(),s=1;s<i;s++)t[s]=t[s-1].add(r);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}},{"../../../../BN/bn":244,"../../elliptic":246}],248:[function(e,t,i){"use strict";var r=e("../curve"),s=e("../../elliptic"),n=e("../../../../BN/bn"),a=s.inherits,o=r.base,h=s.utils.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),h(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function d(e,t,i,r,s){o.BasePoint.call(this,e,"projective"),null===t&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(i,16),this.z=r?new n(r,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(c,o),t.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,i,r){return this.point(e,t,i,r)},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),r=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=r.redMul(s.redInvm()),o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var h=o.fromRed().isOdd();return(t&&!h||!t&&h)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr(),r=i.redSub(this.one),s=i.redMul(this.d).redAdd(this.one),a=r.redMul(s.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=a.redSqrt();if(0!==o.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return o.isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),r=t.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return 0===r.cmp(s)},a(d,o.BasePoint),c.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},c.prototype.point=function(e,t,i,r){return new d(this,e,t,i,r)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),n=r.redAdd(t),a=n.redSub(i),o=r.redSub(t),h=s.redMul(a),c=n.redMul(o),d=s.redMul(o),f=a.redMul(n);return this.curve.point(h,c,f,d)},d.prototype._projDbl=function(){var e,t,i,r=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var a=(c=this.curve._mulA(s)).redAdd(n);if(this.zOne)e=r.redSub(s).redSub(n).redMul(a.redSub(this.curve.two)),t=a.redMul(c.redSub(n)),i=a.redSqr().redSub(a).redSub(a);else{var o=this.z.redSqr(),h=a.redSub(o).redISub(o);e=r.redSub(s).redISub(n).redMul(h),t=a.redMul(c.redSub(n)),i=a.redMul(h)}}else{var c=s.redAdd(n);o=this.curve._mulC(this.c.redMul(this.z)).redSqr(),h=c.redSub(o).redSub(o);e=this.curve._mulC(r.redISub(c)).redMul(h),t=this.curve._mulC(c).redMul(s.redISub(n)),i=c.redMul(h)}return this.curve.point(e,t,i)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),n=i.redSub(t),a=s.redSub(r),o=s.redAdd(r),h=i.redAdd(t),c=n.redMul(a),d=o.redMul(h),f=n.redMul(h),u=a.redMul(o);return this.curve.point(c,d,u,f)},d.prototype._projAdd=function(e){var t,i,r=this.z.redMul(e.z),s=r.redSqr(),n=this.x.redMul(e.x),a=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(a),h=s.redSub(o),c=s.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(a),f=r.redMul(h).redMul(d);return this.curve.twisted?(t=r.redMul(c).redMul(a.redSub(this.curve._mulA(n))),i=h.redMul(c)):(t=r.redMul(c).redMul(a.redSub(n)),i=this.curve._mulC(h).redMul(c)),this.curve.point(f,t,i)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)},d.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var i=e.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}return!1},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},{"../../../../BN/bn":244,"../../elliptic":246,"../curve":249}],249:[function(e,t,i){"use strict";var r=i;r.base=e("./base"),r.short=e("./short"),r.mont=e("./mont"),r.edwards=e("./edwards")},{"./base":247,"./edwards":248,"./mont":250,"./short":251}],250:[function(e,t,i){"use strict";var r=e("../curve"),s=e("../../../../BN/bn"),n=e("../../elliptic").inherits,a=r.base,o=e("../../elliptic").utils;function h(e){a.call(this,"mont",e),this.a=new s(e.a,16).toRed(this.red),this.b=new s(e.b,16).toRed(this.red),this.i4=new s(4).toRed(this.red).redInvm(),this.two=new s(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,i){a.BasePoint.call(this,e,"projective"),null===t&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new s(t,16),this.z=new s(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(h,a),t.exports=h,h.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),r=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},n(c,a.BasePoint),h.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},h.prototype.point=function(e,t){return new c(this,e,t)},h.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),i=e.redSub(t),r=e.redMul(t),s=i.redMul(t.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,s)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),s=e.x.redAdd(e.z),n=e.x.redSub(e.z).redMul(i),a=s.redMul(r),o=t.z.redMul(n.redAdd(a).redSqr()),h=t.x.redMul(n.redISub(a).redSqr());return this.curve.point(o,h)},c.prototype.mul=function(e){for(var t=e.clone(),i=this,r=this.curve.point(null,null),s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var n=s.length-1;n>=0;n--)0===s[n]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../../../BN/bn":244,"../../elliptic":246,"../curve":249}],251:[function(e,t,i){"use strict";var r=e("../curve"),s=e("../../elliptic"),n=e("../../../../BN/bn"),a=s.inherits,o=r.base,h=s.utils.assert;function c(e){o.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,i,r){o.BasePoint.call(this,e,"affine"),null===t&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(e,t,i,r){o.BasePoint.call(this,e,"jacobian"),null===t&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(i,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(c,o),t.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,i;if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)i=new n(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?i=s[0]:(i=s[1],h(0===this.g.mul(i).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:i,basis:e.basis?e.basis.map((function(e){return{a:new n(e.a,16),b:new n(e.b,16)}})):this._getEndoBasis(i)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),i=new n(2).toRed(t).redInvm(),r=i.redNeg(),s=new n(3).toRed(t).redNeg().redSqrt().redMul(i);return[r.redAdd(s).fromRed(),r.redSub(s).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,i,r,s,a,o,h,c,d,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=e,l=this.n.clone(),p=new n(1),m=new n(0),b=new n(0),g=new n(1),y=0;0!==u.cmpn(0);){var v=l.div(u);c=l.sub(v.mul(u)),d=b.sub(v.mul(p));var w=g.sub(v.mul(m));if(!r&&c.cmp(f)<0)t=h.neg(),i=p,r=c.neg(),s=d;else if(r&&2==++y)break;h=c,l=u,u=c,b=p,p=d,g=m,m=w}a=c.neg(),o=d;var S=r.sqr().add(s.sqr());return a.sqr().add(o.sqr()).cmp(S)>=0&&(a=t,o=i),r.negative&&(r=r.neg(),s=s.neg()),a.negative&&(a=a.neg(),o=o.neg()),[{a:r,b:s},{a:a,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],r=t[1],s=r.b.mul(e).divRound(this.n),n=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),o=n.mul(r.a),h=s.mul(i.b),c=n.mul(r.b);return{k1:e.sub(a).sub(o),k2:h.add(c).neg()}},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var s=r.fromRed().isOdd();return(t&&!s||!t&&s)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,r=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(s).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,i){for(var r=this._endoWnafT1,s=this._endoWnafT2,n=0;n<e.length;n++){var a=this._endoSplit(t[n]),o=e[n],h=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),h=h.neg(!0)),r[2*n]=o,r[2*n+1]=h,s[2*n]=a.k1,s[2*n+1]=a.k2}for(var c=this._wnafMulAdd(1,r,s,2*n,i),d=0;d<2*n;d++)r[d]=null,s[d]=null;return c},a(d,o.BasePoint),c.prototype.point=function(e,t,i){return new d(this,e,t,i)},c.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,r=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,i){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],i);if(!t[2])return r;function s(t){return e.point(t[0],t[1],i)}var n=t[2];return r.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[r].concat(n.doubles.points.map(s))},naf:n.naf&&{wnd:n.naf.wnd,points:[r].concat(n.naf.points.map(s))}},r},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),r=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(r),n=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,a)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new n(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,i){var r=[this,t],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,s):this.curve._wnafMulAdd(1,r,s,2)},d.prototype.jmulAdd=function(e,t,i){var r=[this,t],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,s,!0):this.curve._wnafMulAdd(1,r,s,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return t},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(f,o.BasePoint),c.prototype.jpoint=function(e,t,i){return new f(this,e,t,i)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(i,r)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(t),s=e.x.redMul(i),n=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),o=r.redSub(s),h=n.redSub(a);if(0===o.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),d=c.redMul(o),f=r.redMul(c),u=h.redSqr().redIAdd(d).redISub(f).redISub(f),l=h.redMul(f.redISub(u)).redISub(n.redMul(d)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(u,l,p)},f.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,r=e.x.redMul(t),s=this.y,n=e.y.redMul(t).redMul(this.z),a=i.redSub(r),o=s.redSub(n);if(0===a.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=a.redSqr(),c=h.redMul(a),d=i.redMul(h),f=o.redSqr().redIAdd(c).redISub(d).redISub(d),u=o.redMul(d.redISub(f)).redISub(s.redMul(c)),l=this.z.redMul(a);return this.curve.jpoint(f,u,l)},f.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,i=0;i<e;i++)t=t.dbl();return t}var r=this.curve.a,s=this.curve.tinv,n=this.x,a=this.y,o=this.z,h=o.redSqr().redSqr(),c=a.redAdd(a);for(i=0;i<e;i++){var d=n.redSqr(),f=c.redSqr(),u=f.redSqr(),l=d.redAdd(d).redIAdd(d).redIAdd(r.redMul(h)),p=n.redMul(f),m=l.redSqr().redISub(p.redAdd(p)),b=p.redISub(m),g=l.redMul(b);g=g.redIAdd(g).redISub(u);var y=c.redMul(o);i+1<e&&(h=h.redMul(u)),n=m,o=y,c=g}return this.curve.jpoint(n,c.redMul(s),o)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(r).redISub(n);a=a.redIAdd(a);var o=r.redAdd(r).redIAdd(r),h=o.redSqr().redISub(a).redISub(a),c=n.redIAdd(n);c=(c=c.redIAdd(c)).redIAdd(c),e=h,t=o.redMul(a.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),f=this.y.redSqr(),u=f.redSqr(),l=this.x.redAdd(f).redSqr().redISub(d).redISub(u);l=l.redIAdd(l);var p=d.redAdd(d).redIAdd(d),m=p.redSqr(),b=u.redIAdd(u);b=(b=b.redIAdd(b)).redIAdd(b),e=m.redISub(l).redISub(l),t=p.redMul(l.redISub(e)).redISub(b),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(e,t,i)},f.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(r).redISub(n);a=a.redIAdd(a);var o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),h=o.redSqr().redISub(a).redISub(a);e=h;var c=n.redIAdd(n);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(a.redISub(h)).redISub(c),i=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),f=this.y.redSqr(),u=this.x.redMul(f),l=this.x.redSub(d).redMul(this.x.redAdd(d));l=l.redAdd(l).redIAdd(l);var p=u.redIAdd(u),m=(p=p.redIAdd(p)).redAdd(p);e=l.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(f).redISub(d);var b=f.redSqr();b=(b=(b=b.redIAdd(b)).redIAdd(b)).redIAdd(b),t=l.redMul(p.redISub(e)).redISub(b)}return this.curve.jpoint(e,t,i)},f.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,r=this.z,s=r.redSqr().redSqr(),n=t.redSqr(),a=i.redSqr(),o=n.redAdd(n).redIAdd(n).redIAdd(e.redMul(s)),h=t.redAdd(t),c=(h=h.redIAdd(h)).redMul(a),d=o.redSqr().redISub(c.redAdd(c)),f=c.redISub(d),u=a.redSqr();u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=o.redMul(f).redISub(u),p=i.redAdd(i).redMul(r);return this.curve.jpoint(d,l,p)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),r=t.redSqr(),s=e.redAdd(e).redIAdd(e),n=s.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(r),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(n)).redSqr(),h=r.redIAdd(r);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var c=s.redIAdd(a).redSqr().redISub(n).redISub(o).redISub(h),d=t.redMul(c);d=(d=d.redIAdd(d)).redIAdd(d);var f=this.x.redMul(o).redISub(d);f=(f=f.redIAdd(f)).redIAdd(f);var u=this.y.redMul(c.redMul(h.redISub(c)).redISub(a.redMul(o)));u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=this.z.redAdd(a).redSqr().redISub(i).redISub(o);return this.curve.jpoint(f,u,l)},f.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},f.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(0!==this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),s=i.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(r)).cmpn(0)},f.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(i))return!0;for(var r=e.clone(),s=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),0===this.x.cmp(i))return!0}return!1},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../../../BN/bn":244,"../../elliptic":246,"../curve":249}],252:[function(e,t,i){"use strict";var r,s=i,n=e("../elliptic"),a=n.utils.assert;function o(e){"short"===e.type?this.curve=new n.curve.short(e):"edwards"===e.type?this.curve=new n.curve.edwards(e):this.curve=new n.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(e,t){Object.defineProperty(s,e,{configurable:!0,enumerable:!0,get:function(){var i=new o(t);return Object.defineProperty(s,e,{configurable:!0,enumerable:!0,value:i}),i}})}s.PresetCurve=o,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=e("./precomputed/secp256k1")}catch(e){r=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},{"../elliptic":246,"./precomputed/secp256k1":259}],253:[function(e,t,i){"use strict";var r=e("../../../../BN/bn"),s=e("../../hmac-drbg/hmac-drbg"),n=e("../../elliptic"),a=n.utils.assert,o=e("./key"),h=e("./signature");function c(e){if(!(this instanceof c))return new c(e);"string"==typeof e&&(a(n.curves.hasOwnProperty(e),"Unknown curve "+e),e=n.curves[e]),e instanceof n.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}t.exports=c,c.prototype.keyPair=function(e){return new o(this,e)},c.prototype.keyFromPrivate=function(e,t){return o.fromPrivate(this,e,t)},c.prototype.keyFromPublic=function(e,t){return o.fromPublic(this,e,t)},c.prototype.genKeyPair=function(e){e||(e={});for(var t=new s({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new r(2));;){var a=new r(t.generate(i));if(!(a.cmp(n)>0))return a.iaddn(1),this.keyFromPrivate(a)}},c.prototype._truncateToN=function(e,t){var i=8*e.byteLength()-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},c.prototype.sign=function(e,t,i,n){"object"==typeof i&&(n=i,i=null),n||(n={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new r(e,16));for(var a=this.n.byteLength(),o=t.getPrivate().toArray("be",a),c=e.toArray("be",a),d=new s({hash:this.hash,entropy:n.extraEntropy?o.concat(n.extraEntropy):o,nonce:c,pers:n.pers,persEnc:n.persEnc||"utf8"}),f=this.n.sub(new r(1)),u=0;;u++){var l=n.k?n.k(u):new r(d.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(f)>=0)){var p=this.g.mul(l);if(!p.isInfinity()){var m=p.getX(),b=m.umod(this.n);if(0!==b.cmpn(0)){var g=l.invm(this.n).mul(b.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(b)?2:0);return n.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new h({r:b,s:g,recoveryParam:y})}}}}}},c.prototype.verify=function(e,t,i,s){e=this._truncateToN(new r(e,16)),i=this.keyFromPublic(i,s);var n=(t=new h(t,"hex")).r,a=t.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o,c=a.invm(this.n),d=c.mul(e).umod(this.n),f=c.mul(n).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(d,i.getPublic(),f)).isInfinity()&&o.eqXToP(n):!(o=this.g.mulAdd(d,i.getPublic(),f)).isInfinity()&&0===o.getX().umod(this.n).cmp(n)},c.prototype.recoverPubKey=function(e,t,i,s){a((3&i)===i,"The recovery param is more than two bits"),t=new h(t,s);var n=this.n,o=new r(e),c=t.r,d=t.s,f=1&i,u=i>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");c=u?this.curve.pointFromX(c.add(this.curve.n),f):this.curve.pointFromX(c,f);var l=t.r.invm(n),p=n.sub(o).mul(l).umod(n),m=d.mul(l).umod(n);return this.g.mulAdd(p,c,m)},c.prototype.getKeyRecoveryParam=function(e,t,i,r){if(null!==(t=new h(t,r)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(e,t,s)}catch(e){continue}if(n.eq(i))return s}throw new Error("Unable to find valid recovery factor")}},{"../../../../BN/bn":244,"../../elliptic":246,"../../hmac-drbg/hmac-drbg":261,"./key":254,"./signature":255}],254:[function(e,t,i){"use strict";var r=e("../../../../BN/bn"),s=e("../../elliptic").utils.assert;function n(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}t.exports=n,n.fromPublic=function(e,t,i){return t instanceof n?t:new n(e,{pub:t,pubEnc:i})},n.fromPrivate=function(e,t,i){return t instanceof n?t:new n(e,{priv:t,privEnc:i})},n.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},n.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?s(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||s(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},n.prototype.derive=function(e){return e.mul(this.priv).getX()},n.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},n.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../../../BN/bn":244,"../../elliptic":246}],255:[function(e,t,i){"use strict";var r=e("../../../../BN/bn"),s=e("../../elliptic").utils.assert;t.exports=function e(t,i){if(t instanceof e)return t;s(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},{"../../../../BN/bn":244,"../../elliptic":246}],256:[function(e,t,i){"use strict";var r=e("../curves"),s=e("../utils"),n=s.assert,a=s.parseBytes,o=e("./key"),h=e("./signature");const c=e("../../../../BN/bn.js"),{byteArrayToWordArray:d}=e("../../../../../base/functions/encode"),f=e("../../../../crypto-js/crypto-js");function u(e){if(n("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);var t=r[e].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8)}t.exports=u,u.prototype.sign=function(e,t){e=a(e);var i=this.keyFromSecret(t),r=this.hashInt(i.secret(),e),s=this.g.mul(r),n=this.encodePoint(s),o=this.hashInt(n,i.pubBytes(),e);o=o.mul(i.priv());var h=r.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:h,Rencoded:n})},u.prototype.signModified=function(e,t){e=a(e);var i=this.keyFromSecret(t);const r=new c(i.secret(),16,"le"),s=this.encodePoint(this.g.mul(r)),n=128&s[31];var o=this.hashInt(i.secret(),e),h=this.g.mul(o),d=this.encodePoint(h);let f=this.hashInt(d,s,e);f=f.mul(r);var u=o.add(f).umod(this.curve.n),l=u.toArray("le",32);return l[31]|=n,this.makeSignature({R:h,S:u,Rencoded:d,Sencoded:l})},u.prototype.verify=function(e,t,i){e=a(e),t=this.makeSignature(t);var r=this.keyFromPublic(i),s=this.hashInt(t.Rencoded(),r.pubBytes(),e),n=this.g.mul(t.S());return t.R().add(r.pub().mul(s)).eq(n)},u.prototype.hashInt=function(){let e=Array.from(arguments).reduce(((e,t)=>e.concat(t)));e=d(e);const t=f.SHA512(e).toString(f.enc.Hex);return s.intFromLE(t).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return o.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return o.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof h?e:new h(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=s.parseBytes(e)).length-1,i=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),n=s.intFromLE(i);return this.curve.pointFromY(n,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return s.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},{"../../../../../base/functions/encode":132,"../../../../BN/bn.js":244,"../../../../crypto-js/crypto-js":245,"../curves":252,"../utils":260,"./key":257,"./signature":258}],257:[function(e,t,i){"use strict";var r=e("../utils"),s=r.assert,n=r.parseBytes,a=r.cachedProperty;function o(e,t){this.eddsa=e,this._secret=n(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=n(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},a(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r})),a(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return s(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.signModified=function(e){return s(this._secret,"KeyPair can only verify"),this.eddsa.signModified(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return s(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},o.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},t.exports=o},{"../utils":260}],258:[function(e,t,i){"use strict";var r=e("../../../../BN/bn"),s=e("../utils"),n=s.assert,a=s.cachedProperty,o=s.parseBytes;function h(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),n(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(h,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(h,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(h,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(h,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return s.encode(this.toBytes(),"hex").toUpperCase()},t.exports=h},{"../../../../BN/bn":244,"../utils":260}],259:[function(e,t,i){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],260:[function(e,t,i){"use strict";var r=i,s=e("../../../BN/bn");function n(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}function a(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",i=0;i<e.length;i++)t+=a(e[i].toString(16));return t}r.assert=function(e,t){if(!e)throw new Error(t)},r.getNAF=function(e,t){for(var i=[],r=1<<t+1,s=e.clone();s.cmpn(1)>=0;){var n;if(s.isOdd()){var a=s.andln(r-1);n=a>(r>>1)-1?(r>>1)-a:a,s.isubn(n)}else n=0;i.push(n);for(var o=0!==s.cmpn(0)&&0===s.andln(r-1)?t+1:1,h=1;h<o;h++)i.push(0);s.iushrn(o)}return i},r.getJSF=function(e,t){var i=[[],[]];e=e.clone(),t=t.clone();for(var r=0,s=0;e.cmpn(-r)>0||t.cmpn(-s)>0;){var n,a,o,h=e.andln(3)+r&3,c=t.andln(3)+s&3;if(3===h&&(h=-1),3===c&&(c=-1),0==(1&h))n=0;else n=3!==(o=e.andln(7)+r&7)&&5!==o||2!==c?h:-h;if(i[0].push(n),0==(1&c))a=0;else a=3!==(o=t.andln(7)+s&7)&&5!==o||2!==h?c:-c;i[1].push(a),2*r===n+1&&(r=1-r),2*s===a+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return i},r.cachedProperty=function(e,t,i){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new s(e,"hex","le")},r.wordArrayToBuffer=function(e){let t;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const i=[];let r=[],s=0;for(;t>0;)r=n(e[s],Math.min(4,t)),t-=r.length,i.push(r),s++;return[].concat.apply([],i)},r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)i[r]=0|e[r];return i}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)i.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var s=e.charCodeAt(r),n=s>>8,a=255&s;n?i.push(n,a):i.push(a)}return i},r.zero2=a,r.toHex=o,r.encode=function(e,t){return"hex"===t?o(e):e}},{"../../../BN/bn":244}],261:[function(e,t,i){"use strict";var r=e("../../../crypto-js/crypto-js"),s=e("../elliptic/utils").assert,n=e("../elliptic/utils"),{byteArrayToWordArray:a}=e("../../../../base/functions/encode");const o=r.enc.Utf8.parse(""),h=r.enc.Utf8.parse("\0");function c(e){if(!(this instanceof c))return new c(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,i=e.nonce;s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,[])}t.exports=c,c.prototype._init=function(e,t,i){var s=e.concat(t).concat(i);this.K=new r.lib.WordArray.init,this.V=new r.lib.WordArray.init;this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(s),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new r.lib.WordArray.init},c.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(h),e&&t.concat(a(e)),this.K=r["Hmac"+this.hash](t,this.K),this.V=r["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(o),t.concat(a(e)),this.K=r["Hmac"+this.hash](t,this.K),this.V=r["Hmac"+this.hash](this.V,this.K))},c.prototype.reseed=function(e,t,i,r){"string"!=typeof t&&(i,i=t,t=null),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},c.prototype.generate=function(e,t,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i,i=t,t=null),i&&(i=r.enc.Utf8.parse(i),this._update(i));for(var a=new r.lib.WordArray.init;a.sigBytes<e;)this.V=r["Hmac"+this.hash](this.V,this.K),a.concat(this.V);return this._update(i),this._reseed++,n.wordArrayToBuffer(a)}},{"../../../../base/functions/encode":132,"../../../crypto-js/crypto-js":245,"../elliptic/utils":260}],262:[function(e,t,i){"use strict";var r=e("../node-fetch/index");function s(e){const t=function(t,i){return"string"==typeof t&&"//"===t.slice(0,2)?e("https:"+t,i):e(t,i)};return t.http=e.http,t.https=e.https,t}t.exports=function(e){return e&&e.Promise&&(r.Promise=e.Promise),{fetch:s(r),Headers:r.Headers,Request:r.Request,Response:r.Response}}},{"../node-fetch/index":263}],263:[function(e,t,i){(function(r,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});const n=Symbol("buffer"),a=Symbol("type");class o{constructor(){this[a]="";const e=arguments[0],t=arguments[1],i=[];if(e){const t=e,r=Number(t.length);for(let e=0;e<r;e++){const r=t[e];let a;a=r instanceof s?r:ArrayBuffer.isView(r)?s.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ArrayBuffer?s.from(r):r instanceof o?r[n]:s.from("string"==typeof r?r:String(r)),i.push(a)}}this[n]=s.concat(i);let r=t&&void 0!==t.type&&String(t.type).toLowerCase();r&&!/[^\u0020-\u007E]/.test(r)&&(this[a]=r)}get size(){return this[n].length}get type(){return this[a]}slice(){const e=this.size,t=arguments[0],i=arguments[1];let r,s;r=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),s=void 0===i?e:i<0?Math.max(e+i,0):Math.min(i,e);const a=Math.max(s-r,0),h=this[n].slice(r,r+a),c=new o([],{type:arguments[2]});return c[n]=h,c}}function h(e,t,i){Error.call(this,e),this.message=e,this.type=t,i&&(this.code=this.errno=i.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(o.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(o.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="FetchError";const c=e("stream");const d=e("stream").PassThrough,f=Symbol("Body internals");function u(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.size;let n=void 0===r?0:r;var a=i.timeout;let d=void 0===a?0:a;null==e?e=null:"string"==typeof e||p(e)||e instanceof o||s.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof c||(e=String(e)),this[f]={body:e,disturbed:!1,error:null},this.size=n,this.timeout=d,e instanceof c&&e.on("error",(function(e){t[f].error=new h(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e)}))}function l(){var e=this;if(this[f].disturbed)return u.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[f].disturbed=!0,this[f].error)return u.Promise.reject(this[f].error);if(null===this.body)return u.Promise.resolve(s.alloc(0));if("string"==typeof this.body)return u.Promise.resolve(s.from(this.body));if(this.body instanceof o)return u.Promise.resolve(this.body[n]);if(s.isBuffer(this.body))return u.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return u.Promise.resolve(s.from(this.body));if(!(this.body instanceof c))return u.Promise.resolve(s.alloc(0));let t=[],i=0,r=!1;return new u.Promise((function(n,a){let o;e.timeout&&(o=setTimeout((function(){r=!0,a(new h(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){a(new h(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),e.body.on("data",(function(s){if(!r&&null!==s){if(e.size&&i+s.length>e.size)return r=!0,void a(new h(`content size at ${e.url} over limit: ${e.size}`,"max-size"));i+=s.length,t.push(s)}})),e.body.on("end",(function(){if(!r){clearTimeout(o);try{n(s.concat(t))}catch(t){a(new h(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function p(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function m(e){let t,i,r=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof c&&"function"!=typeof r.getBoundary&&(t=new d,i=new d,r.pipe(t),r.pipe(i),e[f].body=t,r=i),r}function b(e){const t=e.body;return null===t?0:"string"==typeof t?s.byteLength(t):p(t)?s.byteLength(String(t)):t instanceof o?t.size:s.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}u.prototype={get body(){return this[f].body},get bodyUsed(){return this[f].disturbed},arrayBuffer(){return l.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return l.call(this).then((function(t){return Object.assign(new o([],{type:e.toLowerCase()}),{[n]:t})}))},json(){var e=this;return l.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return u.Promise.reject(new h(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return l.call(this).then((function(e){return e.toString()}))},buffer(){return l.call(this)},textConverted(){var e=this;return l.call(this).then((function(t){return function(e,t){if("function"!=typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");const i=t.get("content-type");let r,s,n="utf-8";i&&(r=/charset=([^;]*)/i.exec(i));s=e.slice(0,1024).toString(),!r&&s&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(s));!r&&s&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),r&&(r=/charset=(.*)/i.exec(r.pop())));!r&&s&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s));r&&(n=r.pop(),"gb2312"!==n&&"gbk"!==n||(n="gb18030"));return convert(e,"UTF-8",n).toString()}(t,e.headers)}))}},Object.defineProperties(u.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),u.mixIn=function(e){for(const t of Object.getOwnPropertyNames(u.prototype))if(!(t in e)){const i=Object.getOwnPropertyDescriptor(u.prototype,t);Object.defineProperty(e,t,i)}},u.Promise=r.Promise;const g=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,y=/[^\t\x20-\x7e\x80-\xff]/;function v(e){if(e=`${e}`,g.test(e))throw new TypeError(`${e} is not a legal HTTP header name`)}function w(e){if(e=`${e}`,y.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function S(e,t){t=t.toLowerCase();for(const i in e)if(i.toLowerCase()===t)return i}const _=Symbol("map");class k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[_]=Object.create(null),e instanceof k){const t=e.raw(),i=Object.keys(t);for(const e of i)for(const i of t[e])this.append(e,i)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const i=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");i.push(Array.from(t))}for(const e of i){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const i=e[t];this.append(t,i)}}}}get(e){v(e=`${e}`);const t=S(this[_],e);return void 0===t?null:this[_][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=T(this),r=0;for(;r<i.length;){var s=i[r];const n=s[0],a=s[1];e.call(t,a,n,this),i=T(this),r++}}set(e,t){t=`${t}`,v(e=`${e}`),w(t);const i=S(this[_],e);this[_][void 0!==i?i:e]=[t]}append(e,t){t=`${t}`,v(e=`${e}`),w(t);const i=S(this[_],e);void 0!==i?this[_][i].push(t):this[_][e]=[t]}has(e){return v(e=`${e}`),void 0!==S(this[_],e)}delete(e){v(e=`${e}`);const t=S(this[_],e);void 0!==t&&delete this[_][t]}raw(){return this[_]}keys(){return x(this,"key")}values(){return x(this,"value")}[Symbol.iterator](){return x(this,"key+value")}}function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const i=Object.keys(e[_]).sort();return i.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[_][t].join(", ")}:function(t){return[t.toLowerCase(),e[_][t].join(", ")]})}k.prototype.entries=k.prototype[Symbol.iterator],Object.defineProperty(k.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(k.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const O=Symbol("internal");function x(e,t){const i=Object.create(A);return i[O]={target:e,kind:t,index:0},i}const A=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==A)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[O];const t=e.target,i=e.kind,r=e.index,s=T(t,i);return r>=s.length?{value:void 0,done:!0}:(this[O].index=r+1,{value:s[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function M(e){const t=Object.assign({__proto__:null},e[_]),i=S(e[_],"Host");return void 0!==i&&(t[i]=t[i][0]),t}Object.defineProperty(A,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const E=e("http").STATUS_CODES,I=Symbol("Response internals");class B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u.call(this,e,t);const i=t.status||200;this[I]={url:t.url,status:i,statusText:t.statusText||E[i],headers:new k(t.headers)}}get url(){return this[I].url}get status(){return this[I].status}get ok(){return this[I].status>=200&&this[I].status<300}get statusText(){return this[I].statusText}get headers(){return this[I].headers}clone(){return new B(m(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}u.mixIn(B.prototype),Object.defineProperties(B.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(B.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var N=e("url");const P=N.format,R=N.parse,C=Symbol("Request internals");function L(e){return"object"==typeof e&&"object"==typeof e[C]}class D{constructor(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};L(e)?t=R(e.url):(t=e&&e.href?R(e.href):R(`${e}`),e={});let r=i.method||e.method||"GET";if(r=r.toUpperCase(),(null!=i.body||L(e)&&null!==e.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let n=null!=i.body?i.body:L(e)&&null!==e.body?m(e):null;u.call(this,n,{timeout:i.timeout||e.timeout||0,size:i.size||e.size||0});const a=new k(i.headers||e.headers||{});if(null!=i.body){const e=function(e){const t=e.body;return null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":p(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof o?t.type||null:s.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"==typeof t.getBoundary?`multipart/form-data;boundary=${t.getBoundary()}`:null}(this);null===e||a.has("Content-Type")||a.append("Content-Type",e)}this[C]={method:r,redirect:i.redirect||e.redirect||"follow",headers:a,parsedURL:t},this.follow=void 0!==i.follow?i.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===e.compress||e.compress,this.counter=i.counter||e.counter||0,this.agent=i.agent||e.agent}get method(){return this[C].method}get url(){return P(this[C].parsedURL)}get headers(){return this[C].headers}get redirect(){return this[C].redirect}clone(){return new D(this)}}u.mixIn(D.prototype),Object.defineProperty(D.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(D.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});const j=e("http"),F=e("https");const V=e("stream").PassThrough;const z=e("url").resolve,q=e("zlib");function U(e,t){if(!U.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return u.Promise=U.Promise,new U.Promise((function(i,r){const a=new D(e,t),c=function(e){const t=e[C].parsedURL,i=new k(e[C].headers);if(i.has("Accept")||i.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");let r=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(r="0"),null!=e.body){const t=b(e);"number"==typeof t&&(r=String(t))}return r&&i.set("Content-Length",r),i.has("User-Agent")||i.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&i.set("Accept-Encoding","gzip,deflate"),i.has("Connection")||e.agent||i.set("Connection","close"),Object.assign({},t,{method:e.method,headers:M(i),agent:e.agent})}(a),d=(0,("https:"===c.protocol?F:j).request)(c);let f;function u(){d.abort(),clearTimeout(f)}a.timeout&&d.once("socket",(function(e){f=setTimeout((function(){r(new h(`network timeout at: ${a.url}`,"request-timeout")),u()}),a.timeout)})),d.on("error",(function(e){r(new h(`request to ${a.url} failed, reason: ${e.message}`,"system",e)),u()})),d.on("response",(function(e){clearTimeout(f);const t=function(e){const t=new k;for(const i of Object.keys(e))if(!g.test(i))if(Array.isArray(e[i]))for(const r of e[i])y.test(r)||(void 0===t[_][i]?t[_][i]=[r]:t[_][i].push(r));else y.test(e[i])||(t[_][i]=[e[i]]);return t}(e.headers);if(U.isRedirect(e.statusCode)){const s=t.get("Location"),n=null===s?null:z(a.url,s);switch(a.redirect){case"error":return r(new h(`redirect mode is set to error: ${a.url}`,"no-redirect")),void u();case"manual":null!==n&&t.set("Location",n);break;case"follow":if(null===n)break;if(a.counter>=a.follow)return r(new h(`maximum redirect reached at: ${a.url}`,"max-redirect")),void u();const s={headers:new k(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:a.body};return 303!==e.statusCode&&a.body&&null===b(a)?(r(new h("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void u()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==a.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),i(U(new D(n,s))),void u())}}let s=e.pipe(new V);const n={url:a.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:a.size,timeout:a.timeout},o=t.get("Content-Encoding");if(!a.compress||"HEAD"===a.method||null===o||204===e.statusCode||304===e.statusCode)return void i(new B(s,n));const c={flush:q.Z_SYNC_FLUSH,finishFlush:q.Z_SYNC_FLUSH};if("gzip"==o||"x-gzip"==o)return s=s.pipe(q.createGunzip(c)),void i(new B(s,n));if("deflate"!=o&&"x-deflate"!=o)i(new B(s,n));else{e.pipe(new V).once("data",(function(e){s=8==(15&e[0])?s.pipe(q.createInflate()):s.pipe(q.createInflateRaw()),i(new B(s,n))}))}})),function(e,t){const i=t.body;null===i?e.end():"string"==typeof i?(e.write(i),e.end()):p(i)?(e.write(s.from(String(i))),e.end()):i instanceof o?(e.write(i[n]),e.end()):s.isBuffer(i)?(e.write(i),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(i)?(e.write(s.from(i)),e.end()):i.pipe(e)}(d,a)}))}U.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},U.default=U,U.Promise=r.Promise,U.http=j,U.https=F,t.exports=i=U,i.Headers=k,i.Request=D,i.Response=B,i.FetchError=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{buffer:65,http:109,https:70,stream:108,url:115,zlib:64}],264:[function(e,t,i){(function(i){
/*!
                     * RSA library for Node.js
                     *
                     * Author: rzcoder
                     * License MIT
                     */
var r=e("./libs/rsa.js"),s=e("./utils")._,n=e("./schemes/schemes.js"),a=e("./formats/formats.js");t.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},t="pkcs1",o="pkcs1",h={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function c(e,n,a){if(!(this instanceof c))return new c(e,n,a);s.isObject(n)&&(a=n,n=void 0),this.$options={signingScheme:o,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:t,encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new r.Key,this.$cache={},i.isBuffer(e)||s.isString(e)?this.importKey(e,n):s.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(a)}return c.prototype.setOptions=function(i){if((i=i||{}).environment&&(this.$options.environment=i.environment),i.signingScheme){if(s.isString(i.signingScheme)){var r=i.signingScheme.toLowerCase().split("-");1==r.length?e.node.indexOf(r[0])>-1?(this.$options.signingSchemeOptions={hash:r[0]},this.$options.signingScheme=o):(this.$options.signingScheme=r[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:r[1]},this.$options.signingScheme=r[0])}else s.isObject(i.signingScheme)&&(this.$options.signingScheme=i.signingScheme.scheme||o,this.$options.signingSchemeOptions=s.omit(i.signingScheme,"scheme"));if(!n.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(i.encryptionScheme){if(s.isString(i.encryptionScheme)?(this.$options.encryptionScheme=i.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):s.isObject(i.encryptionScheme)&&(this.$options.encryptionScheme=i.encryptionScheme.scheme||t,this.$options.encryptionSchemeOptions=s.omit(i.encryptionScheme,"scheme")),!n.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},c.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=h[t]||t),!a.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},c.prototype.isPrivate=function(){return this.keyPair.isPrivate()},c.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},c.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},c.prototype.sign=function(e,t,i){if(!this.isPrivate())throw Error("This is not private key");var r=this.keyPair.sign(this.$getDataForEncrypt(e,i));return t&&"buffer"!=t&&(r=r.toString(t)),r},c.prototype.$getDataForEncrypt=function(e,t){if(s.isString(e)||s.isNumber(e))return i.from(""+e,t||"utf8");if(i.isBuffer(e))return e;if(s.isObject(e))return i.from(JSON.stringify(e));throw Error("Unexpected data type")},c}()}).call(this,e("buffer").Buffer)},{"./formats/formats.js":271,"./libs/rsa.js":275,"./schemes/schemes.js":277,"./utils":278,buffer:65}],265:[function(e,t,i){t.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},{}],266:[function(e,t,i){var r=e("./errors"),s=e("./types"),n=e("./reader");for(var a in t.exports={Reader:n},s)s.hasOwnProperty(a)&&(t.exports[a]=s[a]);for(var o in r)r.hasOwnProperty(o)&&(t.exports[o]=r[o])},{"./errors":265,"./reader":267,"./types":268}],267:[function(e,t,i){(function(i){var r=e("assert"),s=e("./types"),n=e("./errors").newInvalidAsn1Error;function a(e){if(!e||!i.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(a.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(a.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(a.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),a.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},a.prototype.peek=function(){return this.readByte(!0)},a.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128==(128&t)){if(0===(t&=127))throw n("Indefinite length not supported");if(t>4)throw n("encoding too long");if(this._size-e<t)return null;this._len=0;for(var i=0;i<t;i++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},a.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw n("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);return null===i?null:(this._offset=i,t)},a.prototype.readInt=function(){return this._readTag(s.Integer)},a.prototype.readBoolean=function(){return 0!==this._readTag(s.Boolean)},a.prototype.readEnumeration=function(){return this._readTag(s.Enumeration)},a.prototype.readString=function(e,t){e||(e=s.OctetString);var r=this.peek();if(null===r)return null;if(r!==e)throw n("Expected 0x"+e.toString(16)+": got 0x"+r.toString(16));var a=this.readLength(this._offset+1);if(null===a)return null;if(this.length>this._size-a)return null;if(this._offset=a,0===this.length)return t?i.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,t?o:o.toString("utf8")},a.prototype.readOID=function(e){e||(e=s.OID);var t=this.readString(e,!0);if(null===t)return null;for(var i=[],r=0,n=0;n<t.length;n++){var a=255&t[n];r<<=7,r+=127&a,0==(128&a)&&(i.push(r),r=0)}return r=i.shift(),i.unshift(r%40),i.unshift(r/40>>0),i.join(".")},a.prototype._readTag=function(e){r.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw n("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>4)throw n("Integer too long: "+this.length);if(this.length>this._size-i)return null;this._offset=i;for(var s=this._buf[this._offset],a=0,o=0;o<this.length;o++)a<<=8,a|=255&this._buf[this._offset++];return 128==(128&s)&&4!==o&&(a-=1<<8*o),a>>0},t.exports=a}).call(this,e("buffer").Buffer)},{"./errors":265,"./types":268,assert:57,buffer:65}],268:[function(e,t,i){t.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},{}],269:[function(e,t,i){var r=e("./ber/index");t.exports={Ber:r,BerReader:r.Reader}},{"./ber/index":266}],270:[function(e,t,i){e("../utils")._,e("../utils");t.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,i){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,i){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(e,i){return!(!i.n||!i.e)&&(i.d&&i.p&&i.q&&i.dmp1&&i.dmq1&&i.coeff?(t.exports.privateImport(e,i),!0):(t.exports.publicImport(e,i),!0))}}},{"../utils":278}],271:[function(e,t,i){e("../utils")._;t.exports={pkcs1:e("./pkcs1"),pkcs8:e("./pkcs8"),components:e("./components"),detectAndImport:function(e,i,r){if(void 0===r){for(var s in t.exports)if("function"==typeof t.exports[s].autoImport&&t.exports[s].autoImport(e,i))return!0}else if(r){var n=formatParse(r);if(!t.exports[n.scheme])throw Error("Unsupported key format");"private"===n.keyType?t.exports[n.scheme].privateImport(e,i,n.keyOpt):t.exports[n.scheme].publicImport(e,i,n.keyOpt)}return!1}}},{"../utils":278,"./components":270,"./pkcs1":272,"./pkcs8":273}],272:[function(e,t,i){(function(i){var r=e("../asn1/index").Ber,s=e("../utils")._,n=e("../utils");const a="-----BEGIN RSA PRIVATE KEY-----",o="-----END RSA PRIVATE KEY-----",h="-----BEGIN RSA PUBLIC KEY-----",c="-----END RSA PUBLIC KEY-----";t.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=e.d.toBuffer(),h=e.p.toBuffer(),c=e.q.toBuffer(),d=e.dmp1.toBuffer(),f=e.dmq1.toBuffer(),u=e.coeff.toBuffer(),l=i.length+s.length+h.length+c.length+d.length+f.length+u.length+512,p=new r.Writer({size:l});return p.startSequence(),p.writeInt(0),p.writeBuffer(i,2),p.writeInt(e.e),p.writeBuffer(s,2),p.writeBuffer(h,2),p.writeBuffer(c,2),p.writeBuffer(d,2),p.writeBuffer(f,2),p.writeBuffer(u,2),p.endSequence(),"der"===t.type?p.buffer:a+"\n"+n.linebrk(p.buffer.toString("base64"),64)+"\n"+o},privateImport:function(e,t,h){var c;if("der"!==(h=h||{}).type){if(i.isBuffer(t)&&(t=t.toString("utf8")),!s.isString(t))throw Error("Unsupported key format");var d=n.trimSurroundingText(t,a,o).replace(/\s+|\n\r|\n|\r$/gm,"");c=i.from(d,"base64")}else{if(!i.isBuffer(t))throw Error("Unsupported key format");c=t}var f=new r.Reader(c);f.readSequence(),f.readString(2,!0),e.setPrivate(f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=i.length+512,a=new r.Writer({size:s});return a.startSequence(),a.writeBuffer(i,2),a.writeInt(e.e),a.endSequence(),"der"===t.type?a.buffer:h+"\n"+n.linebrk(a.buffer.toString("base64"),64)+"\n"+c},publicImport:function(e,t,a){var o;if("der"!==(a=a||{}).type){if(i.isBuffer(t)&&(t=t.toString("utf8")),s.isString(t)){var d=n.trimSurroundingText(t,h,c).replace(/\s+|\n\r|\n|\r$/gm,"");o=i.from(d,"base64")}}else{if(!i.isBuffer(t))throw Error("Unsupported key format");o=t}var f=new r.Reader(o);f.readSequence(),e.setPublic(f.readString(2,!0),f.readString(2,!0))},autoImport:function(e,i){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(i)?(t.exports.privateImport(e,i),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(i)&&(t.exports.publicImport(e,i),!0)}}}).call(this,e("buffer").Buffer)},{"../asn1/index":269,"../utils":278,buffer:65}],273:[function(e,t,i){(function(i){var r=e("../asn1/index").Ber,s=e("../utils")._,n="1.2.840.113549.1.1.1",a=e("../utils");const o="-----BEGIN PRIVATE KEY-----",h="-----END PRIVATE KEY-----",c="-----BEGIN PUBLIC KEY-----",d="-----END PUBLIC KEY-----";t.exports={privateExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=e.d.toBuffer(),c=e.p.toBuffer(),d=e.q.toBuffer(),f=e.dmp1.toBuffer(),u=e.dmq1.toBuffer(),l=e.coeff.toBuffer(),p=i.length+s.length+c.length+d.length+f.length+u.length+l.length+512,m=new r.Writer({size:p});m.startSequence(),m.writeInt(0),m.writeBuffer(i,2),m.writeInt(e.e),m.writeBuffer(s,2),m.writeBuffer(c,2),m.writeBuffer(d,2),m.writeBuffer(f,2),m.writeBuffer(u,2),m.writeBuffer(l,2),m.endSequence();var b=new r.Writer({size:p});return b.startSequence(),b.writeInt(0),b.startSequence(),b.writeOID(n),b.writeNull(),b.endSequence(),b.writeBuffer(m.buffer,4),b.endSequence(),"der"===t.type?b.buffer:o+"\n"+a.linebrk(b.buffer.toString("base64"),64)+"\n"+h},privateImport:function(e,t,c){var d;if("der"!==(c=c||{}).type){if(i.isBuffer(t)&&(t=t.toString("utf8")),!s.isString(t))throw Error("Unsupported key format");var f=a.trimSurroundingText(t,o,h).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");d=i.from(f,"base64")}else{if(!i.isBuffer(t))throw Error("Unsupported key format");d=t}var u=new r.Reader(d);if(u.readSequence(),u.readInt(0),new r.Reader(u.readString(48,!0)).readOID(6,!0)!==n)throw Error("Invalid Public key format");var l=new r.Reader(u.readString(4,!0));l.readSequence(),l.readString(2,!0),e.setPrivate(l.readString(2,!0),l.readString(2,!0),l.readString(2,!0),l.readString(2,!0),l.readString(2,!0),l.readString(2,!0),l.readString(2,!0),l.readString(2,!0))},publicExport:function(e,t){t=t||{};var i=e.n.toBuffer(),s=i.length+512,o=new r.Writer({size:s});o.writeByte(0),o.startSequence(),o.writeBuffer(i,2),o.writeInt(e.e),o.endSequence();var h=new r.Writer({size:s});return h.startSequence(),h.startSequence(),h.writeOID(n),h.writeNull(),h.endSequence(),h.writeBuffer(o.buffer,3),h.endSequence(),"der"===t.type?h.buffer:c+"\n"+a.linebrk(h.buffer.toString("base64"),64)+"\n"+d},publicImport:function(e,t,o){var h;if("der"!==(o=o||{}).type){if(i.isBuffer(t)&&(t=t.toString("utf8")),s.isString(t)){var f=a.trimSurroundingText(t,c,d).replace(/\s+|\n\r|\n|\r$/gm,"");h=i.from(f,"base64")}}else{if(!i.isBuffer(t))throw Error("Unsupported key format");h=t}var u=new r.Reader(h);if(u.readSequence(),new r.Reader(u.readString(48,!0)).readOID(6,!0)!==n)throw Error("Invalid Public key format");var l=new r.Reader(u.readString(3,!0));l.readByte(),l.readSequence(),e.setPublic(l.readString(2,!0),l.readString(2,!0))},autoImport:function(e,i){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(i)?(t.exports.privateImport(e,i),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(i)&&(t.exports.publicImport(e,i),!0)}}}).call(this,e("buffer").Buffer)},{"../asn1/index":269,"../utils":278,buffer:65}],274:[function(e,t,i){(function(i){var r=e("../utils")._;function s(e,t){null!=e&&("number"==typeof e?this.fromNumber(e,t):i.isBuffer(e)?this.fromBuffer(e):null==t&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,t))}function n(){return new s(null)}s.prototype.am=function(e,t,i,r,s,n){for(var a=16383&t,o=t>>14;--n>=0;){var h=16383&this[e],c=this[e++]>>14,d=o*h+c*a;s=((h=a*h+((16383&d)<<14)+i[r]+s)>>28)+(d>>14)+o*c,i[r++]=268435455&h}return s},s.prototype.DB=28,s.prototype.DM=268435455,s.prototype.DV=1<<28;s.prototype.FV=Math.pow(2,52),s.prototype.F1=24,s.prototype.F2=4;var a,o,h=new Array;for(a="0".charCodeAt(0),o=0;o<=9;++o)h[a++]=o;for(a="a".charCodeAt(0),o=10;o<36;++o)h[a++]=o;for(a="A".charCodeAt(0),o=10;o<36;++o)h[a++]=o;function c(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function d(e,t){var i=h[e.charCodeAt(t)];return null==i?-1:i}function f(e){var t=n();return t.fromInt(e),t}function u(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),0!=(t=e>>1)&&(e=t,i+=1),i}function l(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m(e,t){return e&t}function b(e,t){return e|t}function g(e,t){return e^t}function y(e){if(0===e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function v(){}function w(e){return e}function S(e){this.r2=n(),this.q3=n(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}l.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},l.prototype.revert=function(e){return e},l.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},l.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},l.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},p.prototype.revert=function(e){var t=n();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i=32767&e[t],r=i*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},v.prototype.convert=w,v.prototype.revert=w,v.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},v.prototype.sqrTo=function(e,t){e.squareTo(t)},S.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t},S.prototype.revert=function(e){return e},S.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},S.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},S.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},s.prototype.fromString=function(e,t,i){var r;switch(t){case 2:r=1;break;case 4:r=2;break;case 8:r=3;break;case 16:r=4;break;case 32:r=5;break;case 256:r=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var n=e.length,a=!1,o=0;--n>=0;){var h=8==r?255&e[n]:d(e,n);h<0?"-"==e.charAt(n)&&(a=!0):(a=!1,0===o?this[this.t++]=h:o+r>this.DB?(this[this.t-1]|=(h&(1<<this.DB-o)-1)<<o,this[this.t++]=h>>this.DB-o):this[this.t-1]|=h<<o,(o+=r)>=this.DB&&(o-=this.DB))}i||8!=r||0==(128&e[0])||(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),a&&s.ZERO.subTo(this,this)},s.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},s.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},s.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){var i,r=e%this.DB,s=this.DB-r,n=(1<<s)-1,a=Math.floor(e/this.DB),o=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)t[i+a+1]=this[i]>>s|o,o=(this[i]&n)<<r;for(i=a-1;i>=0;--i)t[i]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var r=e%this.DB,s=this.DB-r,n=(1<<r)-1;t[0]=this[i]>>r;for(var a=i+1;a<this.t;++a)t[a-i-1]|=(this[a]&n)<<s,t[a-i]=this[a]>>r;r>0&&(t[this.t-i-1]|=(this.s&n)<<s),t.t=this.t-i,t.clamp()}},s.prototype.subTo=function(e,t){for(var i=0,r=0,s=Math.min(e.t,this.t);i<s;)r+=this[i]-e[i],t[i++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;i<this.t;)r+=this[i],t[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<e.t;)r-=e[i],t[i++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[i++]=this.DV+r:r>0&&(t[i++]=r),t.t=i,t.clamp()},s.prototype.multiplyTo=function(e,t){var i=this.abs(),r=e.abs(),n=i.t;for(t.t=n+r.t;--n>=0;)t[n]=0;for(n=0;n<r.t;++n)t[n+i.t]=i.am(0,r[n],t,n,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var r=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,r,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,i){var r=e.abs();if(!(r.t<=0)){var a=this.abs();if(a.t<r.t)return null!=t&&t.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=n());var o=n(),h=this.s,c=e.s,d=this.DB-u(r[r.t-1]);d>0?(r.lShiftTo(d,o),a.lShiftTo(d,i)):(r.copyTo(o),a.copyTo(i));var f=o.t,l=o[f-1];if(0!==l){var p=l*(1<<this.F1)+(f>1?o[f-2]>>this.F2:0),m=this.FV/p,b=(1<<this.F1)/p,g=1<<this.F2,y=i.t,v=y-f,w=null==t?n():t;for(o.dlShiftTo(v,w),i.compareTo(w)>=0&&(i[i.t++]=1,i.subTo(w,i)),s.ONE.dlShiftTo(f,w),w.subTo(o,o);o.t<f;)o[o.t++]=0;for(;--v>=0;){var S=i[--y]==l?this.DM:Math.floor(i[y]*m+(i[y-1]+g)*b);if((i[y]+=o.am(0,S,i,v,0,f))<S)for(o.dlShiftTo(v,w),i.subTo(w,i);i[y]<--S;)i.subTo(w,i)}null!=t&&(i.drShiftTo(f,t),h!=c&&s.ZERO.subTo(t,t)),i.t=f,i.clamp(),d>0&&i.rShiftTo(d,i),h<0&&s.ZERO.subTo(i,i)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},s.prototype.exp=function(e,t){if(e>4294967295||e<1)return s.ONE;var i=n(),r=n(),a=t.convert(this),o=u(e)-1;for(a.copyTo(i);--o>=0;)if(t.sqrTo(i,r),(e&1<<o)>0)t.mulTo(r,a,i);else{var h=i;i=r,r=h}return t.revert(i)},s.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},s.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Math.pow(e,t),r=f(i),s=n(),a=n(),o="";for(this.divRemTo(r,s,a);s.signum()>0;)o=(i+a.intValue()).toString(e).substr(1)+o,s.divRemTo(r,s,a);return a.intValue().toString(e)+o},s.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),r=Math.pow(t,i),n=!1,a=0,o=0,h=0;h<e.length;++h){var c=d(e,h);c<0?"-"==e.charAt(h)&&0===this.signum()&&(n=!0):(o=t*o+c,++a>=i&&(this.dMultiply(r),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),n&&s.ZERO.subTo(this,this)},s.prototype.bitwiseTo=function(e,t,i){var r,s,n=Math.min(e.t,this.t);for(r=0;r<n;++r)i[r]=t(this[r],e[r]);if(e.t<this.t){for(s=e.s&this.DM,r=n;r<this.t;++r)i[r]=t(this[r],s);i.t=this.t}else{for(s=this.s&this.DM,r=n;r<e.t;++r)i[r]=t(s,e[r]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},s.prototype.addTo=function(e,t){for(var i=0,r=0,s=Math.min(e.t,this.t);i<s;)r+=this[i]+e[i],t[i++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;i<this.t;)r+=this[i],t[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<e.t;)r+=e[i],t[i++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[i++]=r:r<-1&&(t[i++]=this.DV+r),t.t=i,t.clamp()},s.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},s.prototype.multiplyLowerTo=function(e,t,i){var r,s=Math.min(this.t+e.t,t);for(i.s=0,i.t=s;s>0;)i[--s]=0;for(r=i.t-this.t;s<r;++s)i[s+this.t]=this.am(0,e[s],i,s,0,this.t);for(r=Math.min(e.t,t);s<r;++s)this.am(0,e[s],i,s,0,t-s);i.clamp()},s.prototype.multiplyUpperTo=function(e,t,i){--t;var r=i.t=this.t+e.t-t;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)i[this.t+r-t]=this.am(t-r,e[r],i,0,0,this.t+r-t);i.clamp(),i.drShiftTo(1,i)},s.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var i,r=(1<<t)-1,s=!1,n="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(i=this[a]>>o)>0&&(s=!0,n=c(i));a>=0;)o<t?(i=(this[a]&(1<<o)-1)<<t-o,i|=this[--a]>>(o+=this.DB-t)):(i=this[a]>>(o-=t)&r,o<=0&&(o+=this.DB,--a)),i>0&&(s=!0),s&&(n+=c(i));return s?n:"0"},s.prototype.negate=function(){var e=n();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var i=this.t;if(0!=(t=i-e.t))return this.s<0?-t:t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.clone=function(){var e=n();return this.copyTo(e),e},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},s.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var i,r=this.DB-e*this.DB%8,s=0;if(e-- >0)for(r<this.DB&&(i=this[e]>>r)!=(this.s&this.DM)>>r&&(t[s++]=i|this.s<<this.DB-r);e>=0;)r<8?(i=(this[e]&(1<<r)-1)<<8-r,i|=this[--e]>>(r+=this.DB-8)):(i=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),0!=(128&i)&&(i|=-256),0===s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(t[s++]=i);return t},s.prototype.toBuffer=function(e){var t=i.from(this.toByteArray());if(!0===e&&0===t[0])t=t.slice(1);else if(r.isNumber(e)){if(t.length>e){for(var s=0;s<t.length-e;s++)if(0!==t[s])return null;return t.slice(t.length-e)}if(t.length<e){var n=i.alloc(e);return n.fill(0,0,e-t.length),t.copy(n,e-t.length),n}}return t},s.prototype.equals=function(e){return 0==this.compareTo(e)},s.prototype.min=function(e){return this.compareTo(e)<0?this:e},s.prototype.max=function(e){return this.compareTo(e)>0?this:e},s.prototype.and=function(e){var t=n();return this.bitwiseTo(e,m,t),t},s.prototype.or=function(e){var t=n();return this.bitwiseTo(e,b,t),t},s.prototype.xor=function(e){var t=n();return this.bitwiseTo(e,g,t),t},s.prototype.not=function(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},s.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+y(this[e]);return this.s<0?this.t*this.DB:-1},s.prototype.add=function(e){var t=n();return this.addTo(e,t),t},s.prototype.subtract=function(e){var t=n();return this.subTo(e,t),t},s.prototype.multiply=function(e){var t=n();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){var t=n();return this.divRemTo(e,t,null),t},s.prototype.remainder=function(e){var t=n();return this.divRemTo(e,null,t),t},s.prototype.modPow=function(e,t){var i,r,s=e.bitLength(),a=f(1);if(s<=0)return a;i=s<18?1:s<48?3:s<144?4:s<768?5:6,r=s<8?new l(t):t.isEven()?new S(t):new p(t);var o=new Array,h=3,c=i-1,d=(1<<i)-1;if(o[1]=r.convert(this),i>1){var m=n();for(r.sqrTo(o[1],m);h<=d;)o[h]=n(),r.mulTo(m,o[h-2],o[h]),h+=2}var b,g,y=e.t-1,v=!0,w=n();for(s=u(e[y])-1;y>=0;){for(s>=c?b=e[y]>>s-c&d:(b=(e[y]&(1<<s+1)-1)<<c-s,y>0&&(b|=e[y-1]>>this.DB+s-c)),h=i;0==(1&b);)b>>=1,--h;if((s-=h)<0&&(s+=this.DB,--y),v)o[b].copyTo(a),v=!1;else{for(;h>1;)r.sqrTo(a,w),r.sqrTo(w,a),h-=2;h>0?r.sqrTo(a,w):(g=a,a=w,w=g),r.mulTo(w,o[b],a)}for(;y>=0&&0==(e[y]&1<<s);)r.sqrTo(a,w),g=a,a=w,w=g,--s<0&&(s=this.DB-1,--y)}return r.revert(a)},s.prototype.pow=function(e){return this.exp(e,new v)},s.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),i=e.s<0?e.negate():e.clone();if(t.compareTo(i)<0){var r=t;t=i,i=r}var s=t.getLowestSetBit(),n=i.getLowestSetBit();if(n<0)return t;for(s<n&&(n=s),n>0&&(t.rShiftTo(n,t),i.rShiftTo(n,i));t.signum()>0;)(s=t.getLowestSetBit())>0&&t.rShiftTo(s,t),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),t.compareTo(i)>=0?(t.subTo(i,t),t.rShiftTo(1,t)):(i.subTo(t,i),i.rShiftTo(1,i));return n>0&&i.lShiftTo(n,i),i},s.int2char=c,s.ZERO=f(0),s.ONE=f(1),s.prototype.square=function(){var e=n();return this.squareTo(e),e},t.exports=s}).call(this,e("buffer").Buffer)},{"../utils":278,buffer:65}],275:[function(e,t,i){var r=e("../utils")._,s=e("./jsbn.js"),n=e("../utils.js"),a=e("../schemes/schemes.js");t.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=a[e.signingScheme],i=a[e.encryptionScheme];t===i?this.signingScheme=this.encryptionScheme=i.makeScheme(this,e):(this.encryptionScheme=i.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,i,a,o,h,c,d){if(!(e&&t&&i&&e.length>0&&(r.isNumber(t)||t.length>0)&&i.length>0))throw Error("Invalid RSA private key");this.n=new s(e),this.e=r.isNumber(t)?t:n.get32IntFromBuffer(t,0),this.d=new s(i),a&&o&&h&&c&&d&&(this.p=new s(a),this.q=new s(o),this.dmp1=new s(h),this.dmq1=new s(c),this.coeff=new s(d)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),i=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(i)<0;)t=t.add(this.p);return t.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},{"../schemes/schemes.js":277,"../utils":278,"../utils.js":278,"./jsbn.js":274}],276:[function(e,t,i){(function(i){var r=e("../libs/jsbn"),s=e("../../crypto-js/crypto-js"),n=3;e("constants");var a={md2:i.from("3020300c06082a864886f70d020205000410","hex"),md5:i.from("3020300c06082a864886f70d020505000410","hex"),sha1:i.from("3021300906052b0e03021a05000414","hex"),sha224:i.from("302d300d06096086480165030402040500041c","hex"),sha256:i.from("3031300d060960864801650304020105000420","hex"),sha384:i.from("3041300d060960864801650304020205000430","hex"),sha512:i.from("3051300d060960864801650304020305000440","hex"),ripemd160:i.from("3021300906052b2403020105000414","hex"),rmd160:i.from("3021300906052b2403020105000414","hex")},o={ripemd160:"rmd160"};function h(e,t){var i=[];return t>0&&i.push(e>>>24),t>1&&i.push(e>>>16&255),t>2&&i.push(e>>>8&255),t>3&&i.push(255&e),i}t.exports={isEncryption:!0,isSignature:!0},t.exports.makeScheme=function(e,t){function c(e,t){this.key=e,this.options=t}return c.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==n?this.key.encryptedDataLength:this.key.encryptedDataLength-11},c.prototype.encUnPad=function(e,t){t=t||{};var i=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==n)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(i=3;0!==e[i];)if(255!=e[i]||++i>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(i=3;0!==e[i];)if(++i>=e.length)return null}return e.slice(i+1,e.length)},c.prototype.sign=function(e){var t=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var n=function(e){let t;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;const r=[];let s=[],n=0;for(;t>0;)s=h(e[n],Math.min(4,t)),t-=s.length,r.push(s),n++;return new i.from([].concat.apply([],r),"hex")}(s[(t=o[t]||t).toUpperCase()](e.toString())),a=this.pkcs1pad(n,t);return this.key.$doPrivate(new r(a)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},c.prototype.pkcs1pad=function(e,t){var r=a[t];if(!r)throw Error("Unsupported hash algorithm");var s=i.concat([r,e]);if(s.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+t+")");var n=i.alloc(this.key.encryptedDataLength-s.length-1);return n.fill(255,0,n.length-1),n[0]=1,n[n.length-1]=0,i.concat([n,s])},new c(e,t)}}).call(this,e("buffer").Buffer)},{"../../crypto-js/crypto-js":245,"../libs/jsbn":274,buffer:65,constants:67}],277:[function(e,t,i){t.exports={pkcs1:e("./pkcs1"),isEncryption:function(e){return t.exports[e]&&t.exports[e].isEncryption},isSignature:function(e){return t.exports[e]&&t.exports[e].isSignature}}},{"./pkcs1":276}],278:[function(e,t,i){t.exports.linebrk=function(e,t){for(var i="",r=0;r+t<e.length;)i+=e.substring(r,r+t)+"\n",r+=t;return i+e.substring(r,e.length)},t.exports.get32IntFromBuffer=function(e,t){t=t||0;var i;if((i=e.length-t)>0){if(i>=4)return e.readUInt32BE(t);for(var r=0,s=t+i,n=0;s>t;s--,n+=2)r+=e[s-1]*Math.pow(16,n);return r}return NaN},t.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var i={};for(var r in e)e.hasOwnProperty(r)&&r!==t&&(i[r]=e[r]);return i}},t.exports.trimSurroundingText=function(e,t,i){var r=0,s=e.length,n=e.indexOf(t);n>=0&&(r=n+t.length);var a=e.indexOf(i,n);return a>=0&&(s=a),e.substring(r,s)}},{}],279:[function(e,t,i){"use strict";var r=String.prototype.replace,s=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,s,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],280:[function(e,t,i){"use strict";var r=e("./stringify"),s=e("./parse"),n=e("./formats");t.exports={formats:n,parse:s,stringify:r}},{"./formats":279,"./parse":281,"./stringify":282}],281:[function(e,t,i){"use strict";var r=e("./utils"),s=Object.prototype.hasOwnProperty,n={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},o=function(e,t,i){if(e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,n=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),o=a?r.slice(0,a.index):r,h=[];if(o){if(!i.plainObjects&&s.call(Object.prototype,o)&&!i.allowPrototypes)return;h.push(o)}for(var c=0;null!==(a=n.exec(r))&&c<i.depth;){if(c+=1,!i.plainObjects&&s.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;h.push(a[1])}return a&&h.push("["+r.slice(a.index)+"]"),function(e,t,i){for(var r=t,s=e.length-1;s>=0;--s){var n,a=e[s];if("[]"===a&&i.parseArrays)n=[].concat(r);else{n=i.plainObjects?Object.create(null):{};var o="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,h=parseInt(o,10);i.parseArrays||""!==o?!isNaN(h)&&a!==o&&String(h)===o&&h>=0&&i.parseArrays&&h<=i.arrayLimit?(n=[])[h]=r:n[o]=r:n={0:r}}r=n}return r}(h,t,i)}};t.exports=function(e,t){var i=function(e){if(!e)return n;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?n.charset:e.charset;return{allowDots:void 0===e.allowDots?n.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:n.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:n.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:n.comma,decoder:"function"==typeof e.decoder?e.decoder:n.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:n.delimiter,depth:"number"==typeof e.depth?e.depth:n.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:n.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:n.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:n.strictNullHandling}}(t);if(""===e||null==e)return i.plainObjects?Object.create(null):{};for(var h="string"==typeof e?function(e,t){var i,o={},h=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,d=h.split(t.delimiter,c),f=-1,u=t.charset;if(t.charsetSentinel)for(i=0;i<d.length;++i)0===d[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[i]?u="utf-8":"utf8=%26%2310003%3B"===d[i]&&(u="iso-8859-1"),f=i,i=d.length);for(i=0;i<d.length;++i)if(i!==f){var l,p,m=d[i],b=m.indexOf("]="),g=-1===b?m.indexOf("="):b+1;-1===g?(l=t.decoder(m,n.decoder,u),p=t.strictNullHandling?null:""):(l=t.decoder(m.slice(0,g),n.decoder,u),p=t.decoder(m.slice(g+1),n.decoder,u)),p&&t.interpretNumericEntities&&"iso-8859-1"===u&&(p=a(p)),p&&t.comma&&p.indexOf(",")>-1&&(p=p.split(",")),s.call(o,l)?o[l]=r.combine(o[l],p):o[l]=p}return o}(e,i):e,c=i.plainObjects?Object.create(null):{},d=Object.keys(h),f=0;f<d.length;++f){var u=d[f],l=o(u,h[u],i);c=r.merge(c,l,i)}return r.compact(c)}},{"./utils":283}],282:[function(e,t,i){"use strict";var r=e("./utils"),s=e("./formats"),n=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,h=Array.prototype.push,c=function(e,t){h.apply(e,o(t)?t:[t])},d=Date.prototype.toISOString,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,formatter:s.formatters[s.default],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,i,s,n,a,h,d,u,l,p,m,b,g){var y=t;if("function"==typeof d?y=d(i,y):y instanceof Date?y=p(y):"comma"===s&&o(y)&&(y=y.join(",")),null===y){if(n)return h&&!b?h(i,f.encoder,g):i;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||r.isBuffer(y))return h?[m(b?i:h(i,f.encoder,g))+"="+m(h(y,f.encoder,g))]:[m(i)+"="+m(String(y))];var v,w=[];if(void 0===y)return w;if(o(d))v=d;else{var S=Object.keys(y);v=u?S.sort(u):S}for(var _=0;_<v.length;++_){var k=v[_];a&&null===y[k]||(o(y)?c(w,e(y[k],"function"==typeof s?s(i,k):i,s,n,a,h,d,u,l,p,m,b,g)):c(w,e(y[k],i+(l?"."+k:"["+k+"]"),s,n,a,h,d,u,l,p,m,b,g)))}return w};t.exports=function(e,t){var i,r=e,h=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=s.default;if(void 0!==e.format){if(!n.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var r=s.formatters[i],a=f.filter;return("function"==typeof e.filter||o(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof h.filter?r=(0,h.filter)("",r):o(h.filter)&&(i=h.filter);var d,l=[];if("object"!=typeof r||null===r)return"";d=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=a[d];i||(i=Object.keys(r)),h.sort&&i.sort(h.sort);for(var m=0;m<i.length;++m){var b=i[m];h.skipNulls&&null===r[b]||c(l,u(r[b],b,p,h.strictNullHandling,h.skipNulls,h.encode?h.encoder:null,h.filter,h.sort,h.allowDots,h.serializeDate,h.formatter,h.encodeValuesOnly,h.charset))}var g=l.join(h.delimiter),y=!0===h.addQueryPrefix?"?":"";return h.charsetSentinel&&("iso-8859-1"===h.charset?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),g.length>0?y+g:""}},{"./formats":279,"./utils":283}],283:[function(e,t,i){"use strict";var r=Object.prototype.hasOwnProperty,s=Array.isArray,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var i=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(i[r]=e[r]);return i};t.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,i){return e[i]=t[i],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],i=[],r=0;r<t.length;++r)for(var n=t[r],a=n.obj[n.prop],o=Object.keys(a),h=0;h<o.length;++h){var c=o[h],d=a[c];"object"==typeof d&&null!==d&&-1===i.indexOf(d)&&(t.push({obj:a,prop:c}),i.push(d))}return function(e){for(;e.length>1;){var t=e.pop(),i=t.obj[t.prop];if(s(i)){for(var r=[],n=0;n<i.length;++n)void 0!==i[n]&&r.push(i[n]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,i){var r=e.replace(/\+/g," ");if("iso-8859-1"===i)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,i){if(0===e.length)return e;var r="string"==typeof e?e:String(e);if("iso-8859-1"===i)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var s="",a=0;a<r.length;++a){var o=r.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?s+=r.charAt(a):o<128?s+=n[o]:o<2048?s+=n[192|o>>6]+n[128|63&o]:o<55296||o>=57344?s+=n[224|o>>12]+n[128|o>>6&63]+n[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&r.charCodeAt(a)),s+=n[240|o>>18]+n[128|o>>12&63]+n[128|o>>6&63]+n[128|63&o])}return s},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,i,n){if(!i)return t;if("object"!=typeof i){if(s(t))t.push(i);else{if(!t||"object"!=typeof t)return[t,i];(n&&(n.plainObjects||n.allowPrototypes)||!r.call(Object.prototype,i))&&(t[i]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(i);var o=t;return s(t)&&!s(i)&&(o=a(t,n)),s(t)&&s(i)?(i.forEach((function(i,s){if(r.call(t,s)){var a=t[s];a&&"object"==typeof a&&i&&"object"==typeof i?t[s]=e(a,i,n):t.push(i)}else t[s]=i})),t):Object.keys(i).reduce((function(t,s){var a=i[s];return r.call(t,s)?t[s]=e(t[s],a,n):t[s]=a,t}),o)}}},{}]},{},[1]);
