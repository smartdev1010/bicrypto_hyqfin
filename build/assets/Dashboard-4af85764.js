import{t as pt}from"./toMoney-899207f6.js";import{t as dt}from"./toDate-7f2bc02f.js";import{F as ht,C as mt}from"./Col-495fd683.js";import{_ as C,o as h,c as g,a as s,F as P,t as n,j as F,r as V,g as u,w as p,i as gt,n as v,h as yt,l as S,q as f,s as xt}from"./_plugin-vue_export-helper-8676f0c8.js";import{u as ft,__tla as bt}from"./market-6d56493b.js";import{n as kt,v as vt,__tla as wt}from"./vue-qrcode.esm-9e0a6c12.js";import"./pinia-72e453fe.js";import"./axios-c0bebe37.js";import"./_commonjsHelpers-87174ba5.js";import"./browser-e552b3f6.js";import"./dijkstra-59d11638.js";let j,_t=Promise.all([(()=>{try{return bt}catch{}})(),(()=>{try{return wt}catch{}})()]).then(async()=>{const I={props:["values"],computed:{chartPoints(){return this.values.map(t=>t.x-8+","+t.y).join(" ")},cx(){return this.values.length?this.values[this.values.length-1].x-3:0},cy(){return this.values.length?this.values[this.values.length-1].y:0}}},L=["points"],T=["cx","cy"];function B(t,a,r,l,e,i){return h(),g(P,null,[s("polyline",{class:"polyline",fill:"none",stroke:"#f0f0f0","stroke-width":"1","stroke-linecap":"round",points:i.chartPoints},null,8,L),s("circle",{class:"circle",cx:i.cx,cy:i.cy,r:"3",fill:"#f0f0f0",stroke:"none"},null,8,T)],64)}const M=C(I,[["render",B]]),U={components:{toDate:dt,toMoney:pt,Filter:ht,Col:mt,LineChartList:M},setup(){const t=ft(),a={proxy:gnl.cors,options:{tradesLimit:10},newUpdates:!0,timeout:2e4};return t.exchange=new ccxt.pro[provider](a),{marketStore:t}},data(){return{cur_rate,cur_symbol,filters:{symbol:{value:"",keys:["symbol"]}},currentPage:1,totalPages:0,list:{},cx:0,cy:0,width:200,height:28,history:[],activeItem:"USDT"}},computed:{svgBox(){return"0 0 "+this.width+" "+this.height}},watch:{activeItem(){this.lists()}},async created(){await this.marketStore.fetch_markets(),this.lists()},mounted(){this.loop()},unmounted(){},methods:{lists(){this.marketStore.markets?this.marketStore.markets[this.activeItem]?this.list=Object.values(this.marketStore.markets[this.activeItem]):this.list=Object.values(this.marketStore.markets.ETH):this.list=[]},points(t,a,r){t=parseFloat(t)||0,a=parseFloat(a)||0,r=Array.isArray(r)?r:[],r=r.map(c=>parseFloat(c)||0);let l=r.reduce((c,m)=>m<c?m:c,r[0]),e=r.reduce((c,m)=>m>c?m:c,r[0]),i=r.length,b=a/2,y=e>l?e-l:a,x=i>1?t/(i-1):1,k=[];for(let c=0;c<i;++c){let m=2*((r[c]-l)/y-.5),w=c*x,_=-m*b*.8+b;k.push({x:w,y:_})}return k},priceFormatter(t,a=8,r=2,l=","){return t==null||isNaN(t)?0:(t=parseInt(t)!==0?parseFloat(t).toFixed(r):parseFloat(t).toFixed(a),t=parseInt(t)!==0?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,l):t,t)},handle(t){try{const a=this.marketStore.markets[this.activeItem];if(!a)return;for(const[r,l]of Object.entries(t)){const e=a[r];!e||!l.last||(e.price=l.last,e.class=l.last>(this.old&&this.old[r])?"text-success":"text-danger",this.calcHistory(r,l.last),l.percentage&&(e.change=l.percentage,e.classChange=l.percentage>(this.oldChange&&this.oldChange[r])?"text-success":"text-danger"),e.baseVolume=l.baseVolume,e.quoteVolume=l.quoteVolume)}this.old=Object.fromEntries(Object.entries(t).map(([r,l])=>[r,l.last]))}catch(a){console.error(a)}},calcHistory(t,a){this.history[t]||(this.history[t]=[]),this.history[t].length||this.fakeHistory(t,a),this.history[t].push(a),this.history[t].splice(0,this.history[t].length-30)},fakeHistory(t,a){const r=a*2e-4,l=-Math.abs(r),e=Math.abs(r);this.history[t]=[];for(let i=0;i<30;++i){const b=Math.random()*(e-l)+l;this.history[t].push(a+b)}},async loop(){for(;window.location.pathname==="/app/";)try{const t=await this.marketStore.exchange.fetchTickers();this.handle(t)}catch{break}}}},$={class:"mb-4 items-center justify-between xs:block xs:space-y-5 sm:flex sm:space-y-0"},H={class:"font-medium"},O={class:"grid gap-3 xs:grid-cols-1 md:grid-cols-2"},q=["value"],z={class:"card relative overflow-x-auto"},A={class:"bg-gray-100 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400"},N=s("th",{scope:"col",class:"py-3 px-6"},null,-1),D={"data-label":"Symbol",class:"flex items-center py-4 px-6"},E={class:"tokenicon-wrap"},G={class:"tokenicon-image"},J={class:"font-medium"},K={"data-label":"price"},Q=S(" USDT "),R={class:"well"},W=["viewBox"],X={"data-label":"change"},Y={"data-label":"volume"},Z={class:"mr-1 text-start"},tt={class:"mr-1 text-start"},et={class:"py-3 px-6","data-label":"Action"},st=s("button",{class:"btn btn-outline-primary"}," Trade ",-1),at={key:1,scope:"row",class:"border-b bg-white dark:border-gray-700 dark:bg-gray-800"},rt={colspan:"100%",class:"py-4 px-6"},lt={class:"sr-only"},ot=s("svg",{class:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),it={class:"sr-only"},ct=s("svg",{class:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1);function nt(t,a,r,l,e,i){const b=f("Filter"),y=f("Col"),x=f("VTh"),k=f("LineChartList"),c=f("router-link"),m=f("VTable"),w=f("VTPagination"),_=xt("lazy");return h(),g("div",null,[s("div",$,[s("div",H,n(t.$t("Markets")),1),s("div",O,[F((h(),g("select",{key:l.marketStore.markets.length,"onUpdate:modelValue":a[0]||(a[0]=d=>e.activeItem=d),class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-1.5 text-sm text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"},[(h(!0),g(P,null,V(l.marketStore.markets,(d,o,ut)=>(h(),g("option",{key:ut,value:o},n(o),9,q))),128))])),[[kt,e.activeItem]]),u(b,null,{default:p(()=>[F(s("input",{"onUpdate:modelValue":a[1]||(a[1]=d=>e.filters.symbol.value=d),type:"text",class:"filter-input",placeholder:"Symbol"},null,512),[[vt,e.filters.symbol.value]])]),_:1})])]),s("div",z,[e.list.length>0?(h(),gt(m,{key:e.list.length,"current-page":e.currentPage,"onUpdate:current-page":a[2]||(a[2]=d=>e.currentPage=d),class:"w-full text-left text-sm text-gray-500 dark:text-gray-400",data:e.list,filters:e.filters,"page-size":10,"hide-sort-icons":!0,onTotalPagesChanged:a[3]||(a[3]=d=>e.totalPages=d)},{head:p(()=>[s("tr",A,[u(x,{"sort-key":"symbol",scope:"col",class:"py-3 px-6"},{default:p(()=>[u(y,{text:"Symbol"})]),_:1}),u(x,{"sort-key":"price",scope:"col",class:"py-3 px-6"},{default:p(()=>[u(y,{text:"Price"})]),_:1}),u(x,{"sort-key":"change",scope:"col",class:"py-3 px-6"},{default:p(()=>[u(y,{text:"Change"})]),_:1}),N,u(x,{"sort-key":"baseVolume",scope:"col",class:"py-3 px-6"},{default:p(()=>[u(y,{text:"Volume"})]),_:1}),u(x,{"sort-key":"action",scope:"col",class:"py-3 px-6"},{default:p(()=>[u(y,{text:"Action"})]),_:1})])]),body:p(({rows:d})=>[e.list.length>0?(h(!0),g(P,{key:0},V(d,o=>(h(),g("tr",{key:o.id,class:"border-b bg-white dark:border-gray-700 dark:bg-gray-800"},[s("td",D,[s("div",E,[F(s("img",G,null,512),[[_,o.currency?"/assets/images/cryptoCurrency/"+o.currency.toLowerCase()+".png":"/market/notification.png"]])]),s("span",J,n(o.symbol),1)]),s("td",K,[s("span",{class:v(["text-start",o.class||""])},n(i.priceFormatter(o.price)||""),3),Q]),s("td",null,[s("div",R,[s("section",{class:v({transparent:!o.history})},[(h(),g("svg",{class:v(o.class),viewBox:i.svgBox,xmlns:"http://www.w3.org/2000/svg"},[u(k,{values:i.points(e.width,e.height,e.history[o.symbol])},null,8,["values"])],10,W))],2)])]),s("td",X,[s("span",{class:v(["mr-1 text-start",o.classChange||""])},n(i.priceFormatter(o.change,2)||"")+"%",3)]),s("td",Y,[s("div",Z,n(i.priceFormatter(o.baseVolume,2)||"")+" "+n(o.currency),1),s("div",tt,n(i.priceFormatter(o.quoteVolume,2)||"")+" "+n(o.pair),1)]),s("td",et,[u(c,{class:"",to:"trade/"+o.symbol},{default:p(()=>[st]),_:2},1032,["to"])])]))),128)):(h(),g("tr",at,[s("td",rt,n(t.$t("No results found!")),1)]))]),_:1},8,["current-page","data","filters"])):yt("",!0)]),u(w,{currentPage:e.currentPage,"onUpdate:currentPage":a[4]||(a[4]=d=>e.currentPage=d),class:"float-right flex items-center justify-between pt-4","aria-label":"Table navigation","total-pages":e.totalPages,"max-page-links":10,"boundary-links":!0},{firstPage:p(()=>[S(n(t.$t("First")),1)]),lastPage:p(()=>[S(n(t.$t("Last")),1)]),next:p(()=>[s("span",lt,n(t.$t("Next")),1),ot]),previous:p(()=>[s("span",it,n(t.$t("Previous")),1),ct]),_:1},8,["currentPage","total-pages"])])}j=C(U,[["render",nt]])});export{_t as __tla,j as default};
