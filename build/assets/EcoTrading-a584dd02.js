import{L as es,M as rs,__tla as ts}from"./ListItem-d13f255d.js";import{w as f,u as as,v as w,__tla as ss}from"./vue-qrcode.esm-9e0a6c12.js";import{_ as C,q as v,o as c,c as d,a as t,n as b,F as P,r as L,t as o,g as u,w as y,h as M,m as ls,j as S,b as A,l as p,i as B}from"./_plugin-vue_export-helper-8676f0c8.js";import{d as U}from"./datafeed-a8c86d1b.js";import{C as N,__tla as os}from"./flowbite-vue-d44f90c4.js";import{d as is}from"./pinia-72e453fe.js";import{t as ns}from"./toMoney-899207f6.js";import{t as cs}from"./toDate-7f2bc02f.js";import{F as ds,C as us}from"./Col-495fd683.js";import{__tla as gs}from"./market-6d56493b.js";import"./axios-c0bebe37.js";import"./_commonjsHelpers-87174ba5.js";import"./browser-e552b3f6.js";import"./dijkstra-59d11638.js";let D,bs=Promise.all([(()=>{try{return ts}catch{}})(),(()=>{try{return ss}catch{}})(),(()=>{try{return os}catch{}})(),(()=>{try{return gs}catch{}})()]).then(async()=>{const W={data(){return{favs:[],old:[],markets:[],ext,activeItem:"fav"}},created(){this.fetchMarkets(),this.fetchFavs()},mounted(){},beforeUpdate(){var e=$(".custom-data-table-fav tbody tr");$(document).on("input","input[name=search_table_fav]",function(){var r=$(this).val().toUpperCase(),i=e.filter(function(a,s){return $(s).text().trim().toUpperCase().indexOf(r)>=0?s:null}).sort(),n=$(".custom-data-table-fav tbody");i.length==0?n.html('<tr><td colspan="100%" class="text-center">Data Not Found</td></tr>'):n.html(i)})},unmounted(){},unmounted(){},methods:{fetchMarkets(){axios.get("/user/eco/markets").then(e=>{this.markets=e.markets})},fetchFavs(){axios.post("/user/watchlist/data").then(e=>{this.favs=e.favs})},isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},scrollLeft(){var e=$(".nf").scrollLeft();$(".nf").animate({scrollLeft:e-200},800)},scrollRight(){var e=$(".nf").scrollLeft();$(".nf").animate({scrollLeft:e+200},800)},addToWatchlist(e,r,i){axios.post("/user/watchlist/store",{currency:e,pair:r,type:i}).then(n=>{this.$toast[n.type](n.message),this.fetchFavs()}).catch(n=>{this.$toast.error(n.response.data)})},removeFromWatchlist(e){axios.post("/user/watchlist/delete",{id:e}).then(r=>{this.$toast.success(r.message),this.fetchFavs()}).catch(r=>{this.$toast.error("Market Already Removed From Watchlist")})},contains(e,r){var i=0;return r.forEach(function(n){i=i+e.includes(n)}),i===1},formatTotal(e){return ccxt.decimalToPrecision(e,ccxt.ROUND,3,ccxt.DECIMAL_PLACES,ccxt.PAD_WITH_ZERO)}}},I={class:"flex items-center justify-between"},z={class:"btn btn-icon",style:{position:"relative",top:"-5px"}},V={class:"nav nav-tabs nf",role:"tablist",style:{"overflow-x":"hidden"}},E={class:"nav-item"},R=t("i",{class:"bi bi-star bi-icon"},null,-1),H=[R],K=["onClick"],q={class:"btn btn-icon",style:{position:"relative",top:"-5px"}},Y={id:"myTabContent",class:"tab-content"},G=ls('<div class="row"><div class="col-12 card-search custom-data-search"><div class="input-group input-group-sm mb-1 px-1"><span id="basic-addon1" class="input-group-text text-dark border-0"><i class="bi bi-search"></i></span><input type="text" name="search_table_fav" class="form-control form-control-sm text-dark border-0" placeholder="Search..."></div></div></div>',1),Z={class:"text-dark table-sm table-borderless tableFixHead custom-data-table-fav table"},J={class:"text-muted"},Q={scope:"col"},X={class:"d-lg-none d-xl-block",scope:"col"},ee={scope:"col"},re={class:"flex justify-start"},te=["onSubmit"],ae=t("button",{type:"submit",class:"watchlisted",style:{background:"transparent",border:"transparent"}},[t("i",{class:"text-warning bi bi-star-fill mr-1"})],-1),se=[ae],le={class:"text-dark fw-bold"},oe={class:"text-secondary fw-bold"},ie={class:"d-lg-none d-xl-block"},ne=["id"],ce={class:"text-muted"},de={scope:"col"},ue={class:"flex justify-start"},ge=["onSubmit"],be=t("button",{type:"submit",class:"not-watchlisted",style:{background:"transparent",border:"transparent"}},[t("i",{class:"text-secondary bi bi-star mr-1"})],-1),ye=[be],me={class:"text-dark fw-bold"},he={key:0,class:"badge bg-info"},pe={class:"text-secondary fw-bold"},ke={key:1,class:"badge bg-info"};function fe(e,r,i,n,a,s){const g=v("router-link");return c(),d("div",null,[t("div",I,[t("button",z,[t("i",{class:"bi bi-chevron-left text-warning fs-6",onClick:r[0]||(r[0]=f(l=>s.scrollLeft(),["prevent"]))})]),t("ul",V,[t("li",E,[t("small",null,[t("a",{class:b(["nav-link",{active:s.isActive("fav")}]),href:"#fav",onClick:r[1]||(r[1]=f(l=>s.setActive("fav"),["prevent"]))},H,2)])]),(c(!0),d(P,null,L(a.markets,(l,x,_)=>(c(),d("li",{key:_,class:"nav-item"},[t("small",null,[t("a",{class:b(["nav-link",{active:s.isActive(x)}]),href:"#profile",onClick:f(m=>s.setActive(x),["prevent"])},o(x),11,K)])]))),128))]),t("button",q,[t("i",{class:"bi bi-chevron-right text-warning fs-6",onClick:r[2]||(r[2]=f(l=>s.scrollRight(),["prevent"]))})])]),t("div",Y,[t("div",{id:"fav",class:b(["tab-pane fade",{"active show":s.isActive("fav")}])},[G,t("table",Z,[t("thead",J,[t("th",Q,o(e.$t("Pair")),1),t("th",X,o(e.$t("Change")),1),t("th",ee,o(e.$t("Price")),1)]),t("tbody",null,[(c(!0),d(P,null,L(a.favs,(l,x)=>(c(),d("tr",{key:x},[t("td",null,[t("div",re,[t("form",{onSubmit:f(_=>s.removeFromWatchlist(l.id),["prevent"])},se,40,te),u(g,{to:"./"+l.currency+(l.type==1?"/":"-")+l.pair},{default:y(()=>[t("span",le,o(l.currency)+"/",1),t("span",oe,o(l.pair),1)]),_:2},1032,["to"])])]),t("td",ie,[t("span",{class:b("change-"+l.currency+l.pair)},null,2)]),t("td",null,[t("span",{class:b("tic-"+l.currency+l.pair)},null,2),t("i",{class:b("tic-"+l.currency+l.pair+"-icon bi")},null,2)])]))),128))])])],2),(c(!0),d(P,null,L(a.markets,(l,x,_)=>(c(),d("div",{id:{key:x},key:x,class:b(["tab-pane fade",{"active show":s.isActive(x)}])},[t("table",{class:b(["text-dark table-sm table-borderless tableFixHead table","custom-data-table-"+x])},[t("thead",ce,[t("th",de,o(e.$t("Pair")),1)]),t("tbody",null,[(c(!0),d(P,null,L(l,(m,T)=>(c(),d("tr",{key:T},[t("td",null,[t("div",ue,[t("form",{onSubmit:f(k=>s.addToWatchlist(m.currency,m.pair,2),["prevent"])},ye,40,ge),u(g,{to:"./"+m.currency+"-"+m.pair},{default:y(()=>[t("span",me,o(m.currency.includes("_")?m.currency.substring(0,m.currency.indexOf("_")):m.currency),1),m.currency.includes("_")?(c(),d("span",he,o(m.currency.substring(m.currency.indexOf("_")+1))+"/",1)):M("",!0),t("span",pe,o(m.pair.includes("_")?m.pair.substring(0,m.pair.indexOf("_")):m.pair),1),m.pair.includes("_")?(c(),d("span",ke,o(m.pair.substring(m.pair.indexOf("_")+1)),1)):M("",!0)]),_:2},1032,["to"])])])]))),128))])],2)],10,ne))),128))])])}const xe=C(W,[["render",fe]]),ve={components:{},props:["orderRender","market"],data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,trades:[],sideLength:12,refreshRate:100,activeItem:"marketTrades"}},computed:{},created(){},mounted(){this.loopTrades()},unmounted(){},methods:{isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},priceFormatter(e,r=8,i=2,n=","){return e?(e=parseInt(e)!==0?parseFloat(e).toFixed(i):parseFloat(e).toFixed(r),e=parseInt(e)!==0?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,n):e,e):0},listTrades(e){const r=Date.now();let i="";if(!this.lastUpdated||r-this.lastUpdated>this.refreshRate){for(let n=0;n<e.length;n++)e[n].type=="SELL"?i="rgb(246,70,93)":i="rgb(14,203,129)",$("#price"+(n+1)).css("color",i).addClass("price").text(this.priceFormatter(e[n].price)),$("#amount"+(n+1)).addClass("amount").text(this.priceFormatter(e[n].amount)),$("#time"+(n+1)).addClass("time").text(new Date(e[n].created).toLocaleTimeString("en-US"));this.lastUpdated=r}},async loopTrades(){for(;window.location.href.indexOf(this.market.currency+"-"+this.market.pair)>-1;)try{await this.fetchTrades(),await new Promise(e=>setTimeout(e,5e3))}catch{break}},async fetchTrades(){axios.post("/user/fetch/eco/trades",{symbol:this.market.currency,symbol_chain:this.market.currency_chain,currency:this.market.pair,currency_chain:this.market.pair_chain}).then(e=>{e.trades.length>0&&this.listTrades(e.trades)})},formatTime(e){return e.split("T")[1].split(".")[0]}}},we={class:"Trades border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},Se={class:"w-full bg-gray-200 dark:bg-gray-800"},_e={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},Me={id:"tradesContent"},Be={class:"table-responsive"},$e={class:"text-dark table-sm table"},Pe={class:"text-muted"},Ae={class:"text-start",scope:"col"},Ce={class:"text-end",scope:"col"},Le={class:"text-end",scope:"col"},Fe={id:"tradeTable",class:"trade"},Te=["id"],Oe=["id"],je=["id"];function Ue(e,r,i,n,a,s){return c(),d("div",we,[t("div",Se,[t("ul",_e,[t("li",null,[t("a",{id:"marketTrades-tab",class:b(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s.isActive("marketTrades")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"marketTrades","aria-selected":"false",onClick:r[0]||(r[0]=f(g=>s.setActive("marketTrades"),["prevent"]))},o(e.$t("Market Trades")),3)])])]),t("div",Me,[t("div",{id:"marketTrades",class:b(["px-3 pt-3",s.isActive("marketTrades")?"":"hidden"])},[t("div",Be,[t("table",$e,[t("thead",Pe,[t("tr",null,[t("th",Ae,o(e.$t("Price")),1),t("th",Ce,o(e.$t("Amount")),1),t("th",Le,o(e.$t("Time")),1)])]),t("tbody",Fe,[(c(!0),d(P,null,L(a.sideLength,g=>(c(),d("tr",{key:g},[t("td",{id:"price"+g,class:"text-start"},"-",8,Te),t("td",{id:"amount"+g,class:"text-end"},"-",8,Oe),t("td",{id:"time"+g,class:"text-end"},"-",8,je)]))),128))])])])],2)])])}const Ne=C(ve,[["render",Ue]]),O=["1","3","5","15","30","60","240","720","D","W","M"],F={"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"D",w:"W",m:"M"},De={"1m":"MIN_1","3m":"MIN_3","5m":"MIN_5","15m":"MIN_15","30m":"MIN_30","1h":"HOUR_1","4h":"HOUR_4","12h":"HOUR_12","1d":"DAY",w:"WEEK",m:"MONTH"},We={name:"KLineWidget",props:["market"],data(){return{interval:"1h",widget:null,duration:864e5,now:Date.now(),lastprice:[],datafeed:new U.DataFeed({getBars:e=>this.getBars(e),fetchResolveSymbol:()=>this.resolveSymbol(),fetchConfiguration:()=>new Promise(e=>{e({supported_resolutions:O})})})}},watch:{async $route(e,r){this.datafeed=new U.DataFeed({getBars:i=>this.getBars(i),fetchResolveSymbol:()=>this.resolveSymbol(),fetchConfiguration:()=>new Promise(i=>{i({supported_resolutions:O})})})}},mounted(){this.initTradingView()},methods:{resolveSymbol(){return new Promise(e=>{var r=this.$route.params.symbol+"/"+this.$route.params.currency;e({name:r,full_name:r,description:r,type:r,session:"24x7",exchange:gnl.sitename.toUpperCase(),listed_exchange:gnl.sitename.toUpperCase(),timezone:"Etc/UTC",format:"price",minmov:1,has_intraday:!0,supported_resolutions:O,volume_precision:2,data_status:"streaming"})})},async getBars(e){var r=this.$route.params.symbol+"/"+this.$route.params.currency;if(!e.firstDataRequest)return{bars:[],meta:{noData:!0}};if(e.resolution!==F[this.interval])for(let a in F)F[a]===e.resolution&&(this.interval=a);const i=await this.fetchOHLCV(r);if(e.resolution===F[this.interval]&&e.firstDataRequest&&i&&i.length&&this.subscribeKLine(r),!i||!i.length)return{bars:[],meta:{noData:!0}};const n=[];for(let a=0;a<i.length;a++){const s=i[a];n.push({time:s.timestamp,open:s.open,high:s.high,low:s.low,close:s.close,volume:s.volume})}return n.sort((a,s)=>a.time>s.time?1:-1),{bars:n,meta:{noData:!n.length}}},getRandomInt(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e))+e},fetchOHLCV(){var e=this.$route.params.symbol+"/"+this.$route.params.currency;return axios.post("/user/fetch/chart",{symbol:e,timeframe:De[this.interval]}).then(r=>r)},handleTick(e){this.datafeed.updateKLine({time:e.timestamp,open:e.open,high:e.high,low:e.low,close:e.close,volume:e.volume})},async subscribeKLine(){let e=[];for(;window.location.href.indexOf(this.market.currency+"-"+this.market.pair)>-1;)try{e=await this.fetchOHLCV(),e.length!==0&&(e.sort(function(r,i){return r.timestamp-i.timestamp}),this.handleTick(e[e.length-1])),await new Promise(r=>setTimeout(r,5e3))}catch{}},initTradingView(){$("#tv_chart_container").remove(),$("<div>",{id:"tv_chart_container",style:"height: 100%;"}).appendTo("#creatable");var e=this.$route.params.symbol+"/"+this.$route.params.currency;this.widget=new U.widget({fullscreen:!1,width:"100%",height:"100%",symbol:e,interval:F[this.interval],container_id:"tv_chart_container",datafeed:this.datafeed,library_path:"/charting_library/",locale:"en",theme:theme=="dark"?"Dark":"Light",timezone:"Etc/UTC",allow_symbol_change:!1,charts_storage_api_version:"1.1",client_id:"tradingview.com",user_id:"public_user_id",disabled_features:["header_compare","study_dialog_search_control","symbol_search_hot_key","header_symbol_search","go_to_date","compare_symbol","timezone_menu","timeframes_toolbar"],enabled_features:["dont_show_boolean_study_arguments","use_localstorage_for_settings","save_chart_properties_to_local_storage","side_toolbar_in_fullscreen_mode","hide_last_na_study_output","constraint_dialogs_movement","hide_left_toolbar_by_default"]})},setSymbol(e){var r;this.unsubscribeKLine(),this.symbol=e,(r=this.widget)==null||r.setSymbol(e,F[this.interval],()=>{console.log("------setSymbol---------",this.symbol)})}}};function Ie(e,r,i,n,a,s){return null}const ze=C(We,[["render",Ie]]),j=is("eco",{state:()=>({marketOrder:!1,bestAsk:null,bestBid:null,market:[],provider:null,market_info:null}),actions:{async fetch(e,r){await axios.post("/user/trade/"+e+"-"+r).then(i=>{i.message=="Verify your identify first!"&&(window.location.href="/user/kyc"),this.market=i.market,this.provider=i.provider,this.market_info=i.market_info})},closeModal(){this.isShowModal=!1},showModal(){this.isShowModal=!0}},persist:!0}),Ve={components:{Button:N},setup(){const e=as(),r=j();return{userStore:e,ecoStore:r}},data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,activeItem:"limit",amountMarketBuy:0,amountMarketSell:0,amountLimitBuy:0,amountLimitSell:0,priceBuy:0,priceSell:0,loading:!1,walletSymbol:null,walletCurrency:null,totalbuyMarket:0,totalsellMarket:0,totalbuyLimit:0,totalsellLimit:0,rangeMB:0,showMB:!1,rangeMS:0,showMS:!1,rangeLB:0,showLB:!1,rangeLS:0,showLS:!1}},computed:{Min(){return Number.parseFloat(this.ecoStore.market.min_amount)||1e-4},Max(){return Number.parseFloat(this.ecoStore.market.max_amount)||1e4},PrecisionAmount(){return Number.parseFloat(this.ecoStore.market.min_amount).toString().split(".")[1].length||6}},created(){},mounted(){this.fetchWallet(this.ecoStore.market.currency,this.ecoStore.market.currency_chain),this.fetchWallet(this.ecoStore.market.pair,this.ecoStore.market.pair_chain)},unmounted(){},methods:{isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e},countDecimals(e){return Math.floor(e.valueOf())===e.valueOf()?0:e.toString().split(".")[1].length||0},fetchWallet(e,r){axios.post("/user/fetch/eco/wallet",{symbol:e.includes("_")?e.substring(0,e.indexOf("_")):e,postfix:e.includes("_")?e.substring(e.indexOf("_")):"",chain:r}).then(i=>{e==this.symbol?this.walletSymbol=i.balance:e==this.currency&&(this.walletCurrency=i.balance)}).catch(i=>{this.fetchWallet(e.includes("_")?e.substring(0,e.indexOf("_")):e,r)})},createWallet(e,r){this.loading=!0,axios.post("/user/eco/wallet/create",{chain:r,network:r,symbol:e.includes("_")?e.substring(0,e.indexOf("_")):e,postfix:e.includes("_")?e.substring(e.indexOf("_")):""}).then(i=>{this.$toast[i.type](i.message),this.fetchWallet(e,r)}).catch(i=>{this.$toast.error(i.response.data.message)}).finally(()=>{this.loading=!1})},marketBuy(){this.loading=!0,this.ecoStore.bestAsk>0?axios.post("/user/eco/trade/store",{amount:Number.parseFloat(this.amountMarketBuy),symbol:this.ecoStore.market.currency,symbol_chain:this.ecoStore.market.currency_chain,currency:this.ecoStore.market.pair,currency_chain:this.ecoStore.market.pair_chain,tradeType:"market",type:"BUY",taker:this.ecoStore.market.taker,price:Number.parseFloat(this.ecoStore.bestAsk)}).then(e=>{e.messages?e.message.forEach(r=>{this.$toast[e.type](r)}):this.$toast[e.type](e.message),this.fetchWallet(this.symbol,this.ecoStore.market.currency_chain),this.fetchWallet(this.currency,this.ecoStore.market.pair_chain)}).catch(e=>{this.$toast.error(e.response.data.message)}).finally(()=>{this.loading=!1}):(this.$toast.error("No Market Price, Please Do Limit Order"),this.loading=!1)},marketSell(){this.loading=!0,this.ecoStore.bestBid>0?axios.post("/user/eco/trade/store",{amount:Number.parseFloat(this.amountMarketSell),symbol:this.ecoStore.market.currency,symbol_chain:this.ecoStore.market.currency_chain,currency:this.ecoStore.market.pair,currency_chain:this.ecoStore.market.pair_chain,tradeType:"market",type:"SELL",maker:this.ecoStore.market.maker,price:Number.parseFloat(this.ecoStore.bestBid)}).then(e=>{e.messages?e.message.forEach(r=>{this.$toast[e.type](r)}):this.$toast[e.type](e.message),this.fetchWallet(this.symbol,this.ecoStore.market.currency_chain),this.fetchWallet(this.currency,this.ecoStore.market.pair_chain)}).catch(e=>{this.$toast.error(e.response.data.message)}).finally(()=>{this.loading=!1}):(this.$toast.error("Please wait for orderbook to load"),this.loading=!1)},limitBuy(){this.loading=!0,this.priceBuy>0?axios.post("/user/eco/trade/store",{amount:Number.parseFloat(this.amountLimitBuy),price:Number.parseFloat(this.priceBuy),symbol:this.ecoStore.market.currency,symbol_chain:this.ecoStore.market.currency_chain,currency:this.ecoStore.market.pair,currency_chain:this.ecoStore.market.pair_chain,tradeType:"limit",type:"BUY",taker:this.ecoStore.market.taker}).then(e=>{e.messages?e.message.forEach(r=>{this.$toast[e.type](r)}):this.$toast[e.type](e.message),this.fetchWallet(this.symbol,this.ecoStore.market.currency_chain),this.fetchWallet(this.currency,this.ecoStore.market.pair_chain)}).catch(e=>{this.$toast.error(e.response.data.message)}).finally(()=>{this.loading=!1}):(this.$toast.error("Please set a valid price"),this.loading=!1)},limitSell(){this.loading=!0,this.priceSell>0?axios.post("/user/eco/trade/store",{amount:Number(this.amountLimitSell),price:Number(this.priceSell),symbol:this.ecoStore.market.currency,symbol_chain:this.ecoStore.market.currency_chain,currency:this.ecoStore.market.pair,currency_chain:this.ecoStore.market.pair_chain,tradeType:"limit",type:"SELL",maker:this.ecoStore.market.maker}).then(e=>{if(e.messages)for(let r=0;r<e.messages.length;r++)this.$toast.error(e.messages[r]);else this.$toast[e.type](e.message);this.fetchWallet(this.symbol,this.ecoStore.market.currency_chain),this.fetchWallet(this.currency,this.ecoStore.market.pair_chain)}).catch(e=>{this.$toast.error(e.response.data.message)}).finally(()=>{this.loading=!1}):(this.$toast.error("Please set a valid price"),this.loading=!1)},calculatePercentage(e,r,i){if(!this.walletCurrency&&!this.walletSymbol){this.$toast.error(`Create ${i==="buy"?this.currency:this.symbol} Wallet First`);return}if(!this.ecoStore.bestBid&&!this.ecoStore.bestAsk){this.$toast.error("Waiting For Orderbook...");return}const n=this.getAmount(i),a=this.calculateTotalAmount(n,r,i,e);e==="market"?(this.marketRange=i==="buy"?"MB":"MS",this[`amountMarket${i==="buy"?"Buy":"Sell"}`]=n,this[`total${i}Market`]=a):(this.limitRange=i==="buy"?"LB":"LS",this[`amountLimit${i==="buy"?"Buy":"Sell"}`]=n,this[`total${i}Limit`]=a)},getAmount(e){const r=e==="buy"?this.walletCurrency:this.walletSymbol;return parseFloat(r).toFixed(this.precisionAmount)},calculateTotalAmount(e,r,i,n){const a=i==="buy"?n==="market"?this.ecoStore.bestAsk:this.priceBuy:n==="market"?this.ecoStore.bestBid:this.priceSell,s=(i==="buy"?this.ecoStore.market.taker:this.ecoStore.market.maker)/100,g=e*(r/100)/a,l=g*s;return parseFloat(g-l).toFixed(this.precisionAmount)},calculatePrice(e,r){let i,n,a,s;if(r==="buy"?(i=e==="market"?this.amountMarketBuy:this.amountLimitBuy,n=this.walletCurrency,a=this.currency,s=this.ecoStore.market.taker):(i=e==="market"?this.amountMarketSell:this.amountLimitSell,n=this.walletSymbol,a=this.symbol,s=this.ecoStore.market.maker),n===null){this.$toast.error("Create "+a+" Wallet First");return}if(e==="market"&&this.ecoStore.bestBid===null){this.$toast.error("No spot price detected, Make a limit order first");return}const g=i+i*(s/100);if(n<g){this.$toast.error("Order price higher than your "+a+" wallet balance");return}const l=e==="market"?r==="buy"?this.ecoStore.bestAsk:this.ecoStore.bestBid:r==="buy"?this.priceBuy:this.priceSell,x=(i-i*(s/100))*l;this[`total${r}${e==="market"?"Market":"Limit"}`]=x.toFixed(this.PrecisionAmount)},getBestAsk(){this.priceBuy=this.ecoStore.bestAsk?this.ecoStore.bestAsk:this.ecoStore.bestBid},getBestBid(){this.priceSell=this.ecoStore.bestBid?this.ecoStore.bestBid:this.ecoStore.bestAsk}}},Ee={class:"Order border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},Re={class:"w-full bg-gray-200 dark:bg-gray-800"},He={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},Ke={role:"presentation"},qe=["aria-selected"],Ye={role:"presentation"},Ge=["aria-selected"],Ze={role:"presentation"},Je=["aria-selected"],Qe={id:"myTabContent",class:"px-3 py-3"},Xe={class:"grid grid-cols-2 gap-5"},er={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},rr={class:"mt-1 flex w-full justify-between px-1"},tr={class:"flex"},ar=["min","max","step"],sr=t("i",{class:"bi bi-caret-up-fill"},null,-1),lr=[sr],or=t("i",{class:"bi bi-caret-down-fill"},null,-1),ir=[or],nr={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},cr={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},dr={class:"text-warning"},ur={class:"flex"},gr={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},br={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},yr={class:"mt-1 flex w-full justify-between px-1"},mr={class:"flex"},hr=["min","max"],pr={class:"inline-flex flex-shrink-0 flex-col items-center border border-gray-300 bg-gray-100 text-center text-xs text-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},kr=t("i",{class:"bi bi-caret-up-fill"},null,-1),fr=[kr],xr=t("i",{class:"bi bi-caret-down-fill"},null,-1),vr=[xr],wr={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Sr={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},_r={class:"text-warning"},Mr={class:"flex"},Br={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},$r={class:"grid grid-cols-2 gap-5"},Pr={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},Ar={class:"flex"},Cr={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Lr={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},Fr={class:"mt-1 flex w-full justify-between px-1"},Tr={class:"flex"},Or=["min","max","step"],jr=t("i",{class:"bi bi-caret-up-fill"},null,-1),Ur=[jr],Nr=t("i",{class:"bi bi-caret-down-fill"},null,-1),Dr=[Nr],Wr={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Ir={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},zr={class:"text-warning"},Vr={class:"flex"},Er={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},Rr={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},Hr={class:"flex"},Kr={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},qr={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},Yr={class:"mt-1 flex w-full justify-between px-1"},Gr={class:"flex"},Zr=["min","max"],Jr=t("i",{class:"bi bi-caret-up-fill"},null,-1),Qr=[Jr],Xr=t("i",{class:"bi bi-caret-down-fill"},null,-1),et=[Xr],rt={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},tt={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},at={class:"text-warning"},st={class:"flex"},lt={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},ot={class:"grid grid-cols-2 gap-5"},it={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},nt={class:"text-dark"},ct={key:1,class:"flex"},dt=["value"],ut={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},gt={for:"basic-url",class:"border-1 peer flex w-full appearance-none justify-between rounded-lg border-gray-300 bg-transparent pb-2 text-xs text-gray-900 focus:border-blue-600 focus:outline-none focus:ring-0 dark:border-gray-600 dark:text-gray-200 dark:focus:border-blue-500"},bt={class:"text-dark"},yt={key:1,class:"flex"},mt=["value"],ht={class:"inline-flex flex-shrink-0 items-center rounded-r-md border border-gray-300 bg-gray-100 p-2 text-center text-xs text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"};function pt(e,r,i,n,a,s){const g=v("Button");return c(),d("div",Ee,[t("div",Re,[t("ul",He,[t("li",Ke,[t("button",{id:"spot-tab",class:b(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s.isActive("spot")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"spot","aria-selected":!!s.isActive("spot"),onClick:r[0]||(r[0]=l=>s.setActive("spot"))},o(e.$t("Spot")),11,qe)]),t("li",Ye,[t("button",{id:"limit-tab",class:b(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s.isActive("limit")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"limit","aria-selected":!!s.isActive("limit"),onClick:r[1]||(r[1]=l=>s.setActive("limit"))},o(e.$t("Limit")),11,Ge)]),t("li",Ze,[t("button",{id:"wallets-tab",class:b(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s.isActive("wallets")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"wallets","aria-selected":!!s.isActive("wallets"),onClick:r[2]||(r[2]=l=>s.setActive("wallets"))},o(e.$t("Wallets")),11,Je)])])]),t("div",Qe,[t("div",{id:"spot",class:b({hidden:!s.isActive("spot")}),role:"tabpanel","aria-labelledby":"spot-tab"},[t("div",Xe,[t("form",{class:"space-y-3 text-center",onSubmit:r[18]||(r[18]=f(l=>s.marketBuy(),["prevent"]))},[t("div",null,[t("label",er,[t("span",null,o(e.$t("Amount")),1),t("div",{class:"group relative",onMouseover:r[10]||(r[10]=l=>a.showMB=!0),onMouseleave:r[11]||(r[11]=l=>a.showMB=!1)},[S(t("input",{"onUpdate:modelValue":r[3]||(r[3]=l=>a.rangeMB=l),type:"range",min:"0",max:"100",step:"1",class:"w-full",style:A("background: `linear-gradient(to right, #fff 0%, #fff "+a.rangeMB+"%, rgb(255 255 255 / 0.2) "+a.rangeMB+"%, rgb(255 255 255 / 0.2) 100%)`"),onChange:r[4]||(r[4]=l=>s.calculatePercentage("market",a.rangeMB,"buy"))},null,36),[[w,a.rangeMB]]),t("div",rr,[(c(),d("button",{key:a.rangeMB,class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMB>=0?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[5]||(r[5]=l=>s.calculatePercentage("market",0,"buy"))},null,2)),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMB>=25?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[6]||(r[6]=l=>s.calculatePercentage("market",25,"buy"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMB>=50?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[7]||(r[7]=l=>s.calculatePercentage("market",50,"buy"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMB>=75?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[8]||(r[8]=l=>s.calculatePercentage("market",75,"buy"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMB==100?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[9]||(r[9]=l=>s.calculatePercentage("market",100,"buy"))},null,2)]),t("div",{class:b([{hidden:!a.showMB},"bg-primary absolute origin-bottom scale-y-0 rounded-md py-1 px-2 text-xs transition-transform duration-200 ease-in group-hover:scale-100"]),style:A([{top:"-30px"},"left: "+(a.rangeMB-10)+"%"])},o(a.rangeMB)+"% ",7)],32)]),t("div",tr,[S((c(),d("input",{key:s.Min,"onUpdate:modelValue":r[12]||(r[12]=l=>a.amountMarketBuy=l),type:"number",class:"MarketBuy block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",min:s.Min,max:s.Max,step:s.Min,required:"","aria-label":"Amount (to the nearest dollar)",onKeyup:r[13]||(r[13]=l=>s.calculatePrice("market","buy")),onChange:r[14]||(r[14]=l=>s.calculatePrice("market","buy"))},null,40,ar)),[[w,a.amountMarketBuy]]),(c(),d("span",{key:n.ecoStore.market.id,class:"inline-flex flex-shrink-0 flex-col items-center border border-gray-300 bg-gray-100 text-center text-xs text-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},[t("a",{class:"border-b border-gray-300 px-2 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[15]||(r[15]=l=>{a.amountMarketBuy=Number(parseFloat(a.amountMarketBuy)+s.Min).toFixed(s.PrecisionAmount),s.calculatePrice("market","buy")})},lr),t("a",{class:"px-2 hover:bg-gray-200 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[16]||(r[16]=l=>{parseFloat(a.amountMarketBuy)-s.Min>=0&&Number(a.amountMarketBuy=parseFloat(parseFloat(a.amountMarketBuy)-s.Min).toFixed(s.PrecisionAmount)),s.calculatePrice("market","buy")})},ir)])),t("span",nr,o(a.symbol),1)])]),t("div",null,[t("label",cr,[t("span",null,o(e.$t("Total")),1),t("span",null,[p(o(e.$t("Taker Fee"))+": ",1),t("span",dr,o(n.ecoStore.market.taker||e.toMoney)+"%",1)])]),t("div",ur,[S(t("input",{"onUpdate:modelValue":r[17]||(r[17]=l=>a.totalbuyMarket=l),type:"number",class:"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",disabled:"","aria-label":"Amount (to the nearest dollar)"},null,512),[[w,a.totalbuyMarket]]),t("span",gr,o(a.currency),1)])]),u(g,{id:"marketOrderBtnBuy",color:"green",outline:"",size:"sm",class:"marketType w-full",loading:a.loading,disabled:a.loading||!n.ecoStore.bestAsk},{default:y(()=>[p(o(n.ecoStore.bestAsk?e.$t("Buy")+" "+a.symbol:"No Asks Founds"),1)]),_:1},8,["loading","disabled"])],32),t("form",{class:"space-y-3 text-center",onSubmit:r[33]||(r[33]=f(l=>s.marketSell(),["prevent"]))},[t("div",null,[t("label",br,[t("span",null,o(e.$t("Amount")),1),t("div",{class:"group relative",onMouseover:r[26]||(r[26]=l=>a.showMS=!0),onMouseleave:r[27]||(r[27]=l=>a.showMS=!1)},[S(t("input",{"onUpdate:modelValue":r[19]||(r[19]=l=>a.rangeMS=l),type:"range",min:"0",max:"100",step:"1",class:"w-full",style:A("background: `linear-gradient(to right, #fff 0%, #fff "+a.rangeMS+"%, rgb(255 255 255 / 0.2) "+a.rangeMS+"%, rgb(255 255 255 / 0.2) 100%)`"),onChange:r[20]||(r[20]=l=>s.calculatePercentage("market",a.rangeMS,"sell"))},null,36),[[w,a.rangeMS]]),t("div",yr,[(c(),d("button",{key:a.rangeMS,class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMS>=0?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[21]||(r[21]=l=>s.calculatePercentage("market",0,"sell"))},null,2)),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMS>=25?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[22]||(r[22]=l=>s.calculatePercentage("market",25,"sell"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMS>=50?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[23]||(r[23]=l=>s.calculatePercentage("market",50,"sell"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMS>=75?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[24]||(r[24]=l=>s.calculatePercentage("market",75,"sell"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeMS==100?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[25]||(r[25]=l=>s.calculatePercentage("market",100,"sell"))},null,2)]),t("div",{class:b([{hidden:!a.showMS},"bg-primary absolute origin-bottom scale-y-0 rounded-md py-1 px-2 text-xs transition-transform duration-200 ease-in group-hover:scale-100"]),style:A([{top:"-30px"},"left: "+(a.rangeMS-10)+"%"])},o(a.rangeMS)+"% ",7)],32)]),t("div",mr,[S((c(),d("input",{key:s.Min,"onUpdate:modelValue":r[28]||(r[28]=l=>a.amountMarketSell=l),type:"number",class:"MarketSell block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",min:s.Min?s.Min:0,max:s.Max,step:"0.00000001",required:"","aria-label":"Amount (to the nearest dollar)",onKeyup:r[29]||(r[29]=l=>s.calculatePrice("market","sell"))},null,40,hr)),[[w,a.amountMarketSell]]),t("span",pr,[t("a",{class:"border-b border-gray-300 px-2 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[30]||(r[30]=l=>{a.amountMarketSell=Number(parseFloat(a.amountMarketSell)+s.Min).toFixed(s.PrecisionAmount),s.calculatePrice("market","buy")})},fr),t("a",{class:"px-2 hover:bg-gray-200 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[31]||(r[31]=l=>{parseFloat(a.amountMarketSell)-s.Min>=0&&Number(a.amountMarketSell=parseFloat(parseFloat(a.amountMarketSell)-s.Min).toFixed(s.PrecisionAmount)),s.calculatePrice("market","buy")})},vr)]),t("span",wr,o(a.symbol),1)])]),t("div",null,[t("label",Sr,[t("span",null,o(e.$t("Total")),1),t("span",null,[p(o(e.$t("Maker Fee"))+": ",1),t("span",_r,o(n.ecoStore.market.maker||e.toMoney)+"%",1)])]),t("div",Mr,[S(t("input",{"onUpdate:modelValue":r[32]||(r[32]=l=>a.totalsellMarket=l),type:"number",class:"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",disabled:"","aria-label":"Amount (to the nearest dollar)"},null,512),[[w,a.totalsellMarket]]),t("span",Br,o(a.currency),1)])]),u(g,{id:"marketOrderBtnSell",color:"red",outline:"",size:"sm",class:"marketType w-full",loading:a.loading,disabled:a.loading||!n.ecoStore.bestBid},{default:y(()=>[p(o(n.ecoStore.bestBid?e.$t("Sell")+" "+a.symbol:"No Bids Found"),1)]),_:1},8,["loading","disabled"])],32)])],2),t("div",{id:"limit",class:b({hidden:!s.isActive("limit")}),role:"tabpanel","aria-labelledby":"limit-tab"},[t("div",$r,[t("form",{class:"space-y-3 text-center",onSubmit:r[53]||(r[53]=f(l=>s.limitBuy(),["prevent"]))},[t("div",null,[t("label",Pr,[t("span",null,o(e.$t("Price")),1),t("a",{class:"text-warning",onClick:r[34]||(r[34]=l=>s.getBestAsk())},o(e.$t("Best Ask")),1)]),t("div",Ar,[S(t("input",{id:"price","onUpdate:modelValue":r[35]||(r[35]=l=>a.priceBuy=l),type:"number",class:"priceNowAsk block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",min:"0.00000001",step:"0.00000001",required:"",placeholder:"Price","aria-label":"Amount (to the nearest dollar)",onKeyup:r[36]||(r[36]=l=>s.calculatePrice("limit","buy")),onChange:r[37]||(r[37]=l=>s.calculatePrice("limit","buy"))},null,544),[[w,a.priceBuy]]),t("span",Cr,o(a.currency),1)])]),t("div",null,[t("label",Lr,[t("span",null,o(e.$t("Amount")),1),t("div",{class:"group relative",onMouseover:r[45]||(r[45]=l=>a.showLB=!0),onMouseleave:r[46]||(r[46]=l=>a.showLB=!1)},[S(t("input",{"onUpdate:modelValue":r[38]||(r[38]=l=>a.rangeLB=l),type:"range",min:"0",max:"100",step:"1",class:"w-full",style:A("background: `linear-gradient(to right, #fff 0%, #fff "+a.rangeLB+"%, rgb(255 255 255 / 0.2) "+a.rangeLB+"%, rgb(255 255 255 / 0.2) 100%)`"),onChange:r[39]||(r[39]=l=>s.calculatePercentage("limit",a.rangeLB,"buy"))},null,36),[[w,a.rangeLB]]),t("div",Fr,[(c(),d("button",{key:a.rangeLB,class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLB>=0?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[40]||(r[40]=l=>s.calculatePercentage("limit",0,"buy"))},null,2)),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLB>=25?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[41]||(r[41]=l=>s.calculatePercentage("limit",25,"buy"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLB>=50?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[42]||(r[42]=l=>s.calculatePercentage("limit",50,"buy"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLB>=75?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[43]||(r[43]=l=>s.calculatePercentage("limit",75,"buy"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLB==100?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[44]||(r[44]=l=>s.calculatePercentage("limit",100,"buy"))},null,2)]),t("div",{class:b([{hidden:!a.showLB},"bg-primary absolute origin-bottom scale-y-0 rounded-md py-1 px-2 text-xs transition-transform duration-200 ease-in group-hover:scale-100"]),style:A([{top:"-30px"},"left: "+(a.rangeLB-10)+"%"])},o(a.rangeLB)+"% ",7)],32)]),t("div",Tr,[S((c(),d("input",{key:s.Min,"onUpdate:modelValue":r[47]||(r[47]=l=>a.amountLimitBuy=l),type:"number",class:"LimitBuy block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",min:s.Min?s.Min:0,max:s.Max,step:s.Min,required:"","aria-label":"Amount (to the nearest dollar)",onKeyup:r[48]||(r[48]=l=>s.calculatePrice("limit","buy")),onChange:r[49]||(r[49]=l=>s.calculatePrice("limit","buy"))},null,40,Or)),[[w,a.amountLimitBuy]]),(c(),d("span",{key:n.ecoStore.market.id,class:"inline-flex flex-shrink-0 flex-col items-center border border-gray-300 bg-gray-100 text-center text-xs text-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},[t("a",{class:"border-b border-gray-300 px-2 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[50]||(r[50]=l=>{a.amountLimitBuy=Number(parseFloat(a.amountLimitBuy)+s.Min).toFixed(s.PrecisionAmount),s.calculatePrice("limit","buy")})},Ur),t("a",{class:"px-2 hover:bg-gray-200 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[51]||(r[51]=l=>{parseFloat(a.amountLimitBuy)-s.Min>=0&&(a.amountLimitBuy=Number(parseFloat(a.amountLimitBuy)-s.Min).toFixed(s.PrecisionAmount)),s.calculatePrice("limit","buy")})},Dr)])),t("span",Wr,o(a.symbol),1)])]),t("div",null,[t("label",Ir,[t("span",null,o(e.$t("Total")),1),t("span",null,[p(o(e.$t("Taker Fee"))+": ",1),t("span",zr,o(n.ecoStore.market.taker)+"%",1)])]),t("div",Vr,[S(t("input",{"onUpdate:modelValue":r[52]||(r[52]=l=>a.totalbuyLimit=l),type:"number",class:"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500","aria-label":"Amount (to the nearest dollar)",disabled:""},null,512),[[w,a.totalbuyLimit]]),t("span",Er,o(a.currency),1)])]),u(g,{id:"limitOrderBtnBuy",color:"green",outline:"",size:"sm",class:"limitType w-full",loading:a.loading,disabled:a.loading},{default:y(()=>[p(o(e.$t("Buy")+" "+a.symbol),1)]),_:1},8,["loading","disabled"])],32),t("form",{class:"space-y-3 text-center",onSubmit:r[72]||(r[72]=f(l=>s.limitSell(),["prevent"]))},[t("div",null,[t("label",Rr,[t("span",null,o(e.$t("Price")),1),t("a",{class:"text-warning",onClick:r[54]||(r[54]=l=>s.getBestBid())},o(e.$t("Best Bid")),1)]),t("div",Hr,[S(t("input",{id:"price","onUpdate:modelValue":r[55]||(r[55]=l=>a.priceSell=l),type:"number",class:"priceNowAsk block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",min:"0",step:"0.00000001",required:"",placeholder:"Price","aria-label":"Amount (to the nearest dollar)",onKeyup:r[56]||(r[56]=l=>s.calculatePrice("limit","sell")),onChange:r[57]||(r[57]=l=>s.calculatePrice("limit","sell"))},null,544),[[w,a.priceSell]]),t("span",Kr,o(a.currency),1)])]),t("div",null,[t("label",qr,[t("span",null,o(e.$t("Amount")),1),t("div",{class:"group relative",onMouseover:r[65]||(r[65]=l=>a.showLS=!0),onMouseleave:r[66]||(r[66]=l=>a.showLS=!1)},[S(t("input",{"onUpdate:modelValue":r[58]||(r[58]=l=>a.rangeLS=l),type:"range",min:"0",max:"100",step:"1",class:"w-full",style:A("background: `linear-gradient(to right, #fff 0%, #fff "+a.rangeLS+"%, rgb(255 255 255 / 0.2) "+a.rangeLS+"%, rgb(255 255 255 / 0.2) 100%)`"),onChange:r[59]||(r[59]=l=>s.calculatePercentage("limit",a.rangeLS,"sell"))},null,36),[[w,a.rangeLS]]),t("div",Yr,[(c(),d("button",{key:a.rangeLS,class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLS>=0?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[60]||(r[60]=l=>s.calculatePercentage("limit",0,"sell"))},null,2)),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLS>=25?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[61]||(r[61]=l=>s.calculatePercentage("limit",25,"sell"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLS>=50?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[62]||(r[62]=l=>s.calculatePercentage("limit",50,"sell"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLS>=75?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[63]||(r[63]=l=>s.calculatePercentage("limit",75,"sell"))},null,2),t("button",{class:b(["flex h-1 w-1 items-center justify-center rounded-lg hover:-m-1 hover:h-3 hover:w-3",a.rangeLS==100?"bg-gray-900 dark:bg-gray-50":"bg-gray-300 dark:bg-gray-500"]),onClick:r[64]||(r[64]=l=>s.calculatePercentage("limit",100,"sell"))},null,2)]),t("div",{class:b([{hidden:!a.showLS},"bg-primary absolute origin-bottom scale-y-0 rounded-md py-1 px-2 text-xs transition-transform duration-200 ease-in group-hover:scale-100"]),style:A([{top:"-30px"},"left: "+(a.rangeLS-10)+"%"])},o(a.rangeLS)+"% ",7)],32)]),t("div",Gr,[S((c(),d("input",{key:s.Min,"onUpdate:modelValue":r[67]||(r[67]=l=>a.amountLimitSell=l),type:"number",class:"LimitSell block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",min:s.Min?s.Min:0,max:s.Max,step:"0.00000001",required:"","aria-label":"Amount (to the nearest dollar)",onKeyup:r[68]||(r[68]=l=>s.calculatePrice("limit","sell"))},null,40,Zr)),[[w,a.amountLimitSell]]),(c(),d("span",{key:n.ecoStore.market.id,class:"inline-flex flex-shrink-0 flex-col items-center border border-gray-300 bg-gray-100 text-center text-xs text-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200"},[t("a",{class:"border-b border-gray-300 px-2 hover:bg-gray-200 dark:border-gray-600 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[69]||(r[69]=l=>{a.amountLimitSell=Number(parseFloat(a.amountLimitSell)+s.Min).toFixed(s.PrecisionAmount),s.calculatePrice("limit","sell")})},Qr),t("a",{class:"px-2 hover:bg-gray-200 dark:hover:bg-gray-600 dark:focus:ring-gray-700",onClick:r[70]||(r[70]=l=>{parseFloat(a.amountLimitSell)-s.Min>=0&&(a.amountLimitSell=Number(parseFloat(a.amountLimitSell)-s.Min).toFixed(s.PrecisionAmount)),s.calculatePrice("limit","sell")})},et)])),t("span",rt,o(a.symbol),1)])]),t("div",null,[t("label",tt,[t("span",null,o(e.$t("Total")),1),t("span",null,[p(o(e.$t("Maker Fee"))+": ",1),t("span",at,o(n.ecoStore.market.maker||e.toMoney)+"%",1)])]),t("div",st,[S(t("input",{"onUpdate:modelValue":r[71]||(r[71]=l=>a.totalsellLimit=l),type:"number",class:"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500","aria-label":"Amount (to the nearest dollar)",disabled:""},null,512),[[w,a.totalsellLimit]]),t("span",lt,o(a.currency),1)])]),u(g,{id:"limitOrderBtnSell",color:"red",outline:"",size:"sm",class:"limitType w-full",loading:a.loading,disabled:a.loading},{default:y(()=>[p(o(e.$t("Sell")+" "+(a.symbol.includes("_")?a.symbol.substring(0,a.symbol.indexOf("_")):a.symbol)),1)]),_:1},8,["loading","disabled"])],32)])],2),t("div",{id:"wallets",class:b({hidden:!s.isActive("wallets")}),role:"tabpanel","aria-labelledby":"wallets-tab"},[t("div",ot,[(c(),d("div",{key:"sym"+a.walletSymbol},[t("label",it,[t("a",nt,o(a.symbol.includes("_")?a.symbol.substring(0,a.symbol.indexOf("_")):a.symbol)+" "+o(e.$t("Wallet")),1)]),a.walletSymbol==null?(c(),d("form",{key:0,onSubmit:r[73]||(r[73]=f(l=>s.createWallet(n.ecoStore.market.currency,n.ecoStore.market.currency_chain),["prevent"]))},[u(g,{color:"green",outline:"",size:"sm",loading:a.loading,disabled:a.loading},{default:y(()=>[p(o(e.$t("Create Wallet")),1)]),_:1},8,["loading","disabled"])],32)):(c(),d("div",ct,[(c(),d("input",{key:a.walletSymbol,type:"number",class:"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",value:a.walletSymbol,readonly:"","aria-label":"Amount (to the nearest dollar)"},null,8,dt)),t("span",ut,o(n.ecoStore.market.currency),1)]))])),(c(),d("div",{key:"cur"+a.walletCurrency},[t("label",gt,[t("a",bt,o(a.currency.includes("_")?a.currency.substring(0,a.currency.indexOf("_")):a.currency)+" "+o(e.$t("Wallet")),1)]),a.walletCurrency==null?(c(),d("form",{key:0,onSubmit:r[74]||(r[74]=f(l=>s.createWallet(n.ecoStore.market.pair,n.ecoStore.market.pair_chain),["prevent"]))},[u(g,{color:"green",outline:"",size:"sm",loading:a.loading,disabled:a.loading},{default:y(()=>[p(o(e.$t("Create Wallet")),1)]),_:1},8,["loading","disabled"])],32)):(c(),d("div",yt,[(c(),d("input",{key:a.walletCurrency,type:"number",class:"block w-full rounded-l-md border border-gray-300 bg-gray-50 p-2 text-xs text-gray-900 focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500",value:a.walletCurrency,readonly:"","aria-label":"Amount (to the nearest dollar)"},null,8,mt)),t("span",ht,o(n.ecoStore.market.pair),1)]))]))])],2)])])}const kt=C(Ve,[["render",pt]]),ft={components:{toDate:cs,toMoney:ns,Filter:ds,Col:us,Button:N},props:["market"],data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,activeItem:"open-orders",open_orders:[],closed_orders:[],currentPage:1,totalPages:0,currentPageOpen:1,totalPagesOpen:0,loadingCancel:!1}},created(){},mounted(){this.fetchOrders()},unmounted(){},methods:{fetchOrders(){axios.post("/user/fetch/eco/trade/get/orders",{symbol:this.market.currency,symbol_chain:this.market.currency_chain,currency:this.market.pair,currency_chain:this.market.pair_chain}).then(e=>{this.open_orders=e.open_orders,this.closed_orders=e.closed_orders,this.open_orders.errorCode&&this.fetchOrders()}).catch(e=>{})},cancelOrder(e){this.loadingCancel=!0,axios.post("/user/eco/order/cancel/"+e).then(r=>{r.data?r.message.forEach(i=>{this.$toast[r.type](i)}):this.$toast[r.type](r.message),this.fetchOrders()}).catch(r=>{}).finally(()=>{this.loadingCancel=!1})},isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e}}},xt={class:"border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900",style:{margin:"0 -20px"}},vt={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden bg-gray-200 text-center dark:bg-gray-800",role:"tablist"},wt={class:"bg-gray-100 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400"},St={class:"py-3 px-6","data-label":"Date"},_t={"data-label":"TxHash",class:"text-uppercase text-center"},Mt={"data-label":"Symbol",class:"text-uppercase text-center"},Bt={"data-label":"Side",class:"text-uppercase text-center"},$t={key:0,class:"badge bg-sucess"},Pt={key:1,class:"badge bg-danger"},At={"data-label":"Price",class:"text-center"},Ct={"data-label":"Amount",class:"text-center"},Lt={"data-label":"Filled",class:"text-center"},Ft={"data-label":"Status",class:"text-center"},Tt={class:"badge bg-primary"},Ot=["loading","disabled","onClick"],jt={key:1,class:"badge bg-warning"},Ut={key:1},Nt={class:"text-center",colspan:"100%"},Dt=t("div",{class:"flex w-full justify-center"},[t("img",{height:"128",width:"128",src:"https://assets.staticimg.com/pro/2.0.4/images/empty.svg",alt:""})],-1),Wt={class:"sr-only"},It=t("svg",{class:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),zt={class:"sr-only"},Vt=t("svg",{class:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),Et={class:"bg-gray-100 text-xs uppercase text-gray-700 dark:bg-gray-700 dark:text-gray-400"},Rt={class:"py-3 px-6","data-label":"Date"},Ht={"data-label":"TxHash",class:"text-uppercase"},Kt={"data-label":"Symbol",class:"text-uppercase"},qt={"data-label":"Side",class:"text-uppercase"},Yt={key:0,class:"fw-bold text-success"},Gt={key:1,class:"fw-bold text-danger"},Zt={"data-label":"Price"},Jt={"data-label":"Amount"},Qt={"data-label":"Filled"},Xt={"data-label":"Status"},ea={class:"badge bg-success"},ra={key:1},ta={class:"text-center",colspan:"100%"},aa=t("div",{class:"flex w-full justify-center"},[t("img",{height:"128",width:"128",src:"https://assets.staticimg.com/pro/2.0.4/images/empty.svg",alt:""})],-1),sa={class:"sr-only"},la=t("svg",{class:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1),oa={class:"sr-only"},ia=t("svg",{class:"h-5 w-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1);function na(e,r,i,n,a,s){const g=v("Col"),l=v("VTh"),x=v("toDate"),_=v("toMoney"),m=v("VTable"),T=v("VTPagination");return c(),d("div",xt,[t("ul",vt,[t("li",null,[t("a",{id:"open-orders-tab",class:b(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s.isActive("open-orders")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"open-orders","aria-selected":"false",onClick:r[0]||(r[0]=f(k=>s.setActive("open-orders"),["prevent"]))},o(e.$t("Open Orders")),3)]),t("li",null,[t("a",{id:"closed-orders-tab",class:b(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s.isActive("closed-orders")?"border-gray-300 bg-white text-gray-700 dark:bg-gray-900 dark:text-gray-300":"cursor-pointer border-transparent bg-gray-200 text-gray-400 hover:border-gray-300 hover:bg-gray-300 hover:text-gray-600 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-gray-300"]),type:"button",role:"tab","aria-controls":"closed-orders","aria-selected":"false",onClick:r[1]||(r[1]=f(k=>s.setActive("closed-orders"),["prevent"]))},o(e.$t("Order History")),3)])]),t("div",{id:"open-orders",class:b(["pt-3",s.isActive("open-orders")?"":"hidden"]),role:"tabpanel",style:{"min-height":"300px"}},[u(m,{"current-page":a.currentPageOpen,"onUpdate:current-page":r[2]||(r[2]=k=>a.currentPageOpen=k),class:"w-full text-left text-sm text-gray-500 dark:text-gray-400",data:a.open_orders,"page-size":10,"hide-sort-icons":!0,onTotalPagesChanged:r[3]||(r[3]=k=>a.totalPagesOpen=k)},{head:y(()=>[t("tr",wt,[u(l,{"sort-key":"created_at",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Date"})]),_:1}),u(l,{"sort-key":"order_id",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"TxHash"})]),_:1}),u(l,{"sort-key":"symbol",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Symbol"})]),_:1}),u(l,{"sort-key":"side",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Side"})]),_:1}),u(l,{"sort-key":"price",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Price"})]),_:1}),u(l,{"sort-key":"amount",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Amount"})]),_:1}),u(l,{"sort-key":"filled",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Filled"})]),_:1}),u(l,{"sort-key":"status",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Status"})]),_:1})])]),body:y(({rows:k})=>[a.open_orders.length>0?(c(!0),d(P,{key:0},L(k,h=>(c(),d("tr",{key:h.id,class:"border-b bg-white dark:border-gray-700 dark:bg-gray-800"},[t("td",St,[u(x,{time:h.created_at},null,8,["time"])]),t("td",_t,o(h.id),1),t("td",Mt,o(h.pair),1),t("td",Bt,[h.type=="BUY"?(c(),d("span",$t,o(e.$t("Buy")),1)):(c(),d("span",Pt,o(e.$t("Sell")),1))]),t("td",At,[u(_,{num:h.price,decimals:"2"},null,8,["num"]),p(" "+o(h.pair),1)]),t("td",Ct,[u(_,{num:h.amount,decimals:"2"},null,8,["num"]),p(" "+o(a.symbol),1)]),t("td",Lt,[u(_,{num:h.fill,decimals:"2"},null,8,["num"]),p(" "+o(a.symbol),1)]),t("td",Ft,[h.fill==0?(c(),d(P,{key:0},[t("span",Tt,o(e.$t("Pending")),1),t("button",{class:"btn btn-sm btn-danger",loading:a.loadingCancel,disabled:a.loadingCancel,type:"button",onClick:ys=>s.cancelOrder(h.id)},o(e.$t("Cancel")),9,Ot)],64)):h.fill>0&&h.fill!=h.amount?(c(),d("span",jt,o(e.$t("Filling")),1)):M("",!0)])]))),128)):(c(),d("tr",Ut,[t("td",Nt,[Dt,p(" "+o(e.$t("No Data Found")),1)])]))]),_:1},8,["current-page","data"]),u(T,{currentPage:a.currentPageOpen,"onUpdate:currentPage":r[4]||(r[4]=k=>a.currentPageOpen=k),class:"flex items-center justify-between p-3","aria-label":"Table navigation","total-pages":a.totalPagesOpen,"boundary-links":!0},{firstPage:y(()=>[p(o(e.$t("First")),1)]),lastPage:y(()=>[p(o(e.$t("Last")),1)]),next:y(()=>[t("span",Wt,o(e.$t("Next")),1),It]),previous:y(()=>[t("span",zt,o(e.$t("Previous")),1),Vt]),_:1},8,["currentPage","total-pages"])],2),t("div",{id:"closed-orders",class:b(["pt-3",s.isActive("closed-orders")?"":"hidden"]),role:"tabpanel",style:{"min-height":"300px"}},[u(m,{"current-page":a.currentPage,"onUpdate:current-page":r[5]||(r[5]=k=>a.currentPage=k),class:"w-full text-left text-sm text-gray-500 dark:text-gray-400",data:a.closed_orders,"page-size":10,"hide-sort-icons":!0,onTotalPagesChanged:r[6]||(r[6]=k=>a.totalPages=k)},{head:y(()=>[t("tr",Et,[u(l,{"sort-key":"created_at",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Date"})]),_:1}),u(l,{"sort-key":"order_id",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"TxHash"})]),_:1}),u(l,{"sort-key":"symbol",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Symbol"})]),_:1}),u(l,{"sort-key":"side",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Side"})]),_:1}),u(l,{"sort-key":"price",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Price"})]),_:1}),u(l,{"sort-key":"amount",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Amount"})]),_:1}),u(l,{"sort-key":"filled",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Filled"})]),_:1}),u(l,{"sort-key":"status",scope:"col",class:"py-3 px-6"},{default:y(()=>[u(g,{text:"Status"})]),_:1})])]),body:y(({rows:k})=>[a.closed_orders.length>0?(c(!0),d(P,{key:0},L(k,h=>(c(),d("tr",{key:h.id,class:"border-b bg-white dark:border-gray-700 dark:bg-gray-800"},[t("td",Rt,[u(x,{time:h.created_at},null,8,["time"])]),t("td",Ht,o(h.id),1),t("td",Kt,o(h.pair),1),t("td",qt,[h.type=="BUY"?(c(),d("span",Yt,o(e.$t("Buy")),1)):(c(),d("span",Gt,o(e.$t("Sell")),1))]),t("td",Zt,[u(_,{num:h.price,decimals:"2"},null,8,["num"]),p(" "+o(a.currency),1)]),t("td",Jt,[u(_,{num:h.amount,decimals:"2"},null,8,["num"]),p(" "+o(a.symbol),1)]),t("td",Qt,[u(_,{num:h.fill,decimals:"2"},null,8,["num"]),p(" "+o(a.symbol),1)]),t("td",Xt,[t("span",ea,o(e.$t("Filled")),1)])]))),128)):(c(),d("tr",ra,[t("td",ta,[aa,p(" "+o(e.$t("No Data Found")),1)])]))]),_:1},8,["current-page","data"]),u(T,{currentPage:a.currentPage,"onUpdate:currentPage":r[7]||(r[7]=k=>a.currentPage=k),class:"flex items-center justify-between p-3","aria-label":"Table navigation","total-pages":a.totalPages,"boundary-links":!0},{firstPage:y(()=>[p(o(e.$t("First")),1)]),lastPage:y(()=>[p(o(e.$t("Last")),1)]),next:y(()=>[t("span",sa,o(e.$t("Next")),1),la]),previous:y(()=>[t("span",oa,o(e.$t("Previous")),1),ia]),_:1},8,["currentPage","total-pages"])],2)])}const ca=C(ft,[["render",na]]),da={width:250,sortwidth:{sort:function(e){return e.sort((r,i)=>r[1]-i[1])},median:function(e){const r=Math.floor(e.length*2/3);return e[r][1]<1?1:e[r][1]},medianUnit:function(e,r,i){const n=[...e,...r];return this.median(this.sort(n))/i},width:function(e,r){if(r===0)return 1;const i=Math.round(Number(e)/r);return i<=0?1:i>160?160:i}},init:function(e,r){const i=this.sortwidth.medianUnit(e,r,48);e.forEach(n=>{n.push({width:this.sortwidth.width(n[1],i)*this.width/100})}),r.forEach(n=>{n.push({width:this.sortwidth.width(n[1],i)*this.width/100})})}},ua={components:{ListItem:es},setup(){return{ecoStore:j()}},data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,limit:{asks:10,bids:10},showMoreAsks:!1,showMoreBids:!1,sideLength:20,refreshRate:500,best_ask:"",best_ask_icon:"",bestAsker:null,lastUpdated:"",activeItem:"pills-graph",data:{},asks:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],bids:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}},created(){this.loopOrderbook()},mounted(){},methods:{async loopOrderbook(){for(;window.location.href.indexOf(this.symbol+"-"+this.currency)>-1;)try{await this.fetchOrderbook(),await new Promise(e=>setTimeout(e,5e3))}catch{break}},async fetchOrderbook(){try{const e=await axios.post("/user/fetch/orderbook/"+this.symbol+"-"+this.currency);(e.asks.length>0||e.bids.length>0)&&this.updateOrderbook(e),this.ecoStore.marketOrder=e.asks.length>0}catch(e){this.$toast.error(e.message)}},priceFormatter(e,r=8,i=2,n=","){return e?(e=parseInt(e)!==0?parseFloat(e).toFixed(i):parseFloat(e).toFixed(r),e=parseInt(e)!==0?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,n):e,e):0},async updateOrderbook(e){const r=Date.now();(!this.lastUpdated||r-this.lastUpdated>this.refreshRate)&&(da.init(e.bids,e.asks),this.updateOrderbookSide(e.bids,".bids","bestBid"),this.updateOrderbookSide(e.asks,".asks","bestAsk","best_ask"),this.lastUpdated=r)},updateOrderbookSide(e,r,i,n){if(e.length>0){$(r).empty();for(let s=0;s<this.sideLength;s++)try{if(e[s]){const g=e[s];this[r.substr(1)][s]=[this.priceFormatter(g[0]),this.priceFormatter(g[1]),this.priceFormatter(g[0]*g[1]),g[2].width]}}catch(g){console.log(g)}const a=e[e.length-1];!this[i]||a[0]>this[i]?n&&(this[n]="text-success"):a[0]<this[i]&&n&&(this[n]="text-danger"),this[i]=a[0],this.ecoStore[i]=a[0]}},isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e}}},ga={class:"Orderbook border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},ba={class:"flex p-1 xs:hidden md:flex",role:"tablist"},ya={class:"p-1"},ma={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",class:"css-3kwgah",style:{margin:"0px","min-width":"0px","font-size":"24px",width:"1em",height:"1em"}},ha=t("path",{d:"M4 4h7v7H4V4z",fill:"#F6465D"},null,-1),pa=t("path",{d:"M4 13h7v7H4v-7z",fill:"#0ECB81"},null,-1),ka=t("path",{d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"},null,-1),fa=[ha,pa,ka],xa={class:"p-1"},va={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",class:"css-3kwgah",style:{margin:"0px","min-width":"0px","font-size":"24px",width:"1em",height:"1em"}},wa=t("path",{d:"M4 4h7v16H4V4z",fill:"#0ECB81"},null,-1),Sa=t("path",{d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"},null,-1),_a=[wa,Sa],Ma={class:"p-1"},Ba={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",class:"css-3kwgah",style:{margin:"0px","min-width":"0px","font-size":"24px",width:"1em",height:"1em"}},$a=t("path",{d:"M4 4h7v16H4V4z",fill:"#F6465D"},null,-1),Pa=t("path",{d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"},null,-1),Aa=[$a,Pa],Ca={key:0,class:"Bids"},La={style:{"overflow-x":"hidden"}},Fa=t("thead",{class:""},[t("th",{class:"text-start",style:{"padding-left":"5px"},scope:"col"}," Price "),t("th",{class:"text-center",scope:"col"},"Amount"),t("th",{class:"text-end",style:{"padding-right":"5px"},scope:"col"}," Total ")],-1),Ta={class:"LastPrice xs:hidden md:block"},Oa={class:"p-3"},ja=t("span",{class:""},"Last Price: ",-1),Ua={key:1,class:"Asks"},Na={style:{"overflow-x":"hidden"}},Da={key:0,class:"text-muted"},Wa=t("th",{class:"pl-2 text-start",scope:"col"},"Price",-1),Ia=t("th",{class:"text-center",scope:"col"},"Amount",-1),za=t("th",{class:"text-end",scope:"col"},"Total",-1),Va=[Wa,Ia,za],Ea={key:1,class:"xs:block md:hidden"},Ra=t("th",{class:"pl-2 text-start",scope:"col"},"Price",-1),Ha=t("th",{class:"text-center",scope:"col"},"Amount",-1),Ka=t("th",{class:"text-end",scope:"col"},"Total",-1),qa=[Ra,Ha,Ka];function Ya(e,r,i,n,a,s){const g=v("ListItem");return c(),d("div",ga,[t("ul",ba,[t("li",ya,[t("button",{class:b({"text-gray-200 dark:text-gray-600":a.showMoreAsks||a.showMoreBids||a.showMoreAsks&&a.showMoreBids}),onClick:r[0]||(r[0]=f(l=>(a.showMoreAsks=!1,a.showMoreBids=!1,a.limit.asks=10,a.limit.bids=10),["prevent"]))},[(c(),d("svg",ma,fa))],2)]),t("li",xa,[t("button",{class:b({"text-gray-200 dark:text-gray-600":!a.showMoreBids||a.showMoreAsks}),onClick:r[1]||(r[1]=f(l=>(a.showMoreAsks=!1,a.showMoreBids=!0,a.limit.asks=0,a.limit.bids=20),["prevent"]))},[(c(),d("svg",va,_a))],2)]),t("li",Ma,[t("button",{class:b({"text-gray-200 dark:text-gray-600":a.showMoreBids||!a.showMoreAsks}),onClick:r[2]||(r[2]=f(l=>(a.showMoreAsks=!0,a.showMoreBids=!1,a.limit.asks=20,a.limit.bids=0),["prevent"]))},[(c(),d("svg",Ba,Aa))],2)])]),(c(),d("div",{key:a.limit.asks,class:"OrderbookGrid"},[a.limit.asks!=0?(c(),d("div",Ca,[t("table",La,[Fa,t("tbody",null,[(c(),B(g,{key:a.showMoreBids,data:a.asks,type:"ask",color:"rgb(246, 70, 93)","show-less":a.showMoreBids,limit:a.limit.asks},null,8,["data","show-less","limit"]))])])])):M("",!0),t("div",Ta,[t("div",Oa,[ja,t("span",{class:b(a.best_ask)},o(a.asks[0][0]),3)])]),a.limit.bids!=0?(c(),d("div",Ua,[t("table",Na,[a.limit.asks==0?(c(),d("thead",Da,Va)):M("",!0),a.limit.asks!=0?(c(),d("thead",Ea,qa)):M("",!0),t("tbody",null,[(c(),B(g,{key:a.showMoreAsks,data:a.bids,type:"bid",color:"rgb(14, 203, 129)","show-less":a.showMoreAsks,limit:a.limit.bids},null,8,["data","show-less","limit"]))])])])):M("",!0)]))])}const Ga=C(ua,[["render",Ya]]),Za={components:{Markets:rs,EcoMarkets:xe,Trades:Ne,Charting:ze,Order:kt,Orders:ca,Orderbook:Ga},setup(){return{ecoStore:j()}},data(){return{symbol:this.$route.params.symbol,currency:this.$route.params.currency,provider:null,index:0,plat,ext}},watch:{async $route(e,r){this.fetchData(),$("asks").empty(),$("bids").empty(),$("tradeTable").empty()}},created(){this.fetchData()},mounted(){},unmounted(){},methods:{getRandomInt(e,r){return e=Math.ceil(e),r=Math.floor(r),Math.floor(Math.random()*(r-e))+e},async fetchData(){await this.ecoStore.fetch(this.$route.params.symbol,this.$route.params.currency)},isActive(e){return this.activeItem===e},setActive(e){this.activeItem=e}}},Ja={class:"EcoContainer",style:{margin:"-20px","margin-bottom":"3px"}},Qa={id:"creatable",class:"Chart border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"};function Xa(e,r,i,n,a,s){const g=v("EcoMarkets"),l=v("Markets"),x=v("Trades"),_=v("Charting"),m=v("Order"),T=v("Orderbook"),k=v("Orders");return c(),d("div",null,[t("div",Ja,[a.ext.eco==1&&a.plat.eco.ecosystem_trading_only==1?(c(),B(g,{key:0,style:{"overflow-y":"auto","overflow-x":"hidden"}})):(c(),B(l,{key:1,style:{"overflow-y":"auto","overflow-x":"hidden"},type:"trade",subtype:"non"})),n.ecoStore.market.length!=0?(c(),B(x,{key:e.$route.params.symbol+e.$route.params.currency,market:n.ecoStore.market},null,8,["market"])):M("",!0),t("div",Qa,[n.ecoStore.market.length!=0?(c(),B(_,{key:e.$route.params.symbol+e.$route.params.currency,market:n.ecoStore.market},null,8,["market"])):M("",!0)]),n.ecoStore.market.length!=0?(c(),B(m,{key:e.$route.params.symbol+e.$route.params.currency,market:n.ecoStore.market},null,8,["market"])):M("",!0),(c(),B(T,{key:e.$route.params.symbol+e.$route.params.currency}))]),n.ecoStore.market.length!=0?(c(),B(k,{key:e.$route.params.symbol+e.$route.params.currency,market:n.ecoStore.market},null,8,["market"])):M("",!0)])}D=C(Za,[["render",Xa]])});export{bs as __tla,D as default};
