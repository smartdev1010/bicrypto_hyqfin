import{c as v}from"./_commonjsHelpers-87174ba5.js";var b={},m={},w={get exports(){return m},set exports(p){m=p}};(function(p,f){(function(c,h){h(f)})(v,function(c){var h=Object.assign||function(e){for(var t,o=1,a=arguments.length;o<a;o++)for(var d in t=arguments[o])Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d]);return e};function i(e,t){var o=h({},e);for(var a in t)typeof e[a]!="object"||e[a]===null||Array.isArray(e[a])?t[a]!==void 0&&(o[a]=t[a]):o[a]=i(e[a],t[a]);return o}var n={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},r={width:800,height:500,symbol:"AA",interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},trading_customization:{position:{},order:{}},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}};function s(){return"1.15 dev (internal id c63b141f @ 2019-10-31 04:30:54.420652)"}var u=function(){function e(t){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!t.datafeed)throw new Error("Datafeed is not defined");if(this._options=i(r,t),t.preset){var o=n[t.preset];o?(this._options.disabled_features!==void 0?this._options.disabled_features=this._options.disabled_features.concat(o.disabled_features):this._options.disabled_features=o.disabled_features,this._options.enabled_features!==void 0?this._options.enabled_features=this._options.enabled_features.concat(o.enabled_features):this._options.enabled_features=o.enabled_features):console.warn("Unknown preset: `"+t.preset+"`")}this._options.theme==="Dark"&&this._options.loading_screen===void 0&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return e.prototype.onChartReady=function(t){this._ready?t.call(this):this._readyHandlers.push(t)},e.prototype.headerReady=function(){var t=this;return this._innerWindowLoaded.then(function(){return t._innerWindow().headerReady()})},e.prototype.onGrayedObjectClicked=function(t){this._innerAPI().onGrayedObjectClicked(t)},e.prototype.onShortcut=function(t,o){this._innerWindow().createShortcutAction(t,o)},e.prototype.subscribe=function(t,o){this._innerAPI().subscribe(t,o)},e.prototype.unsubscribe=function(t,o){this._innerAPI().unsubscribe(t,o)},e.prototype.chart=function(t){return this._innerAPI().chart(t)},e.prototype.setLanguage=function(t){this.remove(),this._options.locale=t,this._create()},e.prototype.setSymbol=function(t,o,a){this._innerAPI().changeSymbol(t,o+"",a)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id],this._iFrame.parentNode&&this._iFrame.parentNode.removeChild(this._iFrame)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(t){this._innerAPI().selectLineTool(t)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(t){this._innerAPI().saveChart(t)},e.prototype.load=function(t,o){this._innerAPI().loadChart({json:t,extendedData:o})},e.prototype.getSavedCharts=function(t){this._innerAPI().getSavedCharts(t)},e.prototype.loadChartFromServer=function(t){this._innerAPI().loadChartFromServer(t)},e.prototype.saveChartToServer=function(t,o,a){this._innerAPI().saveChartToServer(t,o,a)},e.prototype.removeChartFromServer=function(t,o){this._innerAPI().removeChartFromServer(t,o)},e.prototype.onContextMenu=function(t){this._innerAPI().onContextMenu(t)},e.prototype.createButton=function(t){return this._innerWindow().createButton(t)},e.prototype.showNoticeDialog=function(t){this._innerAPI().showNoticeDialog(t)},e.prototype.showConfirmDialog=function(t){this._innerAPI().showConfirmDialog(t)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(t){this._innerWindow().addCustomCSSFile(t)},e.prototype.applyOverrides=function(t){this._options=i(this._options,{overrides:t}),this._innerWindow().applyOverrides(t)},e.prototype.applyStudiesOverrides=function(t){this._innerWindow().applyStudiesOverrides(t)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(t){this._innerAPI().setLayout(t)},e.prototype.layoutName=function(){return this._innerAPI().layoutName()},e.prototype.changeTheme=function(t){this._innerWindow().changeTheme(t)},e.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},e.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},e.prototype.hideAllDrawingTools=function(){return this._innerAPI().hideAllDrawingTools()},e.prototype.magnetEnabled=function(){return this._innerAPI().magnetEnabled()},e.prototype.magnetMode=function(){return this._innerAPI().magnetMode()},e.prototype.undoRedoState=function(){return this._innerAPI().undoRedoState()},e.prototype._innerAPI=function(){return this._innerWindow().tradingViewApi},e.prototype._innerWindow=function(){return this._iFrame.contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._iFrame.style.height=window.innerHeight+"px")},e.prototype._create=function(){var t=this,o=this._render(),a=document.getElementById(this._options.container_id);if(a===null)throw new Error("There is no such element - #"+this._options.container_id);a.innerHTML=o,this._iFrame=a.querySelector("#"+this._id);var d=this._iFrame;(this._options.autosize||this._options.fullscreen)&&(d.style.width="100%",this._options.fullscreen||(d.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize(),this._innerWindowLoaded=new Promise(function(_){var l=function(){d.removeEventListener("load",l,!1),_()};d.addEventListener("load",l,!1)}),this._innerWindowLoaded.then(function(){t._innerWindow().widgetReady(function(){t._ready=!0;for(var _=0,l=t._readyHandlers;_<l.length;_++){var y=l[_];try{y.call(t)}catch(g){console.error(g)}}t._innerWindow().initializationFinished()})})},e.prototype._render=function(){var t=window;t[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,tradingCustomization:this._options.trading_customization,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,getCustomIndicators:this._options.custom_indicators_getter},this._options.saved_data&&(t[this._id].chartContent={json:this._options.saved_data});var o=(this._options.library_path||"")+"static/"+encodeURIComponent(this._options.locale)+"-tv-chart.c63b141fec55a3c31066.html#symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+encodeURIComponent(this._options.toolbar_bg.replace("#","")):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+encodeURIComponent(String(this._options.debug))+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+o+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView.version=s,c.version=s,c.widget=u,Object.defineProperty(c,"__esModule",{value:!0})})})(w,m);(function(p){Object.defineProperty(p,"__esModule",{value:!0}),p.DataFeed=p.version=p.widget=void 0;var f=m;Object.defineProperty(p,"widget",{enumerable:!0,get:function(){return f.widget}}),Object.defineProperty(p,"version",{enumerable:!0,get:function(){return f.version}});var c=function(){function h(i){i===void 0&&(i={}),this.configuration={},this.subscribers={},this.requesting=!1,this.options=i}return h.prototype.onReady=function(i){var n=this;new Promise(function(r){r(void 0)}).then(function(){var r=n.options.fetchConfiguration;if(n.configuration=n.defaultConfiguration(),!r){i(n.configuration);return}r().then(function(s){n.configuration=Object.assign(n.configuration,s),i(n.configuration)})})},h.prototype.searchSymbols=function(i,n,r,s){var u=this.options.fetchSearchSymbols;u&&u({userInput:i,exchange:n,symbolType:r}).then(s).catch(function(){s([])})},h.prototype.resolveSymbol=function(i,n,r){var s=this.options.fetchResolveSymbol;s&&s(i).then(n).catch(function(){r("Error fetchResolveSymbol")})},h.prototype.getBars=function(i,n,r,s,u,e,t){var o=this,a=this.options.getBars;a&&(this.requesting||(this.requesting=!0,a({symbolInfo:i,resolution:n,from:r,to:s,firstDataRequest:t}).then(function(d){o.requesting=!1,u(d.bars,d.meta)}).catch(function(){o.requesting=!1,e("Error getBars")})))},h.prototype.subscribeBars=function(i,n,r,s,u){this.subscribers[s]||(this.subscribers[s]={lastBarTime:null,listener:r,resolution:n,symbolInfo:i})},h.prototype.unsubscribeBars=function(i){this.subscribers[i]&&delete this.subscribers[i]},h.prototype.updateKLine=function(i){for(var n in this.subscribers){var r=this.subscribers[n];r.lastBarTime!==null&&i.time<r.lastBarTime||(r.lastBarTime=i.time,r.listener(i))}},h.prototype.calculateHistoryDepth=function(i,n,r){var s=this.options.calculateHistoryDepth;if(s)return s(i,n,r)},h.prototype.getMarks=function(i,n,r,s,u){var e=this.options.getMarks;e&&e({symbolInfo:i,startDate:n,endDate:r,resolution:u}).then(s)},h.prototype.getTimescaleMarks=function(i,n,r,s,u){var e=this.options.getTimescaleMarks,t=this.configuration.supports_timescale_marks;!e||!t||e({symbolInfo:i,startDate:n,endDate:r,resolution:u}).then(s)},h.prototype.getServerTime=function(i){var n=this.options.getServerTime,r=this.configuration.supports_time;!n||!r||n().then(i)},h.prototype.defaultConfiguration=function(){return{supported_resolutions:["1","5","15","30","60","1D","1W","1M"],supports_marks:!1,supports_timescale_marks:!1}},h}();p.DataFeed=c})(b);export{b as d};
