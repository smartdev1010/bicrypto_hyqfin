import{d as l}from"./pinia-72e453fe.js";let s,i=(async()=>{s=l("wallet",{state:()=>({wallets:[],currencies:[],main_wallets:[],main_currencies:[],SelectedWallet:null,api:0,loading:!1,isShowModal:{newWallet:!1,newMainWallet:!1},loading:!1,timer:[],mianLogs:[]}),actions:{async fetch(){await axios.post("/user/fetch/wallets").then(e=>{this.wallets=e.wallets,this.api=e.api,this.currencies=e.currencies})},async walletUpdate(e){console.log(e),await axios.post("/user/fetch/wallet/walletUpdate",e).then(a=>(this.fetch(),!0)).catch(a=>($toast.error(a.response.data.message),!1))},async fetch_main(){await axios.post("/user/fetch/eco/wallets").then(e=>{this.main_currencies=e.currencies,e.net=="mainnet"&&e.tokens.forEach(a=>{this.main_currencies.push(a)}),this.main_wallets=e.wallets})},closeModal(e){e=="newWallet"?this.isShowModal.newWallet=!1:e=="newMainWallet"&&(this.isShowModal.newMainWallet=!1)},showModal(e){e=="newWallet"?this.isShowModal.newWallet=!0:e=="newMainWallet"&&(this.isShowModal.newMainWallet=!0)},async create(e){this.loading=!0,axios.post("/user/wallet/j/create",{type:this.type,symbol:e}).then(a=>{this.fetch(),$toast[a.type](a.message)}).catch(a=>{$toast.error(a.response.data.message)}).finally(()=>{this.loading=!1,this.closeModal("newWallet")})},async create_main(e){this.loading=!0,axios.post("/user/eco/wallet/create",{chain:e.chain,symbol:e.symbol,postfix:e.postfix,network:e.network}).then(a=>{this.fetch_main();for(let t=0;t<a.length;t++)$toast[a[t].type](a[t].message)}).catch(a=>{$toast.error(a.response.data.message)}).finally(()=>{this.loading=!1,this.closeModal("newMainWallet")})},fetchMainWalletLogs(e,a){axios.post("/user/fetch/eco/wallet/main/logs/"+e+"/"+a).then(t=>{this.mianLogs=t.logs})}},persist:!0})})();export{i as __tla,s as u};
