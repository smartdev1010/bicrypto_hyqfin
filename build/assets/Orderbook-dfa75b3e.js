import{u as y,__tla as As}from"./market-6d56493b.js";import{_ as w,o,c,a as e,j as g,t as h,n,h as d,l as Bs,s as $s,i as x,q as zs}from"./_plugin-vue_export-helper-8676f0c8.js";import{L as Cs,__tla as Is}from"./ListItem-d13f255d.js";import{w as u,__tla as Ls}from"./vue-qrcode.esm-9e0a6c12.js";let _,v,Os=Promise.all([(()=>{try{return As}catch{}})(),(()=>{try{return Is}catch{}})(),(()=>{try{return Ls}catch{}})()]).then(async()=>{const b={components:{},props:["provider"],setup(){return{marketStore:y()}},data(){return{last_price:0,last_price_class:"",last_price_icon:"",day_change:0,day_change_class:"",day_change_icon:"",day_volume_currency:"",day_high:0,day_low:0,day_volume_pair:0}},created(){},mounted(){this.loopTicker()},unmounted(){},methods:{priceFormatter(s,a=8,r=2,i=","){return s?(s=parseInt(s)!==0?parseFloat(s).toFixed(r):parseFloat(s).toFixed(a),s=parseInt(s)!==0?s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i):s,s):0},async updateTicker(s){!this.last_price||s.last>this.last_price?this.last_price_class="text-success":s.last<this.last_price&&(this.last_price_class="text-danger"),this.last_price=this.priceFormatter(s.last),this.provide!="coinbasepro"&&(!this.day_change||s.percentage>this.day_change?(this.day_change_class="text-success",this.day_changeday_change_icon="bi-arrow-up text-success"):s.percentage<this.day_change&&(this.day_change_class="text-danger",this.day_changeday_change_icon="bi-arrow-down text-danger"),this.day_change=s.percentage,this.day_volume_currency=this.priceFormatter(s.quoteVolume,2)),this.day_high=this.formatPrice(s.high),this.day_low=this.formatPrice(s.low),this.day_volume_pair=this.priceFormatter(s.baseVolume,2)},async loopTicker(){if(this.marketStore.exchange.has.watchTicker)for(;window.location.href.indexOf(this.$route.params.symbol+"/"+this.$route.params.currency)>-1;)try{const s=await this.marketStore.exchange.watchTicker(this.$route.params.symbol+"/"+this.$route.params.currency);this.updateTicker(s)}catch{break}},formatPrice(s){return ccxt.decimalToPrecision(s,ccxt.ROUND,9,ccxt.SIGNIFICANT_DIGITS,ccxt.PAD_WITH_ZERO)}}},f={class:"Info border border-gray-100 bg-white p-5 shadow dark:border-gray-700 dark:bg-gray-900"},M={class:"scrollbar-hide flex overflow-x-scroll text-xs text-white"},F={class:"test-start mr-5 flex items-center"},A=e("i",{class:"bi bi-chevron-right text-dark"},null,-1),B={class:"flex-1"},z={class:"text-dark"},C={class:"flex-1"},I={class:"text-dark"},L={class:""},O={key:0,class:"text-dark flex-1 xs:hidden sm:block"},T={class:""},P={key:1,class:"text-dark flex-1 xs:hidden sm:block"},S={class:""},V={key:2,class:"text-dark flex-1 xs:hidden lg:block"},E={class:""},U={key:3,class:"text-dark flex-1 xs:hidden lg:block"},D={class:""};function H(s,a,r,i,t,l){const m=$s("lazy");return o(),c("div",f,[e("div",M,[e("div",F,[g((o(),c("img",{key:s.$route.params.symbol,width:"36"})),[[m,s.$route.params.symbol?"/assets/images/cryptoCurrency/"+s.$route.params.symbol.toLowerCase()+".png":"/market/notification.png"]]),A,g((o(),c("img",{key:s.$route.params.currency,width:"36"})),[[m,s.$route.params.currency?"/assets/images/cryptoCurrency/"+s.$route.params.currency.toLowerCase()+".png":"/market/notification.png"]])]),e("div",B,[e("div",z,h(s.$t("Last Price"))+":",1),e("div",{class:n(t.last_price_class)},h(t.last_price),3)]),e("div",C,[e("div",I,h(s.$t("24h Change"))+":",1),e("div",L,[e("span",{class:n(t.day_change_class)},h(t.day_change)+" %",3),e("i",{class:n(["bi",t.day_change_icon])},null,2)])]),r.provider!="coinbasepro"?(o(),c("div",O,[e("div",null,h(s.$route.params.symbol)+" "+h(s.$t("Volume"))+":",1),e("div",T,[e("span",null,h(t.day_volume_pair),1)])])):d("",!0),r.provider!="coinbasepro"?(o(),c("div",P,[e("div",S,[Bs(h(s.$route.params.currency)+" "+h(s.$t("Volume"))+": ",1),e("span",null,h(t.day_volume_currency),1)])])):d("",!0),r.provider!="coinbasepro"?(o(),c("div",V,[e("div",null,h(s.$t("24h High"))+":",1),e("div",E,[e("span",null,h(t.day_high),1)])])):d("",!0),r.provider!="coinbasepro"?(o(),c("div",U,[e("div",null,h(s.$t("24h Low"))+":",1),e("div",D,[e("span",null,h(t.day_low),1)])])):d("",!0)])])}_=w(b,[["render",H]]);var p={width:250,sortwidth:{sort:function(s){return s.sort(function(a,r){return a[1]-r[1]}),s},median:function(s){var a=Math.floor(s.length/3*2);return s[a][1]<1?1:s[a][1]},medianUnit:function(s,a,r){var i=new Array(s);i=i[0];var t=new Array(a);t=t[0],i=i.concat(t);var l=this.median(this.sort(i))/r;return t=i=null,l},width:function(s,a){if(a==0)return 1;var r=Math.round(Number(s)/a);return r<=0?1:160<r?160:r}},init:function(s,a){var r=[],i=[];s.forEach(function(l){r.push(l)}),a.forEach(function(l){i.push(l)});var t=this.sortwidth.medianUnit(r,i,48);s.forEach(function(l){l.push({width:p.sortwidth.width(l[1],t)*p.width/100})}),a.forEach(function(l){l.push({width:p.sortwidth.width(l[1],t)*p.width/100})})}};const N={components:{ListItem:Cs},setup(){return{marketStore:y()}},data(){return{limit:{asks:12,bids:12},showMoreAsks:!1,showMoreBids:!1,sideLength:20,refreshRate:500,best_ask:"",best_ask_icon:"",lastUpdated:"",activeItem:"pills-graph",data:{},asks:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],bids:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}},created(){this.loopOrderbook()},mounted(){},methods:{priceFormatter(s,a=8,r=2,i=","){return s==null||isNaN(s)?0:(s=parseInt(s)!==0?parseFloat(s).toFixed(r):parseFloat(s).toFixed(a),s=parseInt(s)!==0?s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,i):s,s)},async updateOrderbook(s){const a=Date.now();if(!this.lastUpdated||a-this.lastUpdated>this.refreshRate){p.init(s.bids,s.asks),$(".asks,.bids").empty(),this.asks=s.asks.slice(0,this.sideLength).map(([i,t,{width:l}])=>[this.priceFormatter(i),this.priceFormatter(t),this.priceFormatter(i*t),l]),this.bids=s.bids.slice(0,this.sideLength).map(([i,t,{width:l}])=>[this.priceFormatter(i),this.priceFormatter(t),this.priceFormatter(i*t),l]);const r=s.asks[0][0]>this.bestAsker;this.best_ask=r?"text-success":"text-danger",this.best_ask_icon=r?"bi-arrow-up text-success":"bi-arrow-down text-danger",this.bestAsker=s.asks[0][0],this.marketStore.bestAsk=s.asks[0][0],this.marketStore.bestBid=s.bids[0][0],this.lastUpdated=a}else await ccxt.sleep(this.refreshRate/2)},async loopOrderbook(){if(this.marketStore.exchange.has.watchOrderBook)for(;window.location.href.indexOf(this.$route.params.symbol+"/"+this.$route.params.currency)>-1;)try{const s=await this.marketStore.exchange.watchOrderBook(this.$route.params.symbol+"/"+this.$route.params.currency,this.sideLength);this.updateOrderbook(s)}catch{break}}}},R={class:"Orderbook border border-gray-100 bg-white shadow dark:border-gray-700 dark:bg-gray-900"},G={class:"flex p-1 xs:hidden md:flex",role:"tablist"},q={class:"p-1"},j={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",class:"css-3kwgah",style:{margin:"0px","min-width":"0px","font-size":"24px",width:"1em",height:"1em"}},W=e("path",{d:"M4 4h7v7H4V4z",fill:"#F6465D"},null,-1),Z=e("path",{d:"M4 13h7v7H4v-7z",fill:"#0ECB81"},null,-1),J=e("path",{d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"},null,-1),K=[W,Z,J],Q={class:"p-1"},X={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",class:"css-3kwgah",style:{margin:"0px","min-width":"0px","font-size":"24px",width:"1em",height:"1em"}},Y=e("path",{d:"M4 4h7v16H4V4z",fill:"#0ECB81"},null,-1),ss=e("path",{d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"},null,-1),ts=[Y,ss],es={class:"p-1"},as={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",class:"css-3kwgah",style:{margin:"0px","min-width":"0px","font-size":"24px",width:"1em",height:"1em"}},rs=e("path",{d:"M4 4h7v16H4V4z",fill:"#F6465D"},null,-1),is=e("path",{d:"M13 4h7v4h-7V4zm0 6h7v4h-7v-4zm7 6h-7v4h7v-4z",fill:"currentColor"},null,-1),os=[rs,is],ls={key:0,class:"Bids"},cs={style:{"overflow-x":"hidden"}},hs=e("thead",{class:""},[e("th",{class:"text-start",style:{"padding-left":"5px"},scope:"col"}," Price "),e("th",{class:"text-center",scope:"col"},"Amount"),e("th",{class:"text-end",style:{"padding-right":"5px"},scope:"col"}," Total ")],-1),ns={class:"LastPrice xs:hidden md:block"},ds={class:"p-3"},ps=e("span",{class:""},"Last Price: ",-1),ms={key:1,class:"Asks"},us={style:{"overflow-x":"hidden"}},ks={key:0,class:"text-muted"},ys=e("th",{class:"pl-2 text-start",scope:"col"},"Price",-1),ws=e("th",{class:"text-center",scope:"col"},"Amount",-1),gs=e("th",{class:"text-end",scope:"col"},"Total",-1),xs=[ys,ws,gs],_s={key:1,class:"xs:block md:hidden"},vs=e("th",{class:"pl-2 text-start",scope:"col"},"Price",-1),bs=e("th",{class:"text-center",scope:"col"},"Amount",-1),fs=e("th",{class:"text-end",scope:"col"},"Total",-1),Ms=[vs,bs,fs];function Fs(s,a,r,i,t,l){const m=zs("ListItem");return o(),c("div",R,[e("ul",G,[e("li",q,[e("button",{class:n({"text-gray-200 dark:text-gray-600":t.showMoreAsks||t.showMoreBids||t.showMoreAsks&&t.showMoreBids}),onClick:a[0]||(a[0]=u(k=>(t.showMoreAsks=!1,t.showMoreBids=!1,t.limit.asks=10,t.limit.bids=10),["prevent"]))},[(o(),c("svg",j,K))],2)]),e("li",Q,[e("button",{class:n({"text-gray-200 dark:text-gray-600":!t.showMoreBids||t.showMoreAsks}),onClick:a[1]||(a[1]=u(k=>(t.showMoreAsks=!1,t.showMoreBids=!0,t.limit.asks=0,t.limit.bids=20),["prevent"]))},[(o(),c("svg",X,ts))],2)]),e("li",es,[e("button",{class:n({"text-gray-200 dark:text-gray-600":t.showMoreBids||!t.showMoreAsks}),onClick:a[2]||(a[2]=u(k=>(t.showMoreAsks=!0,t.showMoreBids=!1,t.limit.asks=20,t.limit.bids=0),["prevent"]))},[(o(),c("svg",as,os))],2)])]),(o(),c("div",{key:t.limit.asks,class:"OrderbookGrid"},[t.limit.asks!=0?(o(),c("div",ls,[e("table",cs,[hs,e("tbody",null,[(o(),x(m,{key:t.showMoreBids,data:t.asks,type:"ask",color:"rgb(246, 70, 93)","show-less":t.showMoreBids,limit:t.limit.asks},null,8,["data","show-less","limit"]))])])])):d("",!0),e("div",ns,[e("div",ds,[ps,e("span",{class:n(t.best_ask)},h(t.asks[0][0]),3),e("i",{class:n(["bi",t.best_ask_icon])},null,2)])]),t.limit.bids!=0?(o(),c("div",ms,[e("table",us,[t.limit.asks==0?(o(),c("thead",ks,xs)):d("",!0),t.limit.asks!=0?(o(),c("thead",_s,Ms)):d("",!0),e("tbody",null,[(o(),x(m,{key:t.showMoreAsks,data:t.bids,type:"bid",color:"rgb(14, 203, 129)","show-less":t.showMoreAsks,limit:t.limit.bids},null,8,["data","show-less","limit"]))])])])):d("",!0)]))])}v=w(N,[["render",Fs]])});export{_ as M,v as O,Os as __tla};
