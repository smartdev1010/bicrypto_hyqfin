!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).Alpine=factory()}(this,(function(){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function domReady(){return new Promise(resolve=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",resolve):resolve()})}function arrayUnique(array){return Array.from(new Set(array))}function isTesting(){return navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}function checkedAttrLooseCompare(valueA,valueB){return valueA==valueB}function warnIfMalformedTemplate(el,directive){"template"!==el.tagName.toLowerCase()?console.warn(`Alpine: [${directive}] directive should only be added to <template> tags. See https://github.com/alpinejs/alpine#${directive}`):1!==el.content.childElementCount&&console.warn(`Alpine: <template> tag with [${directive}] encountered with an unexpected number of root elements. Make sure <template> has a single root element. `)}function kebabCase(subject){return subject.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function camelCase(subject){return subject.toLowerCase().replace(/-(\w)/g,(match,char)=>char.toUpperCase())}function walk(el,callback){if(!1===callback(el))return;let node=el.firstElementChild;for(;node;)walk(node,callback),node=node.nextElementSibling}function debounce(func,wait){var timeout;return function(){var context=this,args=arguments,later=function later(){timeout=null,func.apply(context,args)};clearTimeout(timeout),timeout=setTimeout(later,wait)}}const handleError=(el,expression,error)=>{if(console.warn(`Alpine Error: "${error}"\n\nExpression: "${expression}"\nElement:`,el),!isTesting())throw Object.assign(error,{el:el,expression:expression}),error};function tryCatch(cb,{el:el,expression:expression}){try{const value=cb();return value instanceof Promise?value.catch(e=>handleError(el,expression,e)):value}catch(e){handleError(el,expression,e)}}function saferEval(el,expression,dataContext,additionalHelperVariables={}){return tryCatch(()=>"function"==typeof expression?expression.call(dataContext):new Function(["$data",...Object.keys(additionalHelperVariables)],`var __alpine_result; with($data) { __alpine_result = ${expression} }; return __alpine_result`)(dataContext,...Object.values(additionalHelperVariables)),{el:el,expression:expression})}function saferEvalNoReturn(el,expression,dataContext,additionalHelperVariables={}){return tryCatch(()=>{if("function"==typeof expression)return Promise.resolve(expression.call(dataContext,additionalHelperVariables.$event));let AsyncFunction=Function;if(AsyncFunction=Object.getPrototypeOf((async function(){})).constructor,Object.keys(dataContext).includes(expression)){let methodReference=new Function(["dataContext",...Object.keys(additionalHelperVariables)],`with(dataContext) { return ${expression} }`)(dataContext,...Object.values(additionalHelperVariables));return"function"==typeof methodReference?Promise.resolve(methodReference.call(dataContext,additionalHelperVariables.$event)):Promise.resolve()}return Promise.resolve(new AsyncFunction(["dataContext",...Object.keys(additionalHelperVariables)],`with(dataContext) { ${expression} }`)(dataContext,...Object.values(additionalHelperVariables)))},{el:el,expression:expression})}const xAttrRE=/^x-(on|bind|data|text|html|model|if|for|show|cloak|transition|ref|spread)\b/;function isXAttr(attr){const name=replaceAtAndColonWithStandardSyntax(attr.name);return xAttrRE.test(name)}function getXAttrs(el,component,type){let directives=Array.from(el.attributes).filter(isXAttr).map(parseHtmlAttribute),spreadDirective=directives.filter(directive=>"spread"===directive.type)[0];if(spreadDirective){let spreadObject=saferEval(el,spreadDirective.expression,component.$data);directives=directives.concat(Object.entries(spreadObject).map(([name,value])=>parseHtmlAttribute({name:name,value:value})))}return type?directives.filter(i=>i.type===type):sortDirectives(directives)}function sortDirectives(directives){let directiveOrder=["bind","model","show","catch-all"];return directives.sort((a,b)=>{let typeA=-1===directiveOrder.indexOf(a.type)?"catch-all":a.type,typeB=-1===directiveOrder.indexOf(b.type)?"catch-all":b.type;return directiveOrder.indexOf(typeA)-directiveOrder.indexOf(typeB)})}function parseHtmlAttribute({name:name,value:value}){const normalizedName=replaceAtAndColonWithStandardSyntax(name),typeMatch=normalizedName.match(xAttrRE),valueMatch=normalizedName.match(/:([a-zA-Z0-9\-:]+)/),modifiers=normalizedName.match(/\.[^.\]]+(?=[^\]]*$)/g)||[];return{type:typeMatch?typeMatch[1]:null,value:valueMatch?valueMatch[1]:null,modifiers:modifiers.map(i=>i.replace(".","")),expression:value}}function isBooleanAttr(attrName){const booleanAttributes=["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"];return booleanAttributes.includes(attrName)}function replaceAtAndColonWithStandardSyntax(name){return name.startsWith("@")?name.replace("@","x-on:"):name.startsWith(":")?name.replace(":","x-bind:"):name}function convertClassStringToArray(classList,filterFn=Boolean){return classList.split(" ").filter(filterFn)}const TRANSITION_TYPE_IN="in",TRANSITION_TYPE_OUT="out",TRANSITION_CANCELLED="cancelled";function transitionIn(el,show,reject,component,forceSkip=!1){if(forceSkip)return show();if(el.__x_transition&&"in"===el.__x_transition.type)return;const attrs=getXAttrs(el,component,"transition"),showAttr=getXAttrs(el,component,"show")[0];if(showAttr&&showAttr.modifiers.includes("transition")){let modifiers=showAttr.modifiers;if(modifiers.includes("out")&&!modifiers.includes("in"))return show();const settingBothSidesOfTransition=modifiers.includes("in")&&modifiers.includes("out");modifiers=settingBothSidesOfTransition?modifiers.filter((i,index)=>index<modifiers.indexOf("out")):modifiers,transitionHelperIn(el,modifiers,show,reject)}else attrs.some(attr=>["enter","enter-start","enter-end"].includes(attr.value))?transitionClassesIn(el,component,attrs,show,reject):show()}function transitionOut(el,hide,reject,component,forceSkip=!1){if(forceSkip)return hide();if(el.__x_transition&&"out"===el.__x_transition.type)return;const attrs=getXAttrs(el,component,"transition"),showAttr=getXAttrs(el,component,"show")[0];if(showAttr&&showAttr.modifiers.includes("transition")){let modifiers=showAttr.modifiers;if(modifiers.includes("in")&&!modifiers.includes("out"))return hide();const settingBothSidesOfTransition=modifiers.includes("in")&&modifiers.includes("out");modifiers=settingBothSidesOfTransition?modifiers.filter((i,index)=>index>modifiers.indexOf("out")):modifiers,transitionHelperOut(el,modifiers,settingBothSidesOfTransition,hide,reject)}else attrs.some(attr=>["leave","leave-start","leave-end"].includes(attr.value))?transitionClassesOut(el,component,attrs,hide,reject):hide()}function transitionHelperIn(el,modifiers,showCallback,reject){const styleValues={duration:modifierValue(modifiers,"duration",150),origin:modifierValue(modifiers,"origin","center"),first:{opacity:0,scale:modifierValue(modifiers,"scale",95)},second:{opacity:1,scale:100}};transitionHelper(el,modifiers,showCallback,()=>{},reject,styleValues,"in")}function transitionHelperOut(el,modifiers,settingBothSidesOfTransition,hideCallback,reject){const duration=settingBothSidesOfTransition?modifierValue(modifiers,"duration",150):modifierValue(modifiers,"duration",150)/2,styleValues={duration:duration,origin:modifierValue(modifiers,"origin","center"),first:{opacity:1,scale:100},second:{opacity:0,scale:modifierValue(modifiers,"scale",95)}};transitionHelper(el,modifiers,()=>{},hideCallback,reject,styleValues,"out")}function modifierValue(modifiers,key,fallback){if(-1===modifiers.indexOf(key))return fallback;const rawValue=modifiers[modifiers.indexOf(key)+1];if(!rawValue)return fallback;if("scale"===key&&!isNumeric(rawValue))return fallback;if("duration"===key){let match=rawValue.match(/([0-9]+)ms/);if(match)return match[1]}return"origin"===key&&["top","right","left","center","bottom"].includes(modifiers[modifiers.indexOf(key)+2])?[rawValue,modifiers[modifiers.indexOf(key)+2]].join(" "):rawValue}function transitionHelper(el,modifiers,hook1,hook2,reject,styleValues,type){el.__x_transition&&el.__x_transition.cancel&&el.__x_transition.cancel();const opacityCache=el.style.opacity,transformCache=el.style.transform,transformOriginCache=el.style.transformOrigin,noModifiers=!modifiers.includes("opacity")&&!modifiers.includes("scale"),transitionOpacity=noModifiers||modifiers.includes("opacity"),transitionScale=noModifiers||modifiers.includes("scale"),stages={start(){transitionOpacity&&(el.style.opacity=styleValues.first.opacity),transitionScale&&(el.style.transform=`scale(${styleValues.first.scale/100})`)},during(){transitionScale&&(el.style.transformOrigin=styleValues.origin),el.style.transitionProperty=[transitionOpacity?"opacity":"",transitionScale?"transform":""].join(" ").trim(),el.style.transitionDuration=`${styleValues.duration/1e3}s`,el.style.transitionTimingFunction="cubic-bezier(0.4, 0.0, 0.2, 1)"},show(){hook1()},end(){transitionOpacity&&(el.style.opacity=styleValues.second.opacity),transitionScale&&(el.style.transform=`scale(${styleValues.second.scale/100})`)},hide(){hook2()},cleanup(){transitionOpacity&&(el.style.opacity=opacityCache),transitionScale&&(el.style.transform=transformCache),transitionScale&&(el.style.transformOrigin=transformOriginCache),el.style.transitionProperty=null,el.style.transitionDuration=null,el.style.transitionTimingFunction=null}};transition(el,stages,type,reject)}const ensureStringExpression=(expression,el,component)=>"function"==typeof expression?component.evaluateReturnExpression(el,expression):expression;function transitionClassesIn(el,component,directives,showCallback,reject){const enter=convertClassStringToArray(ensureStringExpression((directives.find(i=>"enter"===i.value)||{expression:""}).expression,el,component)),enterStart=convertClassStringToArray(ensureStringExpression((directives.find(i=>"enter-start"===i.value)||{expression:""}).expression,el,component)),enterEnd=convertClassStringToArray(ensureStringExpression((directives.find(i=>"enter-end"===i.value)||{expression:""}).expression,el,component));transitionClasses(el,enter,enterStart,enterEnd,showCallback,()=>{},"in",reject)}function transitionClassesOut(el,component,directives,hideCallback,reject){const leave=convertClassStringToArray(ensureStringExpression((directives.find(i=>"leave"===i.value)||{expression:""}).expression,el,component)),leaveStart=convertClassStringToArray(ensureStringExpression((directives.find(i=>"leave-start"===i.value)||{expression:""}).expression,el,component)),leaveEnd=convertClassStringToArray(ensureStringExpression((directives.find(i=>"leave-end"===i.value)||{expression:""}).expression,el,component));transitionClasses(el,leave,leaveStart,leaveEnd,()=>{},hideCallback,"out",reject)}function transitionClasses(el,classesDuring,classesStart,classesEnd,hook1,hook2,type,reject){el.__x_transition&&el.__x_transition.cancel&&el.__x_transition.cancel();const originalClasses=el.__x_original_classes||[],stages={start(){el.classList.add(...classesStart)},during(){el.classList.add(...classesDuring)},show(){hook1()},end(){el.classList.remove(...classesStart.filter(i=>!originalClasses.includes(i))),el.classList.add(...classesEnd)},hide(){hook2()},cleanup(){el.classList.remove(...classesDuring.filter(i=>!originalClasses.includes(i))),el.classList.remove(...classesEnd.filter(i=>!originalClasses.includes(i)))}};transition(el,stages,type,reject)}function transition(el,stages,type,reject){const finish=once(()=>{stages.hide(),el.isConnected&&stages.cleanup(),delete el.__x_transition});el.__x_transition={type:type,cancel:once(()=>{reject("cancelled"),finish()}),finish:finish,nextFrame:null},stages.start(),stages.during(),el.__x_transition.nextFrame=requestAnimationFrame(()=>{let duration=1e3*Number(getComputedStyle(el).transitionDuration.replace(/,.*/,"").replace("s",""));0===duration&&(duration=1e3*Number(getComputedStyle(el).animationDuration.replace("s",""))),stages.show(),el.__x_transition.nextFrame=requestAnimationFrame(()=>{stages.end(),setTimeout(el.__x_transition.finish,duration)})})}function isNumeric(subject){return!Array.isArray(subject)&&!isNaN(subject)}function once(callback){let called=!1;return function(){called||(called=!0,callback.apply(this,arguments))}}function handleForDirective(component,templateEl,expression,initialUpdate,extraVars){warnIfMalformedTemplate(templateEl,"x-for");let iteratorNames=parseForExpression("function"==typeof expression?component.evaluateReturnExpression(templateEl,expression):expression),items=evaluateItemsAndReturnEmptyIfXIfIsPresentAndFalseOnElement(component,templateEl,iteratorNames,extraVars),currentEl=templateEl;items.forEach((item,index)=>{let iterationScopeVariables=getIterationScopeVariables(iteratorNames,item,index,items,extraVars()),currentKey=generateKeyForIteration(component,templateEl,index,iterationScopeVariables),nextEl=lookAheadForMatchingKeyedElementAndMoveItIfFound(currentEl.nextElementSibling,currentKey);nextEl?(delete nextEl.__x_for_key,nextEl.__x_for=iterationScopeVariables,component.updateElements(nextEl,()=>nextEl.__x_for)):(nextEl=addElementInLoopAfterCurrentEl(templateEl,currentEl),transitionIn(nextEl,()=>{},()=>{},component,initialUpdate),nextEl.__x_for=iterationScopeVariables,component.initializeElements(nextEl,()=>nextEl.__x_for)),currentEl=nextEl,currentEl.__x_for_key=currentKey}),removeAnyLeftOverElementsFromPreviousUpdate(currentEl,component)}function parseForExpression(expression){let forIteratorRE=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,stripParensRE=/^\(|\)$/g,forAliasRE=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,inMatch=String(expression).match(forAliasRE);if(!inMatch)return;let res={};res.items=inMatch[2].trim();let item=inMatch[1].trim().replace(stripParensRE,""),iteratorMatch=item.match(forIteratorRE);return iteratorMatch?(res.item=item.replace(forIteratorRE,"").trim(),res.index=iteratorMatch[1].trim(),iteratorMatch[2]&&(res.collection=iteratorMatch[2].trim())):res.item=item,res}function getIterationScopeVariables(iteratorNames,item,index,items,extraVars){let scopeVariables=extraVars?_objectSpread2({},extraVars):{};return scopeVariables[iteratorNames.item]=item,iteratorNames.index&&(scopeVariables[iteratorNames.index]=index),iteratorNames.collection&&(scopeVariables[iteratorNames.collection]=items),scopeVariables}function generateKeyForIteration(component,el,index,iterationScopeVariables){let bindKeyAttribute=getXAttrs(el,component,"bind").filter(attr=>"key"===attr.value)[0];return bindKeyAttribute?component.evaluateReturnExpression(el,bindKeyAttribute.expression,()=>iterationScopeVariables):index}function evaluateItemsAndReturnEmptyIfXIfIsPresentAndFalseOnElement(component,el,iteratorNames,extraVars){let ifAttribute=getXAttrs(el,component,"if")[0];if(ifAttribute&&!component.evaluateReturnExpression(el,ifAttribute.expression))return[];let items=component.evaluateReturnExpression(el,iteratorNames.items,extraVars);return isNumeric(items)&&items>=0&&(items=Array.from(Array(items).keys(),i=>i+1)),items}function addElementInLoopAfterCurrentEl(templateEl,currentEl){let clone=document.importNode(templateEl.content,!0);return currentEl.parentElement.insertBefore(clone,currentEl.nextElementSibling),currentEl.nextElementSibling}function lookAheadForMatchingKeyedElementAndMoveItIfFound(nextEl,currentKey){if(!nextEl)return;if(void 0===nextEl.__x_for_key)return;if(nextEl.__x_for_key===currentKey)return nextEl;let tmpNextEl=nextEl;for(;tmpNextEl;){if(tmpNextEl.__x_for_key===currentKey)return tmpNextEl.parentElement.insertBefore(tmpNextEl,nextEl);tmpNextEl=!(!tmpNextEl.nextElementSibling||void 0===tmpNextEl.nextElementSibling.__x_for_key)&&tmpNextEl.nextElementSibling}}function removeAnyLeftOverElementsFromPreviousUpdate(currentEl,component){for(var nextElementFromOldLoop=!(!currentEl.nextElementSibling||void 0===currentEl.nextElementSibling.__x_for_key)&&currentEl.nextElementSibling;nextElementFromOldLoop;){let nextElementFromOldLoopImmutable=nextElementFromOldLoop,nextSibling=nextElementFromOldLoop.nextElementSibling;transitionOut(nextElementFromOldLoop,()=>{nextElementFromOldLoopImmutable.remove()},()=>{},component),nextElementFromOldLoop=!(!nextSibling||void 0===nextSibling.__x_for_key)&&nextSibling}}function handleAttributeBindingDirective(component,el,attrName,expression,extraVars,attrType,modifiers){var value=component.evaluateReturnExpression(el,expression,extraVars);if("value"===attrName){if(Alpine.ignoreFocusedForValueBinding&&document.activeElement.isSameNode(el))return;if(void 0===value&&String(expression).match(/\./)&&(value=""),"radio"===el.type)void 0===el.attributes.value&&"bind"===attrType?el.value=value:"bind"!==attrType&&(el.checked=checkedAttrLooseCompare(el.value,value));else if("checkbox"===el.type)"boolean"==typeof value||[null,void 0].includes(value)||"bind"!==attrType?"bind"!==attrType&&(Array.isArray(value)?el.checked=value.some(val=>checkedAttrLooseCompare(val,el.value)):el.checked=!!value):el.value=String(value);else if("SELECT"===el.tagName)updateSelect(el,value);else{if(el.value===value)return;el.value=value}}else if("class"===attrName)if(Array.isArray(value)){const originalClasses=el.__x_original_classes||[];el.setAttribute("class",arrayUnique(originalClasses.concat(value)).join(" "))}else if("object"==typeof value){const keysSortedByBooleanValue=Object.keys(value).sort((a,b)=>value[a]-value[b]);keysSortedByBooleanValue.forEach(classNames=>{value[classNames]?convertClassStringToArray(classNames).forEach(className=>el.classList.add(className)):convertClassStringToArray(classNames).forEach(className=>el.classList.remove(className))})}else{const originalClasses=el.__x_original_classes||[],newClasses=value?convertClassStringToArray(value):[];el.setAttribute("class",arrayUnique(originalClasses.concat(newClasses)).join(" "))}else attrName=modifiers.includes("camel")?camelCase(attrName):attrName,[null,void 0,!1].includes(value)?el.removeAttribute(attrName):isBooleanAttr(attrName)?setIfChanged(el,attrName,attrName):setIfChanged(el,attrName,value)}function setIfChanged(el,attrName,value){el.getAttribute(attrName)!=value&&el.setAttribute(attrName,value)}function updateSelect(el,value){const arrayWrappedValue=[].concat(value).map(value=>value+"");Array.from(el.options).forEach(option=>{option.selected=arrayWrappedValue.includes(option.value||option.text)})}function handleTextDirective(el,output,expression){void 0===output&&String(expression).match(/\./)&&(output=""),el.textContent=output}function handleHtmlDirective(component,el,expression,extraVars){el.innerHTML=component.evaluateReturnExpression(el,expression,extraVars)}function handleShowDirective(component,el,value,modifiers,initialUpdate=!1){const hide=()=>{el.style.display="none",el.__x_is_shown=!1},show=()=>{1===el.style.length&&"none"===el.style.display?el.removeAttribute("style"):el.style.removeProperty("display"),el.__x_is_shown=!0};if(!0===initialUpdate)return void(value?show():hide());const handle=(resolve,reject)=>{value?(("none"===el.style.display||el.__x_transition)&&transitionIn(el,()=>{show()},reject,component),resolve(()=>{})):"none"!==el.style.display?transitionOut(el,()=>{resolve(()=>{hide()})},reject,component):resolve(()=>{})};modifiers.includes("immediate")?handle(finish=>finish(),()=>{}):(component.showDirectiveLastElement&&!component.showDirectiveLastElement.contains(el)&&component.executeAndClearRemainingShowDirectiveStack(),component.showDirectiveStack.push(handle),component.showDirectiveLastElement=el)}function handleIfDirective(component,el,expressionResult,initialUpdate,extraVars){warnIfMalformedTemplate(el,"x-if");const elementHasAlreadyBeenAdded=el.nextElementSibling&&!0===el.nextElementSibling.__x_inserted_me;if(!expressionResult||elementHasAlreadyBeenAdded&&!el.__x_transition)!expressionResult&&elementHasAlreadyBeenAdded&&transitionOut(el.nextElementSibling,()=>{el.nextElementSibling.remove()},()=>{},component,initialUpdate);else{const clone=document.importNode(el.content,!0);el.parentElement.insertBefore(clone,el.nextElementSibling),transitionIn(el.nextElementSibling,()=>{},()=>{},component,initialUpdate),component.initializeElements(el.nextElementSibling,extraVars),el.nextElementSibling.__x_inserted_me=!0}}function registerListener(component,el,event,modifiers,expression,extraVars={}){const options={passive:modifiers.includes("passive")};let handler,listenerTarget;if(modifiers.includes("camel")&&(event=camelCase(event)),modifiers.includes("away")?(listenerTarget=document,handler=e=>{el.contains(e.target)||el.offsetWidth<1&&el.offsetHeight<1||(runListenerHandler(component,expression,e,extraVars),modifiers.includes("once")&&document.removeEventListener(event,handler,options))}):(listenerTarget=modifiers.includes("window")?window:modifiers.includes("document")?document:el,handler=e=>{if(listenerTarget!==window&&listenerTarget!==document||document.body.contains(el)){if(!(isKeyEvent(event)&&isListeningForASpecificKeyThatHasntBeenPressed(e,modifiers)||(modifiers.includes("prevent")&&e.preventDefault(),modifiers.includes("stop")&&e.stopPropagation(),modifiers.includes("self")&&e.target!==el))){const returnValue=runListenerHandler(component,expression,e,extraVars);returnValue.then(value=>{!1===value?e.preventDefault():modifiers.includes("once")&&listenerTarget.removeEventListener(event,handler,options)})}}else listenerTarget.removeEventListener(event,handler,options)}),modifiers.includes("debounce")){let nextModifier=modifiers[modifiers.indexOf("debounce")+1]||"invalid-wait",wait=isNumeric(nextModifier.split("ms")[0])?Number(nextModifier.split("ms")[0]):250;handler=debounce(handler,wait)}listenerTarget.addEventListener(event,handler,options)}function runListenerHandler(component,expression,e,extraVars){return component.evaluateCommandExpression(e.target,expression,()=>_objectSpread2(_objectSpread2({},extraVars()),{},{$event:e}))}function isKeyEvent(event){return["keydown","keyup"].includes(event)}function isListeningForASpecificKeyThatHasntBeenPressed(e,modifiers){let keyModifiers=modifiers.filter(i=>!["window","document","prevent","stop"].includes(i));if(keyModifiers.includes("debounce")){let debounceIndex=keyModifiers.indexOf("debounce");keyModifiers.splice(debounceIndex,isNumeric((keyModifiers[debounceIndex+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===keyModifiers.length)return!1;if(1===keyModifiers.length&&keyModifiers[0]===keyToModifier(e.key))return!1;const systemKeyModifiers=["ctrl","shift","alt","meta","cmd","super"],selectedSystemKeyModifiers=systemKeyModifiers.filter(modifier=>keyModifiers.includes(modifier));if(keyModifiers=keyModifiers.filter(i=>!selectedSystemKeyModifiers.includes(i)),selectedSystemKeyModifiers.length>0){const activelyPressedKeyModifiers=selectedSystemKeyModifiers.filter(modifier=>("cmd"!==modifier&&"super"!==modifier||(modifier="meta"),e[`${modifier}Key`]));if(activelyPressedKeyModifiers.length===selectedSystemKeyModifiers.length&&keyModifiers[0]===keyToModifier(e.key))return!1}return!0}function keyToModifier(key){switch(key){case"/":return"slash";case" ":case"Spacebar":return"space";default:return key&&kebabCase(key)}}function registerModelListener(component,el,modifiers,expression,extraVars){var event="select"===el.tagName.toLowerCase()||["checkbox","radio"].includes(el.type)||modifiers.includes("lazy")?"change":"input";const listenerExpression=`${expression} = rightSideOfExpression($event, ${expression})`;registerListener(component,el,event,modifiers,listenerExpression,()=>_objectSpread2(_objectSpread2({},extraVars()),{},{rightSideOfExpression:generateModelAssignmentFunction(el,modifiers,expression)}))}function generateModelAssignmentFunction(el,modifiers,expression){return"radio"===el.type&&(el.hasAttribute("name")||el.setAttribute("name",expression)),(event,currentValue)=>{if(event instanceof CustomEvent&&event.detail)return event.detail;if("checkbox"===el.type){if(Array.isArray(currentValue)){const newValue=modifiers.includes("number")?safeParseNumber(event.target.value):event.target.value;return event.target.checked?currentValue.concat([newValue]):currentValue.filter(el=>!checkedAttrLooseCompare(el,newValue))}return event.target.checked}if("select"===el.tagName.toLowerCase()&&el.multiple)return modifiers.includes("number")?Array.from(event.target.selectedOptions).map(option=>{const rawValue=option.value||option.text;return safeParseNumber(rawValue)}):Array.from(event.target.selectedOptions).map(option=>option.value||option.text);{const rawValue=event.target.value;return modifiers.includes("number")?safeParseNumber(rawValue):modifiers.includes("trim")?rawValue.trim():rawValue}}}function safeParseNumber(rawValue){const number=rawValue?parseFloat(rawValue):null;return isNumeric(number)?number:rawValue}const{isArray:isArray}=Array,{getPrototypeOf:getPrototypeOf,create:ObjectCreate,defineProperty:ObjectDefineProperty,defineProperties:ObjectDefineProperties,isExtensible:isExtensible,getOwnPropertyDescriptor:getOwnPropertyDescriptor,getOwnPropertyNames:getOwnPropertyNames,getOwnPropertySymbols:getOwnPropertySymbols,preventExtensions:preventExtensions,hasOwnProperty:hasOwnProperty}=Object,{push:ArrayPush,concat:ArrayConcat,map:ArrayMap}=Array.prototype;function isUndefined(obj){return void 0===obj}function isFunction(obj){return"function"==typeof obj}function isObject(obj){return"object"==typeof obj}const proxyToValueMap=new WeakMap;function registerProxy(proxy,value){proxyToValueMap.set(proxy,value)}const unwrap=replicaOrAny=>proxyToValueMap.get(replicaOrAny)||replicaOrAny;function wrapValue(membrane,value){return membrane.valueIsObservable(value)?membrane.getProxy(value):value}function unwrapDescriptor(descriptor){return hasOwnProperty.call(descriptor,"value")&&(descriptor.value=unwrap(descriptor.value)),descriptor}function lockShadowTarget(membrane,shadowTarget,originalTarget){const targetKeys=ArrayConcat.call(getOwnPropertyNames(originalTarget),getOwnPropertySymbols(originalTarget));targetKeys.forEach(key=>{let descriptor=getOwnPropertyDescriptor(originalTarget,key);descriptor.configurable||(descriptor=wrapDescriptor(membrane,descriptor,wrapValue)),ObjectDefineProperty(shadowTarget,key,descriptor)}),preventExtensions(shadowTarget)}class ReactiveProxyHandler{constructor(membrane,value){this.originalTarget=value,this.membrane=membrane}get(shadowTarget,key){const{originalTarget:originalTarget,membrane:membrane}=this,value=originalTarget[key],{valueObserved:valueObserved}=membrane;return valueObserved(originalTarget,key),membrane.getProxy(value)}set(shadowTarget,key,value){const{originalTarget:originalTarget,membrane:{valueMutated:valueMutated}}=this,oldValue=originalTarget[key];return oldValue!==value?(originalTarget[key]=value,valueMutated(originalTarget,key)):"length"===key&&isArray(originalTarget)&&valueMutated(originalTarget,key),!0}deleteProperty(shadowTarget,key){const{originalTarget:originalTarget,membrane:{valueMutated:valueMutated}}=this;return delete originalTarget[key],valueMutated(originalTarget,key),!0}apply(shadowTarget,thisArg,argArray){}construct(target,argArray,newTarget){}has(shadowTarget,key){const{originalTarget:originalTarget,membrane:{valueObserved:valueObserved}}=this;return valueObserved(originalTarget,key),key in originalTarget}ownKeys(shadowTarget){const{originalTarget:originalTarget}=this;return ArrayConcat.call(getOwnPropertyNames(originalTarget),getOwnPropertySymbols(originalTarget))}isExtensible(shadowTarget){const shadowIsExtensible=isExtensible(shadowTarget);if(!shadowIsExtensible)return shadowIsExtensible;const{originalTarget:originalTarget,membrane:membrane}=this,targetIsExtensible=isExtensible(originalTarget);return targetIsExtensible||lockShadowTarget(membrane,shadowTarget,originalTarget),targetIsExtensible}setPrototypeOf(shadowTarget,prototype){}getPrototypeOf(shadowTarget){const{originalTarget:originalTarget}=this;return getPrototypeOf(originalTarget)}getOwnPropertyDescriptor(shadowTarget,key){const{originalTarget:originalTarget,membrane:membrane}=this,{valueObserved:valueObserved}=this.membrane;valueObserved(originalTarget,key);let desc=getOwnPropertyDescriptor(originalTarget,key);if(isUndefined(desc))return desc;const shadowDescriptor=getOwnPropertyDescriptor(shadowTarget,key);return isUndefined(shadowDescriptor)?(desc=wrapDescriptor(membrane,desc,wrapValue),desc.configurable||ObjectDefineProperty(shadowTarget,key,desc),desc):shadowDescriptor}preventExtensions(shadowTarget){const{originalTarget:originalTarget,membrane:membrane}=this;return lockShadowTarget(membrane,shadowTarget,originalTarget),preventExtensions(originalTarget),!0}defineProperty(shadowTarget,key,descriptor){const{originalTarget:originalTarget,membrane:membrane}=this,{valueMutated:valueMutated}=membrane,{configurable:configurable}=descriptor;if(hasOwnProperty.call(descriptor,"writable")&&!hasOwnProperty.call(descriptor,"value")){const originalDescriptor=getOwnPropertyDescriptor(originalTarget,key);descriptor.value=originalDescriptor.value}return ObjectDefineProperty(originalTarget,key,unwrapDescriptor(descriptor)),!1===configurable&&ObjectDefineProperty(shadowTarget,key,wrapDescriptor(membrane,descriptor,wrapValue)),valueMutated(originalTarget,key),!0}}function wrapReadOnlyValue(membrane,value){return membrane.valueIsObservable(value)?membrane.getReadOnlyProxy(value):value}class ReadOnlyHandler{constructor(membrane,value){this.originalTarget=value,this.membrane=membrane}get(shadowTarget,key){const{membrane:membrane,originalTarget:originalTarget}=this,value=originalTarget[key],{valueObserved:valueObserved}=membrane;return valueObserved(originalTarget,key),membrane.getReadOnlyProxy(value)}set(shadowTarget,key,value){return!1}deleteProperty(shadowTarget,key){return!1}apply(shadowTarget,thisArg,argArray){}construct(target,argArray,newTarget){}has(shadowTarget,key){const{originalTarget:originalTarget,membrane:{valueObserved:valueObserved}}=this;return valueObserved(originalTarget,key),key in originalTarget}ownKeys(shadowTarget){const{originalTarget:originalTarget}=this;return ArrayConcat.call(getOwnPropertyNames(originalTarget),getOwnPropertySymbols(originalTarget))}setPrototypeOf(shadowTarget,prototype){}getOwnPropertyDescriptor(shadowTarget,key){const{originalTarget:originalTarget,membrane:membrane}=this,{valueObserved:valueObserved}=membrane;valueObserved(originalTarget,key);let desc=getOwnPropertyDescriptor(originalTarget,key);if(isUndefined(desc))return desc;const shadowDescriptor=getOwnPropertyDescriptor(shadowTarget,key);return isUndefined(shadowDescriptor)?(desc=wrapDescriptor(membrane,desc,wrapReadOnlyValue),hasOwnProperty.call(desc,"set")&&(desc.set=void 0),desc.configurable||ObjectDefineProperty(shadowTarget,key,desc),desc):shadowDescriptor}preventExtensions(shadowTarget){return!1}defineProperty(shadowTarget,key,descriptor){return!1}}function createShadowTarget(value){let shadowTarget=void 0;return isArray(value)?shadowTarget=[]:isObject(value)&&(shadowTarget={}),shadowTarget}const ObjectDotPrototype=Object.prototype;function defaultValueIsObservable(value){if(null===value)return!1;if("object"!=typeof value)return!1;if(isArray(value))return!0;const proto=getPrototypeOf(value);return proto===ObjectDotPrototype||null===proto||null===getPrototypeOf(proto)}const defaultValueObserved=(obj,key)=>{},defaultValueMutated=(obj,key)=>{},defaultValueDistortion=value=>value;function wrapDescriptor(membrane,descriptor,getValue){const{set:set,get:get}=descriptor;return hasOwnProperty.call(descriptor,"value")?descriptor.value=getValue(membrane,descriptor.value):(isUndefined(get)||(descriptor.get=function(){return getValue(membrane,get.call(unwrap(this)))}),isUndefined(set)||(descriptor.set=function(value){set.call(unwrap(this),membrane.unwrapProxy(value))})),descriptor}class ReactiveMembrane{constructor(options){if(this.valueDistortion=defaultValueDistortion,this.valueMutated=defaultValueMutated,this.valueObserved=defaultValueObserved,this.valueIsObservable=defaultValueIsObservable,this.objectGraph=new WeakMap,!isUndefined(options)){const{valueDistortion:valueDistortion,valueMutated:valueMutated,valueObserved:valueObserved,valueIsObservable:valueIsObservable}=options;this.valueDistortion=isFunction(valueDistortion)?valueDistortion:defaultValueDistortion,this.valueMutated=isFunction(valueMutated)?valueMutated:defaultValueMutated,this.valueObserved=isFunction(valueObserved)?valueObserved:defaultValueObserved,this.valueIsObservable=isFunction(valueIsObservable)?valueIsObservable:defaultValueIsObservable}}getProxy(value){const unwrappedValue=unwrap(value),distorted=this.valueDistortion(unwrappedValue);if(this.valueIsObservable(distorted)){const o=this.getReactiveState(unwrappedValue,distorted);return o.readOnly===value?value:o.reactive}return distorted}getReadOnlyProxy(value){value=unwrap(value);const distorted=this.valueDistortion(value);return this.valueIsObservable(distorted)?this.getReactiveState(value,distorted).readOnly:distorted}unwrapProxy(p){return unwrap(p)}getReactiveState(value,distortedValue){const{objectGraph:objectGraph}=this;let reactiveState=objectGraph.get(distortedValue);if(reactiveState)return reactiveState;const membrane=this;return reactiveState={get reactive(){const reactiveHandler=new ReactiveProxyHandler(membrane,distortedValue),proxy=new Proxy(createShadowTarget(distortedValue),reactiveHandler);return registerProxy(proxy,value),ObjectDefineProperty(this,"reactive",{value:proxy}),proxy},get readOnly(){const readOnlyHandler=new ReadOnlyHandler(membrane,distortedValue),proxy=new Proxy(createShadowTarget(distortedValue),readOnlyHandler);return registerProxy(proxy,value),ObjectDefineProperty(this,"readOnly",{value:proxy}),proxy}},objectGraph.set(distortedValue,reactiveState),reactiveState}}function wrap(data,mutationCallback){let membrane=new ReactiveMembrane({valueMutated(target,key){mutationCallback(target,key)}});return{data:membrane.getProxy(data),membrane:membrane}}function unwrap$1(membrane,observable){let unwrappedData=membrane.unwrapProxy(observable),copy={};return Object.keys(unwrappedData).forEach(key=>{["$el","$refs","$nextTick","$watch"].includes(key)||(copy[key]=unwrappedData[key])}),copy}class Component{constructor(el,componentForClone=null){this.$el=el;const dataAttr=this.$el.getAttribute("x-data"),dataExpression=""===dataAttr?"{}":dataAttr,initExpression=this.$el.getAttribute("x-init");let dataExtras={$el:this.$el},canonicalComponentElementReference=componentForClone?componentForClone.$el:this.$el;Object.entries(Alpine.magicProperties).forEach(([name,callback])=>{Object.defineProperty(dataExtras,`$${name}`,{get:function get(){return callback(canonicalComponentElementReference)}})}),this.unobservedData=componentForClone?componentForClone.getUnobservedData():saferEval(el,dataExpression,dataExtras);let{membrane:membrane,data:data}=this.wrapDataInObservable(this.unobservedData);var initReturnedCallback;this.$data=data,this.membrane=membrane,this.unobservedData.$el=this.$el,this.unobservedData.$refs=this.getRefsProxy(),this.nextTickStack=[],this.unobservedData.$nextTick=callback=>{this.nextTickStack.push(callback)},this.watchers={},this.unobservedData.$watch=(property,callback)=>{this.watchers[property]||(this.watchers[property]=[]),this.watchers[property].push(callback)},Object.entries(Alpine.magicProperties).forEach(([name,callback])=>{Object.defineProperty(this.unobservedData,`$${name}`,{get:function get(){return callback(canonicalComponentElementReference,this.$el)}})}),this.showDirectiveStack=[],this.showDirectiveLastElement,componentForClone||Alpine.onBeforeComponentInitializeds.forEach(callback=>callback(this)),initExpression&&!componentForClone&&(this.pauseReactivity=!0,initReturnedCallback=this.evaluateReturnExpression(this.$el,initExpression),this.pauseReactivity=!1),this.initializeElements(this.$el,()=>{},componentForClone),this.listenForNewElementsToInitialize(),"function"==typeof initReturnedCallback&&initReturnedCallback.call(this.$data),componentForClone||setTimeout(()=>{Alpine.onComponentInitializeds.forEach(callback=>callback(this))},0)}getUnobservedData(){return unwrap$1(this.membrane,this.$data)}wrapDataInObservable(data){var self=this;let updateDom=debounce((function(){self.updateElements(self.$el)}),0);return wrap(data,(target,key)=>{self.watchers[key]?self.watchers[key].forEach(callback=>callback(target[key])):Array.isArray(target)?Object.keys(self.watchers).forEach(fullDotNotationKey=>{let dotNotationParts=fullDotNotationKey.split(".");"length"!==key&&dotNotationParts.reduce((comparisonData,part)=>(Object.is(target,comparisonData[part])&&self.watchers[fullDotNotationKey].forEach(callback=>callback(target)),comparisonData[part]),self.unobservedData)}):Object.keys(self.watchers).filter(i=>i.includes(".")).forEach(fullDotNotationKey=>{let dotNotationParts=fullDotNotationKey.split(".");key===dotNotationParts[dotNotationParts.length-1]&&dotNotationParts.reduce((comparisonData,part)=>(Object.is(target,comparisonData)&&self.watchers[fullDotNotationKey].forEach(callback=>callback(target[key])),comparisonData[part]),self.unobservedData)}),self.pauseReactivity||updateDom()})}walkAndSkipNestedComponents(el,callback,initializeComponentCallback=(()=>{})){walk(el,el=>el.hasAttribute("x-data")&&!el.isSameNode(this.$el)?(el.__x||initializeComponentCallback(el),!1):callback(el))}initializeElements(rootEl,extraVars=(()=>{}),componentForClone=!1){this.walkAndSkipNestedComponents(rootEl,el=>void 0===el.__x_for_key&&(void 0===el.__x_inserted_me&&void this.initializeElement(el,extraVars,!componentForClone)),el=>{componentForClone||(el.__x=new Component(el))}),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(rootEl)}initializeElement(el,extraVars,shouldRegisterListeners=!0){el.hasAttribute("class")&&getXAttrs(el,this).length>0&&(el.__x_original_classes=convertClassStringToArray(el.getAttribute("class"))),shouldRegisterListeners&&this.registerListeners(el,extraVars),this.resolveBoundAttributes(el,!0,extraVars)}updateElements(rootEl,extraVars=(()=>{})){this.walkAndSkipNestedComponents(rootEl,el=>{if(void 0!==el.__x_for_key&&!el.isSameNode(this.$el))return!1;this.updateElement(el,extraVars)},el=>{el.__x=new Component(el)}),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(rootEl)}executeAndClearNextTickStack(el){el===this.$el&&this.nextTickStack.length>0&&requestAnimationFrame(()=>{for(;this.nextTickStack.length>0;)this.nextTickStack.shift()()})}executeAndClearRemainingShowDirectiveStack(){this.showDirectiveStack.reverse().map(handler=>new Promise((resolve,reject)=>{handler(resolve,reject)})).reduce((promiseChain,promise)=>promiseChain.then(()=>promise.then(finishElement=>{finishElement()})),Promise.resolve(()=>{})).catch(e=>{if("cancelled"!==e)throw e}),this.showDirectiveStack=[],this.showDirectiveLastElement=void 0}updateElement(el,extraVars){this.resolveBoundAttributes(el,!1,extraVars)}registerListeners(el,extraVars){getXAttrs(el,this).forEach(({type:type,value:value,modifiers:modifiers,expression:expression})=>{switch(type){case"on":registerListener(this,el,value,modifiers,expression,extraVars);break;case"model":registerModelListener(this,el,modifiers,expression,extraVars)}})}resolveBoundAttributes(el,initialUpdate=!1,extraVars){let attrs=getXAttrs(el,this);attrs.forEach(({type:type,value:value,modifiers:modifiers,expression:expression})=>{switch(type){case"model":handleAttributeBindingDirective(this,el,"value",expression,extraVars,type,modifiers);break;case"bind":if("template"===el.tagName.toLowerCase()&&"key"===value)return;handleAttributeBindingDirective(this,el,value,expression,extraVars,type,modifiers);break;case"text":var output=this.evaluateReturnExpression(el,expression,extraVars);handleTextDirective(el,output,expression);break;case"html":handleHtmlDirective(this,el,expression,extraVars);break;case"show":var output=this.evaluateReturnExpression(el,expression,extraVars);handleShowDirective(this,el,output,modifiers,initialUpdate);break;case"if":if(attrs.some(i=>"for"===i.type))return;var output=this.evaluateReturnExpression(el,expression,extraVars);handleIfDirective(this,el,output,initialUpdate,extraVars);break;case"for":handleForDirective(this,el,expression,initialUpdate,extraVars);break;case"cloak":el.removeAttribute("x-cloak")}})}evaluateReturnExpression(el,expression,extraVars=(()=>{})){return saferEval(el,expression,this.$data,_objectSpread2(_objectSpread2({},extraVars()),{},{$dispatch:this.getDispatchFunction(el)}))}evaluateCommandExpression(el,expression,extraVars=(()=>{})){return saferEvalNoReturn(el,expression,this.$data,_objectSpread2(_objectSpread2({},extraVars()),{},{$dispatch:this.getDispatchFunction(el)}))}getDispatchFunction(el){return(event,detail={})=>{el.dispatchEvent(new CustomEvent(event,{detail:detail,bubbles:!0}))}}listenForNewElementsToInitialize(){const targetNode=this.$el,observerOptions={childList:!0,attributes:!0,subtree:!0},observer=new MutationObserver(mutations=>{for(let i=0;i<mutations.length;i++){const closestParentComponent=mutations[i].target.closest("[x-data]");if(closestParentComponent&&closestParentComponent.isSameNode(this.$el)){if("attributes"===mutations[i].type&&"x-data"===mutations[i].attributeName){const xAttr=mutations[i].target.getAttribute("x-data")||"{}",rawData=saferEval(this.$el,xAttr,{$el:this.$el});Object.keys(rawData).forEach(key=>{this.$data[key]!==rawData[key]&&(this.$data[key]=rawData[key])})}mutations[i].addedNodes.length>0&&mutations[i].addedNodes.forEach(node=>{1!==node.nodeType||node.__x_inserted_me||(!node.matches("[x-data]")||node.__x?this.initializeElements(node):node.__x=new Component(node))})}}});observer.observe(targetNode,observerOptions)}getRefsProxy(){var self=this,refObj;return new Proxy({},{get(object,property){return"$isAlpineProxy"===property||(self.walkAndSkipNestedComponents(self.$el,el=>{el.hasAttribute("x-ref")&&el.getAttribute("x-ref")===property&&(ref=el)}),ref);var ref}})}}const Alpine={version:"2.8.2",pauseMutationObserver:!1,magicProperties:{},onComponentInitializeds:[],onBeforeComponentInitializeds:[],ignoreFocusedForValueBinding:!1,start:async function start(){isTesting()||await domReady(),this.discoverComponents(el=>{this.initializeComponent(el)}),document.addEventListener("turbolinks:load",()=>{this.discoverUninitializedComponents(el=>{this.initializeComponent(el)})}),this.listenForNewUninitializedComponentsAtRunTime()},discoverComponents:function discoverComponents(callback){const rootEls=document.querySelectorAll("[x-data]");rootEls.forEach(rootEl=>{callback(rootEl)})},discoverUninitializedComponents:function discoverUninitializedComponents(callback,el=null){const rootEls=(el||document).querySelectorAll("[x-data]");Array.from(rootEls).filter(el=>void 0===el.__x).forEach(rootEl=>{callback(rootEl)})},listenForNewUninitializedComponentsAtRunTime:function listenForNewUninitializedComponentsAtRunTime(){const targetNode=document.querySelector("body"),observerOptions={childList:!0,attributes:!0,subtree:!0},observer=new MutationObserver(mutations=>{if(!this.pauseMutationObserver)for(let i=0;i<mutations.length;i++)mutations[i].addedNodes.length>0&&mutations[i].addedNodes.forEach(node=>{1===node.nodeType&&(node.parentElement&&node.parentElement.closest("[x-data]")||this.discoverUninitializedComponents(el=>{this.initializeComponent(el)},node.parentElement))})});observer.observe(targetNode,observerOptions)},initializeComponent:function initializeComponent(el){if(!el.__x)try{el.__x=new Component(el)}catch(error){setTimeout(()=>{throw error},0)}},clone:function clone(component,newEl){newEl.__x||(newEl.__x=new Component(newEl,component))},addMagicProperty:function addMagicProperty(name,callback){this.magicProperties[name]=callback},onComponentInitialized:function onComponentInitialized(callback){this.onComponentInitializeds.push(callback)},onBeforeComponentInitialized:function onBeforeComponentInitialized(callback){this.onBeforeComponentInitializeds.push(callback)}};return isTesting()||(window.Alpine=Alpine,window.deferLoadingAlpine?window.deferLoadingAlpine((function(){window.Alpine.start()})):window.Alpine.start()),Alpine}));